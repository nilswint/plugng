(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+9rK":function(e,t,r){"use strict";function n(e,t,r){var n=r?" !== ":" === ",i=r?" || ":" && ",s=r?"!":"",o=r?"":"!";switch(e){case"null":return t+n+"null";case"array":return s+"Array.isArray("+t+")";case"object":return"("+s+t+i+"typeof "+t+n+'"object"'+i+o+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+i+o+"("+t+" % 1)"+i+t+n+t+")";default:return"typeof "+t+n+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t){switch(e.length){case 1:return n(e[0],t,!0);default:var r="",i=s(e);for(var o in i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)r+=(r?" && ":"")+n(o,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var s=t[n];i[s]?r[r.length]=s:"array"===e&&"array"===s&&(r[r.length]=s)}if(r.length)return r}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:s,getProperty:c,escapeQuotes:l,equal:r("aUsF"),ucs2length:r("d17/"),varOccurences:function(e,t){var r=e.match(new RegExp(t+="[^0-9]","g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(u,"").replace(h,"").replace(d,"if (!($1))")},finalCleanUpCode:function(e,t){var r=e.match(p);return r&&2==r.length&&(e=t?e.replace(m,"").replace(g,"return data;"):e.replace(f,"").replace("return errors === 0;","validate.errors = null; return true;")),(r=e.match(v))&&3===r.length?e.replace(y,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var r in e)if(!t[r])return r},toQuotedString:_,getPathExpr:function(e,t,r,n){return S(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){return S(e,_(r?"/"+C(t):c(t)))},getData:function(e,t,r){var n,i,s,o;if(""===e)return"rootData";if("/"==e[0]){if(!b.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,s="rootData"}else{if(!(o=e.match(w)))throw new Error("Invalid JSON-pointer: "+e);if(n=+o[1],"#"==(i=o[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(s="data"+(t-n||""),!i)return s}for(var a=s,l=i.split("/"),u=0;u<l.length;u++){var h=l[u];h&&(a+=" && "+(s+=c(E(h))))}return a},unescapeFragment:function(e){return E(decodeURIComponent(e))},unescapeJsonPointer:E,escapeFragment:function(e){return encodeURIComponent(C(e))},escapeJsonPointer:C};var i=s(["string","number","integer","boolean","null"]);function s(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var o=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":o.test(e)?"."+e:"['"+l(e)+"']"}function l(e){return e.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var u=/else\s*{\s*}/g,h=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,d=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g,p=/[^v.]errors/g,f=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,g=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,v=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,y=/if \(rootData === undefined\) rootData = data;/;function _(e){return"'"+l(e)+"'"}var b=/^\/(?:[^~]|~0|~1)*$/,w=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function S(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function C(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function E(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},"+qE3":function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,s,o;if(l(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=u(e))>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function f(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)s(c,this,t);else{var l=c.length,u=g(c,l);for(r=0;r<l;++r)s(u[r],this,t)}return!0},a.prototype.on=a.prototype.addListener=function(e,t){return h(this,e,t,!1)},a.prototype.prependListener=function(e,t){return h(this,e,t,!0)},a.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},a.prototype.off=a.prototype.removeListener=function(e,t){var r,n,i,s,o;if(l(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},"//Jx":function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,i=r("cjZW"),s=r("eXaU");e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var s=t.type;if(Array.isArray(s))for(var o=0;o<s.length;o++)c(e,s[o],t);else c(e,s,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(a,!0))}function c(e,t,n){for(var s,o=0;o<r.length;o++){var a=r[o];if(a.type==t){s=a;break}}s||r.push(s={type:t,rules:[]});var c={keyword:e,definition:n,custom:!0,code:i,implements:n.implements};s.rules.push(c),r.custom[e]=c}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,i=0;i<n.length;i++)if(n[i].keyword==e){n.splice(i,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(s,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}},"/oyJ":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("KMqf"),s=r("KMqf"),o=r("FUtr"),a=r("bTiy"),c=r("AdGg");t.TestDeviceProtocol=class extends o.ButtplugDeviceProtocol{constructor(e,t,r,o,l){if(super(`Test Device - ${e}`,t),this._linearSpeed=0,this._linearPosition=0,this._vibrateSpeed=0,this._rotateSpeed=0,this._rotateClockwise=!1,this._shouldVibrate=!1,this._shouldRotate=!1,this._shouldLinear=!1,this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return this.MsgFuncs.has(s.VibrateCmd)?this.emit("vibrate",0):this.MsgFuncs.has(s.LinearCmd)&&this.emit("linear",{position:this._linearPosition,speed:this._linearSpeed}),Promise.resolve(new s.Ok(e.Id))})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){return this._vibrateSpeed=e.Speed,this.emit("vibrate",e.Speed),Promise.resolve(new s.Ok(e.Id))})),this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){return this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleRotateCmd=e=>n(this,void 0,void 0,(function*(){return this._rotateSpeed=e.Rotations[0].Speed,this._rotateClockwise=e.Rotations[0].Clockwise,this.emit("vibrate",{speed:this._rotateSpeed,clockwise:this._rotateClockwise}),Promise.resolve(new s.Ok(e.Id))})),this.HandleFleshlightLaunchFW12Cmd=e=>n(this,void 0,void 0,(function*(){return this._linearPosition=e.Position,this._linearSpeed=e.Speed,this.emit("linear",{position:this._linearPosition,speed:this._linearSpeed}),Promise.resolve(new s.Ok(e.Id))})),this.HandleLinearCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Vectors.length)return new s.Error("LinearCmd requires 1 vector for this device.",s.ErrorClass.ERROR_DEVICE,e.Id);const t=e.Vectors[0],r=100*t.Position,n=Math.abs(r-this._linearPosition);let i=Math.floor(25e3*Math.pow(90*t.Duration/n,-1.05));i=Math.min(Math.max(i,0),95);const o=Math.floor(r/99*90+4.5);return yield this.HandleFleshlightLaunchFW12Cmd(new s.FleshlightLaunchFW12Cmd(i,o,e.DeviceIndex,e.Id))})),this._shouldVibrate=r,this._shouldLinear=o,this._shouldRotate=l,this.MsgFuncs.set(s.StopDeviceCmd,this.HandleStopDeviceCmd),!(t instanceof a.TestDeviceImpl))throw new c.ButtplugDeviceException("TestDeviceProtocol can only be constructed with a TestDeviceImpl");this._shouldVibrate&&(this.MsgFuncs.set(s.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(s.VibrateCmd,this.HandleVibrateCmd)),this._shouldLinear&&(this.MsgFuncs.set(s.FleshlightLaunchFW12Cmd,this.HandleFleshlightLaunchFW12Cmd),this.MsgFuncs.set(s.LinearCmd,this.HandleLinearCmd)),this._shouldRotate&&this.MsgFuncs.set(s.RotateCmd,this.HandleRotateCmd)}get MessageSpecifications(){return this.MsgFuncs.has(s.VibrateCmd)?{VibrateCmd:{FeatureCount:2},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}:this.MsgFuncs.has(s.LinearCmd)?{LinearCmd:{FeatureCount:1},FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{}}:this.MsgFuncs.has(s.RotateCmd)?{RotateCmd:{FeatureCount:1},StopDeviceCmd:{}}:{}}}},0:function(e,t,r){e.exports=r("zUnb")},"0w4r":function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,o=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(o||""),d="valid"+s,p=e.opts.$data&&a&&a.$data;if(p?(i+=" var schema"+s+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",n="schema"+s):n=a,(a||p)&&!1!==e.opts.uniqueItems){p&&(i+=" var "+d+"; if ("+n+" === false || "+n+" === undefined) "+d+" = true; else if (typeof "+n+" != 'boolean') "+d+" = false; else { "),i+=" var i = "+h+".length , "+d+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0)?i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+d+" = false; break outer; } } } ":(i+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ",i+=" if ("+e.util["checkDataType"+(m?"s":"")](f,"item",!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "),i+=" } ",p&&(i+="  }  ");var g=g||[];g.push(i+=" if (!"+d+") {   "),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var v=i;i=g.pop(),i+=!e.compositeRule&&u?e.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i}},"1QhW":function(e,t,r){"use strict";e.exports=function(e,t,r){var n="",i=!0===e.schema.$async,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var a=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(a){var c="unknown keyword: "+a;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(n+=" var validate = ",i&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof e.schema||!s&&!e.schema.$ref){var l=e.level,u=e.dataLevel,h=e.schema["false schema"],d=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,m="data"+(u||""),g="valid"+l;if(!1===e.schema){e.isTop?f=!0:n+=" var "+g+" = false; ",(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var v=n;n=q.pop(),n+=!e.compositeRule&&f?e.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else n+=e.isTop?i?" return data; ":" validate.errors = null; return true; ":" var "+g+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var y=e.isTop;if(l=e.level=0,u=e.dataLevel=0,m="data",e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var _="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{if(l=e.level,m="data"+((u=e.dataLevel)||""),o&&(e.baseId=e.resolve.url(e.baseId,o)),i&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+l+" = errors;"}g="valid"+l,f=!e.opts.allErrors;var b="",w="",S=e.schema.type,C=Array.isArray(S);if(S&&e.opts.nullable&&!0===e.schema.nullable&&(C?-1==S.indexOf("null")&&(S=S.concat("null")):"null"!=S&&(S=[S,"null"],C=!0)),C&&1==S.length&&(S=S[0],C=!1),e.schema.$ref&&s){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),S){if(e.opts.coerceTypes)var E=e.util.coerceToTypes(e.opts.coerceTypes,S);var x=e.RULES.types[S];if(E||C||!0===x||x&&!J(x)){if(d=e.schemaPath+".type",p=e.errSchemaPath+"/type",d=e.schemaPath+".type",p=e.errSchemaPath+"/type",n+=" if ("+e.util[C?"checkDataTypes":"checkDataType"](S,m,!0)+") { ",E){var P="dataType"+l,I="coerced"+l;n+=" var "+P+" = typeof "+m+"; ","array"==e.opts.coerceTypes&&(n+=" if ("+P+" == 'object' && Array.isArray("+m+")) "+P+" = 'array'; "),n+=" var "+I+" = undefined; ";var M="",D=E;if(D)for(var O,A=-1,T=D.length-1;A<T;)O=D[A+=1],A&&(n+=" if ("+I+" === undefined) { ",M+="}"),"array"==e.opts.coerceTypes&&"array"!=O&&(n+=" if ("+P+" == 'array' && "+m+".length == 1) { "+I+" = "+m+" = "+m+"[0]; "+P+" = typeof "+m+";  } "),"string"==O?n+=" if ("+P+" == 'number' || "+P+" == 'boolean') "+I+" = '' + "+m+"; else if ("+m+" === null) "+I+" = ''; ":"number"==O||"integer"==O?(n+=" if ("+P+" == 'boolean' || "+m+" === null || ("+P+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==O&&(n+=" && !("+m+" % 1)"),n+=")) "+I+" = +"+m+"; "):"boolean"==O?n+=" if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+I+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+I+" = true; ":"null"==O?n+=" if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+I+" = null; ":"array"==e.opts.coerceTypes&&"array"==O&&(n+=" if ("+P+" == 'string' || "+P+" == 'number' || "+P+" == 'boolean' || "+m+" == null) "+I+" = ["+m+"]; ");(q=q||[]).push(n+=" "+M+" if ("+I+" === undefined) {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=C?""+S.join(","):""+S,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=C?""+S.join(","):""+S,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ",v=n,n=q.pop(),n+=!e.compositeRule&&f?e.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  ";var R=u?"data"+(u-1||""):"parentData";n+=" "+m+" = "+I+"; ",u||(n+="if ("+R+" !== undefined)"),n+=" "+R+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+I+"; } "}else(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=C?""+S.join(","):""+S,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=C?""+S.join(","):""+S,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ",v=n,n=q.pop(),n+=!e.compositeRule&&f?e.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n+=" } "}}if(e.schema.$ref&&!s)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(n+=" } if (errors === ",n+=y?"0":"errs_"+l,n+=") { ",w+="}");else{var k=e.RULES;if(k)for(var V=-1,L=k.length-1;V<L;)if(J(x=k[V+=1])){if(x.type&&(n+=" if ("+e.util.checkDataType(x.type,m)+") { "),e.opts.useDefaults)if("object"==x.type&&e.schema.properties){h=e.schema.properties;var F=Object.keys(h);if(F)for(var j,N=-1,$=F.length-1;N<$;)if(void 0!==(H=h[j=F[N+=1]]).default){var U=m+e.util.getProperty(j);if(e.compositeRule){if(e.opts.strictDefaults){if(_="default is ignored for: "+U,"log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ",n+="shared"==e.opts.useDefaults?" "+e.useDefault(H.default)+" ":" "+JSON.stringify(H.default)+" ",n+="; "}}else if("array"==x.type&&Array.isArray(e.schema.items)){var B=e.schema.items;if(B){A=-1;for(var H,z=B.length-1;A<z;)if(void 0!==(H=B[A+=1]).default)if(U=m+"["+A+"]",e.compositeRule){if(e.opts.strictDefaults){if(_="default is ignored for: "+U,"log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}}else n+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+U+" === null || "+U+" === '' "),n+=" ) "+U+" = ",n+="shared"==e.opts.useDefaults?" "+e.useDefault(H.default)+" ":" "+JSON.stringify(H.default)+" ",n+="; "}}var q,W=x.rules;if(W)for(var G,K=-1,Q=W.length-1;K<Q;)if(Y(G=W[K+=1])){var Z=G.code(e,G.keyword,x.type);Z&&(n+=" "+Z+" ",f&&(b+="}"))}f&&(n+=" "+b+" ",b=""),x.type&&(n+=" } ",S&&S===x.type&&!E)&&(d=e.schemaPath+".type",p=e.errSchemaPath+"/type",(q=q||[]).push(n+=" else { "),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",n+=C?""+S.join(","):""+S,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=C?""+S.join(","):""+S,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ",v=n,n=q.pop(),n+=!e.compositeRule&&f?e.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "),f&&(n+=" if (errors === ",n+=y?"0":"errs_"+l,n+=") { ",w+="}")}}function J(e){for(var t=e.rules,r=0;r<t.length;r++)if(Y(t[r]))return!0}function Y(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return f&&(n+=" "+w+" "),y?(i?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+g+" = errors === errs_"+l+";",n=e.util.cleanUpCode(n),y&&(n=e.util.finalCleanUpCode(n,i)),n}},"2f+d":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("+qE3"),s=r("ytkS"),o=r("DHMQ");t.ButtplugBrowserWebsocketClientConnector=class extends i.EventEmitter{constructor(e){super(),this._url=e,this._sorter=new o.ButtplugMessageSorter,this.Connect=()=>n(this,void 0,void 0,(function*(){const e=new WebSocket(this._url);let t,r;const i=new Promise((e,n)=>{t=e,r=n}),s=e=>r();return e.addEventListener("open",r=>n(this,void 0,void 0,(function*(){this._ws=e,this._ws.addEventListener("message",e=>{this.ParseIncomingMessage(e)}),this._ws.removeEventListener("close",s),this._ws.addEventListener("close",this.Disconnect),t()}))),e.addEventListener("close",s),i})),this.Disconnect=()=>n(this,void 0,void 0,(function*(){this.Connected&&(this._ws.close(),this._ws=void 0,this.emit("disconnect"))})),this.Send=e=>n(this,void 0,void 0,(function*(){if(!this.Connected)throw new Error("ButtplugClient not connected");const t=this._sorter.PrepareOutgoingMessage(e);return this._ws.send("["+e.toJSON()+"]"),yield t})),this.ParseIncomingMessage=e=>{if("string"==typeof e.data){const t=s.FromJSON(e.data),r=this._sorter.ParseIncomingMessages(t);this.emit("message",r)}else if(e.data instanceof Blob){const t=new FileReader;t.addEventListener("load",e=>{this.OnReaderLoad(e)}),t.readAsText(e.data)}}}get Connected(){return void 0!==this._ws}OnReaderLoad(e){const t=s.FromJSON(e.target.result),r=this._sorter.ParseIncomingMessages(t);this.emit("message",r)}}},"2jsQ":function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,o=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(o||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+s+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",n="schema"+s):n=a,i+="if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || ");var p=t,f=f||[];f.push(i+=" "+h+".length "+("maxItems"==t?">":"<")+" "+n+") { "),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=d?"' + "+n+" + '":""+a,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),i+=!e.compositeRule&&u?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}},"36dr":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("+qE3");t.ButtplugDevice=class extends i.EventEmitter{constructor(e,t){super(),this.ParseMessage=e=>n(this,void 0,void 0,(function*(){return yield this._protocol.ParseMessage(e)})),this._protocol=e,this._device=t,this._device.addListener("deviceremoved",()=>{this.emit("deviceremoved",this)})}get Connected(){return this._device.Connected}get MessageSpecifications(){return this._protocol.MessageSpecifications}Disconnect(){return this._device.Disconnect()}Initialize(){return n(this,void 0,void 0,(function*(){return yield this._protocol.Initialize()}))}get Name(){return this._protocol.Name}get Id(){return this._device.Address}get AllowedMessageTypes(){return this._protocol.AllowedMessageTypes}}},"3ZNU":function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="valid"+i,d="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level,m=e.schema.then,g=e.schema.else,v=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all)),y=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all)),_=p.baseId;if(v||y){var b;p.createErrors=!1,p.schema=o,p.schemaPath=a,p.errSchemaPath=c,n+=" var "+d+" = errors; var "+h+" = true;  ";var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,n+="  "+e.validate(p)+" ",p.baseId=_,p.createErrors=!0,n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=w,v?(n+=" if ("+f+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(p)+" ",p.baseId=_,n+=" "+h+" = "+f+"; ",v&&y?n+=" var "+(b="ifClause"+i)+" = 'then'; ":b="'then'",n+=" } ",y&&(n+=" else { ")):n+=" if (!"+f+") { ",y&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(p)+" ",p.baseId=_,n+=" "+h+" = "+f+"; ",v&&y?n+=" var "+(b="ifClause"+i)+" = 'else'; ":b="'else'",n+=" } "),n+=" if (!"+h+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+b+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+b+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(n+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),n+=" }   ",l&&(n+=" else { "),n=e.util.cleanUpCode(n)}else l&&(n+=" if (true) { ");return n}},"3pWD":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr");var a;!function(e){e[e.Rotate=1]="Rotate",e[e.Vibrate=3]="Vibrate"}(a||(a={}));class c{constructor(){this.Name="Vorze A10 Cyclone SA",this.CommandType=a.Rotate,this.DeviceType=1}}class l extends o.ButtplugDeviceProtocol{constructor(e){super("Vorze",e),this._devInfo=new c,this._clockwise=!0,this._speed=0,this.HandleRotateCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Rotations.length)throw new s.ButtplugDeviceException("Vorze A10 Cyclone devices require RotateCmd to have 1 rotation command,"+` ${e.Rotations.length} sent.`,e.Id);return yield this.HandleVorzeA10CycloneCmd(new i.VorzeA10CycloneCmd(100*e.Rotations[0].Speed,e.Rotations[0].Clockwise,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return this._devInfo.CommandType===a.Vibrate?yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id)):yield this.HandleVorzeA10CycloneCmd(new i.VorzeA10CycloneCmd(0,!1,e.DeviceIndex,e.Id))})),this.HandleVorzeA10CycloneCmd=e=>n(this,void 0,void 0,(function*(){const t=255&((e.Clockwise?1:0)<<7|e.Speed);return yield this._device.WriteValue(Buffer.from([this._devInfo.DeviceType,this._devInfo.CommandType,t])),new i.Ok(e.Id)})),this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Speeds.length)throw new s.ButtplugDeviceException("Vorze devices require VibrateCmd to have 1 speed commands, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){const t=Math.round(100*e.Speed);return t!==this._speed&&(yield this._device.WriteValue(Buffer.from([this._devInfo.DeviceType,this._devInfo.CommandType,t]))),new i.Ok(e.Id)}));const t=l.DevInfos.get(e.Name);void 0!==t&&(this._devInfo=t,this._name=this._devInfo.Name),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this._devInfo.CommandType===a.Rotate&&(this.MsgFuncs.set(i.VorzeA10CycloneCmd,this.HandleVorzeA10CycloneCmd),this.MsgFuncs.set(i.RotateCmd,this.HandleRotateCmd)),this._devInfo.CommandType===a.Vibrate&&(this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd))}get MessageSpecifications(){return this._devInfo.CommandType===a.Vibrate?{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}:{RotateCmd:{FeatureCount:1},VorzeA10CycloneCmd:{},StopDeviceCmd:{}}}}l.DevInfos=new Map([["CycSA",Object.assign(new c,{Name:"Vorze A10 Cyclone SA",CommandType:a.Rotate,DeviceType:1})],["UFOSA",Object.assign(new c,{Name:"Vorze UFO SA",CommandType:a.Rotate,DeviceType:2})],["Bach smart",Object.assign(new c,{Name:"Vorze Bach",CommandType:a.Vibrate,DeviceType:6})]]),t.VorzeA10Cyclone=l},"4Kjc":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIDProtocolConfiguration=class{constructor(e){}Matches(e){return!1}Merge(e){}}},"4e8G":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExposeMetadata=function(e,t,r){this.target=e,this.propertyName=t,this.options=r}},"4laU":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr");class a extends o.ButtplugDeviceProtocol{constructor(e){super(`Lovense ${e.Name}`,e),this._initPromise=new Promise(e=>{this._initResolve=e}),this._isClockwise=!1,this._specs={VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}},this.Initialize=()=>n(this,void 0,void 0,(function*(){this._device.addListener("updateReceived",this.OnValueChanged),yield this._device.SubscribeToUpdates(),this._logger.Debug(`Device ${this._device.Name} waiting for initialization return`),yield this._device.WriteString("DeviceType;"),yield this._initPromise})),this.OnValueChanged=([e,t])=>n(this,void 0,void 0,(function*(){if(void 0!==this._initResolve){const e=t.toString("utf-8");return this._logger.Debug(`Lovense Device ${this._device.Name} got initialization return ${e}`),this.ParseDeviceType(e),this._initResolve(),void(this._initResolve=void 0)}})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id)),this._specs.hasOwnProperty("RotateCmd")&&(yield this.HandleRotateCmd(new i.RotateCmd([new i.RotateSubcommand(0,0,this._isClockwise)],0,e.Id))),new i.Ok(e.Id)})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){const t=[];for(let r=0;r<this._specs.VibrateCmd.FeatureCount;r++)t.push(new i.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new i.VibrateCmd(t,e.DeviceIndex,e.Id))})),this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){if(e.Speeds.length>this._specs.VibrateCmd.FeatureCount)throw new s.ButtplugDeviceException("Lovense devices require VibrateCmd to have at most "+`${this._specs.VibrateCmd.FeatureCount} speed commands, `+`${e.Speeds.length} sent.`,e.Id);for(const t of e.Speeds){const e=this._specs.VibrateCmd.FeatureCount>1?(t.Index+1).toString(10):"",r=Math.floor(20*t.Speed);yield this._device.WriteString(`Vibrate${e}:${r};`)}return new i.Ok(e.Id)})),this.HandleRotateCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Rotations.length)throw new s.ButtplugDeviceException("Lovense devices require RotateCmd to have 1 rotate command, "+`${e.Rotations.length} sent.`,e.Id);const t=e.Rotations[0];if(0!==t.Index)throw new s.ButtplugDeviceException("Rotation command sent for invalid index.");t.Clockwise!==this._isClockwise&&(yield this._device.WriteString("RotateChange;"));const r=Math.floor(20*t.Speed);return yield this._device.WriteString(`Rotate:${r};`),new i.Ok(e.Id)}))}get MessageSpecifications(){return this._specs}ParseDeviceType(e){let[t,r]=e.split(":");a._deviceNames.hasOwnProperty(t)||(t="0"),this._name=`Lovense ${a._deviceNames[t]} v${r}`,this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),"P"===t?this._specs.VibrateCmd={FeatureCount:2}:"A"!==t&&"C"!==t||(this._specs.RotateCmd={FeatureCount:1},this.MsgFuncs.set(i.RotateCmd,this.HandleRotateCmd))}}a._deviceNames={A:"Nora",B:"Max",C:"Nora",L:"Ambi",O:"Osci",P:"Edge",S:"Lush",W:"Domi",Z:"Hush",0:"Unknown"},t.Lovense=a},"6MIY":function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="valid"+i,d=e.opts.$data&&o&&o.$data;d&&(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ");var p="i"+i,f="schema"+i;d||(n+=" var "+f+" = validate.schema"+a+";"),n+="var "+h+";",d&&(n+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),n+=h+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+u+", "+f+"["+p+"])) { "+h+" = true; break; }",d&&(n+="  }  ");var m=m||[];m.push(n+=" if (!"+h+") {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},"6gcW":function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.schema[t],s=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var u="valid"+c.level,h=c.baseId,d=!0,p=i;if(p)for(var f,m=-1,g=p.length-1;m<g;)f=p[m+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0:e.util.schemaHasRules(f,e.RULES.all))&&(d=!1,c.schema=f,c.schemaPath=s+"["+m+"]",c.errSchemaPath=o+"/"+m,n+="  "+e.validate(c)+" ",c.baseId=h,a&&(n+=" if ("+u+") { ",l+="}"));return a&&(n+=d?" if (true) { ":" "+l.slice(0,-1)+" "),e.util.cleanUpCode(n)}},"6pwk":function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},"9x6x":function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,n){return r({key:t,value:e[t]},{key:n,value:e[n]})}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,o;if(Array.isArray(t)){for(o="[",r=0;r<t.length;r++)r&&(o+=","),o+=e(t[r])||"null";return o+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=s.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(o="",r=0;r<c.length;r++){var l=c[r],u=e(t[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return s.splice(a,1),"{"+o+"}"}}(e)}},AK1u:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||"");if(!1===e.opts.format)return l&&(n+=" if (true) { "),n;var h,d=e.opts.$data&&o&&o.$data;d?(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",h="schema"+i):h=o;var p=e.opts.unknownFormats,f=Array.isArray(p);if(d)n+=" var "+(m="format"+i)+" = formats["+h+"]; var "+(g="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(v="formatType"+i)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(n+=" var async"+i+" = "+m+".async; "),n+=" "+m+" = "+m+".validate; } if (  ",d&&(n+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),n+=" (","ignore"!=p&&(n+=" ("+h+" && !"+m+" ",f&&(n+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),n+=") || "),n+=" ("+m+" && "+v+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",n+=e.async?" (async"+i+" ? await "+m+"("+u+") : "+m+"("+u+")) ":" "+m+"("+u+") ",n+=" : "+m+".test("+u+"))))) {";else{var m;if(!(m=e.formats[o])){if("ignore"==p)return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(n+=" if (true) { "),n;if(f&&p.indexOf(o)>=0)return l&&(n+=" if (true) { "),n;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,v=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var y=!0===m.async;m=m.validate}if(v!=r)return l&&(n+=" if (true) { "),n;if(y){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(_="formats"+e.util.getProperty(o)+".validate")+"("+u+"))) { "}else{n+=" if (! ";var _="formats"+e.util.getProperty(o);g&&(_+=".validate"),n+="function"==typeof m?" "+_+"("+u+") ":" "+_+".test("+u+") ",n+=") { "}}var b=b||[];b.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",n+=d?""+h:""+e.util.toQuotedString(o),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=d?"' + "+h+" + '":""+e.util.escapeQuotes(o),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+e.util.toQuotedString(o),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var w=n;return n=b.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+w+"]); ":" validate.errors = ["+w+"]; return false; ":" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n}},ANNU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("s26e"),i=r("AdGg");class s{constructor(e,t){this._names=[],this._services=new Map,this._names=e,this._services=t||new Map}get Names(){return this._names}get Services(){return this._services}static ConstructFromObject(e){if(-1===Object.getOwnPropertyNames(e).indexOf("names"))throw new i.ButtplugDeviceException("Need a names property to load bluetooth device from.");if(-1===Object.getOwnPropertyNames(e).indexOf("services"))throw new i.ButtplugDeviceException("Need a services property to load bluetooth device from.");const t=e.names,r=new Map;for(const s of Object.keys(e.services)){const o=new Map;if(-1!==Object.getOwnPropertyNames(e.services).indexOf(s)&&null!==e.services[s])for(const r of Object.keys(e.services[s])){const a=n.GetEndpoint(r);if(null==a)throw new i.ButtplugDeviceException(`Device with names ${t} lists invalid endpoint ${r}.`);o.set(a,e.services[s][r])}r.set(s,o)}return new s(t,r)}Matches(e){if(!(e instanceof s))return!1;const t=e;if(1!==t.Names.length)throw new i.ButtplugDeviceException("Device checks should only happen against 1 name.");for(const n of this.Names){if(-1!==t.Names.indexOf(n))return!0;if(!n.endsWith("*"))continue;const e=n.substr(0,n.length-1);if(-1!==t.Names.findIndex(t=>t.startsWith(e)))return!0}const r=Array.from(this._services.keys());for(const n of t.Services.keys())if(0!==r.indexOf(n))return!0;return!1}Merge(e){}}t.BluetoothLEProtocolConfiguration=s},APWh:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level;if(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:e.util.schemaHasRules(o,e.RULES.all)){d.schema=o,d.schemaPath=a,d.errSchemaPath=c,n+=" var "+h+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(f=d.opts.allErrors,d.opts.allErrors=!1),n+=" "+e.validate(d)+" ",d.createErrors=!0,f&&(d.opts.allErrors=f),e.compositeRule=d.compositeRule=m;var g=g||[];g.push(n+=" if ("+p+") {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var v=n;n=g.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(n+=" if (false) { ");return n}},AdGg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("VzKg");class i extends Error{constructor(e,t,r=n.SYSTEM_MESSAGE_ID,i){super(e),this.errorClass=n.ErrorClass.ERROR_UNKNOWN,this.errorClass=t,this.innerError=i,this.messageId=r}get ErrorClass(){return this.errorClass}get InnerException(){return this.innerError}get Id(){return this.messageId}get ErrorMessage(){return new n.Error(this.message,this.ErrorClass,this.Id)}static LogAndError(e,t,r,i=n.SYSTEM_MESSAGE_ID){return t.Error(r),new e(r,i)}static FromError(e){switch(e.ErrorCode){case n.ErrorClass.ERROR_DEVICE:return new o(e.ErrorMessage,e.Id);case n.ErrorClass.ERROR_INIT:return new s(e.ErrorMessage,e.Id);case n.ErrorClass.ERROR_UNKNOWN:return new l(e.ErrorMessage,e.Id);case n.ErrorClass.ERROR_PING:return new c(e.ErrorMessage,e.Id);case n.ErrorClass.ERROR_MSG:return new a(e.ErrorMessage,e.Id);default:throw new Error(`Message type ${e.ErrorCode} not handled`)}}}t.ButtplugException=i;class s extends i{constructor(e,t=n.SYSTEM_MESSAGE_ID){super(e,n.ErrorClass.ERROR_INIT,t)}}t.ButtplugInitException=s;class o extends i{constructor(e,t=n.SYSTEM_MESSAGE_ID){super(e,n.ErrorClass.ERROR_DEVICE,t)}}t.ButtplugDeviceException=o;class a extends i{constructor(e,t=n.SYSTEM_MESSAGE_ID){super(e,n.ErrorClass.ERROR_MSG,t)}}t.ButtplugMessageException=a;class c extends i{constructor(e,t=n.SYSTEM_MESSAGE_ID){super(e,n.ErrorClass.ERROR_PING,t)}}t.ButtplugPingException=c;class l extends i{constructor(e,t=n.SYSTEM_MESSAGE_ID){super(e,n.ErrorClass.ERROR_UNKNOWN,t)}}t.ButtplugUnknownException=l},AjGN:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SerialProtocolConfiguration=class{constructor(e){}Matches(e){return!1}Merge(e){}}},AkMy:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExcludeMetadata=function(e,t,r){this.target=e,this.propertyName=t,this.options=r}},AwJw:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="valid"+i,d=e.opts.$data&&o&&o.$data;d&&(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; "),d||(n+=" var schema"+i+" = validate.schema"+a+";");var p=p||[];p.push(n+="var "+h+" = equal("+u+", schema"+i+"); if (!"+h+") {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var f=n;return n=p.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+f+"]); ":" validate.errors = ["+f+"]; return false; ":" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},CP53:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Decb"),i=r("cSwh"),s=r("PcyV"),o=r("4e8G"),a=r("AkMy"),c=r("bejg");t.Transform=function(e,t){return function(r,n){var s=new c.TransformMetadata(r.constructor,n,e,t);i.defaultMetadataStorage.addTransformMetadata(s)}},t.Type=function(e,t){return function(r,n){var o=Reflect.getMetadata("design:type",r,n),a=new s.TypeMetadata(r.constructor,n,o,e,t);i.defaultMetadataStorage.addTypeMetadata(a)}},t.Expose=function(e){return function(t,r){var n=new o.ExposeMetadata(t instanceof Function?t:t.constructor,r,e||{});i.defaultMetadataStorage.addExposeMetadata(n)}},t.Exclude=function(e){return function(t,r){var n=new a.ExcludeMetadata(t instanceof Function?t:t.constructor,r,e||{});i.defaultMetadataStorage.addExcludeMetadata(n)}},t.TransformClassToPlain=function(e){return function(t,r,i){var s=new n.ClassTransformer,o=i.value;i.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=o.apply(this,t),i=!!n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof n.then;return i?n.then((function(t){return s.classToPlain(t,e)})):s.classToPlain(n,e)}}},t.TransformClassToClass=function(e){return function(t,r,i){var s=new n.ClassTransformer,o=i.value;i.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=o.apply(this,t),i=!!n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof n.then;return i?n.then((function(t){return s.classToClass(t,e)})):s.classToClass(n,e)}}},t.TransformPlainToClass=function(e,t){return function(r,i,s){var o=new n.ClassTransformer,a=s.value;s.value=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=a.apply(this,r),s=!!i&&("object"==typeof i||"function"==typeof i)&&"function"==typeof i.then;return s?i.then((function(r){return o.plainToClass(e,r,t)})):o.plainToClass(e,i,t)}}}},CeqE:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("KMqf"),s=r("hsbB");t.CreateTestClient=function(){return n(this,void 0,void 0,(function*(){const e=new i.ButtplugClient("Test Client"),t=new i.ButtplugServer("Test Server");t.ClearDeviceManagers(),t.AddDeviceManager(new s.TestDeviceSubtypeManager);const r=new i.ButtplugEmbeddedClientConnector;return r.Server=t,yield e.Connect(r),Promise.resolve(e)}))}},DHMQ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("VzKg"),i=r("AdGg");t.ButtplugMessageSorter=class{constructor(){this._counter=1,this._waitingMsgs=new Map}PrepareOutgoingMessage(e){let t,r;e.Id=this._counter;const n=new Promise((e,n)=>{t=e,r=n});return this._waitingMsgs.set(this._counter,[t,r]),this._counter+=1,n}ParseIncomingMessages(e){const t=[];for(const r of e)if(r.Id!==n.SYSTEM_MESSAGE_ID&&this._waitingMsgs.has(r.Id)){const[e,t]=this._waitingMsgs.get(r.Id);if(r.Type===n.Error){t(i.ButtplugException.FromError(r));continue}e(r)}else t.push(r);return t}}},Decb:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("zA/M"),i=function(){function e(){}return e.prototype.classToPlain=function(e,t){return new n.TransformOperationExecutor(n.TransformationType.CLASS_TO_PLAIN,t||{}).transform(void 0,e,void 0,void 0,void 0,void 0)},e.prototype.classToPlainFromExist=function(e,t,r){return new n.TransformOperationExecutor(n.TransformationType.CLASS_TO_PLAIN,r||{}).transform(t,e,void 0,void 0,void 0,void 0)},e.prototype.plainToClass=function(e,t,r){return new n.TransformOperationExecutor(n.TransformationType.PLAIN_TO_CLASS,r||{}).transform(void 0,t,e,void 0,void 0,void 0)},e.prototype.plainToClassFromExist=function(e,t,r){return new n.TransformOperationExecutor(n.TransformationType.PLAIN_TO_CLASS,r||{}).transform(e,t,void 0,void 0,void 0,void 0)},e.prototype.classToClass=function(e,t){return new n.TransformOperationExecutor(n.TransformationType.CLASS_TO_CLASS,t||{}).transform(void 0,e,void 0,void 0,void 0,void 0)},e.prototype.classToClassFromExist=function(e,t,r){return new n.TransformOperationExecutor(n.TransformationType.CLASS_TO_CLASS,r||{}).transform(t,e,void 0,void 0,void 0,void 0)},e.prototype.serialize=function(e,t){return JSON.stringify(this.classToPlain(e,t))},e.prototype.deserialize=function(e,t,r){var n=JSON.parse(t);return this.plainToClass(e,n,r)},e.prototype.deserializeArray=function(e,t,r){var n=JSON.parse(t);return this.plainToClass(e,n,r)},e}();t.ClassTransformer=i},Dg32:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","$id":"http://json-schema.org/draft-06/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"examples":{"type":"array","items":{}},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":{},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":{}}')},FUtr:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("+qE3"),s=r("kFR6"),o=r("AdGg");t.ButtplugDeviceProtocol=class extends i.EventEmitter{constructor(e,t){super(),this.MsgFuncs=new Map,this._logger=s.ButtplugLogger.Logger,this.ParseMessage=e=>n(this,void 0,void 0,(function*(){if(!this.MsgFuncs.has(e.Type))throw new o.ButtplugMessageException(`${this._name} cannot handle message of type ${e.Type.name}`,e.Id);return this.MsgFuncs.get(e.Type)(e)})),this._name=e,this._device=t}get Name(){return this._name}get AllowedMessageTypes(){return Array.from(this.MsgFuncs.keys())}Initialize(){return n(this,void 0,void 0,(function*(){return Promise.resolve()}))}}},FsXc:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr");t.Maxpro=class extends o.ButtplugDeviceProtocol{constructor(e){super(`Maxpro ${e.Name}`,e),this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Speeds.length)throw new s.ButtplugDeviceException("Maxpro devices require VibrateCmd to have 1 speed command, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){const t=Math.floor(100*e.Speed),r=Buffer.from([85,4,7,255,255,63,t,95,t,0]),n=255&r.reduce((e,t)=>e+t);return r[9]=n,yield this._device.WriteValue(r),new i.Ok(e.Id)})),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}},FzgR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("zA/M"),i=function(){function e(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return e.prototype.addTypeMetadata=function(e){this._typeMetadatas.has(e.target)||this._typeMetadatas.set(e.target,new Map),this._typeMetadatas.get(e.target).set(e.propertyName,e)},e.prototype.addTransformMetadata=function(e){this._transformMetadatas.has(e.target)||this._transformMetadatas.set(e.target,new Map),this._transformMetadatas.get(e.target).has(e.propertyName)||this._transformMetadatas.get(e.target).set(e.propertyName,[]),this._transformMetadatas.get(e.target).get(e.propertyName).push(e)},e.prototype.addExposeMetadata=function(e){this._exposeMetadatas.has(e.target)||this._exposeMetadatas.set(e.target,new Map),this._exposeMetadatas.get(e.target).set(e.propertyName,e)},e.prototype.addExcludeMetadata=function(e){this._excludeMetadatas.has(e.target)||this._excludeMetadatas.set(e.target,new Map),this._excludeMetadatas.get(e.target).set(e.propertyName,e)},e.prototype.findTransformMetadatas=function(e,t,r){return this.findMetadatas(this._transformMetadatas,e,t).filter((function(e){return!e.options||!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?r===n.TransformationType.CLASS_TO_CLASS||r===n.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||r===n.TransformationType.CLASS_TO_PLAIN)}))},e.prototype.findExcludeMetadata=function(e,t){return this.findMetadata(this._excludeMetadatas,e,t)},e.prototype.findExposeMetadata=function(e,t){return this.findMetadata(this._exposeMetadatas,e,t)},e.prototype.findExposeMetadataByCustomName=function(e,t){return this.getExposedMetadatas(e).find((function(e){return e.options&&e.options.name===t}))},e.prototype.findTypeMetadata=function(e,t){return this.findMetadata(this._typeMetadatas,e,t)},e.prototype.getStrategy=function(e){var t=this._excludeMetadatas.get(e),r=t&&t.get(void 0),n=this._exposeMetadatas.get(e),i=n&&n.get(void 0);return r&&i||!r&&!i?"none":r?"excludeAll":"exposeAll"},e.prototype.getExposedMetadatas=function(e){return this.getMetadata(this._exposeMetadatas,e)},e.prototype.getExcludedMetadatas=function(e){return this.getMetadata(this._excludeMetadatas,e)},e.prototype.getExposedProperties=function(e,t){return this.getExposedMetadatas(e).filter((function(e){return!e.options||!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?t===n.TransformationType.CLASS_TO_CLASS||t===n.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||t===n.TransformationType.CLASS_TO_PLAIN)})).map((function(e){return e.propertyName}))},e.prototype.getExcludedProperties=function(e,t){return this.getExcludedMetadatas(e).filter((function(e){return!e.options||!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?t===n.TransformationType.CLASS_TO_CLASS||t===n.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||t===n.TransformationType.CLASS_TO_PLAIN)})).map((function(e){return e.propertyName}))},e.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},e.prototype.getMetadata=function(e,t){var r,n=e.get(t);n&&(r=Array.from(n.values()).filter((function(e){return void 0!==e.propertyName})));for(var i=[],s=0,o=this.getAncestors(t);s<o.length;s++){var a=e.get(o[s]);if(a){var c=Array.from(a.values()).filter((function(e){return void 0!==e.propertyName}));i.push.apply(i,c)}}return i.concat(r||[])},e.prototype.findMetadata=function(e,t,r){var n=e.get(t);if(n){var i=n.get(r);if(i)return i}for(var s=0,o=this.getAncestors(t);s<o.length;s++){var a=e.get(o[s]);if(a){var c=a.get(r);if(c)return c}}},e.prototype.findMetadatas=function(e,t,r){var n,i=e.get(t);i&&(n=i.get(r));for(var s=[],o=0,a=this.getAncestors(t);o<a.length;o++){var c=e.get(a[o]);c&&c.has(r)&&s.push.apply(s,c.get(r))}return s.reverse().concat((n||[]).reverse())},e.prototype.getAncestors=function(e){if(!e)return[];if(!this._ancestorsMap.has(e)){for(var t=[],r=Object.getPrototypeOf(e.prototype.constructor);void 0!==r.prototype;r=Object.getPrototypeOf(r.prototype.constructor))t.push(r);this._ancestorsMap.set(e,t)}return this._ancestorsMap.get(e)},e}();t.MetadataStorage=i},HiAz:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr"),a=r("s26e"),c=r("fCiX");t.FleshlightLaunch=class extends o.ButtplugDeviceProtocol{constructor(e){super("Fleshlight Launch",e),this._lastPosition=0,this.Initialize=()=>n(this,void 0,void 0,(function*(){this._logger.Debug(`Calling Fleshlight Launch initialize on ${this._device.Name}`),yield this._device.WriteValue(Buffer.from([0]),new c.ButtplugDeviceWriteOptions({Endpoint:a.Endpoints.Firmware,WriteWithResponse:!0}))})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleFleshlightLaunchFW12Cmd(new i.FleshlightLaunchFW12Cmd(0,0,e.DeviceIndex,e.Id))})),this.HandleFleshlightLaunchFW12Cmd=e=>n(this,void 0,void 0,(function*(){return this._lastPosition=e.Position,yield this._device.WriteValue(Buffer.from([e.Position,e.Speed])),new i.Ok(e.Id)})),this.HandleLinearCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Vectors.length)throw new s.ButtplugDeviceException("LinearCmd requires 1 vector for this device.",e.Id);const t=e.Vectors[0],r=100*t.Position,n=Math.abs(r-this._lastPosition);let o=Math.floor(25e3*Math.pow(90*t.Duration/n,-1.05));o=Math.min(Math.max(o,0),95);const a=Math.floor(r/99*90+4.5);return yield this.HandleFleshlightLaunchFW12Cmd(new i.FleshlightLaunchFW12Cmd(o,a,e.DeviceIndex,e.Id))})),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.FleshlightLaunchFW12Cmd,this.HandleFleshlightLaunchFW12Cmd),this.MsgFuncs.set(i.LinearCmd,this.HandleLinearCmd)}get MessageSpecifications(){return{FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{},LinearCmd:{FeatureCount:1}}}}},JNjr:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr"),a=r("q+Aq"),c=r("s26e");t.Youou=class extends o.ButtplugDeviceProtocol{constructor(e){super(`Youou ${e.Name}`,e),this._packetId=0,this.Initialize=()=>n(this,void 0,void 0,(function*(){this._logger.Debug(`Calling Youou initialize on ${this._device.Name}`),yield this._device.ReadValue(new a.ButtplugDeviceReadOptions({Endpoint:c.Endpoints.Tx}))})),this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Speeds.length)throw new s.ButtplugDeviceException("Youou devices require VibrateCmd to have 1 speed commands, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){const t=Buffer.from([170,85,this._packetId,2,3,1,247*e.Speed,e.Speed>0?1:0]);let r=0;for(const e of t)r^=e;const n=Buffer.concat([t,Buffer.from([r,255,0,0,0,0,0,0,0])]);return this._packetId+=1,this._packetId>255&&(this._packetId=0),yield this._device.WriteValue(n),new i.Ok(e.Id)})),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}},JjHJ:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg");class o{constructor(e,t,r,n){this._index=e,this._name=t,this._sendClosure=n,this.allowedMsgs=new Map;for(const i of Object.keys(r))this.allowedMsgs.set(i,r[i])}get Name(){return this._name}get Index(){return this._index}get AllowedMessages(){return Array.from(this.allowedMsgs.keys())}static fromMsg(e,t){return new o(e.DeviceIndex,e.DeviceName,e.DeviceMessages,t)}CheckAllowedMessageType(e){if(-1===this.AllowedMessages.indexOf(e))throw new s.ButtplugDeviceException(`Message ${e} does not exist on device ${this._name}`)}MessageAttributes(e){return this.CheckAllowedMessageType(e),this.allowedMsgs.get(e)}SendMessageAsync(e){return n(this,void 0,void 0,(function*(){yield this._sendClosure(this,e)}))}SendVibrateCmd(e){return n(this,void 0,void 0,(function*(){let t;if(this.CheckAllowedMessageType(i.VibrateCmd.name),"number"==typeof e){const r=this.MessageAttributes(i.VibrateCmd.name).FeatureCount;t=i.VibrateCmd.Create(this._index,new Array(r).fill(e))}else{if(!Array.isArray(e))throw new s.ButtplugDeviceException("SendVibrateCmd can only take numbers or arrays of numbers.");t=i.VibrateCmd.Create(this._index,e),this.CheckGenericSubcommandList(i.SpeedSubcommand.name,t.Speeds,this.MessageAttributes(i.VibrateCmd.name).FeatureCount)}yield this.SendMessageAsync(t)}))}SendRotateCmd(e,t){return n(this,void 0,void 0,(function*(){let r;if(this.CheckAllowedMessageType(i.RotateCmd.name),"number"==typeof e){const n=this.MessageAttributes(i.RotateCmd.name).FeatureCount;r=i.RotateCmd.Create(this._index,new Array(n).fill([e,t]))}else{if(!Array.isArray(e))throw new s.ButtplugDeviceException("SendRotateCmd can only take a number and boolean, or an array of number/boolean tuples");r=i.RotateCmd.Create(this._index,e),this.CheckGenericSubcommandList(i.SpeedSubcommand.name,r.Rotations,this.MessageAttributes(i.RotateCmd.name).FeatureCount)}yield this.SendMessageAsync(r)}))}SendLinearCmd(e,t){return n(this,void 0,void 0,(function*(){let r;if(this.CheckAllowedMessageType(i.LinearCmd.name),"number"==typeof e){const n=this.MessageAttributes(i.LinearCmd.name).FeatureCount;r=i.LinearCmd.Create(this._index,new Array(n).fill([e,t]))}else{if(!Array.isArray(e))throw new s.ButtplugDeviceException("SendLinearCmd can only take a number and number, or an array of number/number tuples");r=i.LinearCmd.Create(this._index,e),this.CheckGenericSubcommandList(i.SpeedSubcommand.name,r.Vectors,this.MessageAttributes(i.LinearCmd.name).FeatureCount)}yield this.SendMessageAsync(r)}))}SendFleshlightLaunchFW12Cmd(e,t){return n(this,void 0,void 0,(function*(){this.CheckAllowedMessageType(i.FleshlightLaunchFW12Cmd.name),yield this.SendMessageAsync(new i.FleshlightLaunchFW12Cmd(e,t,this._index))}))}SendLovenseCmd(e){return n(this,void 0,void 0,(function*(){this.CheckAllowedMessageType(i.LovenseCmd.name),yield this.SendMessageAsync(new i.LovenseCmd(e,this._index))}))}SendVorzeA10CycloneCmd(e,t){return n(this,void 0,void 0,(function*(){this.CheckAllowedMessageType(i.VorzeA10CycloneCmd.name),yield this.SendMessageAsync(new i.VorzeA10CycloneCmd(e,t,this._index))}))}SendStopDeviceCmd(){return n(this,void 0,void 0,(function*(){this.CheckAllowedMessageType(i.StopDeviceCmd.name),yield this.SendMessageAsync(new i.StopDeviceCmd(this._index))}))}SendKiirooCmd(e){return n(this,void 0,void 0,(function*(){this.CheckAllowedMessageType(i.KiirooCmd.name),yield this.SendMessageAsync(new i.KiirooCmd(e,this._index))}))}CheckGenericSubcommandList(e,t,r){if(0===t.length||t.length>r){if(1===r)throw new s.ButtplugDeviceException(`${e} requires 1 subcommand for this device, ${t.length} present.`);throw new s.ButtplugDeviceException(`${e} requires between 1 and ${r} subcommands for this device, ${t.length} present.`)}for(const n of t)if(n.Index>=r)throw new s.ButtplugDeviceException(`Index ${n.Index} is out of bounds for ${e} for this device.`)}}t.ButtplugClientDevice=o},KMqf:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("U4c0")),n(r("JjHJ")),n(r("2f+d")),n(r("Wd91")),n(r("WJxe")),n(r("DHMQ")),n(r("VzKg")),n(r("ytkS")),n(r("kFR6")),n(r("AdGg")),n(r("36dr")),n(r("o4Wz")),n(r("FUtr")),n(r("q+Aq")),n(r("fCiX")),n(r("s26e")),n(r("ZD7F")),n(r("ANNU")),n(r("AjGN")),n(r("4Kjc")),n(r("aB/X")),n(r("bTiy")),n(r("/oyJ")),n(r("hsbB")),n(r("CeqE"))},"LHY/":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr");class a{constructor(){this.Brand="MagicMotion",this.Name="Smart Mini Vibe",this.VibeCount=1,this.VibeOrder=[0,1,2]}}class c extends o.ButtplugDeviceProtocol{constructor(e){super(`Kiiroo ${e.Name}`,e),this._devInfo=new a,this._hasRunCommand=!1,this._vibratorSpeed=[0,0,0],this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){if(e.Speeds.length<1||e.Speeds.length>this._devInfo.VibeCount)throw new s.ButtplugDeviceException("Kiiroo Gen 2 Vibrator devices require VibrateCmd at most "+`${this._devInfo.VibeCount} speed commands, ${e.Speeds.length} sent.`,e.Id);let t=!1;for(const n of e.Speeds)Math.abs(n.Speed-this._vibratorSpeed[n.Index])>.001&&(t=!0,this._vibratorSpeed[n.Index]=n.Speed);if(!t&&this._hasRunCommand)return new i.Ok(e.Id);const r=Buffer.from([100*this._vibratorSpeed[this._devInfo.VibeOrder[0]],100*this._vibratorSpeed[this._devInfo.VibeOrder[0]],100*this._vibratorSpeed[this._devInfo.VibeOrder[0]]]);return this._hasRunCommand=!0,yield this._device.WriteValue(r),new i.Ok(e.Id)})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){const t=[];for(let r=0;r<this._devInfo.VibeCount;r++)t.push(new i.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new i.VibrateCmd(t,e.DeviceIndex,e.Id))}));const t=c.DevInfos.get(e.Name);void 0!==t&&(this._devInfo=t,this._name=`${this._devInfo.Brand} ${e.Name}`),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}c.DevInfos=new Map([["Pearl2",Object.assign(new a,{Brand:"Kiiroo",VibeCount:1,VibeOrder:[0,1,2]})],["Fuse",Object.assign(new a,{Brand:"OhMiBod",VibeCount:2,VibeOrder:[1,0,2]})],["Virtual Blowbot",Object.assign(new a,{Brand:"PornHub",VibeCount:3,VibeOrder:[0,1,2]})],["Titan",Object.assign(new a,{Brand:"Kiiroo",VibeCount:3,VibeOrder:[0,1,2]})]]),t.KiirooGen2Vibe=c},NUpL:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("kFR6"),s=r("AdGg"),o=r("+qE3"),a=r("ZD7F"),c=r("ANNU"),l=r("fouG"),u=r("36dr");t.WebBluetoothDeviceManager=class extends o.EventEmitter{constructor(e){super(),this.OpenDevice=e=>n(this,void 0,void 0,(function*(){if(void 0===e)return;const t=a.DeviceConfigurationManager.Manager,r=new c.BluetoothLEProtocolConfiguration([e.name]),n=t.Find(r);if(void 0===n)return;const[i,s]=n,o=new l.WebBluetoothDevice(i,e);yield o.Connect();const h=new s(o),d=new u.ButtplugDevice(h,o);yield d.Initialize(),this.emit("deviceadded",d)})),this.SetLogger(void 0!==e?e:i.ButtplugLogger.Logger)}SetLogger(e){this._logger=e}StartScanning(){return n(this,void 0,void 0,(function*(){const e={filters:new Array,optionalServices:new Array},t=a.DeviceConfigurationManager.Manager.GetAllConfigsOfType(c.BluetoothLEProtocolConfiguration);for(const i of t){for(const t of i.Names)try{t.endsWith("*")&&e.filters.push({namePrefix:t.substr(0,t.length-1)}),e.filters.push({name:t})}catch(n){console.log(n),console.log(i)}e.optionalServices=[...e.optionalServices,...i.Services.keys()]}let r;this._logger.Trace("Bluetooth filter set: "+JSON.stringify(e));try{r=yield navigator.bluetooth.requestDevice(e)}catch(n){if(this.emit("scanningfinished"),-1!==n.message.indexOf("User cancelled"))return;throw s.ButtplugException.LogAndError(s.ButtplugDeviceException,this._logger,"Bluetooth scanning interrupted. Either user cancelled out of dialog, or bluetooth radio is not available. Exception: "+n)}try{yield this.OpenDevice(r)}catch(n){throw this.emit("scanningfinished"),s.ButtplugException.LogAndError(s.ButtplugDeviceException,this._logger,`Cannot open device ${r.name}: ${n}`)}this.emit("scanningfinished")}))}StopScanning(){}get IsScanning(){return!1}}},PcyV:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeMetadata=function(e,t,r,n,i){this.target=e,this.propertyName=t,this.reflectedType=r,this.typeFunction=n,this.options=i}},"QYf/":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr");t.KiirooGen21=class extends o.ButtplugDeviceProtocol{constructor(e){super("Kiiroo Onyx 2.1",e),this._lastPosition=0,this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleFleshlightLaunchFW12Cmd(new i.FleshlightLaunchFW12Cmd(0,0,e.DeviceIndex,e.Id))})),this.HandleFleshlightLaunchFW12Cmd=e=>n(this,void 0,void 0,(function*(){return this._lastPosition=e.Position,yield this._device.WriteValue(Buffer.from([3,0,e.Speed,e.Position])),new i.Ok(e.Id)})),this.HandleLinearCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Vectors.length)throw new s.ButtplugDeviceException("LinearCmd requires 1 vector for this device.",e.Id);const t=e.Vectors[0],r=100*t.Position,n=Math.abs(r-this._lastPosition);let o=Math.floor(25e3*Math.pow(90*t.Duration/n,-1.05));o=Math.min(Math.max(o,0),95);const a=Math.floor(r/99*99+0);return yield this.HandleFleshlightLaunchFW12Cmd(new i.FleshlightLaunchFW12Cmd(o,a,e.DeviceIndex,e.Id))})),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.FleshlightLaunchFW12Cmd,this.HandleFleshlightLaunchFW12Cmd),this.MsgFuncs.set(i.LinearCmd,this.HandleLinearCmd)}get MessageSpecifications(){return{FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{},LinearCmd:{FeatureCount:1}}}}},RRu4:function(e){e.exports=JSON.parse('{"connection-info-types":["btle","serial","usb","hid"],"protocols":{"lovense":{"btle":{"names":["LVS-*"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff2-0000-1000-8000-00805f9b34fb","rx":"0000fff1-0000-1000-8000-00805f9b34fb"},"6e400001-b5a3-f393-e0a9-e50e24dcca9e":{"tx":"6e400002-b5a3-f393-e0a9-e50e24dcca9e","rx":"6e400003-b5a3-f393-e0a9-e50e24dcca9e"},"50300001-0024-4bd4-bbd5-a6920e4c5653":{"tx":"50300002-0024-4bd4-bbd5-a6920e4c5653","rx":"50300003-0024-4bd4-bbd5-a6920e4c5653"},"57300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"57300002-0023-4bd4-bbd5-a6920e4c5653","rx":"57300003-0023-4bd4-bbd5-a6920e4c5653"},"5a300001-0024-4bd4-bbd5-a6920e4c5653":{"tx":"5a300002-0024-4bd4-bbd5-a6920e4c5653","rx":"5a300003-0024-4bd4-bbd5-a6920e4c5653"},"50300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"50300002-0023-4bd4-bbd5-a6920e4c5653","rx":"50300003-0023-4bd4-bbd5-a6920e4c5653"},"53300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"53300002-0023-4bd4-bbd5-a6920e4c5653","rx":"53300003-0023-4bd4-bbd5-a6920e4c5653"},"5a300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"5a300002-0023-4bd4-bbd5-a6920e4c5653","rx":"5a300003-0023-4bd4-bbd5-a6920e4c5653"},"4f300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"4f300002-0023-4bd4-bbd5-a6920e4c5653","rx":"4f300003-0023-4bd4-bbd5-a6920e4c5653"},"42300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"42300002-0023-4bd4-bbd5-a6920e4c5653","rx":"42300003-0023-4bd4-bbd5-a6920e4c5653"}}}},"xinput":null,"libo":{"btle":{"names":["PiPiJing","XiaoLu","LuXiaoHan","SuoYinQiu","BaiHu","MonsterPub","Gugudai","ShaYu","Yuyi","LuWuShuang","LiBo","QingTing","Shuidi","Huohu"],"services":{"00006000-0000-1000-8000-00805f9b34fb":{"tx":"00006001-0000-1000-8000-00805f9b34fb","txmode":"00006002-0000-1000-8000-00805f9b34fb"}}}},"magic-motion":{"btle":{"names":["Smart Mini Vibe*","Flamingo","Eidolon","Smart Bean","Magic Cell","Magic Wand","Fugu","Krush","Lipstick","Sword","Curve"],"services":{"78667579-7b48-43db-b8c5-7928a6b0a335":{"tx":"78667579-a914-49a4-8333-aa3c0cd8fedc"}}}},"mysteryvibe":{"btle":{"names":["MV Crescendo","MV Tenuto*"],"services":{"f0006900-110c-478b-b74b-6f403b364a9c":{"txmode":"f0006901-110c-478b-b74b-6f403b364a9c","txvibrate":"f0006903-110c-478b-b74b-6f403b364a9c"}}}},"picobong":{"btle":{"names":["Blow hole","Picobong Male Toy","Diver","Picobong Egg","Life guard","Picobong Ring","Surfer","Picobong Butt Plug","Egg driver","Surfer_plug"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"vibratissimo":{"btle":{"names":["Vibratissimo"],"services":{"00001523-1212-efde-1523-785feabcd123":{"txmode":"00001524-1212-efde-1523-785feabcd123","txvibrate":"00001526-1212-efde-1523-785feabcd123","rx":"00001527-1212-efde-1523-785feabcd123"}}}},"wevibe":{"btle":{"names":["Cougar","4 Plus","4_Plus","4plus","Bloom","classic","Classic","Ditto","Gala","Jive","Melt","Moxie","Nova","NOVAV2","Pivot","Rey","We-Vibe Rocketman","Rave","Reina","imassager","Interactive Massager","03","Sync","Vector","Verge","Wish"],"services":{"f000bb03-0451-4000-b000-000000000000":{"tx":"f000c000-0451-4000-b000-000000000000","rx":"f000b000-0451-4000-b000-000000000000"}}}},"youcups":{"btle":{"names":["Youcups"],"services":{"0000fee9-0000-1000-8000-00805f9b34fb":{"tx":"d44bc439-abfd-45a2-b575-925416129600"}}}},"cueme":{"btle":{"names":["FUNCODE_*"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v2-vibrator":{"btle":{"names":["Pearl2","Fuse","Virtual Blowbot","Titan"],"services":{"88f82580-0000-01e6-aace-0002a5d5c51b":{"tx":"88f82581-0000-01e6-aace-0002a5d5c51b","rxtouch":"88f82582-0000-01e6-aace-0002a5d5c51b","rxaccel":"88f82584-0000-01e6-aace-0002a5d5c51b"}}}},"kiiroo-v21":{"btle":{"names":["Onyx2.1"],"services":{"00001900-0000-1000-8000-00805f9b34fb":{"whitelist":"00001901-0000-1000-8000-00805f9b34fb","tx":"00001902-0000-1000-8000-00805f9b34fb","rx":"00001903-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v21-vibrator":{"btle":{"names":["Cliona"],"services":{"00001900-0000-1000-8000-00805f9b34fb":{"whitelist":"00001901-0000-1000-8000-00805f9b34fb","tx":"00001902-0000-1000-8000-00805f9b34fb","rx":"00001903-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v2":{"btle":{"names":["Launch","Onyx2"],"services":{"88f80580-0000-01e6-aace-0002a5d5c51b":{"tx":"88f80581-0000-01e6-aace-0002a5d5c51b","rx":"88f80582-0000-01e6-aace-0002a5d5c51b","firmware":"88f80583-0000-01e6-aace-0002a5d5c51b"},"f60402a6-0293-4bdb-9f20-6758133f7090":{"tx":"02962ac9-e86f-4094-989d-231d69995fc2","rx":"d44d0393-0731-43b3-a373-8fc70b1f3323","firmware":"c7b7a04b-2cc4-40ff-8b10-5d531d1161db"}}}},"erostek-et312":{"serial":{"baud-rate":19200,"data-bits":8,"parity":"N","stop-bits":1}},"vorze-cyclone-x":{"hid":{"vendor-id":1155,"product-id":22352}},"rez-trancevibrator":{"usb":{"vendor-id":2889,"product-id":1615}},"kiiroo-v1":{"btle":{"names":["ONYX","PEARL"],"services":{"49535343-fe7d-4ae5-8fa9-9fafd205e455":{"rx":"49535343-1e4d-4bd9-ba61-23c647249616","tx":"49535343-8841-43f4-a8d4-ecbe34729bb3","command":"49535343-aca3-481c-91ec-d85e28a60318","cmd2":"49535343-6daa-4d02-abf6-19569aca69fe"}}}},"vorze-sa":{"btle":{"names":["CycSA","Bach smart","UFOSA"],"services":{"40ee1111-63ec-4b7f-8ce7-712efd55b90e":{"tx":"40ee2222-63ec-4b7f-8ce7-712efd55b90e"}}}},"youou":{"btle":{"names":["VX001_*"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff6-0000-1000-8000-00805f9b34fb"}}}},"realtouch":{"hid":{"vendor-id":8020,"product-id":1}},"prettylove":{"btle":{"names":["Aogu BLE *"],"services":{"0000ffe5-0000-1000-8000-00805f9b34fb":{"tx":"0000ffe9-0000-1000-8000-00805f9b34fb","rx":"0000ffe2-0000-1000-8000-00805f9b34fb"}}}},"svakom":{"btle":{"names":["Aogu SCB"],"services":{"0000ffe0-0000-1000-8000-00805f9b34fb":{"tx":"0000ffe1-0000-1000-8000-00805f9b34fb","rx":"0000ffe2-0000-1000-8000-00805f9b34fb"}}}},"realov":{"btle":{"names":["REALOV_VIBE"],"services":{"0000ffe0-0000-1000-8000-00805f9b34fb":{"tx":"0000ffe1-0000-1000-8000-00805f9b34fb"}}}},"motorbunny":{"btle":{"names":["MB Controller"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff6-0000-1000-8000-00805f9b34fb"}}}},"zalo":{"btle":{"names":["ZALO-Queen"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"sayberx":{"btle":{"names":["SayberX"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff6-0000-1000-8000-00805f9b34fb"}}}},"muse":{"btle":{"names":["WB-ZDB-WST","WB-TDD"],"services":{"0000aaa0-0000-1000-8000-00805f9b34fb":{"tx":"0000aaa1-0000-1000-8000-00805f9b34fb"}}}},"lelo-f1s":{"btle":{"names":["F1s"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"aneros":{"btle":{"names":["Massage Demo"],"services":{"0000ff00-0000-1000-8000-00805f9b34fb":{"tx":"0000ff01-0000-1000-8000-00805f9b34fb"}}}},"lovehoney-desire":{"btle":{"names":["PROSTATE VIBE","KNICKER VIBE"],"services":{"0000ff00-0000-1000-8000-00805f9b34fb":{"tx":"0000ff01-0000-1000-8000-00805f9b34fb"}}}},"twerkingbutt":{"btle":{"names":["BODIKANG","Twerking Butt","TwerkingButt"],"services":{"00000a60-0000-1000-8000-00805f9b34fb":{"tx":"00000a66-0000-1000-8000-00805f9b34fb","rx":"00000a67-0000-1000-8000-00805f9b34fb"}}}}}}')},RsDv:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},TbEC:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="valid"+i,d="errs__"+i,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,g=p.baseId,v="prevValid"+i,y="passingSchemas"+i;n+="var "+d+" = errors , "+v+" = false , "+h+" = false , "+y+" = null; ";var _=e.compositeRule;e.compositeRule=p.compositeRule=!0;var b=o;if(b)for(var w,S=-1,C=b.length-1;S<C;)w=b[S+=1],(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all))?(p.schema=w,p.schemaPath=a+"["+S+"]",p.errSchemaPath=c+"/"+S,n+="  "+e.validate(p)+" ",p.baseId=g):n+=" var "+m+" = true; ",S&&(n+=" if ("+m+" && "+v+") { "+h+" = false; "+y+" = ["+y+", "+S+"]; } else { ",f+="}"),n+=" if ("+m+") { "+h+" = "+v+" = true; "+y+" = "+S+"; }";return e.compositeRule=p.compositeRule=_,n+=f+"if (!"+h+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(n+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),n+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},ThTW:function(e,t,r){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function s(e){var n=t("[0-9]","[A-Fa-f]"),i=r(r("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+r("%[89A-Fa-f]"+n+"%"+n+n)+"|"+r("%"+n+n)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",o=t("[\\:\\/\\?\\#\\[\\]\\@]",s),a=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=r(r(i+"|"+t(c,s,"[\\:]"))+"*"),h=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),d=r(h+"\\."+h+"\\."+h+"\\."+h),p=r(n+"{1,4}"),f=r(r(p+"\\:"+p)+"|"+d),m=r(r(p+"\\:")+"{6}"+f),g=r("\\:\\:"+r(p+"\\:")+"{5}"+f),v=r(r(p)+"?\\:\\:"+r(p+"\\:")+"{4}"+f),y=r(r(r(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+r(p+"\\:")+"{3}"+f),_=r(r(r(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+r(p+"\\:")+"{2}"+f),b=r(r(r(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+f),w=r(r(r(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+f),S=r(r(r(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),C=r(r(r(p+"\\:")+"{0,6}"+p)+"?\\:\\:"),E=r([m,g,v,y,_,b,w,S,C].join("|")),x=r(r(c+"|"+i)+"+"),P=(r(E+"\\%25"+x),r(E+r("\\%25|\\%(?!"+n+"{2})")+x)),I=r("[vV]"+n+"+\\."+t(c,s,"[\\:]")+"+"),M=r("\\["+r(P+"|"+E+"|"+I)+"\\]"),D=r(r(i+"|"+t(c,s))+"*"),O=r(M+"|"+d+"(?!"+D+")|"+D),A=r("[0-9]*"),T=r(r(u+"@")+"?"+O+r("\\:"+A)+"?"),R=r(i+"|"+t(c,s,"[\\:\\@]")),k=r(R+"*"),V=r(R+"+"),L=r(r(i+"|"+t(c,s,"[\\@]"))+"+"),F=r(r("\\/"+k)+"*"),j=r("\\/"+r(V+F)+"?"),N=r(L+F),$=r(V+F),U="(?!"+R+")",B=(r(F+"|"+j+"|"+N+"|"+$+"|"+U),r(r(R+"|"+t("[\\/\\?]",a))+"*")),H=r(r(R+"|[\\/\\?]")+"*"),z=r(r("\\/\\/"+T+F)+"|"+j+"|"+$+"|"+U),q=r(l+"\\:"+z+r("\\?"+B)+"?"+r("\\#"+H)+"?"),W=r(r("\\/\\/"+T+F)+"|"+j+"|"+N+"|"+U),G=r(W+r("\\?"+B)+"?"+r("\\#"+H)+"?");return r(q+"|"+G),r(l+"\\:"+z+r("\\?"+B)+"?"),r(r("\\/\\/("+r("("+u+")@")+"?("+O+")"+r("\\:("+A+")")+"?)")+"?("+F+"|"+j+"|"+$+"|"+U+")"),r("\\?("+B+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+O+")"+r("\\:("+A+")")+"?)")+"?("+F+"|"+j+"|"+N+"|"+U+")"),r("\\?("+B+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+u+")@")+"?("+O+")"+r("\\:("+A+")")+"?)")+"?("+F+"|"+j+"|"+$+"|"+U+")"),r("\\?("+B+")"),r("\\#("+H+")"),r("("+u+")@"),r("\\:("+A+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,s),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,s),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,s),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,s),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]",a),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,s),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,o),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+E+")"+r(r("\\%25|\\%(?!"+n+"{2})")+"("+x+")")+"?\\]?$")}}var o=s(!1),a=s(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(c){i=!0,s=c}finally{try{!n&&a.return&&a.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,u=/^xn--/,h=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(p[e])}function v(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(d,".")).split("."),t).join(".");return n+i}var y=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},_=function(e,t,r){var n=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;n+=36)e=f(e/35);return f(n+36*e/(e+38))},b=function(e){return v(e,(function(e){return h.test(e)?"xn--"+function(e){var t=[],r=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),r--)}else t.push(i)}return t}(e)).length,n=128,i=0,s=72,o=!0,a=!1,c=void 0;try{for(var u,h=e[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var d=u.value;d<128&&t.push(m(d))}}catch(N){a=!0,c=N}finally{try{!o&&h.return&&h.return()}finally{if(a)throw c}}var p=t.length,v=p;for(p&&t.push("-");v<r;){var b=l,w=!0,S=!1,C=void 0;try{for(var E,x=e[Symbol.iterator]();!(w=(E=x.next()).done);w=!0){var P=E.value;P>=n&&P<b&&(b=P)}}catch(N){S=!0,C=N}finally{try{!w&&x.return&&x.return()}finally{if(S)throw C}}var I=v+1;b-n>f((l-i)/I)&&g("overflow"),i+=(b-n)*I,n=b;var M=!0,D=!1,O=void 0;try{for(var A,T=e[Symbol.iterator]();!(M=(A=T.next()).done);M=!0){var R=A.value;if(R<n&&++i>l&&g("overflow"),R==n){for(var k=i,V=36;;V+=36){var L=V<=s?1:V>=s+26?26:V-s;if(k<L)break;var F=k-L,j=36-L;t.push(m(y(L+F%j,0))),k=f(F/j)}t.push(m(y(k,0))),s=_(i,I,v==p),i=0,++v}}}catch(N){D=!0,O=N}finally{try{!M&&T.return&&T.return()}finally{if(D)throw O}}++i,++n}return t.join("")}(e):e}))},w=function(e){return v(e,(function(e){return u.test(e)?function(e){var t,r=[],n=e.length,i=0,s=128,o=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var c=0;c<a;++c)e.charCodeAt(c)>=128&&g("not-basic"),r.push(e.charCodeAt(c));for(var u=a>0?a+1:0;u<n;){for(var h=i,d=1,p=36;;p+=36){u>=n&&g("invalid-input");var m=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>f((l-i)/d))&&g("overflow"),i+=m*d;var v=p<=o?1:p>=o+26?26:p-o;if(m<v)break;var y=36-v;d>f(l/y)&&g("overflow"),d*=y}var b=r.length+1;o=_(i-h,b,0==h),f(i/b)>l-s&&g("overflow"),s+=f(i/b),i%=b,r.splice(i++,0,s)}return String.fromCodePoint.apply(String,r)}(e.slice(4).toLowerCase()):e}))},S={};function C(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function E(e){for(var t="",r=0,n=e.length;r<n;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(n-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&s)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(n-r>=9){var o=parseInt(e.substr(r+4,2),16),a=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function x(e,t){function r(e){var r=E(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,C).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,C).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,C).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,C).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,C).replace(t.PCT_ENCODED,i)),e}function P(e){return e.replace(/^0*(.*)/,"$1")||"0"}function I(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=c(r,2)[1];return n?n.split(".").map(P).join("."):e}function M(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=c(r,3),i=n[1],s=n[2];if(i){for(var o=i.toLowerCase().split("::").reverse(),a=c(o,2),l=a[0],u=a[1],h=u?u.split(":").map(P):[],d=l.split(":").map(P),p=t.IPV4ADDRESS.test(d[d.length-1]),f=p?7:8,m=d.length-f,g=Array(f),v=0;v<f;++v)g[v]=h[v]||d[m+v]||"";p&&(g[f-1]=I(g[f-1],t));var y=g.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],_=void 0;if(y&&y.length>1){var b=g.slice(0,y.index),w=g.slice(y.index+y.length);_=b.join(":")+"::"+w.join(":")}else _=g.join(":");return s&&(_+="%"+s),_}return e}var D=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,O=void 0==="".match(/(){0}/)[1];function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?a:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(D);if(i){O?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=M(I(r.host,n),n)),r.reference=void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?"relative":void 0===r.fragment?"absolute":"uri":"same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var s=S[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)x(r,n);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=b(r.host.replace(n.PCT_ENCODED,E).toLowerCase())}catch(c){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+c}x(r,o)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function T(e,t){var r=!1!==t.iri?a:o,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(M(I(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"==typeof e.port&&(n.push(":"),n.push(e.port.toString(10))),n.length?n.join(""):void 0}var R=/^\.\.?\//,k=/^\/\.(\/|$)/,V=/^\/\.\.(\/|$)/,L=/^\/?(?:.|\n)*?(?=\/|$)/;function F(e){for(var t=[];e.length;)if(e.match(R))e=e.replace(R,"");else if(e.match(k))e=e.replace(k,"/");else if(e.match(V))e=e.replace(V,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(L);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?a:o,n=[],i=S[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?w(e.host):b(e.host.replace(r.PCT_ENCODED,E).toLowerCase())}catch(l){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+l}x(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var s=T(e,t);if(void 0!==s&&("suffix"!==t.reference&&n.push("//"),n.push(s),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||i&&i.absolutePath||(c=F(c)),void 0===s&&(c=c.replace(/^\/\//,"/%2F")),n.push(c)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function N(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i={};return n||(e=A(j(e,r),r),t=A(j(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=F(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=F(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=F(t.path):(i.path=void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:t.path:"/"+t.path,i.path=F(i.path)),i.query=t.query):(i.path=e.path,i.query=void 0!==t.query?t.query:e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function $(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:o.PCT_ENCODED,E)}var U={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},B={scheme:"https",domainHost:U.domainHost,parse:U.parse,serialize:U.serialize},H={},z="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",q="[0-9A-Fa-f]",W=r(r("%[EFef][0-9A-Fa-f]%"+q+q+"%"+q+q)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+q+q)+"|"+r("%"+q+q)),G=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),K=new RegExp(z,"g"),Q=new RegExp(W,"g"),Z=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',G),"g"),J=new RegExp(t("[^]",z,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),Y=J;function X(e){var t=E(e);return t.match(K)?t:e}var ee={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,s={},o=r.query.split("&"),a=0,c=o.length;a<c;++a){var l=o[a].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),h=0,d=u.length;h<d;++h)n.push(u[h]);break;case"subject":r.subject=$(l[1],t);break;case"body":r.body=$(l[1],t);break;default:i=!0,s[$(l[0],t)]=$(l[1],t)}}i&&(r.headers=s)}r.query=void 0;for(var p=0,f=n.length;p<f;++p){var m=n[p].split("@");if(m[0]=$(m[0]),t.unicodeSupport)m[1]=$(m[1],t).toLowerCase();else try{m[1]=b($(m[1],t).toLowerCase())}catch(g){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+g}n[p]=m.join("@")}return r},serialize:function(e,t){var r,n=e,s=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(s){for(var o=0,a=s.length;o<a;++o){var c=String(s[o]),l=c.lastIndexOf("@"),u=c.slice(0,l).replace(Q,X).replace(Q,i).replace(Z,C),h=c.slice(l+1);try{h=t.iri?w(h):b($(h,t).toLowerCase())}catch(m){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+m}s[o]=u+"@"+h}n.path=s.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var p=[];for(var f in d)d[f]!==H[f]&&p.push(f.replace(Q,X).replace(Q,i).replace(J,C)+"="+d[f].replace(Q,X).replace(Q,i).replace(Y,C));return p.length&&(n.query=p.join("&")),n}},te=/^([^\:]+)\:(.*)/,re={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(te),n=e;if(r){var i=t.scheme||n.scheme||"urn",s=r[1].toLowerCase(),o=r[2],a=S[i+":"+(t.nid||s)];n.nid=s,n.nss=o,n.path=void 0,a&&(n=a.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=e.nid,n=S[(t.scheme||e.scheme||"urn")+":"+(t.nid||r)];n&&(e=n.serialize(e,t));var i=e;return i.path=(r||t.nid)+":"+e.nss,i}},ne=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ie={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ne)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};S[U.scheme]=U,S[B.scheme]=B,S[ee.scheme]=ee,S[re.scheme]=re,S[ie.scheme]=ie,e.SCHEMES=S,e.pctEncChar=C,e.pctDecChars=E,e.parse=A,e.removeDotSegments=F,e.serialize=j,e.resolveComponents=N,e.resolve=function(e,t,r){var n=function(e,t){var r={scheme:"null"};if(t)for(var n in t)r[n]=t[n];return r}(0,r);return j(N(A(e,n),A(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=j(A(e,t),t):"object"===n(e)&&(e=A(j(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=j(A(e,r),r):"object"===n(e)&&(e=j(e,r)),"string"==typeof t?t=j(A(t,r),r):"object"===n(t)&&(t=j(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:o.ESCAPE,C)},e.unescapeComponent=$,Object.defineProperty(e,"__esModule",{value:!0})}(t)},U4c0:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("kFR6"),s=r("+qE3"),o=r("JjHJ"),a=r("VzKg"),c=r("ytkS"),l=r("AdGg"),u=r("Wd91");t.ButtplugClient=class extends s.EventEmitter{constructor(e="Generic Buttplug Client"){super(),this._pingTimer=null,this._connector=null,this._devices=new Map,this._logger=i.ButtplugLogger.Logger,this._isScanning=!1,this._messageVersion=1,this.Connect=e=>n(this,void 0,void 0,(function*(){this._logger.Info(`ButtplugClient: Connecting using ${e.constructor.name}`),yield e.Connect(),this._connector=e,this._connector.addListener("message",this.ParseMessages),this._connector.addListener("disconnect",this.DisconnectHandler),yield this.InitializeConnection()})),this.Disconnect=()=>n(this,void 0,void 0,(function*(){this._logger.Debug("ButtplugClient: Disconnect called"),this.CheckConnector(),yield this.ShutdownConnection(),yield this._connector.Disconnect()})),this.StartScanning=()=>n(this,void 0,void 0,(function*(){this._logger.Debug("ButtplugClient: StartScanning called"),this._isScanning=!0,yield this.SendMsgExpectOk(new a.StartScanning)})),this.StopScanning=()=>n(this,void 0,void 0,(function*(){this._logger.Debug("ButtplugClient: StopScanning called"),this._isScanning=!1,yield this.SendMsgExpectOk(new a.StopScanning)})),this.RequestLog=e=>n(this,void 0,void 0,(function*(){this._logger.Debug(`ButtplugClient: RequestLog called with level ${e}`),yield this.SendMsgExpectOk(new a.RequestLog(e))})),this.StopAllDevices=()=>n(this,void 0,void 0,(function*(){this._logger.Debug("ButtplugClient: StopAllDevices"),yield this.SendMsgExpectOk(new a.StopAllDevices)})),this.ParseMessages=e=>{this.ParseMessagesInternal(e)},this.DisconnectHandler=()=>{this._logger.Info("ButtplugClient: Disconnect event receieved."),this.emit("disconnect")},this.InitializeConnection=()=>n(this,void 0,void 0,(function*(){this.CheckConnector();const e=yield this.SendMessage(new a.RequestServerInfo(this._clientName,1));switch(e.constructor){case a.ServerInfo:{const t=e;this._logger.Info(`ButtplugClient: Connected to Server ${t.ServerName}`);const r=t.MaxPingTime;if(t.MessageVersion<this._messageVersion)throw yield this._connector.Disconnect(),l.ButtplugException.LogAndError(l.ButtplugInitException,this._logger,"Server protocol version is older than client protocol version. Please update server.");return r>0&&(this._pingTimer=setInterval(()=>n(this,void 0,void 0,(function*(){this.Connected?yield this.SendMessage(new a.Ping):yield this.ShutdownConnection()})),Math.round(r/2))),yield this.RequestDeviceList(),!0}case a.Error:throw yield this._connector.Disconnect(),l.ButtplugException.LogAndError(l.ButtplugInitException,this._logger,`Cannot connect to server. ${e.ErrorMessage}`)}return!1})),this.RequestDeviceList=()=>n(this,void 0,void 0,(function*(){this.CheckConnector(),this._logger.Debug("ButtplugClient: ReceiveDeviceList called"),(yield this.SendMessage(new a.RequestDeviceList)).Devices.forEach(e=>{if(this._devices.has(e.DeviceIndex))this._logger.Debug(`ButtplugClient: Device already added: ${e}`);else{const t=o.ButtplugClientDevice.fromMsg(e,this.SendDeviceMessageClosure);this._logger.Debug(`ButtplugClient: Adding Device: ${t}`),this._devices.set(e.DeviceIndex,t),this.emit("deviceadded",t)}})})),this.ShutdownConnection=()=>n(this,void 0,void 0,(function*(){yield this.StopAllDevices(),null!==this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=null)})),this.SendMsgExpectOk=e=>n(this,void 0,void 0,(function*(){const t=yield this.SendMessage(e);switch(t.constructor){case a.Ok:return;case a.Error:throw l.ButtplugException.FromError(t);default:throw l.ButtplugException.LogAndError(l.ButtplugMessageException,this._logger,`Message type ${t.constructor} not handled bySendMsgExpectOk`)}})),this.SendDeviceMessageClosure=(e,t)=>n(this,void 0,void 0,(function*(){yield this.SendDeviceMessage(e,t)})),this._clientName=e,this._logger.Debug(`ButtplugClient: Client ${e} created.`)}get Connector(){return this._connector}get Connected(){return null!==this._connector&&this._connector.Connected}get Devices(){this.CheckConnector();const e=[];return this._devices.forEach((t,r)=>{e.push(t)}),e}get IsScanning(){return this._isScanning}SendDeviceMessage(e,t){return n(this,void 0,void 0,(function*(){this.CheckConnector();const r=this._devices.get(e.Index);if(void 0===r)throw l.ButtplugException.LogAndError(l.ButtplugDeviceException,this._logger,`Device ${e.Index} not available.`);if(-1===r.AllowedMessages.indexOf(t.Type.name))throw l.ButtplugException.LogAndError(l.ButtplugDeviceException,this._logger,`Device ${e.Name} does not accept message type ${t.Type}.`);t.DeviceIndex=e.Index,yield this.SendMsgExpectOk(t)}))}ParseMessagesInternal(e){for(const t of e)switch(t.constructor){case a.Log:this.emit("log",t);break;case a.DeviceAdded:const e=t,r=o.ButtplugClientDevice.fromMsg(e,this.SendDeviceMessageClosure);this._devices.set(e.DeviceIndex,r),this.emit("deviceadded",r);break;case a.DeviceRemoved:const n=t;if(this._devices.has(n.DeviceIndex)){const e=this._devices.get(n.DeviceIndex);this._devices.delete(n.DeviceIndex),this.emit("deviceremoved",e)}break;case a.ScanningFinished:this._isScanning=!1,this.emit("scanningfinished",t)}}SendMessage(e){return n(this,void 0,void 0,(function*(){return this.CheckConnector(),c.CheckMessage(e),yield this._connector.Send(e)}))}CheckConnector(){if(!this.Connected)throw new u.ButtplugClientConnectorException("ButtplugClient not connected")}}},VzKg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("b36G"),i=r("AdGg");r("mNvP"),t.SYSTEM_MESSAGE_ID=0,t.DEFAULT_MESSAGE_ID=1,t.MAX_ID=4294967295;class s{constructor(e){this.Id=e}DowngradeMessage(){throw new i.ButtplugMessageException("Message version downgrade required, but not defined for this message type.",this.Id)}get Type(){return this.constructor}getType(){return this.Type}toJSON(){return JSON.stringify(this.toProtocolFormat())}toProtocolFormat(){const e={};return e[this.Type.name]=n.classToPlain(this),e}}t.ButtplugMessage=s;class o extends s{constructor(e,t){super(t),this.DeviceIndex=e,this.Id=t}}t.ButtplugDeviceMessage=o;class a extends s{constructor(e=t.SYSTEM_MESSAGE_ID){super(e),this.Id=e}}var c;t.ButtplugSystemMessage=a,t.Ok=class extends a{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}},t.Ping=class extends s{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}},t.Test=class extends s{constructor(e,r=t.DEFAULT_MESSAGE_ID){super(r),this.TestString=e,this.Id=r}get SchemaVersion(){return 0}},function(e){e[e.ERROR_UNKNOWN=0]="ERROR_UNKNOWN",e[e.ERROR_INIT=1]="ERROR_INIT",e[e.ERROR_PING=2]="ERROR_PING",e[e.ERROR_MSG=3]="ERROR_MSG",e[e.ERROR_DEVICE=4]="ERROR_DEVICE"}(c=t.ErrorClass||(t.ErrorClass={})),t.Error=class extends a{constructor(e,r=c.ERROR_UNKNOWN,n=t.DEFAULT_MESSAGE_ID){super(n),this.ErrorMessage=e,this.ErrorCode=r,this.Id=n}get SchemaVersion(){return 0}};class l{constructor(e,t,r){this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}}t.DeviceInfo=l;class u extends a{constructor(e,t){super(),this.Devices=e,this.Id=t}get Type(){return h.constructor}get SchemaVersion(){return 0}}t.DeviceListVersion0=u,t.DeviceInfoWithSpecifications=class{constructor(e,t,r){this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}};class h extends a{constructor(e,t){super(),this.Devices=e,this.Id=t}DowngradeMessage(){const e=[];for(const t of this.Devices)e.push(new l(t.DeviceIndex,t.DeviceName,Object.keys(t.DeviceMessages)));return new u(e,this.Id)}get SchemaVersion(){return 1}}t.DeviceList=h;class d extends a{constructor(e,t,r){super(),this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}get Type(){return p.constructor}get SchemaVersion(){return 0}}t.DeviceAddedVersion0=d;class p extends a{constructor(e,t,r){super(),this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}get SchemaVersion(){return 1}DowngradeMessage(){return new d(this.DeviceIndex,this.DeviceName,Object.keys(this.DeviceMessages))}}t.DeviceAdded=p,t.DeviceRemoved=class extends a{constructor(e){super(),this.DeviceIndex=e}get SchemaVersion(){return 0}},t.RequestDeviceList=class extends s{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}},t.StartScanning=class extends s{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}},t.StopScanning=class extends s{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}},t.ScanningFinished=class extends a{constructor(){super()}get SchemaVersion(){return 0}},t.RequestLog=class extends s{constructor(e,r=t.DEFAULT_MESSAGE_ID){super(r),this.LogLevel=e,this.Id=r}get SchemaVersion(){return 0}},t.Log=class extends a{constructor(e,t){super(),this.LogLevel=e,this.LogMessage=t}get SchemaVersion(){return 0}},t.RequestServerInfo=class extends s{constructor(e,r=0,n=t.DEFAULT_MESSAGE_ID){super(n),this.ClientName=e,this.MessageVersion=r,this.Id=n}get SchemaVersion(){return 1}},t.ServerInfo=class extends a{constructor(e,r,n,i,s,o,a=t.DEFAULT_MESSAGE_ID){super(),this.MajorVersion=e,this.MinorVersion=r,this.BuildVersion=n,this.MessageVersion=i,this.MaxPingTime=s,this.ServerName=o,this.Id=a}get SchemaVersion(){return 0}},t.FleshlightLaunchFW12Cmd=class extends o{constructor(e,r,n=-1,i=t.DEFAULT_MESSAGE_ID){super(n,i),this.Speed=e,this.Position=r,this.DeviceIndex=n,this.Id=i}get SchemaVersion(){return 0}},t.KiirooCmd=class extends o{constructor(e=0,r=-1,n=t.DEFAULT_MESSAGE_ID){super(r,n),this.DeviceIndex=r,this.Id=n,this.Command="0",this.Command=String(e)}set Position(e){this.Command=e>=0&&e<=4?String(Math.round(e)):"0"}get Position(){const e=Number(this.Command)?Number(this.Command):0;return e<0||e>4?0:Math.round(e)}get SchemaVersion(){return 0}},t.SingleMotorVibrateCmd=class extends o{constructor(e,r=-1,n=t.DEFAULT_MESSAGE_ID){super(r,n),this.Speed=e,this.DeviceIndex=r,this.Id=n}get SchemaVersion(){return 0}},t.StopDeviceCmd=class extends o{constructor(e=-1,r=t.DEFAULT_MESSAGE_ID){super(e,r),this.DeviceIndex=e,this.Id=r}get SchemaVersion(){return 0}},t.StopAllDevices=class extends s{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}},t.LovenseCmd=class extends o{constructor(e,r=-1,n=t.DEFAULT_MESSAGE_ID){super(r,n),this.Command=e,this.DeviceIndex=r,this.Id=n}get SchemaVersion(){return 0}},t.VorzeA10CycloneCmd=class extends o{constructor(e,r,n=-1,i=t.DEFAULT_MESSAGE_ID){super(n,i),this.Speed=e,this.Clockwise=r,this.DeviceIndex=n,this.Id=i}get SchemaVersion(){return 0}};class f{constructor(e){this.Index=e}}t.GenericMessageSubcommand=f;class m extends f{constructor(e,t){super(e),this.Speed=t}}t.SpeedSubcommand=m;class g extends o{constructor(e,r=-1,n=t.DEFAULT_MESSAGE_ID){super(r,n),this.Speeds=e,this.DeviceIndex=r,this.Id=n}get SchemaVersion(){return 1}static Create(e,r){const n=new Array;let i=0;for(const t of r)n.push(new m(i,t)),++i;return new g(n,e,t.DEFAULT_MESSAGE_ID)}}t.VibrateCmd=g;class v extends f{constructor(e,t,r){super(e),this.Speed=t,this.Clockwise=r}static Create(e,t){const r=new Array;let n=0;for(const i of t)r.push(new m(n,i)),++n;return new g(r,e)}}t.RotateSubcommand=v;class y extends o{constructor(e,r=-1,n=t.DEFAULT_MESSAGE_ID){super(r,n),this.Rotations=e,this.DeviceIndex=r,this.Id=n}get SchemaVersion(){return 1}static Create(e,t){const r=new Array;let n=0;for(const i of t)r.push(new v(n,i[0],i[1])),++n;return new y(r,e)}}t.RotateCmd=y;class _ extends f{constructor(e,t,r){super(e),this.Position=t,this.Duration=r}}t.VectorSubcommand=_;class b extends o{constructor(e,r=-1,n=t.DEFAULT_MESSAGE_ID){super(r,n),this.Vectors=e,this.DeviceIndex=r,this.Id=n}get SchemaVersion(){return 1}static Create(e,t){const r=new Array;let n=0;for(const i of t)r.push(new _(n,i[0],i[1])),++n;return new b(r,e)}}t.LinearCmd=b,t.MessageAttributes=class{constructor(e){this.FeatureCount=e}}},WJxe:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("+qE3"),s=r("aB/X"),o=r("Wd91");t.ButtplugEmbeddedClientConnector=class extends i.EventEmitter{constructor(){super(...arguments),this._connected=!1,this._server=null,this.Connect=()=>n(this,void 0,void 0,(function*(){this._connected=!0,null===this._server&&(this._server=new s.ButtplugServer),this._server.addListener("message",this.OnMessageReceived)})),this.Disconnect=()=>n(this,void 0,void 0,(function*(){if(this._connected)try{yield this._server.Shutdown()}finally{this._connected=!1,this._server=null,this.emit("disconnect")}})),this.Send=e=>n(this,void 0,void 0,(function*(){if(!this._connected)throw new o.ButtplugClientConnectorException("Client not connected.");return yield this._server.SendMessage(e)})),this.OnMessageReceived=e=>{this.emit("message",[e])}}set Server(e){this._server=e}get Server(){return this._server}get Connected(){return this._connected}}},Wd91:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("AdGg"),i=r("VzKg");t.ButtplugClientConnectorException=class extends n.ButtplugException{constructor(e){super(e,i.ErrorClass.ERROR_UNKNOWN)}}},XD0j:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.errSchemaPath+"/"+t,s=e.util.toQuotedString(e.schema[t]);return!0===e.opts.$comment?n+=" console.log("+s+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+s+", "+e.util.toQuotedString(i)+", validate.root.schema);"),n}},XPXQ:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="valid"+i,d="errs__"+i,p=e.util.copy(e);p.level++;var f="valid"+p.level,m="i"+i,g=p.dataLevel=e.dataLevel+1,v="data"+g,y=e.baseId,_=e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:e.util.schemaHasRules(o,e.RULES.all);if(n+="var "+d+" = errors;var "+h+";",_){var b=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=o,p.schemaPath=a,p.errSchemaPath=c,n+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var w=u+"["+m+"]";p.dataPathArr[g]=m;var S=e.validate(p);p.baseId=y,e.util.varOccurences(S,v)<2?n+=" "+e.util.varReplace(S,v,w)+" ":n+=" var "+v+" = "+w+"; "+S+" ",n+=" if ("+f+") break; }  ",e.compositeRule=p.compositeRule=b,n+="  if (!"+f+") {"}else n+=" if ("+u+".length == 0) {";var C=C||[];C.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var E=n;return n=C.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",_&&(n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),e.util.cleanUpCode(n)}},Y3YA:function(e,t,r){"use strict";e.exports={$ref:r("bvhh"),allOf:r("6gcW"),anyOf:r("YPXT"),$comment:r("XD0j"),const:r("AwJw"),contains:r("XPXQ"),dependencies:r("uSCx"),enum:r("6MIY"),format:r("AK1u"),if:r("3ZNU"),items:r("eY4P"),maximum:r("v43d"),minimum:r("v43d"),maxItems:r("2jsQ"),minItems:r("2jsQ"),maxLength:r("mQYA"),minLength:r("mQYA"),maxProperties:r("d+r/"),minProperties:r("d+r/"),multipleOf:r("qTHO"),not:r("APWh"),oneOf:r("TbEC"),pattern:r("cUtX"),properties:r("vVvC"),propertyNames:r("bWPq"),required:r("t+aO"),uniqueItems:r("0w4r"),validate:r("1QhW")}},YPXT:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="valid"+i,d="errs__"+i,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level;if(o.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var g=p.baseId;n+=" var "+d+" = errors; var "+h+" = false;  ";var v=e.compositeRule;e.compositeRule=p.compositeRule=!0;var y=o;if(y)for(var _,b=-1,w=y.length-1;b<w;)_=y[b+=1],p.schema=_,p.schemaPath=a+"["+b+"]",p.errSchemaPath=c+"/"+b,n+="  "+e.validate(p)+" ",p.baseId=g,n+=" "+h+" = "+h+" || "+m+"; if (!"+h+") { ",f+="}";e.compositeRule=p.compositeRule=v,n+=" "+f+" if (!"+h+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(n+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}else l&&(n+=" if (true) { ");return n}},ZD7F:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("AdGg"),s=r("ANNU"),o=r("AjGN"),a=r("4Kjc"),c=r("4laU"),l=r("oxZ9"),u=r("3pWD"),h=r("tCG2"),d=r("pfBK"),p=r("teZO"),f=r("FsXc"),m=r("HiAz"),g=r("LHY/"),v=r("RRu4"),y=r("JNjr"),_=r("QYf/"),b=r("kO1a");class w{constructor(e){this._configObject={},this._configs=new Map,this._protocols=new Map,this._configObject=e,this._protocols.set("lovense",c.Lovense),this._protocols.set("wevibe",l.WeVibe),this._protocols.set("vorze-sa",u.VorzeA10Cyclone),this._protocols.set("magic-motion",h.MagicMotion),this._protocols.set("maxpro",f.Maxpro),this._protocols.set("kiiroo-v2",m.FleshlightLaunch),this._protocols.set("kiiroo-v21",_.KiirooGen21),this._protocols.set("kiiroo-v2-vibrator",g.KiirooGen2Vibe),this._protocols.set("youou",y.Youou),this._protocols.set("youcups",p.Youcups),this._protocols.set("libo",d.LiBo),this._protocols.set("motorbunny",b.Motorbunny),this.ParseConfig()}static get Manager(){if(null===w._manager)throw new i.ButtplugDeviceException("Device configuration manager not yet initialized!");return w._manager}static LoadFromInternalConfig(){w._manager=new w(v)}static LoadFromJsonExternalConfig(e){const t=JSON.parse(e);w._manager=new w(t)}static LoadFromWebConfig(e="https://buttplug-device-config.buttplug.io"){return n(this,void 0,void 0,(function*(){const t=yield fetch(e);w.LoadFromJsonExternalConfig(yield t.text())}))}LoadUserConfiguration(){}GetAllConfigsOfType(e){const t=[];for(const[r,n]of this._configs.entries())n instanceof e&&t.push(n);return t}Find(e){for(const[t,r]of this._configs.entries())if(r.Matches(e))return[r,this._protocols.get(t)]}ParseConfig(){this._configs=new Map;const e=this._configObject.protocols;for(const t of Object.keys(e)){if(!this._protocols.has(t))continue;const r=e[t];if(null!=r)for(const e of Object.keys(r))switch(e){case"btle":this._configs.set(t,s.BluetoothLEProtocolConfiguration.ConstructFromObject(r[e]));break;case"serial":this._configs.set(t,new o.SerialProtocolConfiguration(r[e]));break;case"hid":this._configs.set(t,new a.HIDProtocolConfiguration(r[e]))}}}}w._manager=null,t.DeviceConfigurationManager=w},ZsDt:function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i,s=t[r].split("/"),o=e;for(i=1;i<s.length;i++)o=o[s[i]];for(i=0;i<n.length;i++){var a=n[i],c=o[a];c&&(o[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},"aB/X":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("ytkS"),o=r("zp0c"),a=r("+qE3"),c=r("kFR6"),l=r("VzKg"),u=r("AdGg");t.ButtplugServer=class extends a.EventEmitter{constructor(e="Buttplug JS Internal Server",t=0){super(),this._serverName=e,this._maxPingTime=t,this._clientSchemaVersion=-1,this._clientName=void 0,this._pingTimedOut=!1,this._receivedRequestServerInfo=!1,this._logger=c.ButtplugLogger.Logger,this._outgoingLogLevel=c.ButtplugLogLevel.Off,this._connected=!1,this.AddDeviceManager=e=>{this._deviceManager.AddDeviceManager(e)},this.ClearDeviceManagers=()=>{this._deviceManager.ClearDeviceManagers()},this.Disconnect=()=>{this._connected=!1},this.CheckConnection=()=>{if(!this._connected)throw new Error("Server not connected to client.")},this.SendMessage=e=>n(this,void 0,void 0,(function*(){e instanceof l.RequestServerInfo||this.CheckConnection();const t=e.Id;if(this._logger.Trace(`Server: Got Message: ${e}`),0===t)throw u.ButtplugException.LogAndError(u.ButtplugMessageException,this._logger,"Message Id 0 is reserved for outgoing system messages. Use another Id.",t);if(this._pingTimedOut)throw u.ButtplugException.LogAndError(u.ButtplugPingException,this._logger,"Ping timed out.",t);if(!this._receivedRequestServerInfo&&e.Type!==i.RequestServerInfo)throw u.ButtplugException.LogAndError(u.ButtplugInitException,this._logger,"RequestServerInfo must be first message received by server.",t);switch(e.Type){case i.RequestLog:const r=e;return this._logger.Debug(`Server: RequestLog received for level ${r.LogLevel}`),r.LogLevel===c.ButtplugLogLevel[c.ButtplugLogLevel.Off]?this._logger.removeListener("log",this.OnLogMessage):this._outgoingLogLevel===c.ButtplugLogLevel.Off&&this._logger.addListener("log",this.OnLogMessage),this._logger.MaximumEventLogLevel=c.ButtplugLogLevel[r.LogLevel],this._outgoingLogLevel=c.ButtplugLogLevel[r.LogLevel],new i.Ok(r.Id);case i.Ping:return new i.Ok(e.Id);case i.RequestServerInfo:this._logger.Debug("Server: RequestServerInfo received.");const n=e;if(this._clientSchemaVersion>1)throw u.ButtplugException.LogAndError(u.ButtplugInitException,this._logger,`Client schema (${this._clientSchemaVersion}) newer than `+"server schema (1). Please upgrade server.",t);return this._receivedRequestServerInfo=!0,this._clientSchemaVersion=n.MessageVersion,this._clientName=n.ClientName,this._connected=!0,new i.ServerInfo(0,0,0,s.GetSchemaVersion(),this._maxPingTime,this._serverName,t);case i.Test:return this._logger.Debug("Server: Test received."),new i.Test(e.TestString,e.Id)}return yield this._deviceManager.SendMessage(e)})),this.Shutdown=()=>n(this,void 0,void 0,(function*(){return this.Disconnect(),yield this._deviceManager.Shutdown()})),this.OnLogMessage=e=>{e.LogLevel>this._outgoingLogLevel||this.SendOutgoingMessage(new i.Log(c.ButtplugLogLevel[e.LogLevel],e.Message))},this.SendOutgoingMessage=e=>{if(this._connected){if(-1===this._clientSchemaVersion)throw u.ButtplugException.LogAndError(u.ButtplugMessageException,this._logger,"Cannot discern client schema version. Was RequestServerInfo message sent?");for(;e.SchemaVersion!==this._clientSchemaVersion&&e.SchemaVersion>0;)e=e.DowngradeMessage();this.emit("message",e)}},this._logger.Info(`Server: Starting Buttplug Server: ${this._serverName}`),this._deviceManager=new o.DeviceManager(e=>this.SendOutgoingMessage(e))}get DeviceManagers(){return this._deviceManager.DeviceManagers}}},aUsF:function(e,t,r){"use strict";var n=Array.isArray,i=Object.keys,s=Object.prototype.hasOwnProperty;e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var o,a,c,l=n(t),u=n(r);if(l&&u){if((a=t.length)!=r.length)return!1;for(o=a;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(l!=u)return!1;var h=t instanceof Date,d=r instanceof Date;if(h!=d)return!1;if(h&&d)return t.getTime()==r.getTime();var p=t instanceof RegExp,f=r instanceof RegExp;if(p!=f)return!1;if(p&&f)return t.toString()==r.toString();var m=i(t);if((a=m.length)!==i(r).length)return!1;for(o=a;0!=o--;)if(!s.call(r,m[o]))return!1;for(o=a;0!=o--;)if(!e(t[c=m[o]],r[c]))return!1;return!0}return t!=t&&r!=r}},b36G:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Decb"),i=r("Decb");t.ClassTransformer=i.ClassTransformer,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r("CP53"));var s,o=new n.ClassTransformer;t.classToPlain=function(e,t){return o.classToPlain(e,t)},t.classToPlainFromExist=function(e,t,r){return o.classToPlainFromExist(e,t,r)},t.plainToClass=function(e,t,r){return o.plainToClass(e,t,r)},t.plainToClassFromExist=function(e,t,r){return o.plainToClassFromExist(e,t,r)},t.classToClass=function(e,t){return o.classToClass(e,t)},t.classToClassFromExist=function(e,t,r){return o.classToClassFromExist(e,t,r)},t.serialize=function(e,t){return o.serialize(e,t)},t.deserialize=function(e,t,r){return o.deserialize(e,t,r)},t.deserializeArray=function(e,t,r){return o.deserializeArray(e,t,r)},(s=t.TransformationType||(t.TransformationType={}))[s.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",s[s.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",s[s.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"},bTiy:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("o4Wz");t.TestDeviceImpl=class extends i.ButtplugDeviceImpl{constructor(e){super(e,e),this._connected=!0,this._lastValueWritten=[],this._valueToRead=new Map}get Connected(){return this._connected}get LastValueWritten(){return this._lastValueWritten.shift()}SetValueToRead(e,t){this._valueToRead.set(e,t)}Connect(){return n(this,void 0,void 0,(function*(){return Promise.resolve()}))}Disconnect(){this._connected=!1,this.emit("deviceremoved",this)}ReadValueInternal(e){return n(this,void 0,void 0,(function*(){if(!this._valueToRead.has(e.Endpoint))return Promise.resolve(Buffer.from([]));const t=this._valueToRead.get(e.Endpoint);return this._valueToRead.delete(e.Endpoint),Promise.resolve(t)}))}WriteValueInternal(e,t){return n(this,void 0,void 0,(function*(){return this._lastValueWritten.push([t.Endpoint,e]),Promise.resolve()}))}SubscribeToUpdatesInternal(e){return n(this,void 0,void 0,(function*(){return Promise.resolve()}))}ScheduleUpdateOnNextTick(e,t){process.nextTick(()=>this.emit("updateReceived",[e,t]))}}},bWPq:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level;if(n+="var "+h+" = errors;",e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:e.util.schemaHasRules(o,e.RULES.all)){d.schema=o,d.schemaPath=a,d.errSchemaPath=c;var f="key"+i,m="idx"+i,g="i"+i,v="' + "+f+" + '",y="data"+(d.dataLevel=e.dataLevel+1),_="dataProperties"+i,b=e.opts.ownProperties,w=e.baseId;b&&(n+=" var "+_+" = undefined; "),n+=b?" "+_+" = "+_+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+_+".length; "+m+"++) { var "+f+" = "+_+"["+m+"]; ":" for (var "+f+" in "+u+") { ",n+=" var startErrs"+i+" = errors; ";var S=f,C=e.compositeRule;e.compositeRule=d.compositeRule=!0;var E=e.validate(d);d.baseId=w,e.util.varOccurences(E,y)<2?n+=" "+e.util.varReplace(E,y,S)+" ":n+=" var "+y+" = "+S+"; "+E+" ",e.compositeRule=d.compositeRule=C,n+=" if (!"+p+") { for (var "+g+"=startErrs"+i+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+v+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+v+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(n+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),l&&(n+=" break; "),n+=" } }"}return l&&(n+="  if ("+h+" == errors) {"),e.util.cleanUpCode(n)}},bejg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransformMetadata=function(e,t,r,n){this.target=e,this.propertyName=t,this.transformFn=r,this.options=n}},bnbC:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},bvhh:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,s=" ",o=e.dataLevel,a=e.schema[t],c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(o||""),h="valid"+e.level;if("#"==a||"#/"==a)e.isRoot?(n=e.async,i="validate"):(n=!0===e.root.schema.$async,i="root.refVal[0]");else{var d=e.resolveRef(e.baseId,a,e.isRoot);if(void 0===d){var p=e.MissingRefError.message(e.baseId,a);if("fail"==e.opts.missingRefs){e.logger.error(p),(v=v||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(a)+"' } ",!1!==e.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(a)+"' "),e.opts.verbose&&(s+=" , schema: "+e.util.toQuotedString(a)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),s+=" } "):s+=" {} ";var f=s;s=v.pop(),s+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+f+"]); ":" validate.errors = ["+f+"]; return false; ":" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(s+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,a,p);e.logger.warn(p),l&&(s+=" if (true) { ")}}else if(d.inline){var m=e.util.copy(e);m.level++;var g="valid"+m.level;m.schema=d.schema,m.schemaPath="",m.errSchemaPath=a,s+=" "+e.validate(m).replace(/validate\.schema/g,d.code)+" ",l&&(s+=" if ("+g+") { ")}else n=!0===d.$async||e.async&&!1!==d.$async,i=d.code}if(i){var v;(v=v||[]).push(s),s="",s+=e.opts.passContext?" "+i+".call(this, ":" "+i+"( ",s+=" "+u+", (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var y=s+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?e.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(s=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");l&&(s+=" var "+h+"; "),s+=" try { await "+y+"; ",l&&(s+=" "+h+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(s+=" "+h+" = false; "),s+=" } ",l&&(s+=" if ("+h+") { ")}else s+=" if (!"+y+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",l&&(s+=" else { ")}return s}},cSwh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("FzgR");t.defaultMetadataStorage=new n.MetadataStorage},cUtX:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,o=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(o||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+s+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",n="schema"+s):n=a;var p=d?"(new RegExp("+n+"))":e.usePattern(a);i+="if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'string') || ");var f=f||[];f.push(i+=" !"+p+".test("+h+") ) {   "),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",i+=d?""+n:""+e.util.toQuotedString(a),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=d?"' + "+n+" + '":""+e.util.escapeQuotes(a),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+e.util.toQuotedString(a),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),i+=!e.compositeRule&&u?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}},cjZW:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,s=" ",o=e.level,a=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,d="data"+(a||""),p="valid"+o,f="errs__"+o,m=e.opts.$data&&c&&c.$data;m?(s+=" var schema"+o+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",i="schema"+o):i=c;var g,v,y,_,b,w="definition"+o,S=this.definition,C="";if(m&&S.$data){var E=S.validateSchema;s+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+(b="keywordValidate"+o)+" = "+w+".validate;"}else{if(!(_=e.useCustomRule(this,c,e.schema,e)))return;i="validate.schema"+l,b=_.code,g=S.compile,v=S.inline,y=S.macro}var x=b+".errors",P="i"+o,I="ruleErr"+o,M=S.async;if(M&&!e.async)throw new Error("async keyword in sync schema");if(v||y||(s+=x+" = null;"),s+="var "+f+" = errors;var "+p+";",m&&S.$data&&(C+="}",s+=" if ("+i+" === undefined) { "+p+" = true; } else { ",E&&(C+="}",s+=" "+p+" = "+w+".validateSchema("+i+"); if ("+p+") { ")),v)s+=S.statements?" "+_.validate+" ":" "+p+" = "+_.validate+"; ";else if(y){var D=e.util.copy(e);C="",D.level++;var O="valid"+D.level;D.schema=_.validate,D.schemaPath="";var A=e.compositeRule;e.compositeRule=D.compositeRule=!0;var T=e.validate(D).replace(/validate\.schema/g,b);e.compositeRule=D.compositeRule=A,s+=" "+T}else{(L=L||[]).push(s),s="",s+="  "+b+".call( ",s+=e.opts.passContext?"this":"self",s+=g||!1===S.schema?" , "+d+" ":" , "+i+" , "+d+" , validate.schema"+e.schemaPath+" ",s+=" , (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var R=a?"data"+(a-1||""):"parentData",k=a?e.dataPathArr[a]:"parentDataProperty",V=s+=" , "+R+" , "+k+" , rootData )  ";s=L.pop(),!1===S.errors?(s+=" "+p+" = ",M&&(s+="await "),s+=V+"; "):s+=M?" var "+(x="customErrors"+o)+" = null; try { "+p+" = await "+V+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+x+" = e.errors; else throw e; } ":" "+x+" = null; "+p+" = "+V+"; "}if(S.modifying&&(s+=" if ("+R+") "+d+" = "+R+"["+k+"];"),s+=""+C,S.valid)h&&(s+=" if (true) { ");else{var L;s+=" if ( ",void 0===S.valid?(s+=" !",s+=y?""+O:""+p):s+=" "+!S.valid+" ",n=this.keyword,(L=L||[]).push(s+=") { "),(L=L||[]).push(s=""),s="",!1!==e.createErrors?(s+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var F=s;s=L.pop();var j=s+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+F+"]); ":" validate.errors = ["+F+"]; return false; ":" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";s=L.pop(),v?S.errors?"full"!=S.errors&&(s+="  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+I+" = vErrors["+P+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+I+".schemaPath === undefined) { "+I+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+I+".schema = "+i+"; "+I+".data = "+d+"; "),s+=" } "):!1===S.errors?s+=" "+j+" ":(s+=" if ("+f+" == errors) { "+j+" } else {  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+I+" = vErrors["+P+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+I+".schemaPath === undefined) { "+I+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+I+".schema = "+i+"; "+I+".data = "+d+"; "),s+=" } } "):y?(s+="   var err =   ",!1!==e.createErrors?(s+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(s+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; ")):!1===S.errors?s+=" "+j+" ":(s+=" if (Array.isArray("+x+")) { if (vErrors === null) vErrors = "+x+"; else vErrors = vErrors.concat("+x+"); errors = vErrors.length;  for (var "+P+"="+f+"; "+P+"<errors; "+P+"++) { var "+I+" = vErrors["+P+"]; if ("+I+".dataPath === undefined) "+I+".dataPath = (dataPath || '') + "+e.errorPath+";  "+I+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(s+=" "+I+".schema = "+i+"; "+I+".data = "+d+"; "),s+=" } } else { "+j+" } "),s+=" } ",h&&(s+=" else { ")}return s}},"d+r/":function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,o=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(o||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+s+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",n="schema"+s):n=a,i+="if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || ");var p=t,f=f||[];f.push(i+=" Object.keys("+h+").length "+("maxProperties"==t?">":"<")+" "+n+") { "),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=d?"' + "+n+" + '":""+a,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),i+=!e.compositeRule&&u?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}},"d17/":function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r}},eDuk:function(e,t,r){"use strict";var n=r("jQLo"),i=r("qXHa"),s=r("6pwk"),o=r("ugD5"),a=r("9x6x"),c=r("n+SQ"),l=r("wXyd"),u=r("ZsDt"),h=r("+9rK");e.exports=v,v.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var i=r(t);return!0!==r.$async&&(this.errors=r.errors),i},v.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},v.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,r,n);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return C(this,t=i.normalizeId(t||o)),this._schemas[t]=this._addSchema(e,r,n,!0),this},v.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},v.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(f)?f:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return n},v.prototype.getSchema=function(e){var t=y(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=i.schema.call(e,{schema:{}},t);if(r){var s=r.schema,a=r.root,c=r.baseId,l=n.call(e,s,a,void 0,c);return e._fragments[t]=new o({ref:t,fragment:!0,schema:s,root:a,baseId:c,validate:l}),l}}(this,e)}},v.prototype.removeSchema=function(e){if(e instanceof RegExp)return _(this,this._schemas,e),_(this,this._refs,e),this;switch(typeof e){case"undefined":return _(this,this._schemas),_(this,this._refs),this._cache.clear(),this;case"string":var t=y(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var s=this._getId(e);s&&(s=i.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this},v.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},v.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,i="",s=0;s<e.length;s++){var o=e[s];o&&(i+=n+o.dataPath+" "+o.message+r)}return i.slice(0,-r.length)},v.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var s=this._opts.serialize,a=s?s(e):e,c=this._cache.get(a);if(c)return c;n=n||!1!==this._opts.addUsedSchema;var l=i.normalizeId(this._getId(e));l&&n&&C(this,l);var u,h=!1!==this._opts.validateSchema&&!t;h&&!(u=l&&l==i.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=i.ids.call(this,e),p=new o({id:l,schema:e,localRefs:d,cacheKey:a,meta:r});return"#"!=l[0]&&n&&(this._refs[l]=p),this._cache.put(a,p),h&&u&&this.validateSchema(e,!0),p},v.prototype._compile=function(e,t){if(e.compiling)return e.validate=s,s.schema=e.schema,s.errors=null,s.root=t||s,!0===e.schema.$async&&(s.$async=!0),s;var r,i;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{i=n.call(this,e.schema,t,e.localRefs)}catch(o){throw delete e.validate,o}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function s(){var t=e.validate,r=t.apply(this,arguments);return s.errors=t.errors,r}},v.prototype.compileAsync=r("sagP");var d=r("//Jx");v.prototype.addKeyword=d.add,v.prototype.getKeyword=d.get,v.prototype.removeKeyword=d.remove,v.prototype.validateKeyword=d.validate;var p=r("iZoB");v.ValidationError=p.Validation,v.MissingRefError=p.MissingRef,v.$dataMetaSchema=u;var f="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function v(e){if(!(this instanceof v))return new v(e);e=this._opts=h.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:E,warn:E,error:E};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new s,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"auto":return S;case"id":return b;default:return w}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function(e){for(var t=h.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats)e.addFormat(t,e._opts.formats[t])}(this),function(e){var t;if(e._opts.$data&&(t=r("RsDv"),e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var n=r("bnbC");e._opts.$data&&(n=u(n,g)),e.addMetaSchema(n,f,!0),e._refs["http://json-schema.org/schema"]=f}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function y(e,t){return t=i.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function _(e,t,r){for(var n in t){var i=t[n];i.meta||r&&!r.test(n)||(e._cache.del(i.cacheKey),delete t[n])}}function b(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function w(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function S(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function C(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function E(){}},eXaU:function(e,t,r){"use strict";var n=r("bnbC");e.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},eY4P:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="valid"+i,d="errs__"+i,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,g="i"+i,v=p.dataLevel=e.dataLevel+1,y="data"+v,_=e.baseId;if(n+="var "+d+" = errors;var "+h+";",Array.isArray(o)){var b=e.schema.additionalItems;if(!1===b){n+=" "+h+" = "+u+".length <= "+o.length+"; ";var w=c;c=e.errSchemaPath+"/additionalItems";var S=S||[];S.push(n+="  if (!"+h+") {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+o.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var C=n;n=S.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+C+"]); ":" validate.errors = ["+C+"]; return false; ":" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c=w,l&&(f+="}",n+=" else { ")}var E=o;if(E)for(var x,P=-1,I=E.length-1;P<I;)if(x=E[P+=1],e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0:e.util.schemaHasRules(x,e.RULES.all)){n+=" "+m+" = true; if ("+u+".length > "+P+") { ";var M=u+"["+P+"]";p.schema=x,p.schemaPath=a+"["+P+"]",p.errSchemaPath=c+"/"+P,p.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0),p.dataPathArr[v]=P;var D=e.validate(p);p.baseId=_,e.util.varOccurences(D,y)<2?n+=" "+e.util.varReplace(D,y,M)+" ":n+=" var "+y+" = "+M+"; "+D+" ",n+=" }  ",l&&(n+=" if ("+m+") { ",f+="}")}"object"==typeof b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))&&(p.schema=b,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+m+" = true; if ("+u+".length > "+o.length+") {  for (var "+g+" = "+o.length+"; "+g+" < "+u+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0),M=u+"["+g+"]",p.dataPathArr[v]=g,D=e.validate(p),p.baseId=_,e.util.varOccurences(D,y)<2?n+=" "+e.util.varReplace(D,y,M)+" ":n+=" var "+y+" = "+M+"; "+D+" ",l&&(n+=" if (!"+m+") break; "),n+=" } }  ",l&&(n+=" if ("+m+") { ",f+="}"))}else(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0:e.util.schemaHasRules(o,e.RULES.all))&&(p.schema=o,p.schemaPath=a,p.errSchemaPath=c,n+="  for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0),M=u+"["+g+"]",p.dataPathArr[v]=g,D=e.validate(p),p.baseId=_,e.util.varOccurences(D,y)<2?n+=" "+e.util.varReplace(D,y,M)+" ":n+=" var "+y+" = "+M+"; "+D+" ",l&&(n+=" if (!"+m+") break; "),n+=" }");return l&&(n+=" "+f+" if ("+d+" == errors) {"),e.util.cleanUpCode(n)}},fCiX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("s26e");t.ButtplugDeviceWriteOptions=class{constructor(e){this.Endpoint=n.Endpoints.Tx,this.WriteWithResponse=!1,Object.assign(this,e)}}},fouG:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("AdGg"),s=r("o4Wz"),o=r("s26e"),a=r("q+Aq");t.WebBluetoothDevice=class extends s.ButtplugDeviceImpl{constructor(e,t){super(t.name,t.id),this._deviceConfig=e,this._device=t,this._notificationHandlers=new Map,this._characteristics=new Map,this.Connect=()=>n(this,void 0,void 0,(function*(){this._logger.Debug(`WebBluetoothDevice: ${this.constructor.name} connecting`),this._device.addEventListener("gattserverdisconnected",this.OnDisconnect),this._server=yield this._device.gatt.connect();for(const[t,r]of this._deviceConfig.Services){let n;try{try{if(!this._device.hasService(t))continue}catch(e){}n=yield this._server.getPrimaryService(t)}catch(e){this._logger.Debug(`Cannot find service ${t} on ${this._device.name}, continuing search: ${e}`);continue}if(0!==r.size)for(const[e,t]of r)this.SetNewCharacteristic(o.GetEndpoint(e),yield n.getCharacteristic(t));else{let t=[];try{t=yield n.getCharacteristics()}catch(e){throw i.ButtplugException.LogAndError(i.ButtplugDeviceException,this._logger,`getCharacteristics not implemented on this platform, cannot connect to ${this._device.name}`)}for(const e of t)e.properties.write||e.properties.writeWithoutResponse||e.properties.reliableWrite?this.SetNewCharacteristic(o.Endpoints.Tx,e):(e.properties.read||e.properties.broadcast||e.properties.notify||e.properties.indicate)&&this.SetNewCharacteristic(o.Endpoints.Rx,e)}}if(0===this._characteristics.size)throw new i.ButtplugDeviceException(`No usable characteristics found for ${this._device.name}`)})),this.Disconnect=()=>n(this,void 0,void 0,(function*(){for(const e of this._notificationHandlers.keys())yield this.Unsubscribe(new a.ButtplugDeviceReadOptions({Endpoint:e}));this._server.disconnect()})),this.OnDisconnect=()=>{this._logger.Debug(`WebBluetoothDevice: ${this.constructor.name} disconnecting`),this._device.removeEventListener("gattserverdisconnected",this.OnDisconnect),this.emit("deviceremoved")},this.WriteValueInternal=(e,t)=>n(this,void 0,void 0,(function*(){this.CheckForCharacteristic(t.Endpoint);const r=this._characteristics.get(t.Endpoint);return yield r.writeValue(e)})),this.ReadValueInternal=e=>n(this,void 0,void 0,(function*(){this.CheckForCharacteristic(e.Endpoint);const t=this._characteristics.get(e.Endpoint);return Buffer.from((yield t.readValue()).buffer)})),this.SubscribeToUpdatesInternal=e=>n(this,void 0,void 0,(function*(){if(this.CheckForCharacteristic(e.Endpoint),this._notificationHandlers.has(e.Endpoint))throw i.ButtplugException.LogAndError(i.ButtplugDeviceException,this._logger,`${this._device.name} already subscribed to updates on characteristic ${e.Endpoint}`);const t=this._characteristics.get(e.Endpoint);this._logger.Trace(`WebBluetoothDevice: ${this.constructor.name} subscribing to updates from ${t.uuid}`),yield t.startNotifications(),this._notificationHandlers.set(e.Endpoint,t=>{this.CharacteristicValueChanged(t,e.Endpoint)}),t.addEventListener("characteristicvaluechanged",this._notificationHandlers.get(e.Endpoint))})),this.Unsubscribe=e=>n(this,void 0,void 0,(function*(){if(this.CheckForCharacteristic(e.Endpoint),!this._notificationHandlers.has(e.Endpoint))throw i.ButtplugException.LogAndError(i.ButtplugDeviceException,this._logger,`${this._device.name} not subscribed to updates on characteristic ${e.Endpoint}`);const t=this._characteristics.get(e.Endpoint);this._logger.Trace(`WebBluetoothDevice: ${this.constructor.name} unsubscribing to updates from ${t.uuid}`),t.removeEventListener("characteristicvaluechanged",this._notificationHandlers.get(e.Endpoint)),this._notificationHandlers.delete(e.Endpoint),yield t.stopNotifications()})),this.CharacteristicValueChanged=(e,t)=>{const r=e.target.value,n=Buffer.from(r.buffer,r.byteOffset,r.byteLength);this.UpdateReceived(t,n)}}get Connected(){return this._server.connected}CheckForCharacteristic(e){if(!this._characteristics.has(e))throw i.ButtplugException.LogAndError(i.ButtplugDeviceException,this._logger,`Characteristic ${e} does not exist on device ${this._device.name}.`)}SetNewCharacteristic(e,t){if(this._characteristics.has(e))throw new i.ButtplugDeviceException(`Endpoint ${e} already defined on ${this._device.name}`);this._characteristics.set(e,t)}}},hsbB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("+qE3"),i=r("/oyJ"),s=r("KMqf"),o=r("36dr"),a=r("bTiy");t.TestDeviceSubtypeManager=class extends n.EventEmitter{constructor(){super(),this._logger=s.ButtplugLogger.Logger,this._isScanning=!1;const e=new a.TestDeviceImpl("Test Vibration Device");this._testVibrationProtocol=new i.TestDeviceProtocol(e.Name,e,!0,!1,!1),this._testVibrationDevice=new o.ButtplugDevice(this._testVibrationProtocol,e);const t=new a.TestDeviceImpl("Test Linear Device");this._testLinearProtocol=new i.TestDeviceProtocol(t.Name,t,!1,!0,!1),this._testLinearDevice=new o.ButtplugDevice(this._testLinearProtocol,t);const r=new a.TestDeviceImpl("Test Rotation Device");this._testRotationProtocol=new i.TestDeviceProtocol(r.Name,r,!1,!1,!0),this._testRotationDevice=new o.ButtplugDevice(this._testRotationProtocol,r)}SetLogger(e){this._logger=e}ConnectVibrationDevice(){this._logger.Debug("TestDeviceManager: Connecting Vibration Device"),this.emit("deviceadded",this._testVibrationDevice)}ConnectLinearDevice(){this._logger.Debug("TestDeviceManager: Connecting Linear Device"),this.emit("deviceadded",this._testLinearDevice)}ConnectRotationDevice(){this._logger.Debug("TestDeviceManager: Connecting Rotation Device"),this.emit("deviceadded",this._testRotationDevice)}StartScanning(){this._logger.Debug("TestDeviceManager: Starting Scan"),this._isScanning=!0,setTimeout(()=>{this.ConnectVibrationDevice(),this.ConnectLinearDevice(),this.ConnectRotationDevice()},50),setTimeout(()=>this.StopScanning(),100)}get VibrationDevice(){return this._testVibrationDevice}get LinearDevice(){return this._testLinearDevice}get RotationDevice(){return this._testRotationDevice}get VibrationProtocol(){return this._testVibrationProtocol}get LinearProtocol(){return this._testLinearProtocol}get RotationProtocol(){return this._testRotationProtocol}StopScanning(){this._logger.Debug("TestDeviceManager: Stopping Scan"),this._isScanning=!1,this.emit("scanningfinished")}get IsScanning(){return this._isScanning}}},iZoB:function(e,t,r){"use strict";var n=r("qXHa");function i(e,t,r){this.message=r||i.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function s(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:s((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:s(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},ialn:function(e,t,r){"use strict";var n=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,i,s,o,a,c,l,u,h){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var d in r(s,o,a,c,l,u,h),s){var p=s[d];if(Array.isArray(p)){if(d in n.arrayKeywords)for(var f=0;f<p.length;f++)e(t,r,i,p[f],o+"/"+d+"/"+f,a,o,d,s,f)}else if(d in n.propsKeywords){if(p&&"object"==typeof p)for(var m in p)e(t,r,i,p[m],o+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,o,d,s,m)}else(d in n.keywords||t.allKeys&&!(d in n.skipKeywords))&&e(t,r,i,p,o+"/"+d,a,o,d,s)}i(s,o,a,c,l,u,h)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},jQLo:function(e,t,r){"use strict";var n=r("qXHa"),i=r("+9rK"),s=r("iZoB"),o=r("9x6x"),a=r("1QhW"),c=i.ucs2length,l=r("aUsF"),u=s.Validation;function h(e,t,r){var n=p.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(this._compilations[n=this._compilations.length]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function d(e,t,r){var n=p.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function p(e,t,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==e&&i.root==t&&i.baseId==r)return n}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+i.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function v(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,p,_){var b=this,w=this._opts,S=[void 0],C={},E=[],x={},P=[],I={},M=[],D=h.call(this,t,r=r||{schema:t,refVal:S,refs:C},_),O=this._compilations[D.index];if(D.compiling)return O.callValidate=function e(){var t=O.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var A=this._formats,T=this.RULES;try{var R=V(t,r,p,_);O.validate=R;var k=O.callValidate;return k&&(k.schema=R.schema,k.errors=null,k.refs=R.refs,k.refVal=R.refVal,k.root=R.root,k.$async=R.$async,w.sourceCode&&(k.source=R.source)),R}finally{d.call(this,t,r,_)}function V(t,o,h,d){var p=!o||o&&o.schema==t;if(o.schema!=r.schema)return e.call(b,t,o,h,d);var _,x=!0===t.$async,I=a({isTop:!0,schema:t,isRoot:p,baseId:d,root:o,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:s.MissingRef,RULES:T,validate:a,util:i,resolve:n,resolveRef:L,usePattern:N,useDefault:$,useCustomRule:U,opts:w,formats:A,logger:b.logger,self:b});I=y(S,g)+y(E,f)+y(P,m)+y(M,v)+I,w.processCode&&(I=w.processCode(I));try{_=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",I)(b,T,A,r,S,P,M,l,c,u),S[0]=_}catch(D){throw b.logger.error("Error compiling schema, function code:",I),D}return _.schema=t,_.errors=null,_.refs=C,_.refVal=S,_.root=p?_:o,x&&(_.$async=!0),!0===w.sourceCode&&(_.source={code:I,patterns:E,defaults:P}),_}function L(t,i,s){i=n.url(t,i);var o,a,c=C[i];if(void 0!==c)return j(o=S[c],a="refVal["+c+"]");if(!s&&r.refs){var l=r.refs[i];if(void 0!==l)return j(o=r.refVal[l],a=F(i,o))}a=F(i);var u=n.call(b,V,r,i);if(void 0===u){var h=p&&p[i];h&&(u=n.inlineRef(h,w.inlineRefs)?h:e.call(b,h,r,p,t))}if(void 0!==u)return function(e,t){S[C[e]]=t}(i,u),j(u,a);!function(e){delete C[e]}(i)}function F(e,t){var r=S.length;return S[r]=t,C[e]=r,"refVal"+r}function j(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function N(e){var t=x[e];return void 0===t&&(t=x[e]=E.length,E[t]=e),"pattern"+t}function $(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return i.toQuotedString(e);case"object":if(null===e)return"null";var t=o(e),r=I[t];return void 0===r&&(r=I[t]=P.length,P[r]=e),"default"+r}}function U(e,t,r,n){if(!1!==b._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var s=e.definition.validateSchema;if(s&&!s(t)){var o="keyword schema is invalid: "+b.errorsText(s.errors);if("log"!=b._opts.validateSchema)throw new Error(o);b.logger.error(o)}}var a,c=e.definition.compile,l=e.definition.inline,u=e.definition.macro;if(c)a=c.call(b,t,r,n);else if(u)a=u.call(b,t,r,n),!1!==w.validateSchema&&b.validateSchema(a,!0);else if(l)a=l.call(b,n,e.keyword,t,r);else if(!(a=e.definition.validate))return;if(void 0===a)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var h=M.length;return M[h]=a,{code:"customRule"+h,validate:a}}}},kFR6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("+qE3");var i;!function(e){e[e.Off=0]="Off",e[e.Fatal=1]="Fatal",e[e.Error=2]="Error",e[e.Warn=3]="Warn",e[e.Info=4]="Info",e[e.Debug=5]="Debug",e[e.Trace=6]="Trace"}(i=t.ButtplugLogLevel||(t.ButtplugLogLevel={}));class s{constructor(e,t){const r=new Date,n=r.getHours(),i=r.getMinutes(),s=r.getSeconds();this.timestamp=`${n}:${i}:${s}`,this.logMessage=e,this.logLevel=t}get Message(){return this.logMessage}get LogLevel(){return this.logLevel}get Timestamp(){return this.timestamp}get FormattedMessage(){return`${i[this.logLevel]} : ${this.timestamp} : ${this.logMessage}`}}t.LogMessage=s;class o extends n.EventEmitter{constructor(){super(),this.maximumConsoleLogLevel=i.Off,this.maximumEventLogLevel=i.Off}static get Logger(){return void 0===o.sLogger&&(o.sLogger=new o),this.sLogger}get MaximumConsoleLogLevel(){return this.maximumConsoleLogLevel}set MaximumConsoleLogLevel(e){this.maximumConsoleLogLevel=e}get MaximumEventLogLevel(){return this.maximumEventLogLevel}set MaximumEventLogLevel(e){this.maximumEventLogLevel=e}Fatal(e){this.AddLogMessage(e,i.Fatal)}Error(e){this.AddLogMessage(e,i.Error)}Warn(e){this.AddLogMessage(e,i.Warn)}Info(e){this.AddLogMessage(e,i.Info)}Debug(e){this.AddLogMessage(e,i.Debug)}Trace(e){this.AddLogMessage(e,i.Trace)}AddLogMessage(e,t){if(t>this.maximumEventLogLevel&&t>this.maximumConsoleLogLevel)return;const r=new s(e,t);t<=this.maximumConsoleLogLevel&&console.log(r.FormattedMessage),t<=this.maximumEventLogLevel&&this.emit("log",r)}}o.sLogger=void 0,t.ButtplugLogger=o},kO1a:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr");t.Motorbunny=class extends o.ButtplugDeviceProtocol{constructor(e){super("Motorbunny",e),this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Speeds.length)throw new s.ButtplugDeviceException("Motorbunny devices require VibrateCmd to have 1 speed command, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleRotateCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Rotations.length)throw new s.ButtplugDeviceException("Motorbunny devices require RotateCmd to have 1 speed command, "+`${e.Rotations.length} sent.`,e.Id);const t=Math.floor(255*e.Rotations[0].Speed);if(t<5){const t=Buffer.from([160,0,0,0,0,236]);return yield this._device.WriteValue(t),new i.Ok(e.Id)}let r=[];for(let i=0;i<7;++i)r=r.concat([e.Rotations[0].Clockwise?42:41,t]);const n=255&r.reduce((e,t)=>e+t);return r=[175].concat(r).concat([n,236]),yield this._device.WriteValue(Buffer.from(r)),new i.Ok(e.Id)})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){const t=Math.floor(255*e.Speed);if(t<5){const t=Buffer.from([240,0,0,0,0,236]);return yield this._device.WriteValue(t),new i.Ok(e.Id)}let r=[];for(let e=0;e<7;++e)r=r.concat([t,20]);const n=255&r.reduce((e,t)=>e+t);return r=[255].concat(r).concat([n,236]),yield this._device.WriteValue(Buffer.from(r)),new i.Ok(e.Id)})),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd),this.MsgFuncs.set(i.RotateCmd,this.HandleRotateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},RotateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}},mNvP:function(e,t){var r;!function(e){!function(t){var r="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=i(e);function i(e,t){return function(r,n){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0===r.Reflect?r.Reflect=e:n=i(r.Reflect,n),function(e){var t=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,o={__proto__:[]}instanceof Array,a=!s&&!o,c={create:s?function(){return A(Object.create(null))}:o?function(){return A({__proto__:null})}:function(){return A({})},has:a?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:a?function(e,r){return t.call(e,r)?e[r]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),u="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=u||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,s)},t.prototype.entries=function(){return new r(this._keys,this._values,o)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function s(e,t){return t}function o(e,t){return[e,t]}}():Map,d=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}():Set,p=new(u||"function"!=typeof WeakMap?function(){var e=c.create(),r=n();return function(){function e(){this._key=n()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=n()},e}();function n(){var t;do{t="@@WeakMap@@"+o()}while(c.has(e,t));return e[t]=!0,t}function i(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:c.create()})}return e[r]}function s(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function o(){var e="function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(16)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(16)):s(new Uint8Array(16),16):s(new Array(16),16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",r=0;r<16;++r){var n=e[r];4!==r&&6!==r&&8!==r||(t+="-"),n<16&&(t+="0"),t+=n.toString(16).toLowerCase()}return t}}():WeakMap);function f(e,t,r){var n=p.get(e);if(b(n)){if(!r)return;n=new h,p.set(e,n)}var i=n.get(t);if(b(i)){if(!r)return;i=new h,n.set(t,i)}return i}function m(e,t,r){var n=f(t,r,!1);return!b(n)&&!!n.has(e)}function g(e,t,r){var n=f(t,r,!1);if(!b(n))return n.get(e)}function v(e,t,r,n){f(r,n,!0).set(e,t)}function y(e,t){var r=[],n=f(e,t,!1);if(b(n))return r;for(var s=function(e){var t=I(e,i);if(!x(t))throw new TypeError;var r=t.call(e);if(!S(r))throw new TypeError;return r}(n.keys()),o=0;;){var a=M(s);if(!a)return r.length=o,r;var c=a.value;try{r[o]=c}catch(l){try{D(s)}finally{throw l}}o++}}function _(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function b(e){return void 0===e}function w(e){return null===e}function S(e){return"object"==typeof e?null!==e:"function"==typeof e}function C(e){var t=function(e,t){switch(_(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=I(e,n);if(void 0!==r){var i=r.call(e,"string");if(S(i))throw new TypeError;return i}return function(e,t){var r,n,i=e.toString;if(x(i)&&!S(n=i.call(e)))return n;if(x(r=e.valueOf)&&!S(n=r.call(e)))return n;throw new TypeError}(e)}(e);return"symbol"==typeof t?t:function(e){return""+e}(t)}function E(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"function"==typeof e}function P(e){return"function"==typeof e}function I(e,t){var r=e[t];if(null!=r){if(!x(r))throw new TypeError;return r}}function M(e){var t=e.next();return!t.done&&t}function D(e){var t=e.return;t&&t.call(e)}function O(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i?t:i===e?t:i}function A(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,r,n){if(b(r)){if(!E(e))throw new TypeError;if(!P(t))throw new TypeError;return function(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!b(n)&&!w(n)){if(!P(n))throw new TypeError;t=n}}return t}(e,t)}if(!E(e))throw new TypeError;if(!S(t))throw new TypeError;if(!S(n)&&!b(n)&&!w(n))throw new TypeError;return w(n)&&(n=void 0),function(e,t,r,n){for(var i=e.length-1;i>=0;--i){var s=(0,e[i])(t,r,n);if(!b(s)&&!w(s)){if(!S(s))throw new TypeError;n=s}}return n}(e,t,r=C(r),n)})),e("metadata",(function(e,t){return function(r,n){if(!S(r))throw new TypeError;if(!b(n)&&!function(e){switch(_(e)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;v(e,t,r,n)}})),e("defineMetadata",(function(e,t,r,n){if(!S(r))throw new TypeError;return b(n)||(n=C(n)),v(e,t,r,n)})),e("hasMetadata",(function(e,t,r){if(!S(t))throw new TypeError;return b(r)||(r=C(r)),function e(t,r,n){if(m(t,r,n))return!0;var i=O(r);return!w(i)&&e(t,i,n)}(e,t,r)})),e("hasOwnMetadata",(function(e,t,r){if(!S(t))throw new TypeError;return b(r)||(r=C(r)),m(e,t,r)})),e("getMetadata",(function(e,t,r){if(!S(t))throw new TypeError;return b(r)||(r=C(r)),function e(t,r,n){if(m(t,r,n))return g(t,r,n);var i=O(r);return w(i)?void 0:e(t,i,n)}(e,t,r)})),e("getOwnMetadata",(function(e,t,r){if(!S(t))throw new TypeError;return b(r)||(r=C(r)),g(e,t,r)})),e("getMetadataKeys",(function(e,t){if(!S(e))throw new TypeError;return b(t)||(t=C(t)),function e(t,r){var n=y(t,r),i=O(t);if(null===i)return n;var s=e(i,r);if(s.length<=0)return n;if(n.length<=0)return s;for(var o=new d,a=[],c=0,l=n;c<l.length;c++)o.has(p=l[c])||(o.add(p),a.push(p));for(var u=0,h=s;u<h.length;u++){var p;o.has(p=h[u])||(o.add(p),a.push(p))}return a}(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!S(e))throw new TypeError;return b(t)||(t=C(t)),y(e,t)})),e("deleteMetadata",(function(e,t,r){if(!S(t))throw new TypeError;b(r)||(r=C(r));var n=f(t,r,!1);if(b(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var i=p.get(t);return i.delete(r),i.size>0||(p.delete(t),!0)}))}(n)}()}(r||(r={}))},mQYA:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,o=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(o||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+s+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",n="schema"+s):n=a,i+="if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=!1===e.opts.unicode?" "+h+".length ":" ucs2length("+h+") ";var p=t,f=f||[];f.push(i+=" "+("maxLength"==t?">":"<")+" "+n+") { "),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=d?"' + "+n+" + '":""+a,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=f.pop(),i+=!e.compositeRule&&u?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}},"n+SQ":function(e,t,r){"use strict";var n=r("+9rK"),i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31],o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,a=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,h=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return n.copy(m[e="full"==e?"full":"fast"])}function g(e){var t=e.match(i);if(!t)return!1;var r,n=+t[2],o=+t[3];return n>=1&&n<=12&&o>=1&&o<=(2!=n||(r=+t[1])%4!=0||r%100==0&&r%400!=0?s[n]:29)}function v(e,t){var r=e.match(o);if(!r)return!1;var n=r[1],i=r[2],s=r[3];return(n<=23&&i<=59&&s<=59||23==n&&59==i&&60==s)&&(!t||r[5])}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:h,"json-pointer":d,"json-pointer-uri-fragment":p,"relative-json-pointer":f},m.full={date:g,time:v,"date-time":function(e){var t=e.split(y);return 2==t.length&&g(t[0])&&v(t[1],!0)},uri:function(e){return _.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(e){return e.length<=255&&a.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:h,"json-pointer":d,"json-pointer-uri-fragment":p,"relative-json-pointer":f};var y=/t|\s/i,_=/\/|:/,b=/[^\\]\\Z/;function w(e){if(b.test(e))return!1;try{return new RegExp(e),!0}catch(t){return!1}}},o4Wz:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("kFR6"),s=r("+qE3"),o=r("fCiX"),a=r("q+Aq");t.ButtplugDeviceImpl=class extends s.EventEmitter{constructor(e,t){super(),this._logger=i.ButtplugLogger.Logger,this.WriteValue=(e,t)=>n(this,void 0,void 0,(function*(){return yield this.WriteValueInternal(e,t||new o.ButtplugDeviceWriteOptions)})),this.ReadValue=e=>n(this,void 0,void 0,(function*(){return yield this.ReadValueInternal(e||new a.ButtplugDeviceReadOptions)})),this.WriteString=(e,t)=>n(this,void 0,void 0,(function*(){return yield this.WriteValue(Buffer.from(e),t)})),this.ReadString=e=>n(this,void 0,void 0,(function*(){return(yield this.ReadValue(e)).toString("utf-8")})),this.SubscribeToUpdates=e=>n(this,void 0,void 0,(function*(){return yield this.SubscribeToUpdatesInternal(e||new a.ButtplugDeviceReadOptions)})),this._name=e,this._address=t}get Name(){return this._name}get Address(){return this._address}UpdateReceived(e,t){this.emit("updateReceived",[e,t])}}},oF8a:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","title":"Buttplug Message Schema","version":1,"description":"The JSON Protocol format for the Buttplug Protocol.","components":{"Id":{"description":"User-set id for the message. 0 denotes system message and is reserved.","type":"integer","minimum":0,"maximum":4294967295},"SystemId":{"description":"Used for non-direct-reply messages that can only be sent from server to client, using the reserved system message Id of 0.","type":"integer","minimum":0,"maximum":0},"DeviceName":{"description":"Name of the device","type":"string"},"DeviceIndex":{"description":"Index used for referencing the device in device messages.","type":"integer","minimum":0},"IdMessage":{"properties":{"Id":{"$ref":"#/components/Id"}},"additionalProperties":false,"minProperties":1,"maxProperties":1,"required":["Id"]},"DeviceMessages":{"description":"A list of the messages a device will accept on this server implementation.","type":"array","items":{"type":"string","minItems":1}},"DeviceMessagesEx":{"description":"A list of the messages a device will accept on this server implementation.","type":"object","items":{"description":"A list of the messages attributes.","type":"object","properties":{"FeatureCount":{"$ref":"#/components/FeatureCount"}},"additionalProperties":true,"minItems":1}},"SystemIdMessage":{"description":"Message sent by the server that is not in direct reply to a message send from the client, and always uses system Id.","properties":{"Id":{"$ref":"#/components/SystemId"}},"additionalProperties":false,"minProperties":1,"maxProperties":1,"required":["Id"]},"DeviceIndexMessage":{"properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"}},"additionalProperties":false,"minProperties":2,"maxProperties":2,"required":["Id","DeviceIndex"]},"FeatureCount":{"description":"Number of features on device.","type":"integer","minimum":0}},"messages":{"Ok":{"type":"object","description":"Signifies successful processing of the message indicated by the id.","anyOf":[{"$ref":"#/components/IdMessage"}]},"Ping":{"type":"object","description":"Connection keep-alive message.","anyOf":[{"$ref":"#/components/IdMessage"}]},"Error":{"type":"object","description":"Signifies the server encountered an error while processing the message indicated by the id.","properties":{"Id":{"$ref":"#/components/Id"},"ErrorMessage":{"type":"string"},"ErrorCode":{"type":"number","minimum":0,"maximum":4}},"additionalProperties":false,"minProperties":3,"maxProperties":3,"required":["Id","ErrorMessage","ErrorCode"]},"Test":{"type":"object","description":"Used for connection/application testing. Causes server to echo back the string sent. Sending string of \'Error\' will result in a server error. ","properties":{"Id":{"$ref":"#/components/Id"},"TestString":{"description":"String to be echo\'d back from server. Setting this to \'Error\' will cause an error to be thrown.","type":"string"}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","TestString"]},"DeviceList":{"type":"object","description":"List of all available devices known to the system.","properties":{"Id":{"$ref":"#/components/Id"},"Devices":{"description":"Array of device ids and names.","type":"array","items":{"type":"object","properties":{"DeviceName":{"$ref":"#/components/DeviceName"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"DeviceMessages":{"oneOf":[{"$ref":"#/components/DeviceMessages"},{"$ref":"#/components/DeviceMessagesEx"}]}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["DeviceName","DeviceIndex","DeviceMessages"]},"minItems":0}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","Devices"]},"DeviceAdded":{"type":"object","description":"Notifies client that a device of a certain type has been added to the server.","properties":{"Id":{"$ref":"#/components/SystemId"},"DeviceName":{"$ref":"#/components/DeviceName"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"DeviceMessages":{"oneOf":[{"$ref":"#/components/DeviceMessages"},{"$ref":"#/components/DeviceMessagesEx"}]}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceName","DeviceIndex","DeviceMessages"]},"DeviceRemoved":{"type":"object","description":"Notifies client that a device of a certain type has been removed from the server.","anyOf":[{"$ref":"#/components/DeviceIndexMessage"}]},"RequestDeviceList":{"type":"object","description":"Request for the server to send a list of devices to the client.","anyOf":[{"$ref":"#/components/IdMessage"}]},"StartScanning":{"type":"object","description":"Request for the server to start scanning for new devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"StopScanning":{"type":"object","description":"Request for the server to stop scanning for new devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"ScanningFinished":{"type":"object","description":"Server notification to client that scanning has ended.","anyOf":[{"$ref":"#/components/SystemIdMessage"}]},"RequestLog":{"type":"object","description":"Request for server to stream log messages of a certain level to client.","properties":{"Id":{"$ref":"#/components/Id"},"LogLevel":{"description":"Maximum level of log message to receive.","enum":["Off","Fatal","Error","Warn","Info","Debug","Trace"]}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","LogLevel"]},"Log":{"type":"object","description":"Log message from the server.","properties":{"Id":{"$ref":"#/components/SystemId"},"LogLevel":{"description":"Log level of message.","enum":["Off","Fatal","Error","Warn","Info","Debug","Trace"]},"LogMessage":{"description":"Log message from server.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","LogLevel","LogMessage"]},"RequestServerInfo":{"type":"object","description":"Request server version, and relay client name.","properties":{"Id":{"$ref":"#/components/Id"},"ClientName":{"description":"Name of the client software.","type":"string"},"MessageVersion":{"description":"Message template version of the client software.","type":"integer","minimum":0}},"minProperties":2,"maxProperties":3,"additionalProperties":false,"required":["Id","ClientName"]},"ServerInfo":{"type":"object","description":"Server version information, in Major.Minor.Build format.","properties":{"Id":{"$ref":"#/components/Id"},"ServerName":{"description":"Name of the server. Can be 0-length.","type":"string"},"MessageVersion":{"description":"Message template version of the server software.","type":"integer","minimum":0},"MajorVersion":{"description":"Major version of server.","type":"integer","minimum":0},"MinorVersion":{"description":"Minor version of server.","type":"integer","minimum":0},"BuildVersion":{"description":"Build version of server.","type":"integer","minimum":0},"MaxPingTime":{"description":"Maximum time (in milliseconds) the server will wait between ping messages from client before shutting down.","type":"integer","minimum":0}},"minProperties":7,"maxProperties":7,"additionalProperties":false,"required":["Id","MajorVersion","MinorVersion","BuildVersion","MessageVersion","MaxPingTime","ServerName"]},"FleshlightLaunchFW12Cmd":{"type":"object","description":"Sends speed and position command to the Fleshlight Launch Device denoted by the device index.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Speed at which to move to designated position.","type":"integer","minimum":0,"maximum":99},"Position":{"description":"Position to which to move Fleshlight.","type":"integer","minimum":0,"maximum":99}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceIndex","Speed","Position"]},"LovenseCmd":{"type":"object","description":"Sends a command string to a Lovense device. Command string will be verified by sender.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Command to send to Lovense device.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"SingleMotorVibrateCmd":{"type":"object","description":"Sends a vibrate command to a device that supports vibration.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Device vibration speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Speed"]},"RawCmd":{"type":"object","description":"Sends a raw byte array to a device. Should only be used for testing/development.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Raw byte string to send to device.","type":"array","items":{"type":"integer","minimum":0,"maximum":255,"minItems":1}}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"KiirooCmd":{"type":"object","description":"Sends a raw byte string to a Kiiroo Onyx/Pearl device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Command to send to Kiiroo device.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"VorzeA10CycloneCmd":{"type":"object","description":"Sends a raw byte string to a Kiiroo Onyx/Pearl device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Rotation speed command for the Cyclone.","type":"integer","minimum":0,"maximum":100},"Clockwise":{"description":"True for clockwise rotation (in relation to device facing user), false for Counter-clockwise","type":"boolean"}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceIndex","Speed","Clockwise"]},"StopDeviceCmd":{"type":"object","description":"Stops the all actions currently being taken by a device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","DeviceIndex"]},"StopAllDevices":{"type":"object","description":"Stops all actions currently being taken by all connected devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"VibrateCmd":{"type":"object","description":"Sends a vibrate command to a device that supports vibration.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speeds":{"description":"Device vibration speeds (floating point, 0 < x < 1) keyed on vibrator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Vibrator number.","type":"integer","minimum":0},"Speed":{"description":"Vibration speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Index","Speed"]},"minItems":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Speeds"]},"RotateCmd":{"type":"object","description":"Sends a rotate command to a device that supports rotation.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Rotations":{"description":"Device rotation speeds (floating point, 0 < x < 1) keyed on rotator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Rotator number.","type":"integer","minimum":0},"Speed":{"description":"Rotation speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1},"Clockwise":{"description":"Rotation direction (boolean). Not all devices have a concept of actual clockwise.","type":"boolean"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Index","Speed","Clockwise"]},"minItems":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Rotations"]},"LinearCmd":{"type":"object","description":"Sends a linear movement command to a device that supports linear movements.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Vectors":{"description":"Device linear movement times (milliseconds) and positions (floating point, 0 < x < 1) keyed on linear actuator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Linear actuator number.","type":"integer","minimum":0},"Duration":{"description":"Linear movement time in milliseconds.","type":"number","minimum":0},"Position":{"description":"Linear movement position (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Index","Duration","Position"]}}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Vectors"]}},"type":"array","items":{"title":"Messages","description":"One or more messages validated by the Buttplug Message schema list.","properties":{"Ok":{"$ref":"#/messages/Ok"},"Error":{"$ref":"#/messages/Error"},"Ping":{"$ref":"#/messages/Ping"},"Test":{"$ref":"#/messages/Test"},"DeviceList":{"$ref":"#/messages/DeviceList"},"DeviceAdded":{"$ref":"#/messages/DeviceAdded"},"DeviceRemoved":{"$ref":"#/messages/DeviceRemoved"},"RequestDeviceList":{"$ref":"#/messages/RequestDeviceList"},"StopDeviceCmd":{"$ref":"#/messages/StopDeviceCmd"},"StopAllDevices":{"$ref":"#/messages/StopAllDevices"},"StartScanning":{"$ref":"#/messages/StartScanning"},"StopScanning":{"$ref":"#/messages/StopScanning"},"ScanningFinished":{"$ref":"#/messages/ScanningFinished"},"RequestLog":{"$ref":"#/messages/RequestLog"},"Log":{"$ref":"#/messages/Log"},"RequestServerInfo":{"$ref":"#/messages/RequestServerInfo"},"ServerInfo":{"$ref":"#/messages/ServerInfo"},"FleshlightLaunchFW12Cmd":{"$ref":"#/messages/FleshlightLaunchFW12Cmd"},"LovenseCmd":{"$ref":"#/messages/LovenseCmd"},"SingleMotorVibrateCmd":{"$ref":"#/messages/SingleMotorVibrateCmd"},"KiirooCmd":{"$ref":"#/messages/KiirooCmd"},"RawCmd":{"$ref":"#/messages/RawCmd"},"VorzeA10CycloneCmd":{"$ref":"#/messages/VorzeA10CycloneCmd"},"VibrateCmd":{"$ref":"#/messages/VibrateCmd"},"RotateCmd":{"$ref":"#/messages/RotateCmd"},"LinearCmd":{"$ref":"#/messages/LinearCmd"}},"additionalProperties":false,"minProperties":1,"maxProperties":1},"minItems":1,"additionalProperties":false}')},oxZ9:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr");class a extends o.ButtplugDeviceProtocol{constructor(e){super(`WeVibe ${e.Name}`,e),this._vibratorCount=1,this._eightBitSpeed=!1,this._hasRunCommand=!1,this._vibratorSpeed=[0,0],this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){if(e.Speeds.length<1||e.Speeds.length>this._vibratorCount)throw new s.ButtplugDeviceException("WeVibe devices require VibrateCmd at least "+`${this._vibratorCount} speed commands, ${e.Speeds.length} sent.`,e.Id);let t=!1;for(const i of e.Speeds)Math.abs(i.Speed-this._vibratorSpeed[i.Index])>.001&&(t=!0,this._vibratorSpeed[i.Index]=i.Speed);if(!t&&this._hasRunCommand)return new i.Ok(e.Id);this._hasRunCommand=!0;const r=Buffer.from([15,3,0,0,0,3,0,0]);let n=0,o=0;return this._eightBitSpeed?(n=Math.round(12*this._vibratorSpeed[0]),o=Math.round(12*this._vibratorSpeed[this._vibratorCount-1]),r[3]=o+3,r[4]=n+3,r[5]=0===n?0:1,r[5]|=0===o?0:2):(n=Math.round(15*this._vibratorSpeed[0]),o=Math.round(15*this._vibratorSpeed[this._vibratorCount-1]),r[3]=o,r[3]|=n<<4),0===n&&0===o&&(r[1]=0,r[3]=0,r[4]=0,r[5]=0),0===n&&0===o&&(r[1]=0,r[5]=0),yield this._device.WriteValue(r),new i.Ok(e.Id)})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){const t=[];for(let r=0;r<this._vibratorCount;r++)t.push(new i.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new i.VibrateCmd(t,e.DeviceIndex,e.Id))})),this._vibratorCount=a.DualVibes.find(t=>t===e.Name)?2:1,a.NameMap.hasOwnProperty(e.Name)&&(this._name=a.NameMap[e.Name]),this._eightBitSpeed=!!a.EightBitSpeed.find(t=>t===e.Name),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._vibratorCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}a.DualVibes=["Cougar","4 Plus","4plus","classic","Classic","Gala","Nova","NOVAV2","Sync","Vector"],a.NameMap={Cougar:"4 Plus","4plus":"4 Plus",classic:"Classic",NOVAV2:"Nova"},a.EightBitSpeed=["Moxie","Vector"],t.WeVibe=a},pfBK:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr"),a=r("s26e"),c=r("fCiX");class l{constructor(){this.Name="Lottie",this.VibeCount=1,this.VibeOrder=[0,1]}}class u extends o.ButtplugDeviceProtocol{constructor(e){super("LiBo",e),this._devInfo=new l,this._hasRunCommand=!1,this._vibratorSpeed=[0,0],this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){if(e.Speeds.length<1||e.Speeds.length>this._devInfo.VibeCount)throw new s.ButtplugDeviceException("Libo devices require VibrateCmd to have at most "+`${this._devInfo.VibeCount} speed commands, ${e.Speeds.length} sent.`,e.Id);const t=[!1,!1];for(const r of e.Speeds)Math.abs(r.Speed-this._vibratorSpeed[r.Index])>.001&&(t[r.Index]=!0,this._vibratorSpeed[r.Index]=r.Speed);if(t[this._devInfo.VibeOrder[0]]||!this._hasRunCommand){let e=a.Endpoints.Tx;1===this._devInfo.VibeCount&&0===Math.ceil(100*this._vibratorSpeed[this._devInfo.VibeOrder[0]])&&(e=a.Endpoints.TxMode),yield this._device.WriteValue(Buffer.from([Math.ceil(100*this._vibratorSpeed[this._devInfo.VibeOrder[0]])]),new c.ButtplugDeviceWriteOptions({Endpoint:e}))}return this._devInfo.VibeCount<2||!t[this._devInfo.VibeOrder[1]]&&this._hasRunCommand?(this._devInfo.VibeCount<2&&(this._hasRunCommand=!0),new i.Ok(e.Id)):(this._hasRunCommand=!0,yield this._device.WriteValue(Buffer.from([Math.ceil(3*this._vibratorSpeed[this._devInfo.VibeOrder[1]])]),new c.ButtplugDeviceWriteOptions({Endpoint:a.Endpoints.TxMode})),new i.Ok(e.Id))})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){const t=[];for(let r=0;r<this._devInfo.VibeCount;r++)t.push(new i.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new i.VibrateCmd(t,e.DeviceIndex,e.Id))}));const t=u.DevInfos.get(e.Name);void 0!==t&&(this._devInfo=t,this._name=`LiBo ${this._devInfo.Name}`),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}u.DevInfos=new Map([["PiPiJing",Object.assign(new l,{Name:"Elle",VibeCount:2,VibeOrder:[1,0]})],["XiaoLu",Object.assign(new l,{Name:"Lottie",VibeCount:1})],["SuoYinQiu",Object.assign(new l,{Name:"Karen",VibeCount:0})],["BaiHu",Object.assign(new l,{Name:"LaLa",VibeCount:2})],["LuXiaoHan",Object.assign(new l,{Name:"LuLu",VibeCount:1})],["MonsterPub",Object.assign(new l,{Name:"MonsterPub",VibeCount:1})]]),t.LiBo=u},"q+Aq":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("s26e");t.ButtplugDeviceReadOptions=class{constructor(e){this.Endpoint=n.Endpoints.Rx,this.Timeout=-1,this.ReadLength=-1,Object.assign(this,e)}}},qTHO:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,o=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(o||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+s+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",n="schema"+s):n=a,i+="var division"+s+";if (",d&&(i+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),i+=" (division"+s+" = "+h+" / "+n+", ",i+=e.opts.multipleOfPrecision?" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":" division"+s+" !== parseInt(division"+s+") ",i+=" ) ",d&&(i+="  )  ");var p=p||[];p.push(i+=" ) {   "),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=d?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var f=i;return i=p.pop(),i+=!e.compositeRule&&u?e.async?" throw new ValidationError(["+f+"]); ":" validate.errors = ["+f+"]; return false; ":" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}},qXHa:function(e,t,r){"use strict";var n=r("ThTW"),i=r("aUsF"),s=r("+9rK"),o=r("ugD5"),a=r("ialn");function c(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return c.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof o)return f(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i,s,a,u=l.call(this,t,r);return u&&(i=u.schema,t=u.root,a=u.baseId),i instanceof o?s=i.validate||e.call(this,i.schema,t,void 0,a):void 0!==i&&(s=f(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,a)),s}function l(e,t){var r=n.parse(t),i=g(r),s=m(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==s){var a=y(i),c=this._refs[a];if("string"==typeof c)return u.call(this,e,c,r);if(c instanceof o)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[a])instanceof o))return;if(c.validate||this._compile(c),a==y(t))return{schema:c,root:e,baseId:s};e=c}if(!e.schema)return;s=m(this._getId(e.schema))}return d.call(this,r,s,e.schema,e)}function u(e,t,r){var n=l.call(this,e,t);if(n){var i=n.schema,s=n.baseId;e=n.root;var o=this._getId(i);return o&&(s=_(s,o)),d.call(this,r,s,i,e)}}e.exports=c,c.normalizeId=y,c.fullPath=m,c.url=_,c.ids=function(e){var t=y(this._getId(e)),r={"":t},o={"":m(t,!1)},c={},l=this;return a(e,{allKeys:!0},(function(e,t,a,u,h,d,p){if(""!==t){var f=l._getId(e),m=r[u],g=o[u]+"/"+h;if(void 0!==p&&(g+="/"+("number"==typeof p?p:s.escapeFragment(p))),"string"==typeof f){f=m=y(m?n.resolve(m,f):f);var v=l._refs[f];if("string"==typeof v&&(v=l._refs[v]),v&&v.schema){if(!i(e,v.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=y(g))if("#"==f[0]){if(c[f]&&!i(e,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=e}else l._refs[f]=g}r[t]=m,o[t]=g}})),c},c.inlineRef=f,c.schema=l;var h=s.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function d(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),o=1;o<i.length;o++){var a=i[o];if(a){if(void 0===(r=r[a=s.unescapeFragment(a)]))break;var c;if(!h[a]&&((c=this._getId(r))&&(t=_(t,c)),r.$ref)){var u=_(t,r.$ref),d=l.call(this,n,u);d&&(r=d.schema,n=d.root,t=d.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var p=s.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&!e(r))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(r=t[i])&&!e(r))return!1}return!0}(e):t?function e(t){var r,n=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&(n+=e(r)),n==1/0)return 1/0}else for(var s in t){if("$ref"==s)return 1/0;if(p[s])n++;else if("object"==typeof(r=t[s])&&(n+=e(r)+1),n==1/0)return 1/0}return n}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=y(e)),g(n.parse(e))}function g(e){return n.serialize(e).split("#")[0]+"#"}var v=/#\/?$/;function y(e){return e?e.replace(v,""):""}function _(e,t){return t=y(t),n.resolve(e,t)}},s26e:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Tx="tx",e.Rx="rx",e.Command="command",e.Firmware="firmware",e.TxMode="txmode",e.TxVibrate="txvibrate",e.TxShock="txshock",e.TxVendorControl="txvendorcontrol",e.RxTouch="rxtouch",e.RxAccel="rxaccel",e.Whitelist="whitelist"}(n=t.Endpoints||(t.Endpoints={}));const i=(s=n,Object.assign(function(e){const t={};return Object.keys(e).forEach(r=>t[e[r]]=r),t}(s),s));var s;t.GetEndpoint=function(e){try{return i[e]}catch(t){return null}}},sagP:function(e,t,r){"use strict";var n=r("iZoB").MissingRef;e.exports=function e(t,r,i){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(i=r,r=void 0);var o=a(t).then((function(){var e=s._addSchema(t,void 0,r);return e.validate||function e(t){try{return s._compile(t)}catch(i){if(i instanceof n)return function(n){var i=n.missingSchema;if(l(i))throw new Error("Schema "+i+" is loaded but "+n.missingRef+" cannot be resolved");var o=s._loadingSchemas[i];return o||(o=s._loadingSchemas[i]=s._opts.loadSchema(i)).then(c,c),o.then((function(e){if(!l(i))return a(e).then((function(){l(i)||s.addSchema(e,i,void 0,r)}))})).then((function(){return e(t)}));function c(){delete s._loadingSchemas[i]}function l(e){return s._refs[e]||s._schemas[e]}}(i);throw i}}(e)}));return i&&o.then((function(e){i(null,e)}),i),o;function a(t){var r=t.$schema;return r&&!s.getSchema(r)?e.call(s,{$ref:r},!0):Promise.resolve()}}},"t+aO":function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="valid"+i,d=e.opts.$data&&o&&o.$data;d&&(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ");var p="schema"+i;if(!d)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=o;if(m)for(var g,v=-1,y=m.length-1;v<y;){g=m[v+=1];var _=e.schema.properties[g];_&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:e.util.schemaHasRules(_,e.RULES.all))||(f[f.length]=g)}}else f=o;if(d||f.length){var b=e.errorPath,w=d||f.length>=e.opts.loopRequired,S=e.opts.ownProperties;if(l)if(n+=" var missing"+i+"; ",w){d||(n+=" var "+p+" = validate.schema"+a+"; ");var C="' + "+(D="schema"+i+"["+(I="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,D,e.opts.jsonPointers)),n+=" var "+h+" = true; ",d&&(n+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),n+=" for (var "+I+" = 0; "+I+" < "+p+".length; "+I+"++) { "+h+" = "+u+"["+p+"["+I+"]] !== undefined ",S&&(n+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+p+"["+I+"]) "),n+="; if (!"+h+") break; } ",d&&(n+="  }  "),(x=x||[]).push(n+="  if (!"+h+") {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var E=n;n=x.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var x,P=f;if(P)for(var I=-1,M=P.length-1;I<M;)A=P[I+=1],I&&(n+=" || "),n+=" ( ( "+(V=u+(k=e.util.getProperty(A)))+" === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(A)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:k)+") ) ";n+=") {  ",C="' + "+(D="missing"+i)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,D,!0):b+" + "+D),(x=x||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",E=n,n=x.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(w){var D;d||(n+=" var "+p+" = validate.schema"+a+"; "),C="' + "+(D="schema"+i+"["+(I="i"+i)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,D,e.opts.jsonPointers)),d&&(n+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),n+=" for (var "+I+" = 0; "+I+" < "+p+".length; "+I+"++) { if ("+u+"["+p+"["+I+"]] === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+p+"["+I+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(n+="  }  ")}else{var O=f;if(O)for(var A,T=-1,R=O.length-1;T<R;){A=O[T+=1];var k=e.util.getProperty(A),V=(C=e.util.escapeQuotes(A),u+k);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,A,e.opts.jsonPointers)),n+=" if ( "+V+" === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(A)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+C+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else l&&(n+=" if (true) {");return n}},tCG2:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr");class a{constructor(){this.Brand="MagicMotion",this.Name="Smart Mini Vibe",this.VibeCount=1,this.Protocol=1,this.MaxSpeed=100}}class c extends o.ButtplugDeviceProtocol{constructor(e){super("MagicMotion",e),this._devInfo=new a,this._hasRunCommand=!1,this._vibratorSpeed=[0,0],this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){if(e.Speeds.length<1||e.Speeds.length>this._devInfo.VibeCount)throw new s.ButtplugDeviceException("MagicMotionn devices require VibrateCmd at most "+`${this._devInfo.VibeCount} speed commands, ${e.Speeds.length} sent.`,e.Id);let t,r=!1;for(const n of e.Speeds)Math.abs(n.Speed-this._vibratorSpeed[n.Index])>.001&&(r=!0,this._vibratorSpeed[n.Index]=n.Speed);if(!r&&this._hasRunCommand)return new i.Ok(e.Id);switch(this._devInfo.Protocol){case 1:t=Buffer.from([11,255,4,10,50,50,0,4,8,0,100,0]),t[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed);break;case 2:t=Buffer.from([16,255,4,10,50,10,0,4,8,0,100,0,4,8,0,100,1]),t[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed),this._devInfo.VibeCount>=2&&(t[14]=Math.round(this._vibratorSpeed[1]*this._devInfo.MaxSpeed));break;case 3:t=Buffer.from([11,255,4,10,70,70,0,4,8,0,100,0]),t[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed);break;default:throw new s.ButtplugDeviceException("Unknown communication protocol.")}return this._hasRunCommand=!0,yield this._device.WriteValue(t),new i.Ok(e.Id)})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){const t=[];for(let r=0;r<this._devInfo.VibeCount;r++)t.push(new i.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new i.VibrateCmd(t,e.DeviceIndex,e.Id))}));const t=c.DevInfos.get(e.Name);void 0!==t&&(this._devInfo=t,this._name=`${this._devInfo.Brand} ${this._devInfo.Name}`),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}c.DevInfos=new Map([["Smart Mini Vibe",Object.assign(new a,{Brand:"MagicMotion",Name:"Smart Mini Vibe",VibeCount:1,Protocol:1,MaxSpeed:100})],["Flamingo",Object.assign(new a,{Brand:"MagicMotion",Name:"Flamingo",VibeCount:1,Protocol:1,MaxSpeed:100})],["Magic Cell",Object.assign(new a,{Brand:"MagicMotion",Name:"Dante/Candy",VibeCount:1,Protocol:1,MaxSpeed:100})],["Eidolon",Object.assign(new a,{Brand:"MagicMotion",Name:"Eidolon",VibeCount:2,Protocol:2,MaxSpeed:100})],["Smart Bean",Object.assign(new a,{Brand:"MagicMotion",Name:"Kegel",VibeCount:1,Protocol:1,MaxSpeed:100})],["Magic Wand",Object.assign(new a,{Brand:"MagicMotion",Name:"Wand",VibeCount:1,Protocol:1,MaxSpeed:100})],["Krush",Object.assign(new a,{Brand:"LoveLife",Name:"Krush",VibeCount:1,Protocol:3,MaxSpeed:77})],["Smart Mini Vibe3",Object.assign(new a,{Brand:"MagicMotion",Name:"Vini",VibeCount:1,Protocol:1,MaxSpeed:100})],["Fugu",Object.assign(new a,{Brand:"MagicMotion",Name:"Fugu",VibeCount:1,Protocol:1,MaxSpeed:100})],["Lipstick",Object.assign(new a,{Brand:"MagicMotion",Name:"Awaken",VibeCount:1,Protocol:2,MaxSpeed:100})],["Sword",Object.assign(new a,{Brand:"MagicMotion",Name:"Equinox",VibeCoun:1,Protocol:2,MaxSpeed:100})],["Curve",Object.assign(new a,{Brand:"MagicMotion",Name:"Solstice",VibeCount:1,Protocol:2,MaxSpeed:100})]]),t.MagicMotion=c},teZO:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("AdGg"),o=r("FUtr");t.Youcups=class extends o.ButtplugDeviceProtocol{constructor(e){super(`Youou ${e.Name}`,e),this._speed=0,this._sentVibration=!1,this.HandleVibrateCmd=e=>n(this,void 0,void 0,(function*(){if(1!==e.Speeds.length)throw new s.ButtplugDeviceException("Youcups devices require VibrateCmd to have 1 speed commands, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=e=>n(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>n(this,void 0,void 0,(function*(){const t=Math.round(8*e.Speed);return t===this._speed&&this._sentVibration||(this._sentVibration=!0,this._speed=t,yield this._device.WriteString(`$SYS,${t}?`)),new i.Ok(e.Id)})),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}},uSCx:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="errs__"+i,d=e.util.copy(e),p="";d.level++;var f="valid"+d.level,m={},g={},v=e.opts.ownProperties;for(w in o){var y=o[w],_=Array.isArray(y)?g:m;_[w]=y}n+="var "+h+" = errors;";var b=e.errorPath;for(var w in n+="var missing"+i+";",g)if((_=g[w]).length){if(n+=" if ( "+u+e.util.getProperty(w)+" !== undefined ",v&&(n+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),l){n+=" && ( ";var S=_;if(S)for(var C=-1,E=S.length-1;C<E;)O=S[C+=1],C&&(n+=" || "),n+=" ( ( "+(k=u+(R=e.util.getProperty(O)))+" === undefined ",v&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:R)+") ) ";n+=")) {  ";var x="missing"+i,P="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,x,!0):b+" + "+x);var I=I||[];I.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+P+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",n+=1==_.length?"property "+e.util.escapeQuotes(_[0]):"properties "+e.util.escapeQuotes(_.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var M=n;n=I.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var D=_;if(D)for(var O,A=-1,T=D.length-1;A<T;){O=D[A+=1];var R=e.util.getProperty(O),k=(P=e.util.escapeQuotes(O),u+R);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,O,e.opts.jsonPointers)),n+=" if ( "+k+" === undefined ",v&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+P+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",n+=1==_.length?"property "+e.util.escapeQuotes(_[0]):"properties "+e.util.escapeQuotes(_.join(", ")),n+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",l&&(p+="}",n+=" else { ")}e.errorPath=b;var V=d.baseId;for(var w in m)y=m[w],(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all))&&(n+=" "+f+" = true; if ( "+u+e.util.getProperty(w)+" !== undefined ",v&&(n+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),n+=") { ",d.schema=y,d.schemaPath=a+e.util.getProperty(w),d.errSchemaPath=c+"/"+e.util.escapeFragment(w),n+="  "+e.validate(d)+" ",d.baseId=V,n+=" }  ",l&&(n+=" if ("+f+") { ",p+="}"));return l&&(n+="   "+p+" if ("+h+" == errors) {"),e.util.cleanUpCode(n)}},ugD5:function(e,t,r){"use strict";var n=r("+9rK");e.exports=function(e){n.copy(e,this)}},v43d:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",s=e.level,o=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(o||""),d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+s+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",n="schema"+s):n=a;var p="maximum"==t,f=p?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],g=e.opts.$data&&m&&m.$data,v=p?"<":">",y=p?">":"<",_=void 0;if(g){var b,w=e.util.getData(m.$data,o,e.dataPathArr),S="exclusive"+s,C="exclType"+s,E="exclIsNumber"+s,x="' + "+(I="op"+s)+" + '";i+=" var schemaExcl"+s+" = "+w+"; ",_=f,(b=b||[]).push(i+=" var "+S+"; var "+C+" = typeof "+(w="schemaExcl"+s)+"; if ("+C+" != 'boolean' && "+C+" != 'undefined' && "+C+" != 'number') { "),i="",!1!==e.createErrors?(i+=" { keyword: '"+(_||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var P=i;i=b.pop(),i+=!e.compositeRule&&u?e.async?" throw new ValidationError(["+P+"]); ":" validate.errors = ["+P+"]; return false; ":" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+C+" == 'number' ? ( ("+S+" = "+n+" === undefined || "+w+" "+v+"= "+n+") ? "+h+" "+y+"= "+w+" : "+h+" "+y+" "+n+" ) : ( ("+S+" = "+w+" === true) ? "+h+" "+y+"= "+n+" : "+h+" "+y+" "+n+" ) || "+h+" !== "+h+") { var op"+s+" = "+S+" ? '"+v+"' : '"+v+"='; ",void 0===a&&(_=f,l=e.errSchemaPath+"/"+f,n=w,d=g)}else if(x=v,(E="number"==typeof m)&&d){var I="'"+x+"'";i+=" if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" ( "+n+" === undefined || "+m+" "+v+"= "+n+" ? "+h+" "+y+"= "+m+" : "+h+" "+y+" "+n+" ) || "+h+" !== "+h+") { "}else E&&void 0===a?(S=!0,_=f,l=e.errSchemaPath+"/"+f,n=m,y+="="):(E&&(n=Math[p?"min":"max"](m,a)),m===(!E||n)?(S=!0,_=f,l=e.errSchemaPath+"/"+f,y+="="):(S=!1,x+="=")),I="'"+x+"'",i+=" if ( ",d&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+h+" "+y+" "+n+" || "+h+" !== "+h+") { ";return _=_||t,(b=b||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(_||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+I+", limit: "+n+", exclusive: "+S+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+x+" ",i+=d?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",P=i,i=b.pop(),i+=!e.compositeRule&&u?e.async?" throw new ValidationError(["+P+"]); ":" validate.errors = ["+P+"]; return false; ":" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i}},vVvC:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(s||""),h="errs__"+i,d=e.util.copy(e),p="";d.level++;var f="valid"+d.level,m="key"+i,g="idx"+i,v=d.dataLevel=e.dataLevel+1,y="data"+v,_="dataProperties"+i,b=Object.keys(o||{}),w=e.schema.patternProperties||{},S=Object.keys(w),C=e.schema.additionalProperties,E=b.length||S.length,x=!1===C,P="object"==typeof C&&Object.keys(C).length,I=e.opts.removeAdditional,M=x||P||I,D=e.opts.ownProperties,O=e.baseId,A=e.schema.required;if(A&&(!e.opts.$data||!A.$data)&&A.length<e.opts.loopRequired)var T=e.util.toHash(A);if(n+="var "+h+" = errors;var "+f+" = true;",D&&(n+=" var "+_+" = undefined;"),M){if(n+=D?" "+_+" = "+_+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+_+".length; "+g+"++) { var "+m+" = "+_+"["+g+"]; ":" for (var "+m+" in "+u+") { ",E){if(n+=" var isAdditional"+i+" = !(false ",b.length)if(b.length>8)n+=" || validate.schema"+a+".hasOwnProperty("+m+") ";else{var R=b;if(R)for(var k=-1,V=R.length-1;k<V;)K=R[k+=1],n+=" || "+m+" == "+e.util.toQuotedString(K)+" "}if(S.length){var L=S;if(L)for(var F=-1,j=L.length-1;F<j;)ie=L[F+=1],n+=" || "+e.usePattern(ie)+".test("+m+") "}n+=" ); if (isAdditional"+i+") { "}if("all"==I)n+=" delete "+u+"["+m+"]; ";else{var N=e.errorPath,$="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),x)if(I)n+=" delete "+u+"["+m+"]; ";else{var U=c;c=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(n+=" "+f+" = false; "),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+$+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is an invalid additional property":"should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var B=n;n=te.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+B+"]); ":" validate.errors = ["+B+"]; return false; ":" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,l&&(n+=" break; ")}else if(P)if("failing"==I){n+=" var "+h+" = errors;  ";var H=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=C,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var z=u+"["+m+"]";d.dataPathArr[v]=m;var q=e.validate(d);d.baseId=O,e.util.varOccurences(q,y)<2?n+=" "+e.util.varReplace(q,y,z)+" ":n+=" var "+y+" = "+z+"; "+q+" ",n+=" if (!"+f+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=d.compositeRule=H}else d.schema=C,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers),z=u+"["+m+"]",d.dataPathArr[v]=m,q=e.validate(d),d.baseId=O,e.util.varOccurences(q,y)<2?n+=" "+e.util.varReplace(q,y,z)+" ":n+=" var "+y+" = "+z+"; "+q+" ",l&&(n+=" if (!"+f+") break; ");e.errorPath=N}E&&(n+=" } "),n+=" }  ",l&&(n+=" if ("+f+") { ",p+="}")}var W=e.opts.useDefaults&&!e.compositeRule;if(b.length){var G=b;if(G)for(var K,Q=-1,Z=G.length-1;Q<Z;){var J=o[K=G[Q+=1]];if(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0:e.util.schemaHasRules(J,e.RULES.all)){var Y=e.util.getProperty(K),X=(z=u+Y,W&&void 0!==J.default);if(d.schema=J,d.schemaPath=a+Y,d.errSchemaPath=c+"/"+e.util.escapeFragment(K),d.errorPath=e.util.getPath(e.errorPath,K,e.opts.jsonPointers),d.dataPathArr[v]=e.util.toQuotedString(K),q=e.validate(d),d.baseId=O,e.util.varOccurences(q,y)<2){q=e.util.varReplace(q,y,z);var ee=z}else ee=y,n+=" var "+y+" = "+z+"; ";if(X)n+=" "+q+" ";else{if(T&&T[K]){n+=" if ( "+ee+" === undefined ",D&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(K)+"') "),n+=") { "+f+" = false; ",N=e.errorPath,U=c;var te,re=e.util.escapeQuotes(K);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(N,K,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(te=te||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+re+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ",B=n,n=te.pop(),n+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+B+"]); ":" validate.errors = ["+B+"]; return false; ":" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,e.errorPath=N,n+=" } else { "}else l?(n+=" if ( "+ee+" === undefined ",D&&(n+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(K)+"') "),n+=") { "+f+" = true; } else { "):(n+=" if ("+ee+" !== undefined ",D&&(n+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(K)+"') "),n+=" ) { ");n+=" "+q+" } "}}l&&(n+=" if ("+f+") { ",p+="}")}}if(S.length){var ne=S;if(ne)for(var ie,se=-1,oe=ne.length-1;se<oe;)J=w[ie=ne[se+=1]],(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0:e.util.schemaHasRules(J,e.RULES.all))&&(d.schema=J,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),n+=D?" "+_+" = "+_+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+_+".length; "+g+"++) { var "+m+" = "+_+"["+g+"]; ":" for (var "+m+" in "+u+") { ",n+=" if ("+e.usePattern(ie)+".test("+m+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers),z=u+"["+m+"]",d.dataPathArr[v]=m,q=e.validate(d),d.baseId=O,e.util.varOccurences(q,y)<2?n+=" "+e.util.varReplace(q,y,z)+" ":n+=" var "+y+" = "+z+"; "+q+" ",l&&(n+=" if (!"+f+") break; "),n+=" } ",l&&(n+=" else "+f+" = true; "),n+=" }  ",l&&(n+=" if ("+f+") { ",p+="}"))}return l&&(n+=" "+p+" if ("+h+" == errors) {"),e.util.cleanUpCode(n)}},wXyd:function(e,t,r){"use strict";var n=r("Y3YA"),i=r("+9rK").toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=i(t),e.types=i(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var i;if("object"==typeof r){var s=Object.keys(r)[0];i=r[s],r=s,i.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:i}})),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=i(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},ytkS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("b36G"),i=r("eDuk"),s=r("VzKg"),o=r("AdGg"),a=r("oF8a"),c=new i;c.addMetaSchema(r("Dg32"));const l=c.compile(a);t.CheckMessage=function(e){if(l([e.toProtocolFormat()]))return;const t=l.errors.map(e=>e.message).join("; ");throw new o.ButtplugMessageException(t)},t.FromJSON=function(e){const t=JSON.parse(e);if(!l(t)){const e=l.errors.map(e=>e.message).join("; ");throw new o.ButtplugMessageException(e)}const r=[];for(const i of Array.from(t)){const e=n.plainToClass(s[Object.getOwnPropertyNames(i)[0]],i[Object.getOwnPropertyNames(i)[0]]);r.push(e)}return r},t.GetSchemaVersion=function(){return parseInt(a.version,10)}},"zA/M":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r("cSwh");!function(e){e[e.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",e[e.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",e[e.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"}(n=t.TransformationType||(t.TransformationType={}));var s=function(){function e(e,t){this.transformationType=e,this.options=t,this.recursionStack=new Set}return e.prototype.transform=function(e,t,r,s,a,c){var l=this;if(void 0===c&&(c=0),Array.isArray(t)||t instanceof Set){var u=s&&this.transformationType===n.PLAIN_TO_CLASS?function(e){var t=new e;return t instanceof Set||"push"in t?t:[]}(s):[];return t.forEach((function(t,i){var s=e?e[i]:void 0;if(l.options.enableCircularCheck&&l.isCircular(t))l.transformationType===n.CLASS_TO_CLASS&&(u instanceof Set?u.add(t):u.push(t));else{var o=void 0;if("function"!=typeof r&&r&&r.options&&r.options.discriminator&&r.options.discriminator.property&&r.options.discriminator.subTypes){if(l.transformationType===n.PLAIN_TO_CLASS){o=r.options.discriminator.subTypes.find((function(e){return e.name===t[r.options.discriminator.property]}));var a=r.typeFunction({newObject:u,object:t,property:void 0});o=void 0===o?a:o.value,r.options.keepDiscriminatorProperty||delete t[r.options.discriminator.property]}l.transformationType===n.CLASS_TO_CLASS&&(o=t.constructor),l.transformationType===n.CLASS_TO_PLAIN&&(t[r.options.discriminator.property]=r.options.discriminator.subTypes.find((function(e){return e.value===t.constructor})).name)}else o=r;var h=l.transform(s,t,o,void 0,t instanceof Map,c+1);u instanceof Set?u.add(h):u.push(h)}})),u}if(r!==String||a){if(r!==Number||a){if(r!==Boolean||a){if((r===Date||t instanceof Date)&&!a)return t instanceof Date?new Date(t.valueOf()):null==t?t:new Date(t);if(o()&&(r===Buffer||t instanceof Buffer)&&!a)return null==t?t:Buffer.from(t);if("object"==typeof t&&null!==t){r||t.constructor===Object||(r=t.constructor),!r&&e&&(r=e.constructor),this.options.enableCircularCheck&&this.recursionStack.add(t);var h=this.getKeys(r,t),d=e||{};e||this.transformationType!==n.PLAIN_TO_CLASS&&this.transformationType!==n.CLASS_TO_CLASS||(d=a?new Map:r?new r:{});for(var p=function(s){var o=s,l=s,u=s;if(!f.options.ignoreDecorators&&r)if(f.transformationType===n.PLAIN_TO_CLASS)(h=i.defaultMetadataStorage.findExposeMetadataByCustomName(r,s))&&(u=h.propertyName,l=h.propertyName);else if(f.transformationType===n.CLASS_TO_PLAIN||f.transformationType===n.CLASS_TO_CLASS){var h;(h=i.defaultMetadataStorage.findExposeMetadata(r,s))&&h.options&&h.options.name&&(l=h.options.name)}var p=void 0;p=t instanceof Map?t.get(o):t[o]instanceof Function?t[o]():t[o];var m=void 0,g=p instanceof Map;if(r&&a)m=r;else if(r){var v=i.defaultMetadataStorage.findTypeMetadata(r,u);if(v){var y=v.typeFunction?v.typeFunction({newObject:d,object:t,property:u}):v.reflectedType;v.options&&v.options.discriminator&&v.options.discriminator.property&&v.options.discriminator.subTypes?t[o]instanceof Array?m=v:(f.transformationType===n.PLAIN_TO_CLASS&&(m=void 0===(m=v.options.discriminator.subTypes.find((function(e){if(p&&v.options.discriminator.property in p)return e.name===p[v.options.discriminator.property]})))?y:m.value,v.options.keepDiscriminatorProperty||p&&v.options.discriminator.property in p&&delete p[v.options.discriminator.property]),f.transformationType===n.CLASS_TO_CLASS&&(m=p.constructor),f.transformationType===n.CLASS_TO_PLAIN&&(p[v.options.discriminator.property]=v.options.discriminator.subTypes.find((function(e){return e.value===p.constructor})).name)):m=y,g=g||v.reflectedType===Map}else if(f.options.targetMaps)f.options.targetMaps.filter((function(e){return e.target===r&&!!e.properties[u]})).forEach((function(e){return m=e.properties[u]}));else if(f.options.enableImplicitConversion&&f.transformationType===n.PLAIN_TO_CLASS){var _=Reflect.getMetadata("design:type",r.prototype,u);_&&(m=_)}}var b=Array.isArray(t[o])?f.getReflectedType(r,u):void 0,w=e?e[o]:void 0;if(d.constructor.prototype){var S=Object.getOwnPropertyDescriptor(d.constructor.prototype,l);if((f.transformationType===n.PLAIN_TO_CLASS||f.transformationType===n.CLASS_TO_CLASS)&&(S&&!S.set||d[l]instanceof Function))return"continue"}if(f.options.enableCircularCheck&&f.isCircular(p))f.transformationType===n.CLASS_TO_CLASS&&(E=f.applyCustomTransformations(E=p,r,s,t,f.transformationType),d instanceof Map?d.set(l,E):d[l]=E);else{var C=f.transformationType===n.PLAIN_TO_CLASS?l:s,E=void 0;f.transformationType===n.CLASS_TO_PLAIN?(E=f.applyCustomTransformations(E=t[C],r,C,t,f.transformationType),E=f.transform(w,E=t[C]===E?p:E,m,b,g,c+1)):(E=f.transform(w,p,m,b,g,c+1),E=f.applyCustomTransformations(E,r,C,t,f.transformationType)),d instanceof Map?d.set(l,E):d[l]=E}},f=this,m=0,g=h;m<g.length;m++)p(g[m]);return this.options.enableCircularCheck&&this.recursionStack.delete(t),d}return t}return null==t?t:Boolean(t)}return null==t?t:Number(t)}return null==t?t:String(t)},e.prototype.applyCustomTransformations=function(e,t,r,n,s){var o=this,a=i.defaultMetadataStorage.findTransformMetadatas(t,r,this.transformationType);return void 0!==this.options.version&&(a=a.filter((function(e){return!e.options||o.checkVersion(e.options.since,e.options.until)}))),(a=a.filter(this.options.groups&&this.options.groups.length?function(e){return!e.options||o.checkGroups(e.options.groups)}:function(e){return!e.options||!e.options.groups||!e.options.groups.length})).forEach((function(t){e=t.transformFn(e,n,s)})),e},e.prototype.isCircular=function(e){return this.recursionStack.has(e)},e.prototype.getReflectedType=function(e,t){if(e){var r=i.defaultMetadataStorage.findTypeMetadata(e,t);return r?r.reflectedType:void 0}},e.prototype.getKeys=function(e,t){var r=this,s=i.defaultMetadataStorage.getStrategy(e);"none"===s&&(s=this.options.strategy||"exposeAll");var o=[];if("exposeAll"===s&&(o=t instanceof Map?Array.from(t.keys()):Object.keys(t)),!this.options.ignoreDecorators&&e){var a=i.defaultMetadataStorage.getExposedProperties(e,this.transformationType);this.transformationType===n.PLAIN_TO_CLASS&&(a=a.map((function(t){var r=i.defaultMetadataStorage.findExposeMetadata(e,t);return r&&r.options&&r.options.name?r.options.name:t}))),o=this.options.excludeExtraneousValues?a:o.concat(a);var c=i.defaultMetadataStorage.getExcludedProperties(e,this.transformationType);c.length>0&&(o=o.filter((function(e){return-1===c.indexOf(e)}))),void 0!==this.options.version&&(o=o.filter((function(t){var n=i.defaultMetadataStorage.findExposeMetadata(e,t);return!n||!n.options||r.checkVersion(n.options.since,n.options.until)}))),o=o.filter(this.options.groups&&this.options.groups.length?function(t){var n=i.defaultMetadataStorage.findExposeMetadata(e,t);return!n||!n.options||r.checkGroups(n.options.groups)}:function(t){var r=i.defaultMetadataStorage.findExposeMetadata(e,t);return!(r&&r.options&&r.options.groups&&r.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(o=o.filter((function(e){return r.options.excludePrefixes.every((function(t){return e.substr(0,t.length)!==t}))}))),o.filter((function(e,t,r){return r.indexOf(e)===t}))},e.prototype.checkVersion=function(e,t){var r=!0;return r&&e&&(r=this.options.version>=e),r&&t&&(r=this.options.version<t),r},e.prototype.checkGroups=function(e){return!e||this.options.groups.some((function(t){return-1!==e.indexOf(t)}))},e}();function o(){try{return Buffer,!0}catch(e){}return!1}t.TransformOperationExecutor=s,t.testForBuffer=o},zUnb:function(e,t,r){"use strict";function n(e){return"function"==typeof e}r.r(t);let i=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function o(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;o(e)},complete(){}},c=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function l(e){return null!==e&&"object"==typeof e}const u=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:r,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(let e=0;e<r.length;++e)r[e].remove(this);if(n(i))try{i.call(this)}catch(o){t=o instanceof u?d(o.errors):[o]}if(c(s)){let e=-1,r=s.length;for(;++e<r;){const r=s[e];if(l(r))try{r.unsubscribe()}catch(o){t=t||[],o instanceof u?t=t.concat(d(o.errors)):t.push(o)}}}if(t)throw new u(t)}add(t){let r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){const t=r;r=new e,r._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=r;if(null===n)r._parentOrParents=this;else if(n instanceof e){if(n===this)return r;r._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return r;n.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[r]:i.push(r),r}remove(e){const t=this._subscriptions;if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function d(e){return e.reduce((e,t)=>e.concat(t instanceof u?t.errors:t),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(e,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof f?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,r)}}[p](){return this}static create(e,t,r){const n=new f(e,t,r);return n.syncErrorThrowable=!1,n}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends f{constructor(e,t,r,i){let s;super(),this._parentSubscriber=e;let o=this;n(t)?s=t:t&&(s=t.next,r=t.error,i=t.complete,t!==a&&(o=Object.create(t),n(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=s;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):o(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;o(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw r;o(r)}}__tryOrSetError(e,t,r){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(n){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0,!0):(o(n),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(){}function y(...e){return _(e)}function _(e){return e?1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}:v}let b=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(e,t,r){const{operator:n}=this,i=function(e,t,r){if(e){if(e instanceof f)return e;if(e[p])return e[p]()}return e||t||r?new f(e,t,r):new f(a)}(e,t,r);if(i.add(n?n.call(i,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:r,isStopped:n}=e;if(t||n)return!1;e=r&&r instanceof f?r:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=w(t))((t,r)=>{let n;n=this.subscribe(t=>{try{e(t)}catch(i){r(i),n&&n.unsubscribe()}},r,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[g](){return this}pipe(...e){return 0===e.length?this:_(e)(this)}toPromise(e){return new(e=w(e))((e,t)=>{let r;this.subscribe(e=>r=e,e=>t(e),()=>e(r))})}}return e.create=t=>new e(t),e})();function w(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const S=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class C extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class E extends f{constructor(e){super(e),this.destination=e}}let x=(()=>{class e extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new E(this)}lift(e){const t=new P(this,this);return t.operator=e,t}next(e){if(this.closed)throw new S;if(!this.isStopped){const{observers:t}=this,r=t.length,n=t.slice();for(let i=0;i<r;i++)n[i].next(e)}}error(e){if(this.closed)throw new S;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,r=t.length,n=t.slice();for(let i=0;i<r;i++)n[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new S;this.isStopped=!0;const{observers:e}=this,t=e.length,r=e.slice();for(let n=0;n<t;n++)r[n].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new S;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new S;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new C(this,e))}asObservable(){const e=new b;return e.source=this,e}}return e.create=(e,t)=>new P(e,t),e})();class P extends x{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}function I(e){return e&&"function"==typeof e.schedule}class M extends f{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const D=e=>t=>{for(let r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.complete()};function O(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const A=O(),T=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function R(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}const k=e=>{if(e&&"function"==typeof e[g])return n=e,e=>{const t=n[g]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(T(e))return D(e);if(R(e))return r=e,e=>(r.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e);if(e&&"function"==typeof e[A])return t=e,e=>{const r=t[A]();for(;;){const t=r.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof r.return&&e.add(()=>{r.return&&r.return()}),e};{const t=l(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}var t,r,n};function V(e,t,r,n,i=new M(e,r,n)){if(!i.closed)return t instanceof b?t.subscribe(i):k(t)(i)}class L extends f{notifyNext(e,t,r,n,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}function F(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new j(e,t))}}class j{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new N(e,this.project,this.thisArg))}}class N extends f{constructor(e,t,r){super(e),this.project=t,this.count=0,this.thisArg=r||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}function $(e,t){return new b(r=>{const n=new h;let i=0;return n.add(t.schedule((function(){i!==e.length?(r.next(e[i++]),r.closed||n.add(this.schedule())):r.complete()}))),n})}function U(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[g]}(e))return function(e,t){return new b(r=>{const n=new h;return n.add(t.schedule(()=>{const i=e[g]();n.add(i.subscribe({next(e){n.add(t.schedule(()=>r.next(e)))},error(e){n.add(t.schedule(()=>r.error(e)))},complete(){n.add(t.schedule(()=>r.complete()))}}))})),n})}(e,t);if(R(e))return function(e,t){return new b(r=>{const n=new h;return n.add(t.schedule(()=>e.then(e=>{n.add(t.schedule(()=>{r.next(e),n.add(t.schedule(()=>r.complete()))}))},e=>{n.add(t.schedule(()=>r.error(e)))}))),n})}(e,t);if(T(e))return $(e,t);if(function(e){return e&&"function"==typeof e[A]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new b(r=>{const n=new h;let i;return n.add(()=>{i&&"function"==typeof i.return&&i.return()}),n.add(t.schedule(()=>{i=e[A](),n.add(t.schedule((function(){if(r.closed)return;let e,t;try{const r=i.next();e=r.value,t=r.done}catch(n){return void r.error(n)}t?r.complete():(r.next(e),this.schedule())})))})),n})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof b?e:new b(k(e))}function B(e,t,r=Number.POSITIVE_INFINITY){return"function"==typeof t?n=>n.pipe(B((r,n)=>U(e(r,n)).pipe(F((e,i)=>t(r,e,n,i))),r)):("number"==typeof t&&(r=t),t=>t.lift(new H(e,r)))}class H{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new z(e,this.project,this.concurrent))}}class z extends L{constructor(e,t,r=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(t,e,r)}_innerSub(e,t,r){const n=new M(this,t,r),i=this.destination;i.add(n);const s=V(this,e,void 0,void 0,n);s!==n&&i.add(s)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,r,n,i){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function q(e){return e}function W(e=Number.POSITIVE_INFINITY){return B(q,e)}function G(e,t){return t?$(e,t):new b(D(e))}function K(){return function(e){return e.lift(new Q(e))}}class Q{constructor(e){this.connectable=e}call(e,t){const{connectable:r}=this;r._refCount++;const n=new Z(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i}}class Z extends f{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:r}=this,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}class J extends b{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new X(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return K()(this)}}const Y=(()=>{const e=J.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class X extends E{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function ee(){return new x}function te(e,t,r){const n=function(e){return function(...t){if(e){const r=e(...t);for(const e in r)this[e]=r[e]}}}(t);function i(...e){if(this instanceof i)return n.apply(this,e),this;const t=new i(...e);return r.annotation=t,r;function r(e,r,n){const i=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;i.length<=n;)i.push(null);return(i[n]=i[n]||[]).push(t),e}}return r&&(i.prototype=Object.create(r.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}const re=te("Inject",e=>({token:e})),ne=te("Optional"),ie=te("Self"),se=te("SkipSelf");var oe=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ae(e){for(let t in e)if(e[t]===ae)return t;throw Error("Could not find renamed property on target object.")}function ce(e,t){for(const r in t)t.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function le(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ue(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function he(e){return de(e,e[fe])||de(e,e[ve])}function de(e,t){return t&&t.token===e?t:null}function pe(e){return e&&(e.hasOwnProperty(me)||e.hasOwnProperty(ye))?e[me]:null}const fe=ae({"\u0275prov":ae}),me=ae({"\u0275inj":ae}),ge=ae({"\u0275provFallback":ae}),ve=ae({ngInjectableDef:ae}),ye=ae({ngInjectorDef:ae});function _e(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(_e).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const r=t.indexOf("\n");return-1===r?t:t.substring(0,r)}function be(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const we=ae({__forward_ref__:ae});function Se(e){return e.__forward_ref__=Se,e.toString=function(){return _e(this())},e}function Ce(e){return Ee(e)?e():e}function Ee(e){return"function"==typeof e&&e.hasOwnProperty(we)&&e.__forward_ref__===Se}const xe="undefined"!=typeof globalThis&&globalThis,Pe="undefined"!=typeof window&&window,Ie="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Me="undefined"!=typeof global&&global,De=xe||Me||Pe||Ie,Oe=ae({"\u0275cmp":ae}),Ae=ae({"\u0275dir":ae}),Te=ae({"\u0275pipe":ae}),Re=ae({"\u0275mod":ae}),ke=ae({"\u0275loc":ae}),Ve=ae({"\u0275fac":ae}),Le=ae({__NG_ELEMENT_ID__:ae});class Fe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const je=new Fe("INJECTOR",-1),Ne={},$e=/\n/gm,Ue=ae({provide:String,useValue:ae});let Be,He=void 0;function ze(e){const t=He;return He=e,t}function qe(e){const t=Be;return Be=e,t}function We(e,t=oe.Default){if(void 0===He)throw new Error("inject() must be called from an injection context");return null===He?Ke(e,void 0,t):He.get(e,t&oe.Optional?null:void 0,t)}function Ge(e,t=oe.Default){return(Be||We)(Ce(e),t)}function Ke(e,t,r){const n=he(e);if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(r&oe.Optional)return null;if(void 0!==t)return t;throw new Error(`Injector: NOT_FOUND [${_e(e)}]`)}function Qe(e){const t=[];for(let r=0;r<e.length;r++){const n=Ce(e[r]);if(Array.isArray(n)){if(0===n.length)throw new Error("Arguments array must have arguments.");let e=void 0,r=oe.Default;for(let t=0;t<n.length;t++){const i=n[t];i instanceof ne||"Optional"===i.ngMetadataName||i===ne?r|=oe.Optional:i instanceof se||"SkipSelf"===i.ngMetadataName||i===se?r|=oe.SkipSelf:i instanceof ie||"Self"===i.ngMetadataName||i===ie?r|=oe.Self:e=i instanceof re||i===re?i.token:i}t.push(Ge(e,r))}else t.push(Ge(n))}return t}class Ze{get(e,t=Ne){if(t===Ne){const t=new Error(`NullInjectorError: No provider for ${_e(e)}!`);throw t.name="NullInjectorError",t}return t}}class Je{}class Ye{}function Xe(e,t){e.forEach(e=>Array.isArray(e)?Xe(e,t):t(e))}function et(e,t,r){t>=e.length?e.push(r):e.splice(t,0,r)}function tt(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function rt(e,t,r){let n=it(e,t);return n>=0?e[1|n]=r:(n=~n,function(e,t,r,n){let i=e.length;if(i==t)e.push(r,n);else if(1===i)e.push(n,e[0]),e[0]=r;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=r,e[t+1]=n}}(e,n,t,r)),n}function nt(e,t){const r=it(e,t);if(r>=0)return e[1|r]}function it(e,t){return function(e,t,r){let n=0,i=e.length>>1;for(;i!==n;){const r=n+(i-n>>1),s=e[r<<1];if(t===s)return r<<1;s>t?i=r:n=r+1}return~(i<<1)}(e,t)}const st=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),ot=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}();function at(e){return""+{toString:e}}const ct={},lt=[];let ut=0;function ht(e){const t=e.type,r=t.prototype,n={},i={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:r.ngOnInit||null,doCheck:r.ngDoCheck||null,afterContentInit:r.ngAfterContentInit||null,afterContentChecked:r.ngAfterContentChecked||null,afterViewInit:r.ngAfterViewInit||null,afterViewChecked:r.ngAfterViewChecked||null,onDestroy:r.ngOnDestroy||null,onPush:e.changeDetection===st.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||lt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ot.Emulated,id:"c",styles:e.styles||lt,_:null,setInput:null,schemas:e.schemas||null,tView:null};return i._=at(()=>{const t=e.directives,r=e.features,s=e.pipes;i.id+=ut++,i.inputs=gt(e.inputs,n),i.outputs=gt(e.outputs),r&&r.forEach(e=>e(i)),i.directiveDefs=t?()=>("function"==typeof t?t():t).map(dt):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(pt):null}),i}function dt(e){return yt(e)||function(e){return e[Ae]||null}(e)}function pt(e){return function(e){return e[Te]||null}(e)}const ft={};function mt(e){const t={type:e.type,bootstrap:e.bootstrap||lt,declarations:e.declarations||lt,imports:e.imports||lt,exports:e.exports||lt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&at(()=>{ft[e.id]=e.type}),t}function gt(e,t){if(null==e)return ct;const r={};for(const n in e)if(e.hasOwnProperty(n)){let i=e[n],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),r[i]=n,t&&(t[i]=s)}return r}const vt=ht;function yt(e){return e[Oe]||null}function _t(e,t){return e.hasOwnProperty(Ve)?e[Ve]:null}function bt(e,t){const r=e[Re]||null;if(!r&&!0===t)throw new Error(`Type ${_e(e)} does not have '\u0275mod' property.`);return r}function wt(e){return Array.isArray(e)&&"object"==typeof e[1]}function St(e){return Array.isArray(e)&&!0===e[1]}function Ct(e){return 0!=(8&e.flags)}function Et(e){return 2==(2&e.flags)}function xt(e){return 1==(1&e.flags)}function Pt(e){return null!==e.template}function It(e){return 0!=(512&e[2])}const Mt={lFrame:Bt(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Dt(){return Mt.bindingsEnabled}function Ot(){return Mt.lFrame.lView}function At(){return Mt.lFrame.tView}function Tt(){return Mt.lFrame.previousOrParentTNode}function Rt(e,t){Mt.lFrame.previousOrParentTNode=e,Mt.lFrame.isParent=t}function kt(){return Mt.lFrame.isParent}function Vt(){return Mt.checkNoChangesMode}function Lt(e){Mt.checkNoChangesMode=e}function Ft(e,t){const r=Mt.lFrame;r.bindingIndex=r.bindingRootIndex=e,r.currentDirectiveIndex=t}function jt(e){Mt.lFrame.currentQueryIndex=e}function Nt(e,t){const r=Ut();Mt.lFrame=r,r.previousOrParentTNode=t,r.lView=e}function $t(e,t){const r=Ut(),n=e[1];Mt.lFrame=r,r.previousOrParentTNode=t,r.lView=e,r.tView=n,r.contextLView=e,r.bindingIndex=n.bindingStartIndex}function Ut(){const e=Mt.lFrame,t=null===e?null:e.child;return null===t?Bt(e):t}function Bt(e){const t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function Ht(){const e=Mt.lFrame;return Mt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}const zt=Ht;function qt(){const e=Ht();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Wt(){return Mt.lFrame.selectedIndex}function Gt(e){Mt.lFrame.selectedIndex=e}function Kt(e,t){for(let r=t.directiveStart,n=t.directiveEnd;r<n;r++){const t=e.data[r];t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-r,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(r,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(r,t.afterContentChecked)),t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-r,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(r,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(r,t.afterViewChecked)),null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,t.onDestroy)}}function Qt(e,t,r){Yt(e,t,3,r)}function Zt(e,t,r,n){(3&e[2])===r&&Yt(e,t,r,n)}function Jt(e,t){let r=e[2];(3&r)===t&&(r&=1023,r+=1,e[2]=r)}function Yt(e,t,r,n){const i=null!=n?n:-1;let s=0;for(let o=void 0!==n?65535&e[18]:0;o<t.length;o++)if("number"==typeof t[o+1]){if(s=t[o],null!=n&&s>=n)break}else t[o]<0&&(e[18]+=65536),(s<i||-1==i)&&(Xt(e,r,t,o),e[18]=(4294901760&e[18])+o+2),o++}function Xt(e,t,r,n){const i=r[n]<0,s=r[n+1],o=e[i?-r[n]:r[n]];i?e[2]>>10<e[18]>>16&&(3&e[2])===t&&(e[2]+=1024,s.call(o)):s.call(o)}class er{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}let tr=void 0;function rr(e){return!!e.listen}const nr={createRenderer:(e,t)=>void 0!==tr?tr:"undefined"!=typeof document?document:void 0};function ir(e,t,r){const n=rr(e);let i=0;for(;i<r.length;){const s=r[i];if("number"==typeof s){if(0!==s)break;i++;const o=r[i++],a=r[i++],c=r[i++];n?e.setAttribute(t,a,c,o):t.setAttributeNS(o,a,c)}else{const o=s,a=r[++i];or(o)?n&&e.setProperty(t,o,a):n?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function sr(e){return 3===e||4===e||6===e}function or(e){return 64===e.charCodeAt(0)}function ar(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let r=-1;for(let n=0;n<t.length;n++){const i=t[n];"number"==typeof i?r=i:0===r||cr(e,r,i,null,-1===r||2===r?t[++n]:null)}}return e}function cr(e,t,r,n,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const r=e[s++];if("number"==typeof r){if(r===t){o=-1;break}if(r>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===r){if(null===n)return void(null!==i&&(e[s+1]=i));if(n===e[s+1])return void(e[s+2]=i)}s++,null!==n&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,r),null!==n&&e.splice(s++,0,n),null!==i&&e.splice(s++,0,i)}function lr(e){return-1!==e}function ur(e){return 32767&e}function hr(e){return e>>16}function dr(e,t){let r=hr(e),n=t;for(;r>0;)n=n[15],r--;return n}function pr(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function(e){return"string"==typeof e?e:null==e?"":""+e}(e)}const fr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(De))();function mr(e){return e instanceof Function?e():e}let gr=!0;function vr(e){const t=gr;return gr=e,t}let yr=0;function _r(e,t){const r=wr(e,t);if(-1!==r)return r;const n=t[1];n.firstCreatePass&&(e.injectorIndex=t.length,br(n.data,e),br(t,null),br(n.blueprint,null));const i=Sr(e,t),s=e.injectorIndex;if(lr(i)){const e=ur(i),r=dr(i,t),n=r[1].data;for(let i=0;i<8;i++)t[s+i]=r[e+i]|n[e+i]}return t[s+8]=i,s}function br(e,t){e.push(0,0,0,0,0,0,0,0,t)}function wr(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function Sr(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let r=t[6],n=1;for(;r&&-1===r.injectorIndex;)r=(t=t[15])?t[6]:null,n++;return r?r.injectorIndex|n<<16:-1}function Cr(e,t,r){!function(e,t,r){let n="string"!=typeof r?r[Le]:r.charCodeAt(0)||0;null==n&&(n=r[Le]=yr++);const i=255&n,s=1<<i,o=64&i,a=32&i,c=t.data;128&i?o?a?c[e+7]|=s:c[e+6]|=s:a?c[e+5]|=s:c[e+4]|=s:o?a?c[e+3]|=s:c[e+2]|=s:a?c[e+1]|=s:c[e]|=s}(e,t,r)}function Er(e,t,r,n=oe.Default,i){if(null!==e){const i=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e[Le];return"number"==typeof t&&t>0?255&t:t}(r);if("function"==typeof i){Nt(t,e);try{const e=i();if(null!=e||n&oe.Optional)return e;throw new Error(`No provider for ${pr(r)}!`)}finally{zt()}}else if("number"==typeof i){if(-1===i)return new Or(e,t);let s=null,o=wr(e,t),a=-1,c=n&oe.Host?t[16][6]:null;for((-1===o||n&oe.SkipSelf)&&(a=-1===o?Sr(e,t):t[o+8],Dr(n,!1)?(s=t[1],o=ur(a),t=dr(a,t)):o=-1);-1!==o;){a=t[o+8];const e=t[1];if(Mr(i,o,e.data)){const e=Pr(o,t,r,s,n,c);if(e!==xr)return e}Dr(n,t[1].data[o+8]===c)&&Mr(i,o,t)?(s=e,o=ur(a),t=dr(a,t)):o=-1}}}if(n&oe.Optional&&void 0===i&&(i=null),0==(n&(oe.Self|oe.Host))){const e=t[9],s=qe(void 0);try{return e?e.get(r,i,n&oe.Optional):Ke(r,i,n&oe.Optional)}finally{qe(s)}}if(n&oe.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${pr(r)}]`)}const xr={};function Pr(e,t,r,n,i,s){const o=t[1],a=o.data[e+8],c=function(e,t,r,n,i){const s=e.providerIndexes,o=t.data,a=65535&s,c=e.directiveStart,l=s>>16,u=i?a+l:e.directiveEnd;for(let h=n?a:a+l;h<u;h++){const e=o[h];if(h<c&&r===e||h>=c&&e.type===r)return h}if(i){const e=o[c];if(e&&Pt(e)&&e.type===r)return c}return null}(a,o,r,null==n?Et(a)&&gr:n!=o&&3===a.type,i&oe.Host&&s===a);return null!==c?Ir(t,o,c,a):xr}function Ir(e,t,r,n){let i=e[r];const s=t.data;if(i instanceof er){const o=i;if(o.resolving)throw new Error(`Circular dep for ${pr(s[r])}`);const a=vr(o.canSeeViewProviders);let c;o.resolving=!0,o.injectImpl&&(c=qe(o.injectImpl)),Nt(e,n);try{i=e[r]=o.factory(void 0,s,e,n),t.firstCreatePass&&r>=n.directiveStart&&function(e,t,r){const{onChanges:n,onInit:i,doCheck:s}=t;n&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e,n),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e,n)),i&&(r.preOrderHooks||(r.preOrderHooks=[])).push(-e,i),s&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e,s),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e,s))}(r,s[r],t)}finally{o.injectImpl&&qe(c),vr(a),o.resolving=!1,zt()}}return i}function Mr(e,t,r){const n=64&e,i=32&e;let s;return s=128&e?n?i?r[t+7]:r[t+6]:i?r[t+5]:r[t+4]:n?i?r[t+3]:r[t+2]:i?r[t+1]:r[t],!!(s&1<<e)}function Dr(e,t){return!(e&oe.Self||e&oe.Host&&t)}class Or{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return Er(this._tNode,this._lView,e,void 0,t)}}function Ar(e){const t=Object.getPrototypeOf(e.prototype).constructor,r=t[Ve]||function e(t){const r=t;if(Ee(t))return()=>{const t=e(Ce(r));return t?t():null};let n=_t(r);if(null===n){const e=pe(r);n=e&&e.factory}return n||null}(t);return null!==r?r:e=>new e}function Tr(e){return e.ngDebugContext}function Rr(e){return e.ngOriginalError}function kr(e,...t){e.error(...t)}class Vr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=this._findContext(e),n=function(e){return e.ngErrorLogger||kr}(e);n(this._console,"ERROR",e),t&&n(this._console,"ORIGINAL ERROR",t),r&&n(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?Tr(e)?Tr(e):this._findContext(Rr(e)):null}_findOriginalError(e){let t=Rr(e);for(;t&&Rr(t);)t=Rr(t);return t}}let Lr=!0,Fr=!1;function jr(){return Fr=!0,Lr}function Nr(e){for(;Array.isArray(e);)e=e[0];return e}function $r(e,t){return Nr(t[e+19])}function Ur(e,t){return Nr(t[e.index])}function Br(e,t){return e.data[t+19]}function Hr(e,t){const r=t[e];return wt(r)?r:r[0]}function zr(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function qr(e){return 128==(128&e[2])}function Wr(e,t){return null===e||null==t?null:e[t]}function Gr(e){e[18]=0}function Kr(e,t){e.__ngContext__=t}function Qr(e){throw new Error(`Multiple components match node with tagname ${e.tagName}`)}function Zr(){throw new Error("Cannot mix multi providers and regular providers")}function Jr(e,t,r){let n=e.length;for(;;){const i=e.indexOf(t,r);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const r=t.length;if(i+r===n||e.charCodeAt(i+r)<=32)return i}r=i+1}}function Yr(e,t,r){let n=0;for(;n<e.length;){let i=e[n++];if(r&&"class"===i){if(i=e[n],-1!==Jr(i.toLowerCase(),t,0))return!0}else if(1===i){for(;n<e.length&&"string"==typeof(i=e[n++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Xr(e,t,r){return t===(0!==e.type||r?e.tagName:"ng-template")}function en(e,t,r){let n=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(sr(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!o)if(4&n){if(n=2|1&n,""!==c&&!Xr(e,c,r)||""===c&&1===t.length){if(tn(n))return!1;o=!0}}else{const l=8&n?c:t[++a];if(8&n&&null!==e.attrs){if(!Yr(e.attrs,l,r)){if(tn(n))return!1;o=!0}continue}const u=rn(8&n?"class":c,i,0==e.type&&"ng-template"!==e.tagName,r);if(-1===u){if(tn(n))return!1;o=!0;continue}if(""!==l){let e;e=u>s?"":i[u+1].toLowerCase();const t=8&n?e:null;if(t&&-1!==Jr(t,l,0)||2&n&&l!==e){if(tn(n))return!1;o=!0}}}}else{if(!o&&!tn(n)&&!tn(c))return!1;if(o&&tn(c))continue;o=!1,n=c|1&n}}return tn(n)||o}function tn(e){return 0==(1&e)}function rn(e,t,r,n){if(null===t)return-1;let i=0;if(n||!r){let r=!1;for(;i<t.length;){const n=t[i];if(n===e)return i;if(3===n||6===n)r=!0;else{if(1===n||2===n){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===n)break;if(0===n){i+=4;continue}}i+=r?1:2}return-1}return function(e,t){let r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){if(e[r]===t)return r;r++}return-1}(t,e)}function nn(e,t,r=!1){for(let n=0;n<t.length;n++)if(en(e,t[n],r))return!0;return!1}function sn(e,t){return e?":not("+t.trim()+")":t}function on(e){let t=e[0],r=1,n=2,i="",s=!1;for(;r<e.length;){let o=e[r];if("string"==typeof o)if(2&n){const t=e[++r];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&n?i+="."+o:4&n&&(i+=" "+o);else""===i||tn(o)||(t+=sn(s,i),i=""),n=o,s=s||!tn(n);r++}return""!==i&&(t+=sn(s,i)),t}const an={};function cn(e){const t=e[3];return St(t)?t[3]:t}function ln(e){un(At(),Ot(),Wt()+e,Vt())}function un(e,t,r,n){if(!n)if(3==(3&t[2])){const n=e.preOrderCheckHooks;null!==n&&Qt(t,n,r)}else{const n=e.preOrderHooks;null!==n&&Zt(t,n,0,r)}Gt(r)}function hn(e,t){return e<<17|t<<2}function dn(e){return e>>17&32767}function pn(e){return 2|e}function fn(e){return(131068&e)>>2}function mn(e,t){return-131069&e|t<<2}function gn(e){return 1|e}function vn(e,t){const r=e.contentQueries;if(null!==r)for(let n=0;n<r.length;n+=2){const i=r[n],s=r[n+1];if(-1!==s){const r=e.data[s];jt(i),r.contentQueries(2,t[s],s)}}}function yn(e,t,r){return rr(t)?t.createElement(e,r):null===r?t.createElement(e):t.createElementNS(r,e)}function _n(e,t,r,n,i,s,o,a,c,l){const u=t.blueprint.slice();return u[0]=i,u[2]=140|n,Gr(u),u[3]=u[15]=e,u[8]=r,u[10]=o||e&&e[10],u[11]=a||e&&e[11],u[12]=c||e&&e[12]||null,u[9]=l||e&&e[9]||null,u[6]=s,u[16]=2==t.type?e[16]:u,u}function bn(e,t,r,n,i,s){const o=r+19,a=e.data[o]||function(e,t,r,n,i,s){const o=Tt(),a=kt(),c=a?o:o&&o.parent,l=e.data[r]=In(0,c&&c!==t?c:null,n,r,i,s);return null===e.firstChild&&(e.firstChild=l),o&&(!a||null!=o.child||null===l.parent&&2!==o.type?a||(o.next=l):o.child=l),l}(e,t,o,n,i,s);return Rt(a,!0),a}function wn(e,t,r){$t(t,t[6]);try{const n=e.viewQuery;null!==n&&Gn(1,n,r);const i=e.template;null!==i&&En(e,t,i,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&vn(e,t),e.staticViewQueries&&Gn(2,e.viewQuery,r);const s=e.components;null!==s&&function(e,t){for(let r=0;r<t.length;r++)Bn(e,t[r])}(t,s)}finally{t[2]&=-5,qt()}}function Sn(e,t,r,n){const i=t[2];if(256==(256&i))return;$t(t,t[6]);const s=Vt();try{Gr(t),Mt.lFrame.bindingIndex=e.bindingStartIndex,null!==r&&En(e,t,r,2,n);const o=3==(3&i);if(!s)if(o){const r=e.preOrderCheckHooks;null!==r&&Qt(t,r,null)}else{const r=e.preOrderHooks;null!==r&&Zt(t,r,0,null),Jt(t,0)}if(function(e){let t=e[13];for(;null!==t;){let r;if(St(t)&&(r=t[2])>>1==-1){for(let e=9;e<t.length;e++){const r=t[e],n=r[1];qr(r)&&Sn(n,r,n.template,r[8])}0!=(1&r)&&$n(t,e[16])}t=t[4]}}(t),null!==e.contentQueries&&vn(e,t),!s)if(o){const r=e.contentCheckHooks;null!==r&&Qt(t,r)}else{const r=e.contentHooks;null!==r&&Zt(t,r,1),Jt(t,1)}!function(e,t){try{const r=e.expandoInstructions;if(null!==r){let n=e.expandoStartIndex,i=-1,s=-1;for(let e=0;e<r.length;e++){const o=r[e];"number"==typeof o?o<=0?(s=0-o,Gt(s),n+=9+r[++e],i=n):n+=o:(null!==o&&(Ft(n,i),o(2,t[i])),i++)}}}finally{Gt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let r=0;r<t.length;r++)Un(e,t[r])}(t,a);const c=e.viewQuery;if(null!==c&&Gn(2,c,n),!s)if(o){const r=e.viewCheckHooks;null!==r&&Qt(t,r)}else{const r=e.viewHooks;null!==r&&Zt(t,r,2),Jt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73)}finally{qt()}}function Cn(e,t,r,n){const i=t[10],s=!Vt(),o=4==(4&t[2]);try{s&&!o&&i.begin&&i.begin(),o&&wn(e,t,n),Sn(e,t,r,n)}finally{s&&!o&&i.end&&i.end()}}function En(e,t,r,n,i){const s=Wt();try{Gt(-1),2&n&&t.length>19&&un(e,t,0,Vt()),r(n,i)}finally{Gt(s)}}function xn(e){return e.tView||(e.tView=Pn(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts))}function Pn(e,t,r,n,i,s,o,a,c,l){const u=19+n,h=u+i,d=function(e,t){const r=[];for(let n=0;n<t;n++)r.push(n<e?null:an);return r}(u,h);return d[1]={type:e,id:t,blueprint:d,template:r,queries:null,viewQuery:a,node:null,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:l}}function In(e,t,r,n,i,s){return{type:r,index:n,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Mn(e,t,r){for(let n in e)if(e.hasOwnProperty(n)){const i=e[n];(r=null===r?{}:r).hasOwnProperty(n)?r[n].push(t,i):r[n]=[t,i]}return r}function Dn(e,t){const r=e.expandoInstructions;r.push(t.hostBindings),0!==t.hostVars&&r.push(t.hostVars)}function On(e,t,r){for(let n=0;n<r;n++)t.push(an),e.blueprint.push(an),e.data.push(null)}function An(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Tn(e,t,r){const n=19-t.index,i=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(n,i,r)}function Rn(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function kn(e,t,r){if(r){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)r[t.exportAs[n]]=e;Pt(t)&&(r[""]=e)}}function Vn(e,t,r){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+r,e.providerIndexes=t}function Ln(e,t,r){e.data.push(r);const n=r.factory||(r.factory=_t(r.type)),i=new er(n,Pt(r),null);e.blueprint.push(i),t.push(i)}function Fn(e,t,r){const n=Ur(t,e),i=xn(r),s=e[10],o=Hn(e,_n(e,i,null,r.onPush?64:16,n,t,s,s.createRenderer(n,r)));e[t.index]=o}function jn(e,t,r,n,i,s){const o=s[t];if(null!==o){const e=n.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?n.setInput(r,a,i,s):r[s]=a}}}function Nn(e,t){let r=null,n=0;for(;n<t.length;){const i=t[n];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===r&&(r=[]),r.push(i,e[i],t[n+1])),n+=2}else n+=2;else n+=4}return r}function $n(e,t){const r=e[5];for(let n=0;n<r.length;n++){const e=r[n],i=e[3][3][16];if(i!==t&&0==(16&i[2])){const t=e[1];Sn(t,e,t.template,e[8])}}}function Un(e,t){const r=Hr(t,e);if(qr(r)&&80&r[2]){const e=r[1];Sn(e,r,e.template,r[8])}}function Bn(e,t){const r=Hr(t,e),n=r[1];!function(e,t){for(let r=t.length;r<e.blueprint.length;r++)t.push(e.blueprint[r])}(n,r),wn(n,r,r[8])}function Hn(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function zn(e){for(;e;){e[2]|=64;const t=cn(e);if(It(e)&&!t)return e;e=t}return null}function qn(e,t,r){const n=t[10];n.begin&&n.begin();try{Sn(e,t,e.template,r)}catch(i){throw Zn(t,i),i}finally{n.end&&n.end()}}function Wn(e){!function(e){for(let t=0;t<e.components.length;t++){const r=e.components[t],n=zr(r),i=n[1];Cn(i,n,i.template,r)}}(e[8])}function Gn(e,t,r){jt(0),t(e,r)}const Kn=(()=>Promise.resolve(null))();function Qn(e){return e[7]||(e[7]=[])}function Zn(e,t){const r=e[9],n=r?r.get(Vr,null):null;n&&n.handleError(t)}function Jn(e,t,r,n,i){for(let s=0;s<r.length;){const o=r[s++],a=r[s++],c=t[o],l=e.data[o];null!==l.setInput?l.setInput(c,i,n,a):c[a]=i}}function Yn(e,t){const r=t[3];return-1===e.index?St(r)?r:null:r}function Xn(e,t){const r=Yn(e,t);return r?ui(t[11],r[7]):null}function ei(e,t,r,n,i){if(null!=n){let s,o=!1;St(n)?s=n:wt(n)&&(o=!0,n=n[0]);const a=Nr(n);0===e&&null!==r?null==i?ci(t,r,a):ai(t,r,a,i||null):1===e&&null!==r?ai(t,r,a,i||null):2===e?function(e,t,r){const n=ui(e,t);n&&function(e,t,r,n){rr(e)?e.removeChild(t,r,n):t.removeChild(r)}(e,n,t,r)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,r,n,i){const s=r[7];s!==Nr(r)&&ei(t,e,n,s,i);for(let o=9;o<r.length;o++){const i=r[o];fi(i[1],i,e,t,n,s)}}(t,e,s,r,i)}}function ti(e,t,r,n){const i=Xn(e.node,t);i&&fi(e,t,t[11],r?1:2,i,n)}function ri(e,t){const r=e[5],n=r.indexOf(t);r.splice(n,1)}function ni(e,t){if(e.length<=9)return;const r=9+t,n=e[r];if(n){const i=n[17];null!==i&&i!==e&&ri(i,n),t>0&&(e[r-1][4]=n[4]);const s=tt(e,9+t);ti(n[1],n,!1,null);const o=s[5];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function ii(e,t){if(!(256&t[2])){const r=t[11];rr(r)&&r.destroyNode&&fi(e,t,r,3,null,null),function(e){let t=e[13];if(!t)return oi(e[1],e);for(;t;){let r=null;if(wt(t))r=t[13];else{const e=t[9];e&&(r=e)}if(!r){for(;t&&!t[4]&&t!==e;)wt(t)&&oi(t[1],t),t=si(t,e);null===t&&(t=e),wt(t)&&oi(t[1],t),r=t&&t[4]}t=r}}(t)}}function si(e,t){let r;return wt(e)&&(r=e[6])&&2===r.type?Yn(r,e):e[3]===t?null:e[3]}function oi(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let r;if(null!=e&&null!=(r=e.destroyHooks))for(let n=0;n<r.length;n+=2){const e=t[r[n]];e instanceof er||r[n+1].call(e)}}(e,t),function(e,t){const r=e.cleanup;if(null!==r){const e=t[7];for(let n=0;n<r.length-1;n+=2)if("string"==typeof r[n]){const i=r[n+1],s="function"==typeof i?i(t):Nr(t[i]),o=e[r[n+2]],a=r[n+3];"boolean"==typeof a?s.removeEventListener(r[n],o,a):a>=0?e[a]():e[-a].unsubscribe(),n+=2}else r[n].call(e[r[n+1]]);t[7]=null}}(e,t);const r=t[6];r&&3===r.type&&rr(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&St(t[3])){n!==t[3]&&ri(n,t);const r=t[5];null!==r&&r.detachView(e)}}}function ai(e,t,r,n){rr(e)?e.insertBefore(t,r,n):t.insertBefore(r,n,!0)}function ci(e,t,r){rr(e)?e.appendChild(t,r):t.appendChild(r)}function li(e,t,r,n){null!==n?ai(e,t,r,n):ci(e,t,r)}function ui(e,t){return rr(e)?e.parentNode(t):t.parentNode}function hi(e,t,r,n){const i=function(e,t,r){let n=t.parent;for(;null!=n&&(4===n.type||5===n.type);)n=(t=n).parent;if(null==n){const e=r[6];return 2===e.type?Xn(e,r):r[0]}if(t&&5===t.type&&4&t.flags)return Ur(t,r).parentNode;if(2&n.flags){const t=e.data,r=t[t[n.index].directiveStart].encapsulation;if(r!==ot.ShadowDom&&r!==ot.Native)return null}return Ur(n,r)}(e,n,t);if(null!=i){const e=t[11],s=function(e,t){if(2===e.type){const r=Yn(e,t);return null===r?null:di(r.indexOf(t,9)-9,r)}return 4===e.type||5===e.type?Ur(e,t):null}(n.parent||t[6],t);if(Array.isArray(r))for(let t=0;t<r.length;t++)li(e,i,r[t],s);else li(e,i,r,s)}}function di(e,t){const r=9+e+1;if(r<t.length){const e=t[r],n=e[1].firstChild;if(null!==n)return function e(t,r){if(null!==r){const n=r.type;if(3===n)return Ur(r,t);if(0===n)return di(-1,t[r.index]);if(4===n||5===n){const n=r.child;if(null!==n)return e(t,n);{const e=t[r.index];return St(e)?di(-1,e):Nr(e)}}{const n=t[16],i=n[6],s=cn(n),o=i.projection[r.projection];return null!=o?e(s,o):e(t,r.next)}}return null}(e,n)}return t[7]}function pi(e,t,r,n,i,s,o){for(;null!=r;){const a=n[r.index],c=r.type;o&&0===t&&(a&&Kr(Nr(a),n),r.flags|=4),64!=(64&r.flags)&&(4===c||5===c?(pi(e,t,r.child,n,i,s,!1),ei(t,e,i,a,s)):1===c?mi(e,t,n,r,i,s):ei(t,e,i,a,s)),r=o?r.projectionNext:r.next}}function fi(e,t,r,n,i,s){pi(r,n,e.node.child,t,i,s,!1)}function mi(e,t,r,n,i,s){const o=r[16],a=o[6].projection[n.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)ei(t,e,i,a[c],s);else pi(e,t,a,o[3],i,s,!0)}function gi(e,t,r){rr(e)?e.setAttribute(t,"style",r):t.style.cssText=r}function vi(e,t,r){rr(e)?""===r?e.removeAttribute(t,"class"):e.setAttribute(t,"class",r):t.className=r}class yi{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}get rootNodes(){const e=this._lView;return null==e[0]?function e(t,r,n,i,s=!1){for(;null!==n;){const o=r[n.index];if(null!==o&&i.push(Nr(o)),St(o))for(let t=9;t<o.length;t++){const r=o[t],n=r[1].firstChild;null!==n&&e(r[1],r,n,i)}const a=n.type;if(4===a||5===a)e(t,r,n.child,i);else if(1===a){const t=r[16],s=t[6],o=cn(t);let a=s.projection[n.projection];null!==a&&null!==o&&e(o[1],o,a,i,!0)}n=s?n.projectionNext:n.next}return i}(e[1],e,e[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}ii(this._lView[1],this._lView)}onDestroy(e){var t,r,n;t=this._lView[1],n=e,Qn(r=this._lView).push(n),t.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(t).push(r[7].length-1,null)}markForCheck(){zn(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){qn(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,r){Lt(!0);try{qn(e,t,r)}finally{Lt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}detachFromAppRef(){var e;this._appRef=null,fi(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class _i extends yi{constructor(e){super(e),this._view=e}detectChanges(){Wn(this._view)}checkNoChanges(){!function(e){Lt(!0);try{Wn(e)}finally{Lt(!1)}}(this._view)}get context(){return null}}let bi,wi;function Si(e,t,r){return bi||(bi=class extends e{}),new bi(Ur(t,r))}let Ci=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ei(),e})();const Ei=function(e=!1){return function(e,t,r){if(!r&&Et(e)){const r=Hr(e.index,t);return new yi(r,r)}return 3===e.type||0===e.type||4===e.type||5===e.type?new yi(t[16],t):null}(Tt(),Ot(),e)},xi=new Fe("Set Injector scope."),Pi={},Ii={},Mi=[];let Di=void 0;function Oi(){return void 0===Di&&(Di=new Ze),Di}function Ai(e,t=null,r=null,n){return t=t||Oi(),new Ti(e,r,t,n)}class Ti{constructor(e,t,r,n=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&Xe(t,r=>this.processProvider(r,e,t)),Xe([e],e=>this.processInjectorType(e,[],i)),this.records.set(je,Vi(void 0,this));const s=this.records.get(xi);this.scope=null!=s?s.value:null,this.injectorDefTypes.forEach(e=>this.get(e)),this.source=n||("object"==typeof e?null:_e(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Ne,r=oe.Default){this.assertNotDestroyed();const n=ze(this);try{if(!(r&oe.SkipSelf)){let t=this.records.get(e);if(void 0===t){const r=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Fe)&&he(e);t=r&&this.injectableDefInScope(r)?Vi(Ri(e),Pi):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(r&oe.Self?Oi():this.parent).get(e,t=r&oe.Optional&&t===Ne?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(_e(e)),n)throw s;return function(e,t,r,n){const i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,r,n=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=_e(t);if(Array.isArray(t))i=t.map(_e).join(" -> ");else if("object"==typeof t){let e=[];for(let r in t)if(t.hasOwnProperty(r)){let n=t[r];e.push(r+":"+("string"==typeof n?JSON.stringify(n):_e(n)))}i=`{${e.join(", ")}}`}return`${r}${n?"("+n+")":""}[${i}]: ${e.replace($e,"\n  ")}`}("\n"+e.message,i,r,n),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,"R3InjectorError",this.source)}throw s}finally{ze(n)}var i}toString(){const e=[];return this.records.forEach((t,r)=>e.push(_e(r))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,r){if(!(e=Ce(e)))return!1;let n=pe(e);const i=null==n&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==r.indexOf(s);if(void 0!==i&&(n=pe(i)),null==n)return!1;if(null!=n.imports&&!o){let e;r.push(s);try{Xe(n.imports,n=>{this.processInjectorType(n,t,r)&&(void 0===e&&(e=[]),e.push(n))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:r,providers:n}=e[t];Xe(n,e=>this.processProvider(e,r,n||Mi))}}this.injectorDefTypes.add(s),this.records.set(s,Vi(n.factory,Pi));const a=n.providers;if(null!=a&&!o){const t=e;Xe(a,e=>this.processProvider(e,t,a))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,r){let n=Fi(e=Ce(e))?e:Ce(e&&e.provide);const i=function(e,t,r){return Li(e)?Vi(void 0,e.useValue):Vi(ki(e,t,r),Pi)}(e,t,r);if(Fi(e)||!0!==e.multi){const e=this.records.get(n);e&&void 0!==e.multi&&Zr()}else{let t=this.records.get(n);t?void 0===t.multi&&Zr():(t=Vi(void 0,Pi,!0),t.factory=()=>Qe(t.multi),this.records.set(n,t)),n=e,t.multi.push(e)}this.records.set(n,i)}hydrate(e,t){var r;return t.value===Ii?function(e){throw new Error(`Cannot instantiate cyclic dependency! ${e}`)}(_e(e)):t.value===Pi&&(t.value=Ii,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(r=t.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function Ri(e){const t=he(e),r=null!==t?t.factory:_t(e);if(null!==r)return r;const n=pe(e);if(null!==n)return n.factory;if(e instanceof Fe)throw new Error(`Token ${_e(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const r=function(e,t){const r=[];for(let n=0;n<e;n++)r.push("?");return r}(t);throw new Error(`Can't resolve all parameters for ${_e(e)}: (${r.join(", ")}).`)}const r=function(e){const t=e&&(e[fe]||e[ve]||e[ge]&&e[ge]());if(t){const r=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\n`+`This will become an error in v10. Please add @Injectable() to the "${r}" class.`),t}return null}(e);return null!==r?()=>r.factory(e):()=>new e}(e);throw new Error("unreachable")}function ki(e,t,r){let n=void 0;if(Fi(e))return Ri(Ce(e));if(Li(e))n=()=>Ce(e.useValue);else if((i=e)&&i.useFactory)n=()=>e.useFactory(...Qe(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))n=()=>Ge(Ce(e.useExisting));else{const i=Ce(e&&(e.useClass||e.provide));if(i||function(e,t,r){let n="";throw e&&t&&(n=` - only instances of Provider and Type are allowed, got: [${t.map(e=>e==r?"?"+r+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${_e(e)}'`+n)}(t,r,e),!function(e){return!!e.deps}(e))return Ri(i);n=()=>new i(...Qe(e.deps))}var i;return n}function Vi(e,t,r=!1){return{factory:e,value:t,multi:r?[]:void 0}}function Li(e){return null!==e&&"object"==typeof e&&Ue in e}function Fi(e){return"function"==typeof e}const ji=function(e,t,r){return Ai({name:r},t,e,r)};let Ni=(()=>{class e{static create(e,t){return Array.isArray(e)?ji(e,t,""):ji(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Ne,e.NULL=new Ze,e.\u0275prov=le({token:e,providedIn:"any",factory:()=>Ge(je)}),e.__NG_ELEMENT_ID__=-1,e})();const $i=new Fe("AnalyzeForEntryComponents");let Ui=new Map;const Bi=new Set;function Hi(e){return"string"==typeof e?e:e.text()}function zi(e,t){let r=e.styles,n=e.classes,i=0;for(let s=0;s<t.length;s++){const e=t[s];"number"==typeof e?i=e:1==i?n=be(n,e):2==i&&(r=be(r,e+": "+t[++s]+";"))}null!==r&&(e.styles=r),null!==n&&(e.classes=n)}let qi=null;function Wi(){if(!qi){const e=De.Symbol;if(e&&e.iterator)qi=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(qi=r)}}}return qi}function Gi(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function Ki(e){return!!Qi(e)&&(Array.isArray(e)||!(e instanceof Map)&&Wi()in e)}function Qi(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Zi(e,t,r){return!Object.is(e[t],r)&&(e[t]=r,!0)}function Ji(e,t=oe.Default){const r=Ot();return null==r?Ge(e,t):Er(Tt(),r,Ce(e),t)}function Yi(){throw new Error("invalid")}function Xi(e,t,r){const n=Ot();if(Zi(n,Mt.lFrame.bindingIndex++,t)){const i=Wt();!function(e,t,r,n,i,s,o,a){const c=$r(r,t),l=Br(e,r);let u,h=l.inputs;if(null!=h&&(u=h[n]))Jn(e,t,u,n,i),Et(l)&&function(e,t){const r=Hr(t,e);16&r[2]||(r[2]|=64)}(t,r+19);else if(3===l.type){n="class"===(d=n)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d;const e=t[11];i=null!=s?s(i,l.tagName||"",n):i,rr(e)?e.setProperty(c,n,i):or(n)||(c.setProperty?c.setProperty(n,i):c[n]=i)}var d}(At(),n,i,e,t,r)}return Xi}function es(e,t,r,n,i){const s=t.inputs,o=i?"class":"style";Jn(e,r,s[o]||i&&s.className,o,n)}function ts(e,t,r,n){const i=Ot(),s=At(),o=19+e,a=i[11],c=i[o]=yn(t,a,Mt.lFrame.currentNamespace),l=s.firstCreatePass?function(e,t,r,n,i,s,o){const a=t.consts,c=Wr(a,s),l=bn(t,r[6],e,3,i,c);return function(e,t,r,n){let i=!1;if(Dt()){const s=function(e,t,r){const n=e.directiveRegistry;let i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];nn(r,o.selectors,!1)&&(i||(i=[]),Cr(_r(r,t),e,o.type),Pt(o)?(2&r.flags&&Qr(r),Rn(e,r),i.unshift(o)):i.push(o))}return i}(e,t,r),o=null===n?null:{"":-1};if(null!==s){let n=0;i=!0,Vn(r,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}Tn(e,r,s.length);let a=!1,c=!1;for(let i=0;i<s.length;i++){const l=s[i];r.mergedAttrs=ar(r.mergedAttrs,l.hostAttrs),Ln(e,t,l),kn(e.data.length-1,l,o),null!==l.contentQueries&&(r.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(r.flags|=128),!a&&(l.onChanges||l.onInit||l.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r.index-19),a=!0),c||!l.onChanges&&!l.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r.index-19),c=!0),Dn(e,l),n+=l.hostVars}!function(e,t){const r=t.directiveEnd,n=e.data,i=t.attrs,s=[];let o=null,a=null;for(let c=t.directiveStart;c<r;c++){const e=n[c],t=e.inputs;s.push(null!==i?Nn(t,i):null),o=Mn(t,c,o),a=Mn(e.outputs,c,a)}null!==o&&((o.hasOwnProperty("class")||o.hasOwnProperty("className"))&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,r),On(e,t,n)}o&&function(e,t,r){if(t){const n=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=r[t[e+1]];if(null==i)throw new Error(`Export of name '${t[e+1]}' not found!`);n.push(t[e],i)}}}(r,n,o)}r.mergedAttrs=ar(r.mergedAttrs,r.attrs)}(t,r,l,Wr(a,o)),null!==l.mergedAttrs&&zi(l,l.mergedAttrs),null!==t.queries&&t.queries.elementStart(t,l),l}(e,s,i,0,t,r,n):s.data[o];Rt(l,!0);const u=l.mergedAttrs;null!==u&&ir(a,c,u);const h=l.classes;null!==h&&vi(a,c,h);const d=l.styles;null!==d&&gi(a,c,d),hi(s,i,c,l),0===Mt.lFrame.elementDepthCount&&Kr(c,i),Mt.lFrame.elementDepthCount++,xt(l)&&(function(e,t,r){Dt()&&(function(e,t,r,n){const i=r.directiveStart,s=r.directiveEnd;e.firstCreatePass||_r(r,t),Kr(n,t);const o=r.initialInputs;for(let a=i;a<s;a++){const n=e.data[a],s=Pt(n);s&&Fn(t,r,n);const c=Ir(t,e,a,r);Kr(c,t),null!==o&&jn(0,a-i,c,n,0,o),s&&(Hr(r.index,t)[8]=c)}}(e,t,r,Ur(r,t)),128==(128&r.flags)&&function(e,t,r){const n=r.directiveStart,i=r.directiveEnd,s=e.expandoInstructions,o=e.firstCreatePass,a=r.index-19;try{Gt(a);for(let r=n;r<i;r++){const n=e.data[r],i=t[r];null!==n.hostBindings||0!==n.hostVars||null!==n.hostAttrs?An(n,i):o&&s.push(null)}}finally{Gt(-1)}}(e,t,r))}(s,i,l),function(e,t,r){if(Ct(t)){const n=t.directiveEnd;for(let i=t.directiveStart;i<n;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,r[i],i)}}}(s,l,i)),null!==n&&function(e,t,r=Ur){const n=t.localNames;if(null!==n){let i=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?r(t,e):e[o];e[i++]=a}}}(i,l)}function rs(){let e=Tt();kt()?Mt.lFrame.isParent=!1:(e=e.parent,Rt(e,!1));const t=e;Mt.lFrame.elementDepthCount--;const r=At();r.firstCreatePass&&(Kt(r,e),Ct(e)&&r.queries.elementEnd(e)),null!==t.classes&&function(e){return 0!=(16&e.flags)}(t)&&es(r,t,Ot(),t.classes,!0),null!==t.styles&&function(e){return 0!=(32&e.flags)}(t)&&es(r,t,Ot(),t.styles,!1)}function ns(e,t,r,n){ts(e,t,r,n),rs()}function is(e){return!!e&&"function"==typeof e.then}function ss(e){return!!e&&"function"==typeof e.subscribe}function os(e,t,r=!1,n){const i=Ot(),s=At(),o=Tt();return function(e,t,r,n,i,s,o=!1,a){const c=xt(n),l=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),u=Qn(t);let h=!0;if(3===n.type){const d=Ur(n,t),p=a?a(d):ct,f=p.target||d,m=u.length,g=a?e=>a(Nr(e[n.index])).target:n.index;if(rr(r)){let o=null;if(!a&&c&&(o=function(e,t,r,n){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===r&&i[s+1]===n){const e=t[7],r=i[s+2];return e.length>r?e[r]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,n.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=cs(n,t,s,!1);const e=r.listen(p.name||f,i,s);u.push(s,e),l&&l.push(i,g,m,m+1)}}else s=cs(n,t,s,!0),f.addEventListener(i,s,o),u.push(s),l&&l.push(i,g,m,o)}const d=n.outputs;let p;if(h&&null!==d&&(p=d[i])){const e=p.length;if(e)for(let r=0;r<e;r+=2){const e=t[p[r]][p[r+1]].subscribe(s),o=u.length;u.push(s,e),l&&l.push(i,n.index,o,-(o+1))}}}(s,i,i[11],o,e,t,r,n),os}function as(e,t,r){try{return!1!==t(r)}catch(n){return Zn(e,n),!1}}function cs(e,t,r,n){return function i(s){if(s===Function)return r;const o=2&e.flags?Hr(e.index,t):t;0==(32&t[2])&&zn(o);let a=as(t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=as(t,c,s)&&a,c=c.__ngNextListenerFn__;return n&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}const ls=[];function us(e,t,r,n,i){const s=e[r+1],o=null===t;let a=n?dn(s):fn(s),c=!1;for(;0!==a&&(!1===c||o);){const r=e[a+1];hs(e[a],t)&&(c=!0,e[a+1]=n?gn(r):pn(r)),a=n?dn(r):fn(r)}c&&(e[r+1]=n?pn(s):gn(s))}function hs(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&it(e,t)>=0}function ds(e,t){return function(e,t,r,n){const i=Ot(),s=At(),o=function(e){const t=Mt.lFrame,r=t.bindingIndex;return t.bindingIndex=t.bindingIndex+2,r}();if(s.firstUpdatePass&&function(e,t,r,n){const i=e.data;if(null===i[r+1]){const n=i[Wt()+19],s=function(e,t){return t>=e.expandoStartIndex}(e,r);(function(e,t){return 0!=(16&e.flags)})(n)&&null===t&&!s&&(t=!1),t=function(e,t,r,n){const i=function(e){const t=Mt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=t.residualClasses;if(null===i)0===t.classBindings&&(r=fs(r=ps(null,e,t,r,!0),t.attrs,!0),s=null);else{const n=t.directiveStylingLast;if(-1===n||e[n]!==i)if(r=ps(i,e,t,r,!0),null===s){let r=function(e,t,r){const n=t.classBindings;if(0!==fn(n))return e[dn(n)]}(e,t);void 0!==r&&Array.isArray(r)&&(r=ps(null,e,t,r[1],!0),r=fs(r,t.attrs,!0),function(e,t,r,n){e[dn(t.classBindings)]=n}(e,t,0,r))}else s=function(e,t,r){let n=void 0;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)n=fs(n,e[s].hostAttrs,!0);return fs(n,t.attrs,!0)}(e,t)}return void 0!==s&&(t.residualClasses=s),r}(i,n,t),function(e,t,r,n,i,s){let o=t.classBindings,a=dn(o),c=fn(o);e[n]=r;let l,u=!1;if(Array.isArray(r)){const e=r;l=e[1],(null===l||it(e,l)>0)&&(u=!0)}else l=r;if(i)if(0!==c){const t=dn(e[a+1]);e[n+1]=hn(t,a),0!==t&&(e[t+1]=mn(e[t+1],n)),e[a+1]=131071&e[a+1]|n<<17}else e[n+1]=hn(a,0),0!==a&&(e[a+1]=mn(e[a+1],n)),a=n;else e[n+1]=hn(c,0),0===a?a=n:e[c+1]=mn(e[c+1],n),c=n;u&&(e[n+1]=pn(e[n+1])),us(e,l,n,!0),us(e,l,n,!1),function(e,t,r,n,i){const s=e.residualClasses;null!=s&&"string"==typeof t&&it(s,t)>=0&&(r[n+1]=gn(r[n+1]))}(t,l,e,n),o=hn(a,c),t.classBindings=o}(i,n,t,r,s)}}(s,e,o),t!==an&&Zi(i,o,t)){let n;null==r&&(n=function(){const e=Mt.lFrame;return null===e?null:e.currentSanitizer}())&&(r=n),function(e,t,r,n,i,s,o,a){if(3!==t.type)return;const c=e.data,l=c[a+1];gs(1==(1&l)?ms(c,t,r,i,fn(l),!0):void 0)||(gs(s)||function(e){return 2==(2&e)}(l)&&(s=ms(c,null,r,i,a,!0)),function(e,t,r,n,i){const s=rr(e);i?s?e.addClass(r,n):r.classList.add(n):s?e.removeClass(r,n):r.classList.remove(n)}(n,0,$r(Wt(),r),i,s))}(s,s.data[Wt()+19],i,i[11],e,i[o+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=_e(function(e){return e instanceof class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(t,r),0,o)}}(e,t,null),ds}function ps(e,t,r,n,i){let s=null;const o=r.directiveEnd;let a=r.directiveStylingLast;for(-1===a?a=r.directiveStart:a++;a<o&&(s=t[a],n=fs(n,s.hostAttrs,i),s!==e);)a++;return null!==e&&(r.directiveStylingLast=a),n}function fs(e,t,r){const n=r?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===n&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),rt(e,o,!!r||t[++s]))}return void 0===e?null:e}function ms(e,t,r,n,i,s){const o=null===t;let a=void 0;for(;i>0;){const t=e[i],s=Array.isArray(t),c=s?t[1]:t,l=null===c;let u=r[i+1];u===an&&(u=l?ls:void 0);let h=l?nt(u,n):c===n?u:void 0;if(s&&!gs(h)&&(h=nt(t,n)),gs(h)&&(a=h,o))return a;const d=e[i+1];i=o?dn(d):fn(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=nt(e,n))}return a}function gs(e){return void 0!==e}function vs(e,t=""){const r=Ot(),n=At(),i=e+19,s=n.firstCreatePass?bn(n,r[6],e,3,null,null):n.data[i],o=r[i]=function(e,t){return rr(t)?t.createText(e):t.createTextNode(e)}(t,r[11]);hi(n,r,o,s),Rt(s,!1)}function ys(e,t){const r=zr(e)[1],n=r.data.length-1;Kt(r,{directiveStart:n,directiveEnd:n+1})}function _s(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,r=!0;const n=[e];for(;t;){let i=void 0;if(Pt(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(r){n.push(i);const t=e;t.inputs=bs(e.inputs),t.declaredInputs=bs(e.declaredInputs),t.outputs=bs(e.outputs);const r=i.hostBindings;r&&Cs(e,r);const s=i.viewQuery,o=i.contentQueries;s&&ws(e,s),o&&Ss(e,o),ce(e.inputs,i.inputs),ce(e.declaredInputs,i.declaredInputs),ce(e.outputs,i.outputs),t.afterContentChecked=t.afterContentChecked||i.afterContentChecked,t.afterContentInit=e.afterContentInit||i.afterContentInit,t.afterViewChecked=e.afterViewChecked||i.afterViewChecked,t.afterViewInit=e.afterViewInit||i.afterViewInit,t.doCheck=e.doCheck||i.doCheck,t.onDestroy=e.onDestroy||i.onDestroy,t.onInit=e.onInit||i.onInit}const t=i.features;if(t)for(let n=0;n<t.length;n++){const i=t[n];i&&i.ngInherit&&i(e),i===_s&&(r=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,r=null;for(let n=e.length-1;n>=0;n--){const i=e[n];i.hostVars=t+=i.hostVars,i.hostAttrs=ar(i.hostAttrs,r=ar(r,i.hostAttrs))}}(n)}function bs(e){return e===ct?{}:e===lt?[]:e}function ws(e,t){const r=e.viewQuery;e.viewQuery=r?(e,n)=>{t(e,n),r(e,n)}:t}function Ss(e,t){const r=e.contentQueries;e.contentQueries=r?(e,n,i)=>{t(e,n,i),r(e,n,i)}:t}function Cs(e,t){const r=e.hostBindings;e.hostBindings=r?(e,n)=>{t(e,n),r(e,n)}:t}class Es{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function xs(){return Ps.ngInherit=!0,Ps}function Ps(e){e.type.prototype.ngOnChanges&&(e.setInput=Is,e.onChanges=function(){const e=Ms(this),t=e&&e.current;if(t){const r=e.previous;if(r===ct)e.previous=t;else for(let e in t)r[e]=t[e];e.current=null,this.ngOnChanges(t)}})}function Is(e,t,r,n){const i=Ms(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ct,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[r],c=o[a];s[a]=new Es(c&&c.currentValue,t,o===ct),e[n]=t}function Ms(e){return e.__ngSimpleChanges__||null}function Ds(e,t,r,n,i){if(e=Ce(e),Array.isArray(e))for(let s=0;s<e.length;s++)Ds(e[s],t,r,n,i);else{const s=At(),o=Ot();let a=Fi(e)?e:Ce(e.provide),c=ki(e);const l=Tt(),u=65535&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>16;if(Fi(e)||!e.multi){const n=new er(c,i,Ji),p=Ts(a,t,i?u:u+d,h);-1===p?(Cr(_r(l,o),s,a),Os(s,e,t.length),t.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),r.push(n),o.push(n)):(r[p]=n,o[p]=n)}else{const p=Ts(a,t,u+d,h),f=Ts(a,t,u,u+d),m=p>=0&&r[p],g=f>=0&&r[f];if(i&&!g||!i&&!m){Cr(_r(l,o),s,a);const u=function(e,t,r,n,i){const s=new er(e,r,Ji);return s.multi=[],s.index=t,s.componentProviders=0,As(s,i,n&&!r),s}(i?ks:Rs,r.length,i,n,c);!i&&g&&(r[f].providerFactory=u),Os(s,e,t.length),t.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),r.push(u),o.push(u)}else Os(s,e,p>-1?p:f),As(r[i?f:p],c,!i&&n);!i&&n&&g&&r[f].componentProviders++}}}function Os(e,t,r){if(Fi(t)||t.useClass){const n=(t.useClass||t).prototype.ngOnDestroy;n&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n)}}function As(e,t,r){e.multi.push(t),r&&e.componentProviders++}function Ts(e,t,r,n){for(let i=r;i<n;i++)if(t[i]===e)return i;return-1}function Rs(e,t,r,n){return Vs(this.multi,[])}function ks(e,t,r,n){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Ir(r,r[1],this.providerFactory.index,n);s=t.slice(0,e),Vs(i,s);for(let r=e;r<t.length;r++)s.push(t[r])}else s=[],Vs(i,s);return s}function Vs(e,t){for(let r=0;r<e.length;r++)t.push((0,e[r])());return t}function Ls(e,t=[]){return r=>{r.providersResolver=(r,n)=>function(e,t,r){const n=At();if(n.firstCreatePass){const i=Pt(e);Ds(r,n.data,n.blueprint,i,!0),Ds(t,n.data,n.blueprint,i,!1)}}(r,n?n(e):e,t)}}class Fs{}class js{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${_e(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let Ns=(()=>{class e{}return e.NULL=new js,e})(),$s=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>Us(e),e})();const Us=function(e){return Si(e,Tt(),Ot())};class Bs{}const Hs=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();let zs=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>qs(),e})();const qs=function(){const e=Ot(),t=Hr(Tt().index,e);return function(e){const t=e[11];if(rr(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(wt(t)?t:e)};let Ws=(()=>{class e{}return e.\u0275prov=le({token:e,providedIn:"root",factory:()=>null}),e})();class Gs{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ks=new Gs("9.0.2");class Qs{constructor(){}supports(e){return Ki(e)}create(e){return new Js(e)}}const Zs=(e,t)=>t;class Js{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Zs}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,n=0,i=null;for(;t||r;){const s=!r||t&&t.currentIndex<to(r,n,i)?t:r,o=to(s,n,i),a=s.currentIndex;if(s===r)n--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)n++;else{i||(i=[]);const e=o-n,t=a-n;if(e!=t){for(let r=0;r<e;r++){const n=r<i.length?i[r]:i[r]=0,s=n+r;t<=s&&s<e&&(i[r]=n+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ki(e))throw new Error(`Error trying to diff '${_e(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,r,n,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)r=e[t],n=this._trackByFn(t,r),null!==i&&Gi(i.trackById,n)?(s&&(i=this._verifyReinsertion(i,r,n,t)),Gi(i.item,r)||this._addIdentityChange(i,r)):(i=this._mismatch(i,r,n,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else{const r=e[Wi()]();let n;for(;!(n=r.next()).done;)t(n.value)}}(e,e=>{n=this._trackByFn(t,e),null!==i&&Gi(i.trackById,n)?(s&&(i=this._verifyReinsertion(i,e,n,t)),Gi(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,n,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,n){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,n))?(Gi(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,n)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Gi(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,n)):e=this._addAfter(new Ys(t,r),i,n),e}_verifyReinsertion(e,t,r,n){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,n):e.currentIndex!=n&&(e.currentIndex=n,this._addToMoves(e,n)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const n=e._prevRemoved,i=e._nextRemoved;return null===n?this._removalsHead=i:n._nextRemoved=i,null===i?this._removalsTail=n:i._prevRemoved=n,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const n=null===t?this._itHead:t._next;return e._next=n,e._prev=t,null===n?this._itTail=e:n._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new eo),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new eo),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Ys{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Xs{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Gi(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class eo{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new Xs,this.map.set(t,r)),r.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function to(e,t,r){const n=e.previousIndex;if(null===n)return n;let i=0;return r&&n<r.length&&(i=r[n]),n+t+i}class ro{constructor(){}supports(e){return e instanceof Map||Qi(e)}create(){return new no}}class no{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Qi(e)))throw new Error(`Error trying to diff '${_e(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const n=this._getOrCreateRecordForKey(r,e);t=this._insertBeforeOrAppend(t,n)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const n=r._prev,i=r._next;return n&&(n._next=i),i&&(i._prev=n),r._next=null,r._prev=null,r}const r=new io(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Gi(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class io{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let so=(()=>{class e{constructor(e){this.factories=e}static create(t,r){if(null!=r){const e=r.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>{if(!r)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,r)},deps:[[e,new se,new ne]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${r=e,r.name||typeof r}'`);var r}}return e.\u0275prov=le({token:e,providedIn:"root",factory:()=>new e([new Qs])}),e})(),oo=(()=>{class e{constructor(e){this.factories=e}static create(t,r){if(r){const e=r.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>{if(!r)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,r)},deps:[[e,new se,new ne]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=le({token:e,providedIn:"root",factory:()=>new e([new ro])}),e})();const ao=[new ro],co=new so([new Qs]),lo=new oo(ao);let uo=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>ho(e,$s),e})();const ho=function(e,t){return function(e,t,r,n){let i;wi||(wi=class extends e{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostView=r}get element(){return Si(t,this._hostTNode,this._hostView)}get injector(){return new Or(this._hostTNode,this._hostView)}get parentInjector(){const e=Sr(this._hostTNode,this._hostView),t=dr(e,this._hostView),r=function(e,t,r){if(r.parent&&-1!==r.parent.injectorIndex){const e=r.parent.injectorIndex;let t=r.parent;for(;null!=t.parent&&e==t.parent.injectorIndex;)t=t.parent;return t}let n=hr(e),i=t,s=t[6];for(;n>1;)i=i[15],s=i[6],n--;return s}(e,this._hostView,this._hostTNode);return lr(e)&&null!=r?new Or(r,t):new Or(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}get length(){return this._lContainer.length-9}createEmbeddedView(e,t,r){const n=e.createEmbeddedView(t||{});return this.insert(n,r),n}createComponent(e,t,r,n,i){const s=r||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(Je,null);e&&(i=e)}const o=e.create(s,n,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const r=e._lView,n=r[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),St(r[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=r[3],n=new wi(t,t[6],t[3]);n.detach(n.indexOf(e))}}const i=this._adjustIndex(t);return function(e,t,r,n){const i=9+n,s=r.length;n>0&&(r[i-1][4]=t),n<s-9?(t[4]=r[i],et(r,9+n,t)):(r.push(t),t[4]=null),t[3]=r;const o=t[17];null!==o&&r!==o&&function(e,t){const r=e[5],n=t[3][3][16];16!=(16&n[2])&&t[16]!==n&&(e[2]|=1),null===r?e[5]=[t]:r.push(t)}(o,t);const a=t[5];null!==a&&a.insertView(e),t[2]|=128}(n,r,this._lContainer,i),ti(n,r,!0,di(i,this._lContainer)),e.attachToViewContainerRef(this),et(this._lContainer[8],i,e),e}move(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}indexOf(e){const t=this._lContainer[8];return null!==t?t.indexOf(e):-1}remove(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1);(function(e,t){const r=ni(e,t);r&&ii(r[1],r)})(this._lContainer,t),tt(this._lContainer[8],t)}detach(e){this.allocateContainerIfNeeded();const t=this._adjustIndex(e,-1),r=ni(this._lContainer,t);return r&&null!=tt(this._lContainer[8],t)?new yi(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const s=n[r.index];if(St(s))i=s,function(e,t){e[2]=-2}(i);else{let e;if(4===r.type)e=Nr(s);else if(e=n[11].createComment(""),It(n)){const t=n[11],i=Ur(r,n);ai(t,ui(t,i),e,function(e,t){return rr(e)?e.nextSibling(t):t.nextSibling}(t,i))}else hi(n[1],n,e,r);n[r.index]=i=new Array(s,!0,-2,n,null,null,r,e,null),Hn(n,i)}return new wi(i,r,n)}(e,t,Tt(),Ot())},po={};function fo(e){const t=[];for(let r in e)e.hasOwnProperty(r)&&t.push({propName:e[r],templateName:r});return t}const mo=new Fe("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>fr});class go extends Fs{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(on).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return fo(this.componentDef.inputs)}get outputs(){return fo(this.componentDef.outputs)}create(e,t,r,n){const i=(n=n||this.ngModule)?function(e,t){return{get:(r,n,i)=>{const s=e.get(r,po,i);return s!==po||n===po?s:t.get(r,n,i)}}}(e,n.injector):e,s=i.get(Bs,nr),o=i.get(Ws,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",l=r?function(e,t,r){if(rr(e))return e.selectRootElement(t,r===ot.ShadowDom);let n="string"==typeof t?e.querySelector(t):t;return n.textContent="",n}(a,r,this.componentDef.encapsulation):yn(c,s.createRenderer(null,this.componentDef),function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),u=this.componentDef.onPush?576:528,h="string"==typeof r&&/^#root-ng-internal-isolated-\d+/.test(r),d={components:[],scheduler:fr,clean:Kn,playerHandler:null,flags:0},p=Pn(0,-1,null,1,0,null,null,null,null,null),f=_n(null,p,d,u,null,null,s,a,o,i);let m,g;$t(f,null);try{const e=function(e,t,r,n,i,s){const o=r[1];r[19]=e;const a=bn(o,null,0,3,null,null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(zi(a,c),null!==e&&(ir(i,e,c),null!==a.classes&&vi(i,e,a.classes),null!==a.styles&&gi(i,e,a.styles)));const l=n.createRenderer(e,t),u=_n(r,xn(t),null,t.onPush?64:16,r[19],a,n,l,void 0);return o.firstCreatePass&&(Cr(_r(a,r),o,t.type),Rn(o,a),Vn(a,r.length,1)),Hn(r,u),r[19]=u}(l,this.componentDef,f,s,a);if(l)if(r)ir(a,l,["ng-version",Ks.full]);else{const{attrs:e,classes:t}=function(e){const t=[],r=[];let n=1,i=2;for(;n<e.length;){let s=e[n];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++n]):8===i&&r.push(s);else{if(!tn(i))break;i=s}n++}return{attrs:t,classes:r}}(this.componentDef.selectors[0]);e&&ir(a,l,e),t&&t.length>0&&vi(a,l,t.join(" "))}g=Br(f[1],0),t&&(g.projection=t.map(e=>Array.from(e))),m=function(e,t,r,n,i){const s=r[1],o=function(e,t,r){const n=Tt();e.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),Tn(e,n,1),Ln(e,t,r));const i=Ir(t,e,t.length-1,n);Kr(i,t);const s=Ur(n,t);return s&&Kr(s,t),i}(s,r,t);n.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries&&t.contentQueries(1,o,r.length-1);const a=Tt();if(s.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){Gt(a.index-19);const e=r[1];Dn(e,t),On(e,r,t.hostVars),An(t,o)}return o}(e,this.componentDef,f,d,[ys]),wn(p,f,null)}finally{qt()}const v=new vo(this.componentType,m,Si($s,g,f),f,g);return r&&!h||(v.hostView._tViewNode.child=g),v}}class vo extends class{}{constructor(e,t,r,n,i){super(),this.location=r,this._rootLView=n,this._tNode=i,this.destroyCbs=[],this.instance=t,this.hostView=this.changeDetectorRef=new _i(n),this.hostView._tViewNode=function(e,t,r,n){let i=e.node;return null==i&&(e.node=i=In(0,null,2,-1,null,null)),n[6]=i}(n[1],0,0,n),this.componentType=e}get injector(){return new Or(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(e=>e()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(e){this.destroyCbs&&this.destroyCbs.push(e)}}const yo=void 0;var _o=["en",[["a","p"],["AM","PM"],yo],[["AM","PM"],yo,yo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],yo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],yo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",yo,"{1} 'at' {0}",yo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(e){let t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let bo={};function wo(e){return e in bo||(bo[e]=De.ng&&De.ng.common&&De.ng.common.locales&&De.ng.common.locales[e]),bo[e]}const So=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,PluralCase:19,ExtraData:20};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();let Co="en-US";function Eo(e){var t,r;r="Expected localeId to be defined",null==(t=e)&&function(e,t,r,n){throw new Error(`ASSERTION ERROR: ${e}`+` [Expected=> null != ${t} <=Actual]`)}(r,t),"string"==typeof e&&(Co=e.toLowerCase().replace(/_/g,"-"))}const xo=new Map,Po={provide:Ns,useClass:class extends Ns{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=yt(e);return new go(t,this.ngModule)}},deps:[Je]};class Io extends Je{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[];const r=bt(e),n=e[ke]||null;n&&Eo(n),this._bootstrapComponents=mr(r.bootstrap),this._r3Injector=Ai(e,t,[{provide:Je,useValue:this},Po],_e(e)),this.instance=this.get(e)}get(e,t=Ni.THROW_IF_NOT_FOUND,r=oe.Default){return e===Ni||e===Je||e===je?this:this._r3Injector.get(e,t,r)}get componentFactoryResolver(){return this.get(Ns)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Mo extends Ye{constructor(e){super(),this.moduleType=e,null!==bt(e)&&function e(t){if(null!==t.\u0275mod.id){const e=t.\u0275mod.id;(function(e,t,r){if(t&&t!==r)throw new Error(`Duplicate module registered for ${e} - ${_e(t)} vs ${_e(t.name)}`)})(e,xo.get(e),t),xo.set(e,t)}let r=t.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach(t=>e(t))}(e)}create(e){return new Io(this.moduleType,e)}}class Do extends x{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let n,i=e=>null,s=()=>null;e&&"object"==typeof e?(n=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(i=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(s=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(n=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),r&&(s=this.__isAsync?()=>{setTimeout(()=>r())}:()=>{r()}));const o=super.subscribe(n,i,s);return e instanceof h&&e.add(o),o}}const Oo=new Fe("Application Initializer");let Ao=(()=>{class e{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const t=this.appInits[r]();is(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Ge(Oo,8))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const To=new Fe("AppId"),Ro={provide:To,useFactory:function(){return`${ko()}${ko()}${ko()}`},deps:[]};function ko(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vo=new Fe("Platform Initializer"),Lo=new Fe("Platform ID"),Fo=new Fe("appBootstrapListener");let jo=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const No=new Fe("LocaleId"),$o=new Fe("DefaultCurrencyCode");class Uo{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Bo=function(e){return new Mo(e)},Ho=Bo,zo=function(e){return Promise.resolve(Bo(e))},qo=function(e){const t=Bo(e),r=mr(bt(e).declarations).reduce((e,t)=>{const r=yt(t);return r&&e.push(new go(r)),e},[]);return new Uo(t,r)},Wo=qo,Go=function(e){return Promise.resolve(qo(e))};let Ko=(()=>{class e{constructor(){this.compileModuleSync=Ho,this.compileModuleAsync=zo,this.compileModuleAndAllComponentsSync=Wo,this.compileModuleAndAllComponentsAsync=Go}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const Qo=new Fe("compilerOptions"),Zo=(()=>Promise.resolve(0))();function Jo(e){"undefined"==typeof Zone?Zo.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Yo{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Do(!1),this.onMicrotaskEmpty=new Do(!1),this.onStable=new Do(!1),this.onError=new Do(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=t,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=De.requestAnimationFrame,t=De.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=!!e.shouldCoalesceEventChangeDetection&&e.nativeRequestAnimationFrame&&(()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(De,()=>{e.lastRequestAnimationFrameId=-1,ra(e),ta(e)}),ra(e))}(e)});e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:t},onInvokeTask:(r,n,i,s,o,a)=>{try{return na(e),r.invokeTask(i,s,o,a)}finally{t&&"eventTask"===s.type&&t(),ia(e)}},onInvoke:(t,r,n,i,s,o,a)=>{try{return na(e),t.invoke(n,i,s,o,a)}finally{ia(e)}},onHasTask:(t,r,n,i)=>{t.hasTask(n,i),r===n&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,ra(e),ta(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,r,n,i)=>(t.handleError(n,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,n){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+n,e,ea,Xo,Xo);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}function Xo(){}const ea={};function ta(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function ra(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function na(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function ia(e){e._nesting--,ta(e)}class sa{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Do,this.onMicrotaskEmpty=new Do,this.onStable=new Do,this.onError=new Do}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,n){return e.apply(t,r)}}let oa=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yo.assertNotInAngularZone(),Jo(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jo(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,r){let n=-1;t&&t>0&&(n=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==n),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:n,updateCb:r})}whenStable(e,t,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,r){return[]}}return e.\u0275fac=function(t){return new(t||e)(Ge(Yo))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),aa=(()=>{class e{constructor(){this._applications=new Map,ua.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return ua.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();class ca{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let la,ua=new ca,ha=function(e,t,r){const n=new Mo(r);if(0===Ui.size)return Promise.resolve(n);const i=function(e){const t=[];return e.forEach(e=>e&&t.push(...e)),t}(e.get(Qo,[]).concat(t).map(e=>e.providers));if(0===i.length)return Promise.resolve(n);const s=function(){const e=De.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),o=Ni.create({providers:i}).get(s.ResourceLoader);return function(e){const t=[],r=new Map;function n(e){let t=r.get(e);if(!t){const n=(e=>Promise.resolve(o.get(e)))(e);r.set(e,t=n.then(Hi))}return t}return Ui.forEach((e,r)=>{const i=[];e.templateUrl&&i.push(n(e.templateUrl).then(t=>{e.template=t}));const s=e.styleUrls,o=e.styles||(e.styles=[]),a=e.styles.length;s&&s.forEach((t,r)=>{o.push(""),i.push(n(t).then(n=>{o[a+r]=n,s.splice(s.indexOf(t),1),0==s.length&&(e.styleUrls=void 0)}))});const c=Promise.all(i).then(()=>function(e){Bi.delete(e)}(r));t.push(c)}),Ui=new Map,Promise.all(t).then(()=>{})}().then(()=>n)};const da=new Fe("AllowMultipleToken");class pa{constructor(e,t){this.name=e,this.token=t}}function fa(e,t,r=[]){const n=`Platform: ${t}`,i=new Fe(n);return(t=[])=>{let s=ma();if(!s||s.injector.get(da,!1))if(e)e(r.concat(t).concat({provide:i,useValue:!0}));else{const e=r.concat(t).concat({provide:i,useValue:!0},{provide:xi,useValue:"platform"});!function(e){if(la&&!la.destroyed&&!la.injector.get(da,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");la=e.get(ga);const t=e.get(Vo,null);t&&t.forEach(e=>e())}(Ni.create({providers:e,name:n}))}return function(e){const t=ma();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function ma(){return la&&!la.destroyed?la:null}let ga=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const r=function(e,t){let r;return r="noop"===e?new sa:("zone.js"===e?void 0:e)||new Yo({enableLongStackTrace:jr(),shouldCoalesceEventChangeDetection:t}),r}(t?t.ngZone:void 0,t&&t.ngZoneEventCoalescing||!1),n=[{provide:Yo,useValue:r}];return r.run(()=>{const t=Ni.create({providers:n,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(Vr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>_a(this._modules,i)),r.runOutsideAngular(()=>r.onError.subscribe({next:e=>{s.handleError(e)}})),function(e,t,r){try{const n=r();return is(n)?n.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>e.handleError(n)),n}}(s,r,()=>{const e=i.injector.get(Ao);return e.runInitializers(),e.donePromise.then(()=>(Eo(i.injector.get(No,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const r=va({},t);return ha(this.injector,r,e).then(e=>this.bootstrapModuleFactory(e,r))}_moduleDoBootstrap(e){const t=e.injector.get(ya);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${_e(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Ge(Ni))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();function va(e,t){return Array.isArray(t)?t.reduce(va,e):Object.assign(Object.assign({},e),t)}let ya=(()=>{class e{constructor(e,t,r,n,i,s){this._zone=e,this._console=t,this._injector=r,this._exceptionHandler=n,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=jr(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new b(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),a=new b(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Yo.assertNotInAngularZone(),Jo(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const r=this._zone.onUnstable.subscribe(()=>{Yo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),r.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,r=null,n=e[e.length-1];return I(n)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof n&&(t=e.pop()),null===r&&1===e.length&&e[0]instanceof b?e[0]:W(t)(G(e,r))}(o,a.pipe(e=>{return K()((t=ee,function(e){let r;r="function"==typeof t?t:function(){return t};const n=Object.create(e,Y);return n.source=e,n.subjectFactory=r,n})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let r;r=e instanceof Fs?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const n=r.isBoundToModule?void 0:this._injector.get(Je),i=r.create(Ni.NULL,[],t||r.selector,n);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(oa,null);return s&&i.injector.get(aa).registerApplication(i.location.nativeElement,s),this._loadComponent(i),jr()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;_a(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Fo,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),_a(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Ge(Yo),Ge(jo),Ge(Ni),Ge(Vr),Ge(Ns),Ge(Ao))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();function _a(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class ba{}class wa{}const Sa={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ca=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Sa}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,n]=e.split("#");return void 0===n&&(n="default"),r("zn8P")(t).then(e=>e[n]).then(e=>Ea(e,t,n)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,n]=e.split("#"),i="NgFactory";return void 0===n&&(n="default",i=""),r("zn8P")(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[n+i]).then(e=>Ea(e,t,n))}}return e.\u0275fac=function(t){return new(t||e)(Ge(Ko),Ge(wa,8))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();function Ea(e,t,r){if(!e)throw new Error(`Cannot find '${r}' in '${t}'`);return e}const xa=fa(null,"core",[{provide:Lo,useValue:"unknown"},{provide:ga,deps:[Ni]},{provide:aa,deps:[]},{provide:jo,deps:[]}]),Pa=[{provide:ya,useClass:ya,deps:[Yo,jo,Ni,Vr,Ns,Ao]},{provide:mo,deps:[Yo],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Ao,useClass:Ao,deps:[[new ne,Oo]]},{provide:Ko,useClass:Ko,deps:[]},Ro,{provide:so,useFactory:function(){return co},deps:[]},{provide:oo,useFactory:function(){return lo},deps:[]},{provide:No,useFactory:function(e){return Eo(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new re(No),new ne,new se]]},{provide:$o,useValue:"USD"}];let Ia=(()=>{class e{constructor(e){}}return e.\u0275mod=mt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)(Ge(ya))},providers:Pa}),e})(),Ma=null;function Da(){return Ma}const Oa=new Fe("DocumentToken");let Aa=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({factory:Ta,token:e,providedIn:"platform"}),e})();function Ta(){return Ge(ka)}const Ra=new Fe("Location Initialized");let ka=(()=>{class e extends Aa{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=Da().getLocation(),this._history=Da().getHistory()}getBaseHrefFromDOM(){return Da().getBaseHref(this._doc)}onPopState(e){Da().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}onHashChange(e){Da().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,r){Va()?this._history.pushState(e,t,r):this.location.hash=r}replaceState(e,t,r){Va()?this._history.replaceState(e,t,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Ge(Oa))},e.\u0275prov=le({factory:La,token:e,providedIn:"platform"}),e})();function Va(){return!!window.history.pushState}function La(){return new ka(Ge(Oa))}function Fa(e,t){if(0==e.length)return t;if(0==t.length)return e;let r=0;return e.endsWith("/")&&r++,t.startsWith("/")&&r++,2==r?e+t.substring(1):1==r?e+t:e+"/"+t}function ja(e){const t=e.match(/#|\?|$/),r=t&&t.index||e.length;return e.slice(0,r-("/"===e[r-1]?1:0))+e.slice(r)}function Na(e){return e&&"?"!==e[0]?"?"+e:e}let $a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({factory:Ua,token:e,providedIn:"root"}),e})();function Ua(e){const t=Ge(Oa).location;return new Ha(Ge(Aa),t&&t.origin||"")}const Ba=new Fe("appBaseHref");let Ha=(()=>{class e extends $a{constructor(e,t){if(super(),this._platformLocation=e,null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Fa(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+Na(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${t}${r}`:t}pushState(e,t,r,n){const i=this.prepareExternalUrl(r+Na(n));this._platformLocation.pushState(e,t,i)}replaceState(e,t,r,n){const i=this.prepareExternalUrl(r+Na(n));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Ge(Aa),Ge(Ba,8))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),za=(()=>{class e extends $a{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",null!=t&&(this._baseHref=t)}onPopState(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=Fa(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,r,n){let i=this.prepareExternalUrl(r+Na(n));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,r,n){let i=this.prepareExternalUrl(r+Na(n));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return e.\u0275fac=function(t){return new(t||e)(Ge(Aa),Ge(Ba,8))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),qa=(()=>{class e{constructor(e,t){this._subject=new Do,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=ja(Ga(r)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+Na(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Ga(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",r=null){this._platformStrategy.pushState(r,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Na(t)),r)}replaceState(e,t="",r=null){this._platformStrategy.replaceState(r,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Na(t)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(e){this._urlChangeListeners.push(e),this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)})}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(r=>r(e,t))}subscribe(e,t,r){return this._subject.subscribe({next:e,error:t,complete:r})}}return e.\u0275fac=function(t){return new(t||e)(Ge($a),Ge(Aa))},e.normalizeQueryParams=Na,e.joinWithSlash=Fa,e.stripTrailingSlash=ja,e.\u0275prov=le({factory:Wa,token:e,providedIn:"root"}),e})();function Wa(){return new qa(Ge($a),Ge(Aa))}function Ga(e){return e.replace(/\/index.html$/,"")}const Ka=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}();class Qa{}let Za=(()=>{class e extends Qa{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let r=wo(t);if(r)return r;const n=t.split("-")[0];if(r=wo(n),r)return r;if("en"===n)return _o;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[So.PluralCase]}(t||this.locale)(e)){case Ka.Zero:return"zero";case Ka.One:return"one";case Ka.Two:return"two";case Ka.Few:return"few";case Ka.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(Ge(No))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),Ja=(()=>{class e{}return e.\u0275mod=mt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)},providers:[{provide:Qa,useClass:Za}]}),e})(),Ya=(()=>{class e{}return e.\u0275prov=le({token:e,providedIn:"root",factory:()=>new Xa(Ge(Oa),window,Ge(Vr))}),e})();class Xa{constructor(e,t,r){this.document=e,this.window=t,this.errorHandler=r,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const t=this.document.querySelector(`#${e}`);if(t)return void this.scrollToElement(t);const r=this.document.querySelector(`[name='${e}']`);if(r)return void this.scrollToElement(r)}catch(t){this.errorHandler.handleError(t)}}}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,n=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],n-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}class ec extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new ec,Ma||(Ma=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=rc||(rc=document.querySelector("base"),rc)?rc.getAttribute("href"):null;return null==t?null:(r=t,tc||(tc=document.createElement("a")),tc.setAttribute("href",r),"/"===tc.pathname.charAt(0)?tc.pathname:"/"+tc.pathname);var r}resetBaseElement(){rc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const r of e.split(";")){const e=r.indexOf("="),[n,i]=-1==e?[r,""]:[r.slice(0,e),r.slice(e+1)];if(n.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,e)}}let tc,rc=null;const nc=new Fe("TRANSITION_ID"),ic=[{provide:Oo,useFactory:function(e,t,r){return()=>{r.get(Ao).donePromise.then(()=>{const r=Da();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>r.remove(e))})}},deps:[nc,Oa,Ni],multi:!0}];class sc{static init(){var e;e=new sc,ua=e}addToWindow(e){De.getAngularTestability=(t,r=!0)=>{const n=e.findTestabilityInTree(t,r);if(null==n)throw new Error("Could not find testability for element.");return n},De.getAllAngularTestabilities=()=>e.getAllTestabilities(),De.getAllAngularRootElements=()=>e.getAllRootElements(),De.frameworkStabilizers||(De.frameworkStabilizers=[]),De.frameworkStabilizers.push(e=>{const t=De.getAllAngularTestabilities();let r=t.length,n=!1;const i=function(t){n=n||t,r--,0==r&&e(n)};t.forEach((function(e){e.whenStable(i)}))})}findTestabilityInTree(e,t,r){if(null==t)return null;const n=e.getTestability(t);return null!=n?n:r?Da().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const oc=new Fe("EventManagerPlugins");let ac=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,r){return this._findPluginFor(t).addEventListener(e,t,r)}addGlobalEventListener(e,t,r){return this._findPluginFor(t).addGlobalEventListener(e,t,r)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const r=this._plugins;for(let n=0;n<r.length;n++){const t=r[n];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(Ge(oc),Ge(Yo))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();class cc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const n=Da().getGlobalEventTarget(this._doc,e);if(!n)throw new Error(`Unsupported event target ${n} for event ${t}`);return this.addEventListener(n,t,r)}}let lc=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),uc=(()=>{class e extends lc{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,this._styleNodes.add(t.appendChild(r))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>Da().remove(e))}}return e.\u0275fac=function(t){return new(t||e)(Ge(Oa))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const hc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},dc=/%COMP%/g;function pc(e,t,r){for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)?pc(e,i,r):(i=i.replace(dc,e),r.push(i))}return r}function fc(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let mc=(()=>{class e{constructor(e,t,r){this.eventManager=e,this.sharedStylesHost=t,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new gc(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case ot.Emulated:{let r=this.rendererByCompId.get(t.id);return r||(r=new vc(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,r)),r.applyToHost(e),r}case ot.Native:case ot.ShadowDom:return new yc(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=pc(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Ge(ac),Ge(uc),Ge(To))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();class gc{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(hc[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,n){if(n){t=n+":"+t;const i=hc[n];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const n=hc[r];n?e.removeAttributeNS(n,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,n){n&Hs.DashCase?e.style.setProperty(t,r,n&Hs.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Hs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,fc(r)):this.eventManager.addEventListener(e,t,fc(r))}}class vc extends gc{constructor(e,t,r,n){super(e),this.component=r;const i=pc(n+"-"+r.id,r.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(dc,n+"-"+r.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(dc,e)}(n+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class yc extends gc{constructor(e,t,r,n){super(e),this.sharedStylesHost=t,this.hostEl=r,this.component=n,this.shadowRoot=n.encapsulation===ot.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=pc(n.id,n.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let _c=(()=>{class e extends cc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,r){return e.addEventListener(t,r,!1),()=>this.removeEventListener(e,t,r)}removeEventListener(e,t,r){return e.removeEventListener(t,r)}}return e.\u0275fac=function(t){return new(t||e)(Ge(Oa))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const bc=["alt","control","meta","shift"],wc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cc={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Ec=(()=>{class e extends cc{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,n){const i=e.parseEventName(r),s=e.eventCallback(i.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Da().onAndCancel(t,i.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),n=r.shift();if(0===r.length||"keydown"!==n&&"keyup"!==n)return null;const i=e._normalizeKey(r.pop());let s="";if(bc.forEach(e=>{const t=r.indexOf(e);t>-1&&(r.splice(t,1),s+=e+".")}),s+=i,0!=r.length||0===i.length)return null;const o={};return o.domEventName=n,o.fullKey=s,o}static getEventFullKey(e){let t="",r=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Sc.hasOwnProperty(t)&&(t=Sc[t]))}return wc[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),bc.forEach(n=>{n!=r&&(0,Cc[n])(e)&&(t+=n+".")}),t+=r,t}static eventCallback(t,r,n){return i=>{e.getEventFullKey(i)===t&&n.runGuarded(()=>r(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(Ge(Oa))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();const xc=fa(xa,"browser",[{provide:Lo,useValue:"browser"},{provide:Vo,useValue:function(){ec.makeCurrent(),sc.init()},multi:!0},{provide:Oa,useFactory:function(){return function(e){tr=e}(document),document},deps:[]}]),Pc=[[],{provide:xi,useValue:"root"},{provide:Vr,useFactory:function(){return new Vr},deps:[]},{provide:oc,useClass:_c,multi:!0,deps:[Oa,Yo,Lo]},{provide:oc,useClass:Ec,multi:!0,deps:[Oa]},[],{provide:mc,useClass:mc,deps:[ac,uc,To]},{provide:Bs,useExisting:mc},{provide:lc,useExisting:uc},{provide:uc,useClass:uc,deps:[Oa]},{provide:oa,useClass:oa,deps:[Yo]},{provide:ac,useClass:ac,deps:[oc,Yo]},[]];let Ic=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:To,useValue:t.appId},{provide:nc,useExisting:To},ic]}}}return e.\u0275mod=mt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)(Ge(e,12))},providers:Pc,imports:[Ja,Ia]}),e})();function Mc(e,t){return new b(r=>{const n=e.length;if(0===n)return void r.complete();const i=new Array(n);let s=0,o=0;for(let a=0;a<n;a++){const c=U(e[a]);let l=!1;r.add(c.subscribe({next:e=>{l||(l=!0,o++),i[a]=e},error:e=>r.error(e),complete:()=>{s++,s!==n&&l||(o===n&&r.next(t?t.reduce((e,t,r)=>(e[t]=i[r],e),{}):i),r.complete())}}))}})}"undefined"!=typeof window&&window;const Dc=new Fe("NgValueAccessor"),Oc={provide:Dc,useExisting:Se(()=>Ac),multi:!0};let Ac=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(Ji(zs),Ji($s))},e.\u0275dir=vt({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&os("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(e){return t.onTouched()}))},features:[Ls([Oc])]}),e})();const Tc={provide:Dc,useExisting:Se(()=>kc),multi:!0},Rc=new Fe("CompositionEventMode");let kc=(()=>{class e{constructor(e,t,r){this._renderer=e,this._elementRef=t,this._compositionMode=r,this.onChange=e=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=Da()?Da().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(Ji(zs),Ji($s),Ji(Rc,8))},e.\u0275dir=vt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&os("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(e){return t.onTouched()}))("compositionstart",(function(e){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[Ls([Tc])]}),e})(),Vc=(()=>{class e{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=vt({type:e}),e})(),Lc=(()=>{class e extends Vc{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(t){return Fc(t||e)},e.\u0275dir=vt({type:e,features:[_s]}),e})();const Fc=Ar(Lc);function jc(){throw new Error("unimplemented")}class Nc extends Vc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return jc()}get asyncValidator(){return jc()}}let $c=(()=>{class e extends class{constructor(e){this._cd=e}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(Ji(Nc,2))},e.\u0275dir=vt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&ds("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[_s]}),e})();function Uc(e){return null==e||0===e.length}const Bc=new Fe("NgValidators"),Hc=new Fe("NgAsyncValidators"),zc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qc{static min(e){return t=>{if(Uc(t.value)||Uc(e))return null;const r=parseFloat(t.value);return!isNaN(r)&&r<e?{min:{min:e,actual:t.value}}:null}}static max(e){return t=>{if(Uc(t.value)||Uc(e))return null;const r=parseFloat(t.value);return!isNaN(r)&&r>e?{max:{max:e,actual:t.value}}:null}}static required(e){return Uc(e.value)?{required:!0}:null}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return Uc(e.value)?null:zc.test(e.value)?null:{email:!0}}static minLength(e){return t=>{if(Uc(t.value))return null;const r=t.value?t.value.length:0;return r<e?{minlength:{requiredLength:e,actualLength:r}}:null}}static maxLength(e){return t=>{const r=t.value?t.value.length:0;return r>e?{maxlength:{requiredLength:e,actualLength:r}}:null}}static pattern(e){if(!e)return qc.nullValidator;let t,r;return"string"==typeof e?(r="","^"!==e.charAt(0)&&(r+="^"),r+=e,"$"!==e.charAt(e.length-1)&&(r+="$"),t=new RegExp(r)):(r=e.toString(),t=e),e=>{if(Uc(e.value))return null;const n=e.value;return t.test(n)?null:{pattern:{requiredPattern:r,actualValue:n}}}}static nullValidator(e){return null}static compose(e){if(!e)return null;const t=e.filter(Wc);return 0==t.length?null:function(e){return Kc(function(e,t){return t.map(t=>t(e))}(e,t))}}static composeAsync(e){if(!e)return null;const t=e.filter(Wc);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if(c(t))return Mc(t,null);if(l(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Mc(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return Mc(e=1===e.length&&c(e[0])?e[0]:e,null).pipe(F(e=>t(...e)))}return Mc(e,null)}(function(e,t){return t.map(t=>t(e))}(e,t).map(Gc)).pipe(F(Kc))}}}function Wc(e){return null!=e}function Gc(e){const t=is(e)?U(e):e;if(!ss(t))throw new Error("Expected validator to return Promise or Observable.");return t}function Kc(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function Qc(e){return e.validate?t=>e.validate(t):e}function Zc(e){return e.validate?t=>e.validate(t):e}const Jc={provide:Dc,useExisting:Se(()=>Yc),multi:!0};let Yc=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(Ji(zs),Ji($s))},e.\u0275dir=vt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&os("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(e){return t.onTouched()}))},features:[Ls([Jc])]}),e})();const Xc={provide:Dc,useExisting:Se(()=>tl),multi:!0};let el=(()=>{class e{constructor(){this._accessors=[]}add(e,t){this._accessors.push([e,t])}remove(e){for(let t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}select(e){this._accessors.forEach(t=>{this._isSameGroup(t,e)&&t[1]!==e&&t[1].fireUncheck(e.value)})}_isSameGroup(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),tl=(()=>{class e{constructor(e,t,r,n){this._renderer=e,this._elementRef=t,this._registry=r,this._injector=n,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(Nc),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return e.\u0275fac=function(t){return new(t||e)(Ji(zs),Ji($s),Ji(el),Ji(Ni))},e.\u0275dir=vt({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&os("change",(function(e){return t.onChange()}))("blur",(function(e){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Ls([Xc])]}),e})();const rl={provide:Dc,useExisting:Se(()=>nl),multi:!0};let nl=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}writeValue(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}registerOnChange(e){this.onChange=t=>{e(""==t?null:parseFloat(t))}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(Ji(zs),Ji($s))},e.\u0275dir=vt({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&os("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(e){return t.onTouched()}))},features:[Ls([rl])]}),e})();const il='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',sl='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ol={provide:Dc,useExisting:Se(()=>al),multi:!0};let al=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Gi}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){this.value=e;const t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const r=function(e,t){return null==e?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${e}: ${t}`.slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",r)}registerOnChange(e){this.onChange=t=>{this.value=this._getOptionValue(t),e(this.value)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t),e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}}return e.\u0275fac=function(t){return new(t||e)(Ji(zs),Ji($s))},e.\u0275dir=vt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&os("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(e){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Ls([ol])]}),e})();const cl={provide:Dc,useExisting:Se(()=>ll),multi:!0};let ll=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=e=>{},this.onTouched=()=>{},this._compareWith=Gi}set compareWith(e){if("function"!=typeof e)throw new Error(`compareWith must be a function, but received ${JSON.stringify(e)}`);this._compareWith=e}writeValue(e){let t;if(this.value=e,Array.isArray(e)){const r=e.map(e=>this._getOptionId(e));t=(e,t)=>{e._setSelected(r.indexOf(t.toString())>-1)}}else t=(e,t)=>{e._setSelected(!1)};this._optionMap.forEach(t)}registerOnChange(e){this.onChange=t=>{const r=[];if(t.hasOwnProperty("selectedOptions")){const e=t.selectedOptions;for(let t=0;t<e.length;t++){const n=e.item(t),i=this._getOptionValue(n.value);r.push(i)}}else{const e=t.options;for(let t=0;t<e.length;t++){const n=e.item(t);if(n.selected){const e=this._getOptionValue(n.value);r.push(e)}}}this.value=r,e(r)}}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}_registerOption(e){const t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}_getOptionId(e){for(const t of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(t)._value,e))return t;return null}_getOptionValue(e){const t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}}return e.\u0275fac=function(t){return new(t||e)(Ji(zs),Ji($s))},e.\u0275dir=vt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&os("change",(function(e){return t.onChange(e.target)}))("blur",(function(e){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Ls([cl])]}),e})();function ul(e,t){return[...t.path,e]}function hl(e,t){e||pl(t,"Cannot find control with"),t.valueAccessor||pl(t,"No value accessor for form control with"),e.validator=qc.compose([e.validator,t.validator]),e.asyncValidator=qc.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(r=>{e._pendingValue=r,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&dl(e,t)})}(e,t),function(e,t){e.registerOnChange((e,r)=>{t.valueAccessor.writeValue(e),r&&t.viewToModelUpdate(e)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&dl(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange(e=>{t.valueAccessor.setDisabledState(e)}),t._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())}),t._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(()=>e.updateValueAndValidity())})}function dl(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function pl(e,t){let r;throw r=e.path.length>1?`path: '${e.path.join(" -> ")}'`:e.path[0]?`name: '${e.path}'`:"unspecified name attribute",new Error(`${t} ${r}`)}function fl(e){return null!=e?qc.compose(e.map(Qc)):null}function ml(e){return null!=e?qc.composeAsync(e.map(Zc)):null}const gl=[Ac,nl,Yc,al,ll,tl];function vl(e){const t=_l(e)?e.validators:e;return Array.isArray(t)?fl(t):t||null}function yl(e,t){const r=_l(t)?t.asyncValidators:e;return Array.isArray(r)?ml(r):r||null}function _l(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class bl{constructor(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this.validator=vl(e)}setAsyncValidators(e){this.asyncValidator=yl(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status="PENDING";const t=Gc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>this.setErrors(t,{emitEvent:e}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,r){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let n=e;return t.forEach(e=>{n=n instanceof Sl?n.controls.hasOwnProperty(e)?n.controls[e]:null:n instanceof Cl&&n.at(e)||null}),n}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Do,this.statusChanges=new Do}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_l(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class wl extends bl{constructor(e=null,t,r){super(vl(t),yl(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Sl extends bl{constructor(e,t,r){super(vl(t),yl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e={},t={}){this._forEachChild((r,n)=>{r.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof wl?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>e(this.controls[t],t))}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){let t=!1;return this._forEachChild((r,n)=>{t=t||this.contains(n)&&e(r)}),t}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((e,n)=>{r=t(r,e,n)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Cl extends bl{constructor(e,t,r){super(vl(t),yl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(e){return this.controls[e]}push(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}insert(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}removeAt(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity()}setControl(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,r)=>{this._throwIfControlMissing(r),this.at(r).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e.forEach((e,r)=>{this.at(r)&&this.at(r).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}reset(e=[],t={}){this._forEachChild((r,n)=>{r.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof wl?e.value:e.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const El={provide:Lc,useExisting:Se(()=>Pl)},xl=(()=>Promise.resolve(null))();let Pl=(()=>{class e extends Lc{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Do,this.form=new Sl({},fl(e),ml(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){xl.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),hl(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){xl.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),function(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}(this._directives,e)})}addFormGroup(e){xl.then(()=>{const t=this._findContainer(e.path),r=new Sl({});(function(e,t){null==e&&pl(t,"Cannot find control with"),e.validator=qc.compose([e.validator,t.validator]),e.asyncValidator=qc.composeAsync([e.asyncValidator,t.asyncValidator])})(r,e),t.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){xl.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){xl.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}),this.ngSubmit.emit(e),!1;var t}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(Ji(Bc,10),Ji(Hc,10))},e.\u0275dir=vt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&os("submit",(function(e){return t.onSubmit(e)}))("reset",(function(e){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ls([El]),_s]}),e})(),Il=(()=>{class e extends Lc{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ul(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return fl(this._validators)}get asyncValidator(){return ml(this._asyncValidators)}_checkParentType(){}}return e.\u0275fac=function(t){return Ml(t||e)},e.\u0275dir=vt({type:e,features:[_s]}),e})();const Ml=Ar(Il);class Dl{static modelParentException(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${il}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${sl}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${il}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${sl}`)}}const Ol={provide:Lc,useExisting:Se(()=>Al)};let Al=(()=>{class e extends Il{constructor(e,t,r){super(),this._parent=e,this._validators=t,this._asyncValidators=r}_checkParentType(){this._parent instanceof e||this._parent instanceof Pl||Dl.modelGroupParentException()}}return e.\u0275fac=function(t){return new(t||e)(Ji(Lc,5),Ji(Bc,10),Ji(Hc,10))},e.\u0275dir=vt({type:e,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[Ls([Ol]),_s]}),e})();const Tl={provide:Nc,useExisting:Se(()=>kl)},Rl=(()=>Promise.resolve(null))();let kl=(()=>{class e extends Nc{constructor(e,t,r,n){super(),this.control=new wl,this._registered=!1,this.update=new Do,this._parent=e,this._rawValidators=t||[],this._rawAsyncValidators=r||[],this.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||pl(e,"Value accessor was not provided as an array for form control with");let r=void 0,n=void 0,i=void 0;return t.forEach(t=>{var s;t.constructor===kc?r=t:(s=t,gl.some(e=>s.constructor===e)?(n&&pl(e,"More than one built-in value accessor matches form control with"),n=t):(i&&pl(e,"More than one custom value accessor matches form control with"),i=t))}),i||n||r||(pl(e,"No valid value accessor for form control with"),null)}(this,n)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;const r=e.model;return!!r.isFirstChange()||!Gi(t,r.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?ul(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return fl(this._rawValidators)}get asyncValidator(){return ml(this._rawAsyncValidators)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hl(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Al)&&this._parent instanceof Il?Dl.formGroupNameException():this._parent instanceof Al||this._parent instanceof Pl||Dl.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Dl.missingNameException()}_updateValue(e){Rl.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,r=""===t||t&&"false"!==t;Rl.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(Ji(Lc,9),Ji(Bc,10),Ji(Hc,10),Ji(Dc,10))},e.\u0275dir=vt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ls([Tl]),_s,xs()]}),e})(),Vl=(()=>{class e{}return e.\u0275mod=mt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)}}),e})(),Ll=(()=>{class e{}return e.\u0275mod=mt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)},providers:[el],imports:[Vl]}),e})();function Fl(...e){let t=e[e.length-1];return I(t)?(e.pop(),$(e,t)):G(e)}class jl extends x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value}next(e){super.next(this._value=e)}}const Nl=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})(),$l={};class Ul{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Bl(e,this.resultSelector))}}class Bl extends L{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push($l),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++){const t=e[r];this.add(V(this,t,t,r))}}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r,n,i){const s=this.values,o=this.toRespond?s[r]===$l?--this.toRespond:this.toRespond:0;s[r]=t,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Hl=new b(e=>e.complete());function zl(e){return e?function(e){return new b(t=>e.schedule(()=>t.complete()))}(e):Hl}function ql(e){return new b(t=>{let r;try{r=e()}catch(n){return void t.error(n)}return(r?U(r):zl()).subscribe(t)})}function Wl(){return W(1)}function Gl(e,t){return function(r){return r.lift(new Kl(e,t))}}class Kl{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Ql(e,this.predicate,this.thisArg))}}class Ql extends f{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}const Zl=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Jl(e){return function(t){return 0===e?zl():t.lift(new Yl(e))}}class Yl{constructor(e){if(this.total=e,this.total<0)throw new Zl}call(e,t){return t.subscribe(new Xl(e,this.total))}}class Xl extends f{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,n=this.ring;for(let i=0;i<r;i++){const i=t++%r;e.next(n[i])}}e.complete()}}function eu(e=nu){return t=>t.lift(new tu(e))}class tu{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new ru(e,this.errorFactory))}}class ru extends f{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function nu(){return new Nl}function iu(e=null){return t=>t.lift(new su(e))}class su{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ou(e,this.defaultValue))}}class ou extends f{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function au(e,t){const r=arguments.length>=2;return n=>n.pipe(e?Gl((t,r)=>e(t,r,n)):q,Jl(1),r?iu(t):eu(()=>new Nl))}function cu(e){return function(t){const r=new lu(e),n=t.lift(r);return r.caught=n}}class lu{constructor(e){this.selector=e}call(e,t){return t.subscribe(new uu(e,this.selector,this.caught))}}class uu extends L{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let r;try{r=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const n=new M(this,void 0,void 0);this.add(n);const i=V(this,r,void 0,void 0,n);i!==n&&this.add(i)}}}function hu(e){return t=>0===e?zl():t.lift(new du(e))}class du{constructor(e){if(this.total=e,this.total<0)throw new Zl}call(e,t){return t.subscribe(new pu(e,this.total))}}class pu extends f{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function fu(e,t){const r=arguments.length>=2;return n=>n.pipe(e?Gl((t,r)=>e(t,r,n)):q,hu(1),r?iu(t):eu(()=>new Nl))}class mu{constructor(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}call(e,t){return t.subscribe(new gu(e,this.predicate,this.thisArg,this.source))}}class gu extends f{constructor(e,t,r,n){super(e),this.predicate=t,this.thisArg=r,this.source=n,this.index=0,this.thisArg=r||this}notifyComplete(e){this.destination.next(e),this.destination.complete()}_next(e){let t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(r){return void this.destination.error(r)}t||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function vu(e,t){return"function"==typeof t?r=>r.pipe(vu((r,n)=>U(e(r,n)).pipe(F((e,i)=>t(r,e,n,i))))):t=>t.lift(new yu(e))}class yu{constructor(e){this.project=e}call(e,t){return t.subscribe(new _u(e,this.project))}}class _u extends L{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(n){return void this.destination.error(n)}this._innerSub(t,e,r)}_innerSub(e,t,r){const n=this.innerSubscription;n&&n.unsubscribe();const i=new M(this,t,r),s=this.destination;s.add(i),this.innerSubscription=V(this,e,void 0,void 0,i),this.innerSubscription!==i&&s.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(e,t,r,n,i){this.destination.next(t)}}function bu(...e){return Wl()(Fl(...e))}function wu(e,t){let r=!1;return arguments.length>=2&&(r=!0),function(n){return n.lift(new Su(e,t,r))}}class Su{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Cu(e,this.accumulator,this.seed,this.hasSeed))}}class Cu extends f{constructor(e,t,r,n){super(e),this.accumulator=t,this._seed=r,this.hasSeed=n,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(n){this.destination.error(n)}this.seed=r,this.destination.next(r)}}function Eu(e,t){return B(e,t,1)}function xu(e,t,r){return function(n){return n.lift(new Pu(e,t,r))}}class Pu{constructor(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}call(e,t){return t.subscribe(new Iu(e,this.nextOrObserver,this.error,this.complete))}}class Iu extends f{constructor(e,t,r,i){super(e),this._tapNext=v,this._tapError=v,this._tapComplete=v,this._tapError=r||v,this._tapComplete=i||v,n(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||v,this._tapError=t.error||v,this._tapComplete=t.complete||v)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class Mu{constructor(e){this.callback=e}call(e,t){return t.subscribe(new Du(e,this.callback))}}class Du extends f{constructor(e,t){super(e),this.add(new h(t))}}class Ou{constructor(e,t){this.id=e,this.url=t}}class Au extends Ou{constructor(e,t,r="imperative",n=null){super(e,t),this.navigationTrigger=r,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Tu extends Ou{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ru extends Ou{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ku extends Ou{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vu extends Ou{constructor(e,t,r,n){super(e,t),this.urlAfterRedirects=r,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lu extends Ou{constructor(e,t,r,n){super(e,t),this.urlAfterRedirects=r,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fu extends Ou{constructor(e,t,r,n,i){super(e,t),this.urlAfterRedirects=r,this.state=n,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ju extends Ou{constructor(e,t,r,n){super(e,t),this.urlAfterRedirects=r,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nu extends Ou{constructor(e,t,r,n){super(e,t),this.urlAfterRedirects=r,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $u{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Uu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Bu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hu{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zu{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qu{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Gu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ht({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&ns(0,"router-outlet")},directives:function(){return[Kd]},encapsulation:2}),e})();class Ku{constructor(e){this.params=e||{}}has(e){return this.params.hasOwnProperty(e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qu(e){return new Ku(e)}function Zu(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Ju(e,t,r){const n=r.path.split("/");if(n.length>e.length)return null;if("full"===r.pathMatch&&(t.hasChildren()||n.length<e.length))return null;const i={};for(let s=0;s<n.length;s++){const t=n[s],r=e[s];if(t.startsWith(":"))i[t.substring(1)]=r;else if(t!==r.path)return null}return{consumed:e.slice(0,n.length),posParams:i}}class Yu{constructor(e,t){this.routes=e,this.module=t}}function Xu(e,t=""){for(let r=0;r<e.length;r++){const n=e[r];eh(n,th(t,n))}}function eh(e,t){if(!e)throw new Error(`\n      Invalid configuration of route '${t}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(e))throw new Error(`Invalid configuration of route '${t}': Array cannot be specified`);if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error(`Invalid configuration of route '${t}': a componentless route without children or loadChildren cannot have a named outlet set`);if(e.redirectTo&&e.children)throw new Error(`Invalid configuration of route '${t}': redirectTo and children cannot be used together`);if(e.redirectTo&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': redirectTo and loadChildren cannot be used together`);if(e.children&&e.loadChildren)throw new Error(`Invalid configuration of route '${t}': children and loadChildren cannot be used together`);if(e.redirectTo&&e.component)throw new Error(`Invalid configuration of route '${t}': redirectTo and component cannot be used together`);if(e.path&&e.matcher)throw new Error(`Invalid configuration of route '${t}': path and matcher cannot be used together`);if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error(`Invalid configuration of route '${t}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===e.path&&void 0===e.matcher)throw new Error(`Invalid configuration of route '${t}': routes must have either a path or a matcher specified`);if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error(`Invalid configuration of route '${t}': path cannot start with a slash`);if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error(`Invalid configuration of route '{path: "${t}", redirectTo: "${e.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error(`Invalid configuration of route '${t}': pathMatch can only be set to 'prefix' or 'full'`);e.children&&Xu(e.children,t)}function th(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function rh(e){const t=e.children&&e.children.map(rh),r=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!r.component&&(t||r.loadChildren)&&r.outlet&&"primary"!==r.outlet&&(r.component=Gu),r}function nh(e,t){const r=Object.keys(e),n=Object.keys(t);if(!r||!n||r.length!=n.length)return!1;let i;for(let s=0;s<r.length;s++)if(i=r[s],!ih(e[i],t[i]))return!1;return!0}function ih(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every(e=>t.indexOf(e)>-1):e===t}function sh(e){return Array.prototype.concat.apply([],e)}function oh(e){return e.length>0?e[e.length-1]:null}function ah(e,t){for(const r in e)e.hasOwnProperty(r)&&t(e[r],r)}function ch(e){return ss(e)?e:is(e)?U(Promise.resolve(e)):Fl(e)}function lh(e,t,r){return r?function(e,t){return nh(e,t)}(e.queryParams,t.queryParams)&&function e(t,r){if(!ph(t.segments,r.segments))return!1;if(t.numberOfChildren!==r.numberOfChildren)return!1;for(const n in r.children){if(!t.children[n])return!1;if(!e(t.children[n],r.children[n]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(r=>ih(e[r],t[r]))}(e.queryParams,t.queryParams)&&function e(t,r){return function t(r,n,i){if(r.segments.length>i.length)return!!ph(r.segments.slice(0,i.length),i)&&!n.hasChildren();if(r.segments.length===i.length){if(!ph(r.segments,i))return!1;for(const t in n.children){if(!r.children[t])return!1;if(!e(r.children[t],n.children[t]))return!1}return!0}{const e=i.slice(0,r.segments.length),s=i.slice(r.segments.length);return!!ph(r.segments,e)&&!!r.children.primary&&t(r.children.primary,n,s)}}(t,r,r.segments)}(e.root,t.root)}class uh{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qu(this.queryParams)),this._queryParamMap}toString(){return vh.serialize(this)}}class hh{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ah(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yh(this)}}class dh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qu(this.parameters)),this._parameterMap}toString(){return Eh(this)}}function ph(e,t){return e.length===t.length&&e.every((e,r)=>e.path===t[r].path)}function fh(e,t){let r=[];return ah(e.children,(e,n)=>{"primary"===n&&(r=r.concat(t(e,n)))}),ah(e.children,(e,n)=>{"primary"!==n&&(r=r.concat(t(e,n)))}),r}class mh{}class gh{parse(e){const t=new Dh(e);return new uh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`${`/${function e(t,r){if(!t.hasChildren())return yh(t);if(r){const r=t.children.primary?e(t.children.primary,!1):"",n=[];return ah(t.children,(t,r)=>{"primary"!==r&&n.push(`${r}:${e(t,!1)}`)}),n.length>0?`${r}(${n.join("//")})`:r}{const r=fh(t,(r,n)=>"primary"===n?[e(t.children.primary,!1)]:[`${n}:${e(r,!1)}`]);return`${yh(t)}/(${r.join("//")})`}}(e.root,!0)}`}${function(e){const t=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(e=>`${bh(t)}=${bh(e)}`).join("&"):`${bh(t)}=${bh(r)}`});return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const vh=new gh;function yh(e){return e.segments.map(e=>Eh(e)).join("/")}function _h(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bh(e){return _h(e).replace(/%3B/gi,";")}function wh(e){return _h(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sh(e){return decodeURIComponent(e)}function Ch(e){return Sh(e.replace(/\+/g,"%20"))}function Eh(e){return`${wh(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${wh(e)}=${wh(t[e])}`).join("")}`;var t}const xh=/^[^\/()?;=#]+/;function Ph(e){const t=e.match(xh);return t?t[0]:""}const Ih=/^[^=?&#]+/,Mh=/^[^?&#]+/;class Dh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hh([],{}):new hh([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r.primary=new hh(e,t)),r}parseSegment(){const e=Ph(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new dh(Sh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ph(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const e=Ph(this.remaining);e&&(r=e,this.capture(r))}e[Sh(t)]=Sh(r)}parseQueryParam(e){const t=function(e){const t=e.match(Ih);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Mh);return t?t[0]:""}(this.remaining);e&&(r=e,this.capture(r))}const n=Ch(t),i=Ch(r);if(e.hasOwnProperty(n)){let t=e[n];Array.isArray(t)||(t=[t],e[n]=t),t.push(i)}else e[n]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ph(this.remaining),n=this.remaining[r.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;r.indexOf(":")>-1?(i=r.substr(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");const s=this.parseChildren();t[i]=1===Object.keys(s).length?s.primary:new hh([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Oh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ah(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Ah(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Th(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Th(e,this._root).map(e=>e.value)}}function Ah(e,t){if(e===t.value)return t;for(const r of t.children){const t=Ah(e,r);if(t)return t}return null}function Th(e,t){if(e===t.value)return[t];for(const r of t.children){const n=Th(e,r);if(n.length)return n.unshift(t),n}return[]}class Rh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function kh(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Vh extends Oh{constructor(e,t){super(e),this.snapshot=t,Uh(this,e)}toString(){return this.snapshot.toString()}}function Lh(e,t){const r=function(e,t){const r=new Nh([],{},{},"",{},"primary",t,null,e.root,-1,{});return new $h("",new Rh(r,[]))}(e,t),n=new jl([new dh("",{})]),i=new jl({}),s=new jl({}),o=new jl({}),a=new jl(""),c=new Fh(n,i,o,a,s,"primary",t,r.root);return c.snapshot=r.root,new Vh(new Rh(c,[]),r)}class Fh{constructor(e,t,r,n,i,s,o,a){this.url=e,this.params=t,this.queryParams=r,this.fragment=n,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(F(e=>Qu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(F(e=>Qu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jh(e,t="emptyOnly"){const r=e.pathFromRoot;let n=0;if("always"!==t)for(n=r.length-1;n>=1;){const e=r[n],t=r[n-1];if(e.routeConfig&&""===e.routeConfig.path)n--;else{if(t.component)break;n--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(n))}class Nh{constructor(e,t,r,n,i,s,o,a,c,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=n,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $h extends Oh{constructor(e,t){super(t),this.url=e,Uh(this,t)}toString(){return Bh(this._root)}}function Uh(e,t){t.value._routerState=e,t.children.forEach(t=>Uh(e,t))}function Bh(e){const t=e.children.length>0?` { ${e.children.map(Bh).join(", ")} } `:"";return`${e.value}${t}`}function Hh(e){if(e.snapshot){const t=e.snapshot,r=e._futureSnapshot;e.snapshot=r,nh(t.queryParams,r.queryParams)||e.queryParams.next(r.queryParams),t.fragment!==r.fragment&&e.fragment.next(r.fragment),nh(t.params,r.params)||e.params.next(r.params),function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!nh(e[r],t[r]))return!1;return!0}(t.url,r.url)||e.url.next(r.url),nh(t.data,r.data)||e.data.next(r.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function zh(e,t){var r,n;return nh(e.params,t.params)&&ph(r=e.url,n=t.url)&&r.every((e,t)=>nh(e.parameters,n[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||zh(e.parent,t.parent))}function qh(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Wh(e,t,r,n,i){let s={};return n&&ah(n,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new uh(r.root===e?t:function e(t,r,n){const i={};return ah(t.children,(t,s)=>{i[s]=t===r?n:e(t,r,n)}),new hh(t.segments,i)}(r.root,e,t),s,i)}class Gh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&qh(r[0]))throw new Error("Root segment cannot have matrix parameters");const n=r.find(e=>"object"==typeof e&&null!=e&&e.outlets);if(n&&n!==oh(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Kh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Qh(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:`${e}`}function Zh(e,t,r){if(e||(e=new hh([],{})),0===e.segments.length&&e.hasChildren())return Jh(e,t,r);const n=function(e,t,r){let n=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(n>=r.length)return s;const t=e.segments[i],o=Qh(r[n]),a=n<r.length-1?r[n+1]:null;if(i>0&&void 0===o)break;if(o&&a&&"object"==typeof a&&void 0===a.outlets){if(!td(o,a,t))return s;n+=2}else{if(!td(o,{},t))return s;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}(e,t,r),i=r.slice(n.commandIndex);if(n.match&&n.pathIndex<e.segments.length){const t=new hh(e.segments.slice(0,n.pathIndex),{});return t.children.primary=new hh(e.segments.slice(n.pathIndex),e.children),Jh(t,0,i)}return n.match&&0===i.length?new hh(e.segments,{}):n.match&&!e.hasChildren()?Yh(e,t,r):n.match?Jh(e,0,i):Yh(e,t,r)}function Jh(e,t,r){if(0===r.length)return new hh(e.segments,{});{const n=function(e){return"object"!=typeof e[0]?{primary:e}:void 0===e[0].outlets?{primary:e}:e[0].outlets}(r),i={};return ah(n,(r,n)=>{null!==r&&(i[n]=Zh(e.children[n],t,r))}),ah(e.children,(e,t)=>{void 0===n[t]&&(i[t]=e)}),new hh(e.segments,i)}}function Yh(e,t,r){const n=e.segments.slice(0,t);let i=0;for(;i<r.length;){if("object"==typeof r[i]&&void 0!==r[i].outlets){const e=Xh(r[i].outlets);return new hh(n,e)}if(0===i&&qh(r[0])){n.push(new dh(e.segments[t].path,r[0])),i++;continue}const s=Qh(r[i]),o=i<r.length-1?r[i+1]:null;s&&o&&qh(o)?(n.push(new dh(s,ed(o))),i+=2):(n.push(new dh(s,{})),i++)}return new hh(n,{})}function Xh(e){const t={};return ah(e,(e,r)=>{null!==e&&(t[r]=Yh(new hh([],{}),0,e))}),t}function ed(e){const t={};return ah(e,(e,r)=>t[r]=`${e}`),t}function td(e,t,r){return e==r.path&&nh(t,r.parameters)}class rd{constructor(e,t,r,n){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=n}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Hh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const n=kh(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,n[t],r),delete n[t]}),ah(n,(e,t)=>{this.deactivateRouteAndItsChildren(e,r)})}deactivateRoutes(e,t,r){const n=e.value,i=t?t.value:null;if(n===i)if(n.component){const i=r.getContext(n.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const t=r.outlet.detach(),n=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:n})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet);if(r){const n=kh(e),i=e.value.component?r.children:t;ah(n,(e,t)=>this.deactivateRouteAndItsChildren(e,i)),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}activateChildRoutes(e,t,r){const n=kh(t);e.children.forEach(e=>{this.activateRoutes(e,n[e.value.outlet],r),this.forwardEvent(new qu(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Hu(e.value.snapshot))}activateRoutes(e,t,r){const n=e.value,i=t?t.value:null;if(Hh(n),n===i)if(n.component){const i=r.getOrCreateContext(n.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,r);else if(n.component){const t=r.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){const e=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),nd(e.route)}else{const r=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(n.snapshot),i=r?r.module.componentFactoryResolver:null;t.attachRef=null,t.route=n,t.resolver=i,t.outlet&&t.outlet.activateWith(n,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,r)}}function nd(e){Hh(e.value),e.children.forEach(nd)}function id(e){return"function"==typeof e}function sd(e){return e instanceof uh}class od{constructor(e){this.segmentGroup=e||null}}class ad{constructor(e){this.urlTree=e}}function cd(e){return new b(t=>t.error(new od(e)))}function ld(e){return new b(t=>t.error(new ad(e)))}function ud(e){return new b(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class hd{constructor(e,t,r,n,i){this.configLoader=t,this.urlSerializer=r,this.urlTree=n,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(Je)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(F(e=>this.createUrlTree(e,this.urlTree.queryParams,this.urlTree.fragment))).pipe(cu(e=>{if(e instanceof ad)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof od)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(F(t=>this.createUrlTree(t,e.queryParams,e.fragment))).pipe(cu(e=>{if(e instanceof od)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const n=e.segments.length>0?new hh([],{primary:e}):e;return new uh(n,t,r)}expandSegmentGroup(e,t,r,n){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(F(e=>new hh([],e))):this.expandSegment(e,r,t,r.segments,n,!0)}expandChildren(e,t,r){return function(e,t){if(0===Object.keys(e).length)return Fl({});const r=[],n=[],i={};return ah(e,(e,s)=>{const o=t(s,e).pipe(F(e=>i[s]=e));"primary"===s?r.push(o):n.push(o)}),Fl.apply(null,r.concat(n)).pipe(Wl(),au(),F(()=>i))}(r.children,(r,n)=>this.expandSegmentGroup(e,t,n,r))}expandSegment(e,t,r,n,i,s){return Fl(...r).pipe(F(o=>this.expandSegmentAgainstRoute(e,t,r,o,n,i,s).pipe(cu(e=>{if(e instanceof od)return Fl(null);throw e}))),Wl(),fu(e=>!!e),cu((e,r)=>{if(e instanceof Nl||"EmptyError"===e.name){if(this.noLeftoversInUrl(t,n,i))return Fl(new hh([],{}));throw new od(t)}throw e}))}noLeftoversInUrl(e,t,r){return 0===t.length&&!e.children[r]}expandSegmentAgainstRoute(e,t,r,n,i,s,o){return md(n)!==s?cd(t):void 0===n.redirectTo?this.matchSegmentAgainstRoute(e,t,n,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,n,i,s):cd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,n,i,s){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,n,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,n,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,n){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?ld(i):this.lineralizeSegments(r,i).pipe(B(r=>{const i=new hh(r,{});return this.expandSegment(e,i,t,r,n,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,n,i,s){const{matched:o,consumedSegments:a,lastChild:c,positionalParamSegments:l}=dd(t,n,i);if(!o)return cd(t);const u=this.applyRedirectCommands(a,n.redirectTo,l);return n.redirectTo.startsWith("/")?ld(u):this.lineralizeSegments(n,u).pipe(B(n=>this.expandSegment(e,t,r,n.concat(i.slice(c)),s,!1)))}matchSegmentAgainstRoute(e,t,r,n){if("**"===r.path)return r.loadChildren?this.configLoader.load(e.injector,r).pipe(F(e=>(r._loadedConfig=e,new hh(n,{})))):Fl(new hh(n,{}));const{matched:i,consumedSegments:s,lastChild:o}=dd(t,r,n);if(!i)return cd(t);const a=n.slice(o);return this.getChildConfig(e,r,n).pipe(B(e=>{const r=e.module,n=e.routes,{segmentGroup:i,slicedSegments:o}=function(e,t,r,n){return r.length>0&&function(e,t,r){return r.some(r=>fd(e,t,r)&&"primary"!==md(r))}(e,r,n)?{segmentGroup:pd(new hh(t,function(e,t){const r={};r.primary=t;for(const n of e)""===n.path&&"primary"!==md(n)&&(r[md(n)]=new hh([],{}));return r}(n,new hh(r,e.children)))),slicedSegments:[]}:0===r.length&&function(e,t,r){return r.some(r=>fd(e,t,r))}(e,r,n)?{segmentGroup:pd(new hh(e.segments,function(e,t,r,n){const i={};for(const s of r)fd(e,t,s)&&!n[md(s)]&&(i[md(s)]=new hh([],{}));return Object.assign(Object.assign({},n),i)}(e,r,n,e.children))),slicedSegments:r}:{segmentGroup:e,slicedSegments:r}}(t,s,a,n);return 0===o.length&&i.hasChildren()?this.expandChildren(r,n,i).pipe(F(e=>new hh(s,e))):0===n.length&&0===o.length?Fl(new hh(s,{})):this.expandSegment(r,i,n,o,"primary",!0).pipe(F(e=>new hh(s.concat(e.segments),e.children)))}))}getChildConfig(e,t,r){return t.children?Fl(new Yu(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Fl(t._loadedConfig):function(e,t,r){const n=t.canLoad;return n&&0!==n.length?U(n).pipe(F(n=>{const i=e.get(n);let s;if(function(e){return e&&id(e.canLoad)}(i))s=i.canLoad(t,r);else{if(!id(i))throw new Error("Invalid CanLoad guard");s=i(t,r)}return ch(s)})).pipe(Wl(),(i=e=>!0===e,e=>e.lift(new mu(i,void 0,e)))):Fl(!0);var i}(e.injector,t,r).pipe(B(r=>r?this.configLoader.load(e.injector,t).pipe(F(e=>(t._loadedConfig=e,e))):function(e){return new b(t=>t.error(Zu(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):Fl(new Yu([],e))}lineralizeSegments(e,t){let r=[],n=t.root;for(;;){if(r=r.concat(n.segments),0===n.numberOfChildren)return Fl(r);if(n.numberOfChildren>1||!n.children.primary)return ud(e.redirectTo);n=n.children.primary}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,n){const i=this.createSegmentGroup(e,t.root,r,n);return new uh(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ah(e,(e,n)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);r[n]=t[i]}else r[n]=e}),r}createSegmentGroup(e,t,r,n){const i=this.createSegments(e,t.segments,r,n);let s={};return ah(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,r,n)}),new hh(i,s)}createSegments(e,t,r,n){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,n):this.findOrReturn(t,r))}findPosParam(e,t,r){const n=r[t.path.substring(1)];if(!n)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return n}findOrReturn(e,t){let r=0;for(const n of t){if(n.path===e.path)return t.splice(r),n;r++}return e}}function dd(e,t,r){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||r.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const n=(t.matcher||Ju)(r,e,t);return n?{matched:!0,consumedSegments:n.consumed,lastChild:n.consumed.length,positionalParamSegments:n.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function pd(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new hh(e.segments.concat(t.segments),t.children)}return e}function fd(e,t,r){return(!(e.hasChildren()||t.length>0)||"full"!==r.pathMatch)&&""===r.path&&void 0!==r.redirectTo}function md(e){return e.outlet||"primary"}class gd{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vd{constructor(e,t){this.component=e,this.route=t}}function yd(e,t,r){const n=e._root;return function e(t,r,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=kh(r);return t.children.forEach(t=>{!function(t,r,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,a=r?r.value:null,c=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const l=function(e,t,r){if("function"==typeof r)return r(e,t);switch(r){case"pathParamsChange":return!ph(e.url,t.url);case"pathParamsOrQueryParamsChange":return!ph(e.url,t.url)||!nh(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zh(e,t)||!nh(e.queryParams,t.queryParams);case"paramsChange":default:return!zh(e,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new gd(i)):(o.data=a.data,o._resolvedData=a._resolvedData),e(t,r,o.component?c?c.children:null:n,i,s),l&&s.canDeactivateChecks.push(new vd(c&&c.outlet&&c.outlet.component||null,a))}else a&&bd(r,c,s),s.canActivateChecks.push(new gd(i)),e(t,null,o.component?c?c.children:null:n,i,s)}(t,o[t.value.outlet],n,i.concat([t.value]),s),delete o[t.value.outlet]}),ah(o,(e,t)=>bd(e,n.getContext(t),s)),s}(n,t?t._root:null,r,[n.value])}function _d(e,t,r){const n=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(n?n.module.injector:r).get(e)}function bd(e,t,r){const n=kh(e),i=e.value;ah(n,(e,n)=>{bd(e,i.component?t?t.children.getContext(n):null:t,r)}),r.canDeactivateChecks.push(new vd(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}const wd=Symbol("INITIAL_VALUE");function Sd(){return vu(e=>function(...e){let t=null,r=null;return I(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),G(e,r).lift(new Ul(t))}(...e.map(e=>e.pipe(hu(1),function(...e){const t=e[e.length-1];return I(t)?(e.pop(),r=>bu(e,r,t)):t=>bu(e,t)}(wd)))).pipe(wu((e,t)=>{let r=!1;return t.reduce((e,n,i)=>{if(e!==wd)return e;if(n===wd&&(r=!0),!r){if(!1===n)return n;if(i===t.length-1||sd(n))return n}return e},e)},wd),Gl(e=>e!==wd),F(e=>sd(e)?e:!0===e),hu(1)))}function Cd(e,t){return null!==e&&t&&t(new zu(e)),Fl(!0)}function Ed(e,t){return null!==e&&t&&t(new Bu(e)),Fl(!0)}function xd(e,t,r){const n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?Fl(n.map(n=>ql(()=>{const i=_d(n,t,r);let s;if(function(e){return e&&id(e.canActivate)}(i))s=ch(i.canActivate(t,e));else{if(!id(i))throw new Error("Invalid CanActivate guard");s=ch(i(t,e))}return s.pipe(fu())}))).pipe(Sd()):Fl(!0)}function Pd(e,t,r){const n=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>ql(()=>Fl(t.guards.map(i=>{const s=_d(i,t.node,r);let o;if(function(e){return e&&id(e.canActivateChild)}(s))o=ch(s.canActivateChild(n,e));else{if(!id(s))throw new Error("Invalid CanActivateChild guard");o=ch(s(n,e))}return o.pipe(fu())})).pipe(Sd())));return Fl(i).pipe(Sd())}class Id{}class Md{constructor(e,t,r,n,i,s){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=n,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const e=Ad(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),r=new Nh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),n=new Rh(r,t),i=new $h(this.url,n);return this.inheritParamsAndData(i._root),Fl(i)}catch(e){return new b(t=>t.error(e))}}inheritParamsAndData(e){const t=e.value,r=jh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=fh(t,(t,r)=>this.processSegmentGroup(e,t,r));return function(e){const t={};e.forEach(e=>{const r=t[e.value.outlet];if(r){const t=r.url.map(e=>e.toString()).join("/"),n=e.value.url.map(e=>e.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${t}' and '${n}'.`)}t[e.value.outlet]=e.value})}(r),r.sort((e,t)=>"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,r,n){for(const s of e)try{return this.processSegmentAgainstRoute(s,t,r,n)}catch(i){if(!(i instanceof Id))throw i}if(this.noLeftoversInUrl(t,r,n))return[];throw new Id}noLeftoversInUrl(e,t,r){return 0===t.length&&!e.children[r]}processSegmentAgainstRoute(e,t,r,n){if(e.redirectTo)throw new Id;if((e.outlet||"primary")!==n)throw new Id;let i,s=[],o=[];if("**"===e.path){const s=r.length>0?oh(r).parameters:{};i=new Nh(r,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kd(e),n,e.component,e,Dd(t),Od(t)+r.length,Vd(e))}else{const a=function(e,t,r){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||r.length>0))throw new Id;return{consumedSegments:[],lastChild:0,parameters:{}}}const n=(t.matcher||Ju)(r,e,t);if(!n)throw new Id;const i={};ah(n.posParams,(e,t)=>{i[t]=e.path});const s=n.consumed.length>0?Object.assign(Object.assign({},i),n.consumed[n.consumed.length-1].parameters):i;return{consumedSegments:n.consumed,lastChild:n.consumed.length,parameters:s}}(t,e,r);s=a.consumedSegments,o=r.slice(a.lastChild),i=new Nh(s,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kd(e),n,e.component,e,Dd(t),Od(t)+s.length,Vd(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:l}=Ad(t,s,o,a,this.relativeLinkResolution);if(0===l.length&&c.hasChildren()){const e=this.processChildren(a,c);return[new Rh(i,e)]}if(0===a.length&&0===l.length)return[new Rh(i,[])];const u=this.processSegment(a,c,l,"primary");return[new Rh(i,u)]}}function Dd(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Od(e){let t=e,r=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,r+=t._segmentIndexShift?t._segmentIndexShift:0;return r-1}function Ad(e,t,r,n,i){if(r.length>0&&function(e,t,r){return r.some(r=>Td(e,t,r)&&"primary"!==Rd(r))}(e,r,n)){const i=new hh(t,function(e,t,r,n){const i={};i.primary=n,n._sourceSegment=e,n._segmentIndexShift=t.length;for(const s of r)if(""===s.path&&"primary"!==Rd(s)){const r=new hh([],{});r._sourceSegment=e,r._segmentIndexShift=t.length,i[Rd(s)]=r}return i}(e,t,n,new hh(r,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===r.length&&function(e,t,r){return r.some(r=>Td(e,t,r))}(e,r,n)){const s=new hh(e.segments,function(e,t,r,n,i,s){const o={};for(const a of n)if(Td(e,r,a)&&!i[Rd(a)]){const r=new hh([],{});r._sourceSegment=e,r._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[Rd(a)]=r}return Object.assign(Object.assign({},i),o)}(e,t,r,n,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:r}}const s=new hh(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:r}}function Td(e,t,r){return(!(e.hasChildren()||t.length>0)||"full"!==r.pathMatch)&&""===r.path&&void 0===r.redirectTo}function Rd(e){return e.outlet||"primary"}function kd(e){return e.data||{}}function Vd(e){return e.resolve||{}}function Ld(e,t,r,n){const i=_d(e,t,n);return ch(i.resolve?i.resolve(t,r):i(t,r))}function Fd(e){return function(t){return t.pipe(vu(t=>{const r=e(t);return r?U(r).pipe(F(()=>t)):U([t])}))}}class jd{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}const Nd=new Fe("ROUTES");class $d{constructor(e,t,r,n){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=n}load(e,t){return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(F(r=>{this.onLoadEndListener&&this.onLoadEndListener(t);const n=r.create(e);return new Yu(sh(n.injector.get(Nd)).map(rh),n)}))}loadModuleFactory(e){return"string"==typeof e?U(this.loader.load(e)):ch(e()).pipe(B(e=>e instanceof Ye?Fl(e):U(this.compiler.compileModuleAsync(e))))}}class Ud{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Bd(e){throw e}function Hd(e,t,r){return t.parse("/")}function zd(e,t){return Fl(null)}let qd=(()=>{class e{constructor(e,t,r,n,i,s,o,a){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=r,this.location=n,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new x,this.errorHandler=Bd,this.malformedUriErrorHandler=Hd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zd,afterPreactivation:zd},this.urlHandlingStrategy=new Ud,this.routeReuseStrategy=new jd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Je),this.console=i.get(jo);const c=i.get(Yo);this.isNgZoneEnabled=c instanceof Yo,this.resetConfig(a),this.currentUrlTree=new uh(new hh([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $d(s,o,e=>this.triggerEvent(new $u(e)),e=>this.triggerEvent(new Uu(e))),this.routerState=Lh(this.currentUrlTree,this.rootComponentType),this.transitions=new jl({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Gl(e=>0!==e.id),F(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),vu(e=>{let r=!1,n=!1;return Fl(e).pipe(xu(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),vu(e=>{const r=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||r)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Fl(e).pipe(vu(e=>{const r=this.transitions.getValue();return t.next(new Au(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==this.transitions.getValue()?Hl:[e]}),vu(e=>Promise.resolve(e)),(n=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,function(e){return e.pipe(vu(e=>function(e,t,r,n,i){return new hd(e,t,r,n,i).apply()}(n,i,s,e.extractedUrl,o).pipe(F(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t})))))}),xu(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,r,n,i){return function(s){return s.pipe(B(s=>function(e,t,r,n,i="emptyOnly",s="legacy"){return new Md(e,t,r,n,i,s).recognize()}(e,t,s.urlAfterRedirects,r(s.urlAfterRedirects),n,i).pipe(F(e=>Object.assign(Object.assign({},s),{targetSnapshot:e})))))}}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),xu(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),xu(e=>{const r=new Vu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(r)}));var n,i,s,o;if(r&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:r,extractedUrl:n,source:i,restoredState:s,extras:o}=e,a=new Au(r,this.serializeUrl(n),i,s);t.next(a);const c=Lh(n,this.rootComponentType).snapshot;return Fl(Object.assign(Object.assign({},e),{targetSnapshot:c,urlAfterRedirects:n,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Hl}),Fd(e=>{const{targetSnapshot:t,id:r,extractedUrl:n,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:r,appliedUrlTree:n,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),xu(e=>{const t=new Lu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),F(e=>Object.assign(Object.assign({},e),{guards:yd(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return function(r){return r.pipe(B(r=>{const{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=r;return 0===o.length&&0===s.length?Fl(Object.assign(Object.assign({},r),{guardsResult:!0})):function(e,t,r,n){return U(e).pipe(B(e=>function(e,t,r,n,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Fl(s.map(s=>{const o=_d(s,t,i);let a;if(function(e){return e&&id(e.canDeactivate)}(o))a=ch(o.canDeactivate(e,t,r,n));else{if(!id(o))throw new Error("Invalid CanDeactivate guard");a=ch(o(e,t,r,n))}return a.pipe(fu())})).pipe(Sd()):Fl(!0)}(e.component,e.route,r,t,n)),fu(e=>!0!==e,!0))}(o,n,i,e).pipe(B(r=>r&&"boolean"==typeof r?function(e,t,r,n){return U(t).pipe(Eu(t=>U([Ed(t.route.parent,n),Cd(t.route,n),Pd(e,t.path,r),xd(e,t.route,r)]).pipe(Wl(),fu(e=>!0!==e,!0))),fu(e=>!0!==e,!0))}(n,s,e,t):Fl(r)),F(e=>Object.assign(Object.assign({},r),{guardsResult:e})))}))}}(this.ngModule.injector,e=>this.triggerEvent(e)),xu(e=>{if(sd(e.guardsResult)){const t=Zu(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}}),xu(e=>{const t=new Fu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Gl(e=>{if(!e.guardsResult){this.resetUrlToCurrentUrlTree();const r=new Ru(e.id,this.serializeUrl(e.extractedUrl),"");return t.next(r),e.resolve(!1),!1}return!0}),Fd(e=>{if(e.guards.canActivateChecks.length)return Fl(e).pipe(xu(e=>{const t=new ju(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(t=this.paramsInheritanceStrategy,r=this.ngModule.injector,function(e){return e.pipe(B(e=>{const{targetSnapshot:n,guards:{canActivateChecks:i}}=e;return i.length?U(i).pipe(Eu(e=>function(e,t,r,n){return function(e,t,r,n){const i=Object.keys(e);if(0===i.length)return Fl({});if(1===i.length){const s=i[0];return Ld(e[s],t,r,n).pipe(F(e=>({[s]:e})))}const s={};return U(i).pipe(B(i=>Ld(e[i],t,r,n).pipe(F(e=>(s[i]=e,e))))).pipe(au(),F(()=>s))}(e._resolve,e,t,n).pipe(F(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),jh(e,r).resolve),null)))}(e.route,n,t,r)),function(e,t){return arguments.length>=2?function(r){return y(wu(e,t),Jl(1),iu(t))(r)}:function(t){return y(wu((t,r,n)=>e(t,r,n+1)),Jl(1))(t)}}((e,t)=>e),F(t=>e)):Fl(e)}))}),xu(e=>{const t=new Nu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}));var t,r}),Fd(e=>{const{targetSnapshot:t,id:r,extractedUrl:n,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:r,appliedUrlTree:n,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),F(e=>{const t=function(e,t,r){const n=function e(t,r,n){if(n&&t.shouldReuseRoute(r.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=r.value;const s=function(t,r,n){return r.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(i.value.snapshot,r.value))return e(t,r,i);return e(t,r)})}(t,r,n);return new Rh(i,s)}{const n=t.retrieve(r.value);if(n){const e=n.route;return function e(t,r){if(t.value.routeConfig!==r.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==r.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");r.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)e(t.children[n],r.children[n])}(r,e),e}{const n=new Fh(new jl((i=r.value).url),new jl(i.params),new jl(i.queryParams),new jl(i.fragment),new jl(i.data),i.outlet,i.component,i),s=r.children.map(r=>e(t,r));return new Rh(n,s)}}var i}(e,t._root,r?r._root:void 0);return new Vh(n,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),xu(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=e=>this.triggerEvent(e),F(e=>(new rd(o,e.targetRouterState,e.currentRouterState,a).activate(s),e))),xu({next(){r=!0},complete(){r=!0}}),(i=()=>{if(!r&&!n){this.resetUrlToCurrentUrlTree();const r=new Ru(e.id,this.serializeUrl(e.extractedUrl),`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`);t.next(r),e.resolve(!1)}this.currentNavigation=null},e=>e.lift(new Mu(i))),cu(r=>{if(n=!0,(i=r)&&i.ngNavigationCancelingError){const n=sd(r.url);n||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const i=new Ru(e.id,this.serializeUrl(e.extractedUrl),r.message);t.next(i),n?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(r.url,this.rawUrlTree);return this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const n=new ku(e.id,this.serializeUrl(e.extractedUrl),r);t.next(n);try{e.resolve(this.errorHandler(r))}catch(s){e.reject(s)}}var i;return Hl}));var i,s,o,a}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{let t=this.parseUrl(e.url);const r="popstate"===e.type?"popstate":"hashchange",n=e.state&&e.state.navigationId?e.state:null;setTimeout(()=>{this.scheduleNavigation(t,r,n,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Xu(e),this.config=e.map(rh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(e,t={}){const{relativeTo:r,queryParams:n,fragment:i,preserveQueryParams:s,queryParamsHandling:o,preserveFragment:a}=t;jr()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=r||this.routerState.root,l=a?this.currentUrlTree.fragment:i;let u=null;if(o)switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),n);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=n||null}else u=s?this.currentUrlTree.queryParams:n||null;return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,r,n,i){if(0===r.length)return Wh(t.root,t.root,t,n,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Gh(!0,0,e);let t=0,r=!1;const n=e.reduce((e,n,i)=>{if("object"==typeof n&&null!=n){if(n.outlets){const t={};return ah(n.outlets,(e,r)=>{t[r]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(n.segmentPath)return[...e,n.segmentPath]}return"string"!=typeof n?[...e,n]:0===i?(n.split("/").forEach((n,i)=>{0==i&&"."===n||(0==i&&""===n?r=!0:".."===n?t++:""!=n&&e.push(n))}),e):[...e,n]},[]);return new Gh(r,t,n)}(r);if(s.toRoot())return Wh(t.root,new hh([],{}),t,n,i);const o=function(e,t,r){if(e.isAbsolute)return new Kh(t.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new Kh(r.snapshot._urlSegment,!0,0);const n=qh(e.commands[0])?0:1;return function(e,t,r){let n=e,i=t,s=r;for(;s>i;){if(s-=i,n=n.parent,!n)throw new Error("Invalid number of '../'");i=n.segments.length}return new Kh(n,!1,i-s)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+n,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?Jh(o.segmentGroup,o.index,s.commands):Zh(o.segmentGroup,o.index,s.commands);return Wh(o.segmentGroup,a,t,n,i)}(c,this.currentUrlTree,e,u,l)}navigateByUrl(e,t={skipLocationChange:!1}){jr()&&this.isNgZoneEnabled&&!Yo.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const r=sd(e)?e:this.parseUrl(e),n=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(n,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const r=e[t];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(r){t=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return t}isActive(e,t){if(sd(e))return lh(this.currentUrlTree,e,t);const r=this.parseUrl(e);return lh(this.currentUrlTree,r,t)}removeEmptyProps(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return null!=n&&(t[r]=n),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.events.next(new Tu(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,r,n,i){const s=this.getTransition();if(s&&"imperative"!==t&&"imperative"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"hashchange"==t&&"popstate"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(s&&"popstate"==t&&"hashchange"===s.source&&s.rawUrl.toString()===e.toString())return Promise.resolve(!0);let o,a,c;i?(o=i.resolve,a=i.reject,c=i.promise):c=new Promise((e,t)=>{o=e,a=t});const l=++this.navigationId;return this.setTransition({id:l,source:t,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:n,resolve:o,reject:a,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(e=>Promise.reject(e))}setBrowserUrl(e,t,r,n){const i=this.urlSerializer.serialize(e);n=n||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},n),{navigationId:r})):this.location.go(i,"",Object.assign(Object.assign({},n),{navigationId:r}))}resetStateAndUrl(e,t,r){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return e.\u0275fac=function(e){Yi()},e.\u0275dir=vt({type:e}),e})();class Wd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gd,this.attachRef=null}}class Gd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Wd,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Kd=(()=>{class e{constructor(e,t,r,n,i){this.parentContexts=e,this.location=t,this.resolver=r,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new Do,this.deactivateEvents=new Do,this.name=n||"primary",e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const r=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),n=this.parentContexts.getOrCreateContext(this.name).children,i=new Qd(e,n,this.location.injector);this.activated=this.location.createComponent(r,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(Ji(Gd),Ji(uo),Ji(Ns),("name",function(e,t){const r=e.attrs;if(r){const e=r.length;let t=0;for(;t<e;){const n=r[t];if(sr(n))break;if(0===n)t+=2;else if("number"==typeof n)for(t++;t<e&&"string"==typeof r[t];)t++;else{if("name"===n)return r[t+1];t+=2}}}return null}(Tt())),Ji(Ci))},e.\u0275dir=vt({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Qd{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Fh?this.route:e===Gd?this.childContexts:this.parent.get(e,t)}}class Zd{}class Jd{preload(e,t){return Fl(null)}}let Yd=(()=>{class e{constructor(e,t,r,n,i){this.router=e,this.injector=n,this.preloadingStrategy=i,this.loader=new $d(t,r,t=>e.triggerEvent(new $u(t)),t=>e.triggerEvent(new Uu(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Gl(e=>e instanceof Tu),Eu(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(Je);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(e,t){const r=[];for(const n of t)if(n.loadChildren&&!n.canLoad&&n._loadedConfig){const e=n._loadedConfig;r.push(this.processRoutes(e.module,e.routes))}else n.loadChildren&&!n.canLoad?r.push(this.preloadConfig(e,n)):n.children&&r.push(this.processRoutes(e,n.children));return U(r).pipe(W(),F(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>this.loader.load(e.injector,t).pipe(B(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(Ge(qd),Ge(ba),Ge(Ko),Ge(Ni),Ge(Zd))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})(),Xd=(()=>{class e{constructor(e,t,r={}){this.router=e,this.viewportScroller=t,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Au?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Tu&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Wu&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Wu(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(e){Yi()},e.\u0275dir=vt({type:e}),e})();const ep=new Fe("ROUTER_CONFIGURATION"),tp=new Fe("ROUTER_FORROOT_GUARD"),rp=[qa,{provide:mh,useClass:gh},{provide:qd,useFactory:function(e,t,r,n,i,s,o,a,c={},l,u){const h=new qd(null,t,r,n,i,s,o,sh(a));if(l&&(h.urlHandlingStrategy=l),u&&(h.routeReuseStrategy=u),c.errorHandler&&(h.errorHandler=c.errorHandler),c.malformedUriErrorHandler&&(h.malformedUriErrorHandler=c.malformedUriErrorHandler),c.enableTracing){const e=Da();h.events.subscribe(t=>{e.logGroup(`Router Event: ${t.constructor.name}`),e.log(t.toString()),e.log(t),e.logGroupEnd()})}return c.onSameUrlNavigation&&(h.onSameUrlNavigation=c.onSameUrlNavigation),c.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=c.paramsInheritanceStrategy),c.urlUpdateStrategy&&(h.urlUpdateStrategy=c.urlUpdateStrategy),c.relativeLinkResolution&&(h.relativeLinkResolution=c.relativeLinkResolution),h},deps:[ya,mh,Gd,qa,Ni,ba,Ko,Nd,ep,[class{},new ne],[class{},new ne]]},Gd,{provide:Fh,useFactory:function(e){return e.routerState.root},deps:[qd]},{provide:ba,useClass:Ca},Yd,Jd,class{preload(e,t){return t().pipe(cu(()=>Fl(null)))}},{provide:ep,useValue:{enableTracing:!1}}];function np(){return new pa("Router",qd)}let ip=(()=>{class e{constructor(e,t){}static forRoot(t,r){return{ngModule:e,providers:[rp,cp(t),{provide:tp,useFactory:ap,deps:[[qd,new ne,new se]]},{provide:ep,useValue:r||{}},{provide:$a,useFactory:op,deps:[Aa,[new re(Ba),new ne],ep]},{provide:Xd,useFactory:sp,deps:[qd,Ya,ep]},{provide:Zd,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Jd},{provide:pa,multi:!0,useFactory:np},[lp,{provide:Oo,multi:!0,useFactory:up,deps:[lp]},{provide:dp,useFactory:hp,deps:[lp]},{provide:Fo,multi:!0,useExisting:dp}]]}}static forChild(t){return{ngModule:e,providers:[cp(t)]}}}return e.\u0275mod=mt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)(Ge(tp,8),Ge(qd,8))}}),e})();function sp(e,t,r){return r.scrollOffset&&t.setOffset(r.scrollOffset),new Xd(e,t,r)}function op(e,t,r={}){return r.useHash?new za(e,t):new Ha(e,t)}function ap(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function cp(e){return[{provide:$i,multi:!0,useValue:e},{provide:Nd,multi:!0,useValue:e}]}let lp=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new x}appInitializer(){return this.injector.get(Ra,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),r=this.injector.get(qd),n=this.injector.get(ep);if(this.isLegacyDisabled(n)||this.isLegacyEnabled(n))e(!0);else if("disabled"===n.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==n.initialNavigation)throw new Error(`Invalid initialNavigation options: '${n.initialNavigation}'`);r.hooks.afterPreactivation=()=>this.initNavigation?Fl(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),r.initialNavigation()}return t})}bootstrapListener(e){const t=this.injector.get(ep),r=this.injector.get(Yd),n=this.injector.get(Xd),i=this.injector.get(qd),s=this.injector.get(ya);e===s.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),r.setUpPreloading(),n.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}isLegacyDisabled(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}return e.\u0275fac=function(t){return new(t||e)(Ge(Ni))},e.\u0275prov=le({token:e,factory:e.\u0275fac}),e})();function up(e){return e.appInitializer.bind(e)}function hp(e){return e.bootstrapListener.bind(e)}const dp=new Fe("Router Initializer"),pp=[];let fp=(()=>{class e{}return e.\u0275mod=mt({type:e}),e.\u0275inj=ue({factory:function(t){return new(t||e)},imports:[[ip.forRoot(pp)],ip]}),e})();function mp(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))}var gp=r("KMqf");let vp=(()=>{class e{constructor(){this.config={minLevel:4,maxLevel:20,minOnTime:0,maxOnTime:300,minOffTime:0,maxOffTime:1500,minLevelTime:1,maxLevelTime:10,sound:"",skipProbability:0}}ngOnInit(){this.connect()}getRandomInt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}sleep(e){return mp(this,void 0,void 0,(function*(){return new Promise(t=>setTimeout(t,e))}))}clickFind(e){return mp(this,void 0,void 0,(function*(){console.log("clickButton"),yield this.client.StartScanning(),console.log("started scanning")}))}clickVibrate(e){return mp(this,void 0,void 0,(function*(){yield this.vibrate(this.config.minLevel/100)}))}clickStop(e){return mp(this,void 0,void 0,(function*(){yield this.stop()}))}clickStart(e){return mp(this,void 0,void 0,(function*(){for(;;)yield this.onPhase(),yield this.offPhase()}))}playSound(){return mp(this,void 0,void 0,(function*(){if(this.config.sound){let e=new Audio(this.config.sound);return e.play(),new Promise(t=>e.onended=t)}}))}onPhase(){return mp(this,void 0,void 0,(function*(){if(console.log("onPhase"),yield this.playSound(),this.config.skipProbability>0&&0==this.getRandomInt(0,this.config.skipProbability))return void console.log("onPhase skipped");let e=this.getRandomInt(this.config.minOnTime,this.config.maxOnTime);console.log("onPhase Begin",e);let t=Date.now();for(;t+1e3*e>Date.now();){let e=this.getRandomInt(this.config.minLevelTime,this.config.maxLevelTime),t=this.getRandomInt(this.config.minLevel,this.config.maxLevel);console.log("      level Begin",e,t),yield this.vibrate(t/100),yield this.sleep(1e3*e),console.log("      level End",e,t)}yield this.stop(),console.log("onPhase End",e)}))}vibrate(e){return mp(this,void 0,void 0,(function*(){this.device&&(yield this.device.SendVibrateCmd(e))}))}stop(){return mp(this,void 0,void 0,(function*(){this.device&&(yield this.device.SendStopDeviceCmd())}))}offPhase(){return mp(this,void 0,void 0,(function*(){let e=this.getRandomInt(this.config.minOffTime,this.config.maxOffTime);console.log("offPhase Begin",e),yield this.sleep(1e3*e),console.log("offPhase End",e)}))}connect(){return mp(this,void 0,void 0,(function*(){console.log("ngOnInit"),this.client=new gp.ButtplugClient("Client"),console.log("ngOnInit - new ButtplugClient",this.client),yield this.client.Connect(new gp.ButtplugEmbeddedClientConnector),console.log("ngOnInit - connect",this.client,this.client.Connected),this.client.addListener("deviceadded",e=>{this.onDeviceAdded(e)}),this.client.addListener("deviceremoved",this.onDeviceRemoved),this.client.addListener("scanningfinished",this.onScanningFinished),console.log("devices known on connect",this.client.Devices)}))}onDeviceAdded(e){return mp(this,void 0,void 0,(function*(){this.device=e,console.log("DeviceAdded",e,new Date),yield e.SendVibrateCmd(.05),yield this.sleep(1e3),yield e.SendStopDeviceCmd()}))}onDeviceRemoved(e){return mp(this,void 0,void 0,(function*(){console.log("DeviceRemoved",e,new Date),this.device=null}))}onScanningFinished(){return mp(this,void 0,void 0,(function*(){console.log("ScanningFinished")}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=ht({type:e,selectors:[["app-root"]],decls:43,vars:10,consts:[[3,"click"],[3,"ngModel","ngModelChange"],["id","start",3,"click"]],template:function(e,t){1&e&&(ts(0,"button",0),os("click",(function(e){return t.clickFind(e)})),vs(1,"Find"),rs(),ts(2,"button",0),os("click",(function(e){return t.clickVibrate(e)})),vs(3,"Vibrate"),rs(),ts(4,"button",0),os("click",(function(e){return t.clickStop(e)})),vs(5,"Stop"),rs(),ts(6,"p"),vs(7,"Settings"),rs(),ts(8,"label"),vs(9,"Min Level (0-100) "),ts(10,"input",1),os("ngModelChange",(function(e){return t.config.minLevel=e})),rs(),rs(),ts(11,"label"),vs(12,"Max Level (0-100) "),ts(13,"input",1),os("ngModelChange",(function(e){return t.config.maxLevel=e})),rs(),rs(),ts(14,"label"),vs(15,"Min Off Time in seconds "),ts(16,"input",1),os("ngModelChange",(function(e){return t.config.minOffTime=e})),rs(),rs(),ts(17,"label"),vs(18,"Max Off Time in seconds "),ts(19,"input",1),os("ngModelChange",(function(e){return t.config.maxOffTime=e})),rs(),rs(),ts(20,"label"),vs(21,"Min On Time in seconds "),ts(22,"input",1),os("ngModelChange",(function(e){return t.config.minOnTime=e})),rs(),rs(),ts(23,"label"),vs(24,"Max On Time in seconds "),ts(25,"input",1),os("ngModelChange",(function(e){return t.config.maxOnTime=e})),rs(),rs(),ts(26,"label"),vs(27,"Min Time per Level in seconds "),ts(28,"input",1),os("ngModelChange",(function(e){return t.config.minLevelTime=e})),rs(),rs(),ts(29,"label"),vs(30,"Max Time per Level in seconds "),ts(31,"input",1),os("ngModelChange",(function(e){return t.config.maxLevelTime=e})),rs(),rs(),ts(32,"label"),vs(33,"Sound URL "),ts(34,"input",1),os("ngModelChange",(function(e){return t.config.sound=e})),rs(),rs(),ts(35,"label"),vs(36,"Skip On time in 1 of _ cases "),ts(37,"input",1),os("ngModelChange",(function(e){return t.config.skipProbability=e})),rs(),rs(),ts(38,"p"),vs(39," Please note that most devices round the level number. For example a device may have groups such as 0-4 is off, 5-9 is lowest level, 10-14 is second lowest level."),rs(),ts(40,"button",2),os("click",(function(e){return t.clickStart(e)})),vs(41,"Start"),rs(),ns(42,"router-outlet")),2&e&&(ln(10),Xi("ngModel",t.config.minLevel),ln(3),Xi("ngModel",t.config.maxLevel),ln(3),Xi("ngModel",t.config.minOffTime),ln(3),Xi("ngModel",t.config.maxOffTime),ln(3),Xi("ngModel",t.config.minOnTime),ln(3),Xi("ngModel",t.config.maxOnTime),ln(3),Xi("ngModel",t.config.minLevelTime),ln(3),Xi("ngModel",t.config.maxLevelTime),ln(3),Xi("ngModel",t.config.sound),ln(3),Xi("ngModel",t.config.skipProbability))},directives:[kc,$c,kl,Kd],styles:["",'body[_ngcontent-%COMP%] { font-family: "sans-serif"}\nlabel[_ngcontent-%COMP%] { display: block; width: 15em}\n#start[_ngcontent-%COMP%] { width: 12em; height: 2em}']}),e})(),yp=(()=>{class e{}return e.\u0275mod=mt({type:e,bootstrap:[vp]}),e.\u0275inj=ue({factory:function(t){return new(t||e)},providers:[],imports:[[Ic,fp,Ll]]}),e})();(function(){if(Fr)throw new Error("Cannot enable prod mode after platform setup.");Lr=!1})(),xc().bootstrapModule(yp).catch(e=>console.error(e))},zn8P:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="zn8P"},zp0c:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=r("VzKg"),s=r("NUpL"),o=r("+qE3"),a=r("kFR6"),c=r("AdGg");r("ZD7F"),t.DeviceManager=class extends o.EventEmitter{constructor(e){super(),this._subtypeManagers=[],this._devices=new Map,this._deviceCounter=0,this._logger=a.ButtplugLogger.Logger,this.Shutdown=()=>n(this,void 0,void 0,(function*(){for(const e of this._devices.values())yield e.Disconnect()})),this.ClearDeviceManagers=()=>{this._logger.Info("DeviceManager: Clearing device subtype managers"),this._subtypeManagers=[]},this.AddDeviceManager=e=>{this._logger.Info(`DeviceManager: Adding Device Manager ${e.constructor.name}`),e.SetLogger(this._logger),this._subtypeManagers.push(e),e.addListener("deviceadded",this.OnDeviceAdded),e.addListener("deviceremoved",this.OnDeviceRemoved),e.addListener("scanningfinished",this.OnScanningFinished)},this.SendMessage=e=>n(this,void 0,void 0,(function*(){const t=e.Id;switch(e.Type){case i.StartScanning:if(this._logger.Debug("DeviceManager: Starting scan"),0===this._subtypeManagers.length)throw c.ButtplugException.LogAndError(c.ButtplugDeviceException,this._logger,"No device managers available, cannot scan.",t);for(const t of this._subtypeManagers)if(!t.IsScanning)try{yield t.StartScanning()}catch(o){for(const e of this._subtypeManagers)e.IsScanning&&e.StopScanning();throw o}return new i.Ok(t);case i.StopScanning:this._logger.Debug("DeviceManager: Stopping scan");for(const t of this._subtypeManagers)t.IsScanning&&t.StopScanning();return new i.Ok(t);case i.StopAllDevices:return this._logger.Debug("DeviceManager: Stopping all devices"),this._devices.forEach((e,t)=>n(this,void 0,void 0,(function*(){yield e.ParseMessage(new i.StopDeviceCmd)}))),new i.Ok(t);case i.RequestDeviceList:this._logger.Debug("DeviceManager: Sending device list");const e=[];return this._devices.forEach((t,r)=>{e.push(new i.DeviceInfoWithSpecifications(r,t.Name,t.MessageSpecifications))}),new i.DeviceList(e,t)}const r=e;if(void 0===r.DeviceIndex)throw c.ButtplugException.LogAndError(c.ButtplugMessageException,this._logger,`Message Type ${e.Type} unhandled by this server.`,t);if(!this._devices.has(r.DeviceIndex))throw c.ButtplugException.LogAndError(c.ButtplugDeviceException,this._logger,`Device Index ${r.DeviceIndex} does not exist`,t);const s=this._devices.get(r.DeviceIndex);if(s.AllowedMessageTypes.indexOf(e.Type)<0)throw c.ButtplugException.LogAndError(c.ButtplugDeviceException,this._logger,`Device ${s.Name} does not take message type ${e.Type.name}`,t);return this._logger.Trace(`DeviceManager: Sending ${r.Type} to ${s.Name} (${r.Id})`),yield s.ParseMessage(r)})),this.OnDeviceAdded=e=>{for(const r of this._devices.values())if(r.Id===e.Id)return void this._logger.Info(`DeviceManager: Device ${e.Name} (id: ${e.Id}) already added, ignoring.`);const t=this._deviceCounter;this._deviceCounter+=1,this._devices.set(t,e),this._logger.Info(`DeviceManager: Device Added: ${e.Name} (${t})`),e.addListener("deviceremoved",this.OnDeviceRemoved),this._msgClosure(new i.DeviceAdded(t,e.Name,e.MessageSpecifications))},this.OnDeviceRemoved=e=>{let t=null;for(const[r,n]of Array.from(this._devices.entries()))if(n===e){t=r;break}null!==t&&(e.removeAllListeners("deviceremoved"),this._devices.delete(t),this._logger.Info(`DeviceManager: Device Removed: ${e.Name} (${t})`),this._msgClosure(new i.DeviceRemoved(t)))},this.OnScanningFinished=()=>{this._logger.Debug("DeviceManager: Scanning Finished.");for(const e of this._subtypeManagers)if(e.IsScanning)return;this._msgClosure(new i.ScanningFinished)},this._logger.Debug("DeviceManager: Starting Device Manager"),"undefined"!=typeof window&&void 0!==window.navigator&&navigator.bluetooth?this.AddDeviceManager(new s.WebBluetoothDeviceManager(this._logger)):this._logger.Info("DeviceManager: Not adding WebBluetooth Manager, no WebBluetooth capabilities found."),this._msgClosure=e}get DeviceManagers(){return this._subtypeManagers}}}},[[0,0]]]);