function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _get(e,t,r){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=_superPropBase(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,e)})(e)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _construct(e,t,r){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&_setPrototypeOf(i,r.prototype),i}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(u){i=!0,o=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+9rK":function(e,t,r){"use strict";function n(e,t,r){var n=r?" !== ":" === ",i=r?" || ":" && ",o=r?"!":"",a=r?"":"!";switch(e){case"null":return t+n+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+i+"typeof "+t+n+'"object"'+i+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+i+a+"("+t+" % 1)"+i+t+n+t+")";default:return"typeof "+t+n+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t){switch(e.length){case 1:return n(e[0],t,!0);default:var r="",i=o(e);for(var a in i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)r+=(r?" && ":"")+n(a,t,!0);return r}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var o=t[n];i[o]?r[r.length]=o:"array"===e&&"array"===o&&(r[r.length]=o)}if(r.length)return r}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:o,getProperty:u,escapeQuotes:c,equal:r("aUsF"),ucs2length:r("d17/"),varOccurences:function(e,t){var r=e.match(new RegExp(t+="[^0-9]","g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(l,"").replace(h,"").replace(f,"if (!($1))")},finalCleanUpCode:function(e,t){var r=e.match(d);return r&&2==r.length&&(e=t?e.replace(v,"").replace(m,"return data;"):e.replace(p,"").replace("return errors === 0;","validate.errors = null; return true;")),(r=e.match(g))&&3===r.length?e.replace(y,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var r in e)if(!t[r])return r},toQuotedString:_,getPathExpr:function(e,t,r,n){return w(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){return w(e,_(r?"/"+k(t):u(t)))},getData:function(e,t,r){var n,i,o,a;if(""===e)return"rootData";if("/"==e[0]){if(!C.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(a=e.match(b)))throw new Error("Invalid JSON-pointer: "+e);if(n=+a[1],"#"==(i=a[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(o="data"+(t-n||""),!i)return o}for(var s=o,c=i.split("/"),l=0;l<c.length;l++){var h=c[l];h&&(s+=" && "+(o+=u(S(h))))}return s},unescapeFragment:function(e){return S(decodeURIComponent(e))},unescapeJsonPointer:S,escapeFragment:function(e){return encodeURIComponent(k(e))},escapeJsonPointer:k};var i=o(["string","number","integer","boolean","null"]);function o(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var a=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function u(e){return"number"==typeof e?"["+e+"]":a.test(e)?"."+e:"['"+c(e)+"']"}function c(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var l=/else\s*{\s*}/g,h=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,f=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g,d=/[^v.]errors/g,p=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,v=/var errors = 0;|var vErrors = null;/g,m=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,g=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,y=/if \(rootData === undefined\) rootData = data;/;function _(e){return"'"+c(e)+"'"}var C=/^\/(?:[^~]|~0|~1)*$/,b=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function w(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function k(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function S(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},"+qE3":function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,o,a;if(c(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function p(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):m(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=m(u,c);for(r=0;r<c;++r)o(l[r],this,t)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},"//Jx":function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,i=r("cjZW"),o=r("eXaU");e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var o=t.type;if(Array.isArray(o))for(var a=0;a<o.length;a++)u(e,o[a],t);else u(e,o,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function u(e,t,n){for(var o,a=0;a<r.length;a++){var s=r[a];if(s.type==t){o=s;break}}o||r.push(o={type:t,rules:[]});var u={keyword:e,definition:n,custom:!0,code:i,implements:n.implements};o.rules.push(u),r.custom[e]=u}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,i=0;i<n.length;i++)if(n[i].keyword==e){n.splice(i,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}},"/oyJ":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("KMqf"),o=r("KMqf"),a=r("FUtr"),s=r("bTiy"),u=r("AdGg");t.TestDeviceProtocol=function(e){function t(e,r,a,c,l){var h;if(_classCallCheck(this,t),(h=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Test Device - ".concat(e),r)))._linearSpeed=0,h._linearPosition=0,h._vibrateSpeed=0,h._rotateSpeed=0,h._rotateClockwise=!1,h._shouldVibrate=!1,h._shouldRotate=!1,h._shouldLinear=!1,h.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(h),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this.MsgFuncs.has(o.VibrateCmd)?this.emit("vibrate",0):this.MsgFuncs.has(o.LinearCmd)&&this.emit("linear",{position:this._linearPosition,speed:this._linearSpeed}),Promise.resolve(new o.Ok(e.Id))));case 1:case"end":return t.stop()}}),t,this)})))},h.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(h),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this._vibrateSpeed=e.Speed,this.emit("vibrate",e.Speed),Promise.resolve(new o.Ok(e.Id))));case 1:case"end":return t.stop()}}),t,this)})))},h.HandleVibrateCmd=function(e){return n(_assertThisInitialized(h),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id)));case 1:case"end":return t.stop()}}),t,this)})))},h.HandleRotateCmd=function(e){return n(_assertThisInitialized(h),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this._rotateSpeed=e.Rotations[0].Speed,this._rotateClockwise=e.Rotations[0].Clockwise,this.emit("vibrate",{speed:this._rotateSpeed,clockwise:this._rotateClockwise}),Promise.resolve(new o.Ok(e.Id))));case 1:case"end":return t.stop()}}),t,this)})))},h.HandleFleshlightLaunchFW12Cmd=function(e){return n(_assertThisInitialized(h),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this._linearPosition=e.Position,this._linearSpeed=e.Speed,this.emit("linear",{position:this._linearPosition,speed:this._linearSpeed}),Promise.resolve(new o.Ok(e.Id))));case 1:case"end":return t.stop()}}),t,this)})))},h.HandleLinearCmd=function(e){return n(_assertThisInitialized(h),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,i,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Vectors.length){t.next=2;break}return t.abrupt("return",new o.Error("LinearCmd requires 1 vector for this device.",o.ErrorClass.ERROR_DEVICE,e.Id));case 2:return r=e.Vectors[0],n=100*r.Position,i=Math.abs(n-this._linearPosition),a=Math.floor(25e3*Math.pow(90*r.Duration/i,-1.05)),a=Math.min(Math.max(a,0),95),s=Math.floor(n/99*90+4.5),t.next=8,this.HandleFleshlightLaunchFW12Cmd(new o.FleshlightLaunchFW12Cmd(a,s,e.DeviceIndex,e.Id));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})))},h._shouldVibrate=a,h._shouldLinear=c,h._shouldRotate=l,h.MsgFuncs.set(o.StopDeviceCmd,h.HandleStopDeviceCmd),!(r instanceof s.TestDeviceImpl))throw new u.ButtplugDeviceException("TestDeviceProtocol can only be constructed with a TestDeviceImpl");return h._shouldVibrate&&(h.MsgFuncs.set(o.SingleMotorVibrateCmd,h.HandleSingleMotorVibrateCmd),h.MsgFuncs.set(o.VibrateCmd,h.HandleVibrateCmd)),h._shouldLinear&&(h.MsgFuncs.set(o.FleshlightLaunchFW12Cmd,h.HandleFleshlightLaunchFW12Cmd),h.MsgFuncs.set(o.LinearCmd,h.HandleLinearCmd)),h._shouldRotate&&h.MsgFuncs.set(o.RotateCmd,h.HandleRotateCmd),_possibleConstructorReturn(h)}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return this.MsgFuncs.has(o.VibrateCmd)?{VibrateCmd:{FeatureCount:2},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}:this.MsgFuncs.has(o.LinearCmd)?{LinearCmd:{FeatureCount:1},FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{}}:this.MsgFuncs.has(o.RotateCmd)?{RotateCmd:{FeatureCount:1},StopDeviceCmd:{}}:{}}}]),t}(a.ButtplugDeviceProtocol)},0:function(e,t,r){e.exports=r("zUnb")},"0w4r":function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f="valid"+o,d=e.opts.$data&&s&&s.$data;if(d?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s,(s||d)&&!1!==e.opts.uniqueItems){d&&(i+=" var "+f+"; if ("+n+" === false || "+n+" === undefined) "+f+" = true; else if (typeof "+n+" != 'boolean') "+f+" = false; else { "),i+=" var i = "+h+".length , "+f+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,v=Array.isArray(p);!p||"object"==p||"array"==p||v&&(p.indexOf("object")>=0||p.indexOf("array")>=0)?i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+f+" = false; break outer; } } } ":(i+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ",i+=" if ("+e.util["checkDataType"+(v?"s":"")](p,"item",!0)+") continue; ",v&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "),i+=" } ",d&&(i+="  }  ");var m=m||[];m.push(i+=" if (!"+f+") {   "),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var g=i;i=m.pop(),i+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { ")}else l&&(i+=" if (true) { ");return i}},"1QhW":function(e,t,r){"use strict";e.exports=function(e,t,r){var n="",i=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var u="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(u);e.logger.warn(u)}}if(e.isTop&&(n+=" var validate = ",i&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){var c=e.level,l=e.dataLevel,h=e.schema["false schema"],f=e.schemaPath+e.util.getProperty("false schema"),d=e.errSchemaPath+"/false schema",p=!e.opts.allErrors,v="data"+(l||""),m="valid"+c;if(!1===e.schema){e.isTop?p=!0:n+=" var "+m+" = false; ",(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ";var g=n;n=q.pop(),n+=!e.compositeRule&&p?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else n+=e.isTop?i?" return data; ":" validate.errors = null; return true; ":" var "+m+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var y=e.isTop;if(c=e.level=0,l=e.dataLevel=0,v="data",e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var _="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{if(c=e.level,v="data"+((l=e.dataLevel)||""),a&&(e.baseId=e.resolve.url(e.baseId,a)),i&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+c+" = errors;"}m="valid"+c,p=!e.opts.allErrors;var C="",b="",w=e.schema.type,k=Array.isArray(w);if(w&&e.opts.nullable&&!0===e.schema.nullable&&(k?-1==w.indexOf("null")&&(w=w.concat("null")):"null"!=w&&(w=[w,"null"],k=!0)),k&&1==w.length&&(w=w[0],k=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),w){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,w);var x=e.RULES.types[w];if(S||k||!0===x||x&&!J(x)){if(f=e.schemaPath+".type",d=e.errSchemaPath+"/type",f=e.schemaPath+".type",d=e.errSchemaPath+"/type",n+=" if ("+e.util[k?"checkDataTypes":"checkDataType"](w,v,!0)+") { ",S){var E="dataType"+c,P="coerced"+c;n+=" var "+E+" = typeof "+v+"; ","array"==e.opts.coerceTypes&&(n+=" if ("+E+" == 'object' && Array.isArray("+v+")) "+E+" = 'array'; "),n+=" var "+P+" = undefined; ";var R="",I=S;if(I)for(var O,M=-1,D=I.length-1;M<D;)O=I[M+=1],M&&(n+=" if ("+P+" === undefined) { ",R+="}"),"array"==e.opts.coerceTypes&&"array"!=O&&(n+=" if ("+E+" == 'array' && "+v+".length == 1) { "+P+" = "+v+" = "+v+"[0]; "+E+" = typeof "+v+";  } "),"string"==O?n+=" if ("+E+" == 'number' || "+E+" == 'boolean') "+P+" = '' + "+v+"; else if ("+v+" === null) "+P+" = ''; ":"number"==O||"integer"==O?(n+=" if ("+E+" == 'boolean' || "+v+" === null || ("+E+" == 'string' && "+v+" && "+v+" == +"+v+" ","integer"==O&&(n+=" && !("+v+" % 1)"),n+=")) "+P+" = +"+v+"; "):"boolean"==O?n+=" if ("+v+" === 'false' || "+v+" === 0 || "+v+" === null) "+P+" = false; else if ("+v+" === 'true' || "+v+" === 1) "+P+" = true; ":"null"==O?n+=" if ("+v+" === '' || "+v+" === 0 || "+v+" === false) "+P+" = null; ":"array"==e.opts.coerceTypes&&"array"==O&&(n+=" if ("+E+" == 'string' || "+E+" == 'number' || "+E+" == 'boolean' || "+v+" == null) "+P+" = ["+v+"]; ");(q=q||[]).push(n+=" "+R+" if ("+P+" === undefined) {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=k?""+w.join(","):""+w,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+w.join(","):""+w,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ",g=n,n=q.pop(),n+=!e.compositeRule&&p?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  ";var T=l?"data"+(l-1||""):"parentData";n+=" "+v+" = "+P+"; ",l||(n+="if ("+T+" !== undefined)"),n+=" "+T+"["+(l?e.dataPathArr[l]:"parentDataProperty")+"] = "+P+"; } "}else(q=q||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=k?""+w.join(","):""+w,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+w.join(","):""+w,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ",g=n,n=q.pop(),n+=!e.compositeRule&&p?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";n+=" } "}}if(e.schema.$ref&&!o)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(n+=" } if (errors === ",n+=y?"0":"errs_"+c,n+=") { ",b+="}");else{var A=e.RULES;if(A)for(var V=-1,L=A.length-1;V<L;)if(J(x=A[V+=1])){if(x.type&&(n+=" if ("+e.util.checkDataType(x.type,v)+") { "),e.opts.useDefaults)if("object"==x.type&&e.schema.properties){h=e.schema.properties;var F=Object.keys(h);if(F)for(var j,N=-1,U=F.length-1;N<U;)if(void 0!==(z=h[j=F[N+=1]]).default){var B=v+e.util.getProperty(j);if(e.compositeRule){if(e.opts.strictDefaults){if(_="default is ignored for: "+B,"log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}}else n+=" if ("+B+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+B+" === null || "+B+" === '' "),n+=" ) "+B+" = ",n+="shared"==e.opts.useDefaults?" "+e.useDefault(z.default)+" ":" "+JSON.stringify(z.default)+" ",n+="; "}}else if("array"==x.type&&Array.isArray(e.schema.items)){var H=e.schema.items;if(H){M=-1;for(var z,$=H.length-1;M<$;)if(void 0!==(z=H[M+=1]).default)if(B=v+"["+M+"]",e.compositeRule){if(e.opts.strictDefaults){if(_="default is ignored for: "+B,"log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}}else n+=" if ("+B+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+B+" === null || "+B+" === '' "),n+=" ) "+B+" = ",n+="shared"==e.opts.useDefaults?" "+e.useDefault(z.default)+" ":" "+JSON.stringify(z.default)+" ",n+="; "}}var q,W=x.rules;if(W)for(var G,K=-1,Q=W.length-1;K<Q;)if(Y(G=W[K+=1])){var Z=G.code(e,G.keyword,x.type);Z&&(n+=" "+Z+" ",p&&(C+="}"))}p&&(n+=" "+C+" ",C=""),x.type&&(n+=" } ",w&&w===x.type&&!S)&&(f=e.schemaPath+".type",d=e.errSchemaPath+"/type",(q=q||[]).push(n+=" else { "),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",n+=k?""+w.join(","):""+w,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=k?""+w.join(","):""+w,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),n+=" } "):n+=" {} ",g=n,n=q.pop(),n+=!e.compositeRule&&p?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "),p&&(n+=" if (errors === ",n+=y?"0":"errs_"+c,n+=") { ",b+="}")}}function J(e){for(var t=e.rules,r=0;r<t.length;r++)if(Y(t[r]))return!0}function Y(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return p&&(n+=" "+b+" "),y?(i?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+m+" = errors === errs_"+c+";",n=e.util.cleanUpCode(n),y&&(n=e.util.finalCleanUpCode(n,i)),n}},"2f+d":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("+qE3"),o=r("ytkS"),a=r("DHMQ");t.ButtplugBrowserWebsocketClientConnector=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._url=e,r._sorter=new a.ButtplugMessageSorter,r.Connect=function(){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,i,o,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new WebSocket(this._url),o=new Promise((function(e,t){r=e,i=t})),a=function(e){return i()},e.abrupt("return",(t.addEventListener("open",(function(e){return n(s,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._ws=t,this._ws.addEventListener("message",(function(e){n.ParseIncomingMessage(e)})),this._ws.removeEventListener("close",a),this._ws.addEventListener("close",this.Disconnect),r();case 1:case"end":return e.stop()}}),e,this)})))})),t.addEventListener("close",a),o));case 3:case"end":return e.stop()}}),e,this)})))},r.Disconnect=function(){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.Connected&&(this._ws.close(),this._ws=void 0,this.emit("disconnect"));case 1:case"end":return e.stop()}}),e,this)})))},r.Send=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.Connected){t.next=2;break}throw new Error("ButtplugClient not connected");case 2:return r=this._sorter.PrepareOutgoingMessage(e),this._ws.send("["+e.toJSON()+"]"),t.next=6,r;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))},r.ParseIncomingMessage=function(e){if("string"==typeof e.data){var t=o.FromJSON(e.data),n=r._sorter.ParseIncomingMessages(t);r.emit("message",n)}else if(e.data instanceof Blob){var i=new FileReader;i.addEventListener("load",(function(e){r.OnReaderLoad(e)})),i.readAsText(e.data)}},r}return _inherits(t,e),_createClass(t,[{key:"OnReaderLoad",value:function(e){var t=o.FromJSON(e.target.result),r=this._sorter.ParseIncomingMessages(t);this.emit("message",r)}},{key:"Connected",get:function(){return void 0!==this._ws}}]),t}(i.EventEmitter)},"2jsQ":function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s,i+="if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || ");var d=t,p=p||[];p.push(i+=" "+h+".length "+("maxItems"==t?">":"<")+" "+n+") { "),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=f?"' + "+n+" + '":""+s,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var v=i;return i=p.pop(),i+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},"36dr":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("+qE3");t.ButtplugDevice=function(e){function t(e,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).ParseMessage=function(e){return n(_assertThisInitialized(i),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._protocol.ParseMessage(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},i._protocol=e,i._device=r,i._device.addListener("deviceremoved",(function(){i.emit("deviceremoved",_assertThisInitialized(i))})),i}return _inherits(t,e),_createClass(t,[{key:"Disconnect",value:function(){return this._device.Disconnect()}},{key:"Initialize",value:function(){return n(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._protocol.Initialize();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"Connected",get:function(){return this._device.Connected}},{key:"MessageSpecifications",get:function(){return this._protocol.MessageSpecifications}},{key:"Name",get:function(){return this._protocol.Name}},{key:"Id",get:function(){return this._device.Address}},{key:"AllowedMessageTypes",get:function(){return this._protocol.AllowedMessageTypes}}]),t}(i.EventEmitter)},"3ZNU":function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level,v=e.schema.then,m=e.schema.else,g=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all)),_=d.baseId;if(g||y){var C;d.createErrors=!1,d.schema=a,d.schemaPath=s,d.errSchemaPath=u,n+=" var "+f+" = errors; var "+h+" = true;  ";var b=e.compositeRule;e.compositeRule=d.compositeRule=!0,n+="  "+e.validate(d)+" ",d.baseId=_,d.createErrors=!0,n+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",e.compositeRule=d.compositeRule=b,g?(n+=" if ("+p+") {  ",d.schema=e.schema.then,d.schemaPath=e.schemaPath+".then",d.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(d)+" ",d.baseId=_,n+=" "+h+" = "+p+"; ",g&&y?n+=" var "+(C="ifClause"+i)+" = 'then'; ":C="'then'",n+=" } ",y&&(n+=" else { ")):n+=" if (!"+p+") { ",y&&(d.schema=e.schema.else,d.schemaPath=e.schemaPath+".else",d.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(d)+" ",d.baseId=_,n+=" "+h+" = "+p+"; ",g&&y?n+=" var "+(C="ifClause"+i)+" = 'else'; ":C="'else'",n+=" } "),n+=" if (!"+h+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+C+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+C+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(n+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),n+=" }   ",c&&(n+=" else { "),n=e.util.cleanUpCode(n)}else c&&(n+=" if (true) { ");return n}},"3pWD":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r("VzKg"),a=r("AdGg"),s=r("FUtr");!function(e){e[e.Rotate=1]="Rotate",e[e.Vibrate=3]="Vibrate"}(i||(i={}));var u=function e(){_classCallCheck(this,e),this.Name="Vorze A10 Cyclone SA",this.CommandType=i.Rotate,this.DeviceType=1},c=function(e){function t(e){var r;_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Vorze",e)))._devInfo=new u,r._clockwise=!0,r._speed=0,r.HandleRotateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Rotations.length){t.next=2;break}throw new a.ButtplugDeviceException("Vorze A10 Cyclone devices require RotateCmd to have 1 rotation command,"+" ".concat(e.Rotations.length," sent."),e.Id);case 2:return t.next=4,this.HandleVorzeA10CycloneCmd(new o.VorzeA10CycloneCmd(100*e.Rotations[0].Speed,e.Rotations[0].Clockwise,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._devInfo.CommandType!==i.Vibrate){t.next=6;break}return t.next=3,this.HandleSingleMotorVibrateCmd(new o.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id));case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,this.HandleVorzeA10CycloneCmd(new o.VorzeA10CycloneCmd(0,!1,e.DeviceIndex,e.Id));case 8:t.t0=t.sent;case 9:return t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t,this)})))},r.HandleVorzeA10CycloneCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=255&((e.Clockwise?1:0)<<7|e.Speed),t.next=3,this._device.WriteValue(Buffer.from([this._devInfo.DeviceType,this._devInfo.CommandType,r]));case 3:return t.abrupt("return",new o.Ok(e.Id));case 4:case"end":return t.stop()}}),t,this)})))},r.HandleVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Speeds.length){t.next=2;break}throw new a.ButtplugDeviceException("Vorze devices require VibrateCmd to have 1 speed commands, "+"".concat(e.Speeds.length," sent."),e.Id);case 2:return t.next=4,this.HandleSingleMotorVibrateCmd(new o.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))},r.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Math.round(100*e.Speed),t.t0=r!==this._speed,!t.t0){t.next=5;break}return t.next=5,this._device.WriteValue(Buffer.from([this._devInfo.DeviceType,this._devInfo.CommandType,r]));case 5:return t.abrupt("return",new o.Ok(e.Id));case 6:case"end":return t.stop()}}),t,this)})))};var s=t.DevInfos.get(e.Name);return void 0!==s&&(r._devInfo=s,r._name=r._devInfo.Name),r.MsgFuncs.set(o.StopDeviceCmd,r.HandleStopDeviceCmd),r._devInfo.CommandType===i.Rotate&&(r.MsgFuncs.set(o.VorzeA10CycloneCmd,r.HandleVorzeA10CycloneCmd),r.MsgFuncs.set(o.RotateCmd,r.HandleRotateCmd)),r._devInfo.CommandType===i.Vibrate&&(r.MsgFuncs.set(o.SingleMotorVibrateCmd,r.HandleSingleMotorVibrateCmd),r.MsgFuncs.set(o.VibrateCmd,r.HandleVibrateCmd)),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return this._devInfo.CommandType===i.Vibrate?{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}:{RotateCmd:{FeatureCount:1},VorzeA10CycloneCmd:{},StopDeviceCmd:{}}}}]),t}(s.ButtplugDeviceProtocol);c.DevInfos=new Map([["CycSA",Object.assign(new u,{Name:"Vorze A10 Cyclone SA",CommandType:i.Rotate,DeviceType:1})],["UFOSA",Object.assign(new u,{Name:"Vorze UFO SA",CommandType:i.Rotate,DeviceType:2})],["Bach smart",Object.assign(new u,{Name:"Vorze Bach",CommandType:i.Vibrate,DeviceType:6})]]),t.VorzeA10Cyclone=c},"4Kjc":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIDProtocolConfiguration=function(){function e(t){_classCallCheck(this,e)}return _createClass(e,[{key:"Matches",value:function(e){return!1}},{key:"Merge",value:function(e){}}]),e}()},"4e8G":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExposeMetadata=function(e,t,r){this.target=e,this.propertyName=t,this.options=r}},"4laU":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Lovense ".concat(e.Name),e)))._initPromise=new Promise((function(e){r._initResolve=e})),r._isClockwise=!1,r._specs={VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}},r.Initialize=function(){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._device.addListener("updateReceived",this.OnValueChanged),e.next=3,this._device.SubscribeToUpdates();case 3:return this._logger.Debug("Device ".concat(this._device.Name," waiting for initialization return")),e.next=6,this._device.WriteString("DeviceType;");case 6:return e.next=8,this._initPromise;case 8:case"end":return e.stop()}}),e,this)})))},r.OnValueChanged=function(e){var t=_slicedToArray(e,2),i=(t[0],t[1]);return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this._initResolve){e.next=3;break}return t=i.toString("utf-8"),e.abrupt("return",(this._logger.Debug("Lovense Device ".concat(this._device.Name," got initialization return ").concat(t)),this.ParseDeviceType(t),this._initResolve(),void(this._initResolve=void 0)));case 3:case"end":return e.stop()}}),e,this)})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id));case 2:if(t.t0=this._specs.hasOwnProperty("RotateCmd"),!t.t0){t.next=6;break}return t.next=6,this.HandleRotateCmd(new i.RotateCmd([new i.RotateSubcommand(0,0,this._isClockwise)],0,e.Id));case 6:return t.abrupt("return",new i.Ok(e.Id));case 7:case"end":return t.stop()}}),t,this)})))},r.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],n=0;n<this._specs.VibrateCmd.FeatureCount;n++)r.push(new i.SpeedSubcommand(n,e.Speed));return t.next=4,this.HandleVibrateCmd(new i.VibrateCmd(r,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))},r.HandleVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,s,u,c,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.Speeds.length>this._specs.VibrateCmd.FeatureCount)){t.next=2;break}throw new o.ButtplugDeviceException("Lovense devices require VibrateCmd to have at most "+"".concat(this._specs.VibrateCmd.FeatureCount," speed commands, ")+"".concat(e.Speeds.length," sent."),e.Id);case 2:r=!0,n=!1,a=void 0,t.prev=5,s=e.Speeds[Symbol.iterator]();case 7:if(r=(u=s.next()).done){t.next=15;break}return c=u.value,l=this._specs.VibrateCmd.FeatureCount>1?(c.Index+1).toString(10):"",h=Math.floor(20*c.Speed),t.next=12,this._device.WriteString("Vibrate".concat(l,":").concat(h,";"));case 12:r=!0,t.next=7;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(5),n=!0,a=t.t0;case 21:t.prev=21,t.prev=22,r||null==s.return||s.return();case 24:if(t.prev=24,!n){t.next=27;break}throw a;case 27:return t.finish(24);case 28:return t.finish(21);case 29:return t.abrupt("return",new i.Ok(e.Id));case 30:case"end":return t.stop()}}),t,this,[[5,17,21,29],[22,,24,28]])})))},r.HandleRotateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Rotations.length){t.next=2;break}throw new o.ButtplugDeviceException("Lovense devices require RotateCmd to have 1 rotate command, "+"".concat(e.Rotations.length," sent."),e.Id);case 2:if(0===(r=e.Rotations[0]).Index){t.next=5;break}throw new o.ButtplugDeviceException("Rotation command sent for invalid index.");case 5:if(t.t0=r.Clockwise!==this._isClockwise,!t.t0){t.next=9;break}return t.next=9,this._device.WriteString("RotateChange;");case 9:return n=Math.floor(20*r.Speed),t.next=12,this._device.WriteString("Rotate:".concat(n,";"));case 12:return t.abrupt("return",new i.Ok(e.Id));case 13:case"end":return t.stop()}}),t,this)})))},r}return _inherits(t,e),_createClass(t,[{key:"ParseDeviceType",value:function(e){var r=_slicedToArray(e.split(":"),2),n=r[0],o=r[1];t._deviceNames.hasOwnProperty(n)||(n="0"),this._name="Lovense ".concat(t._deviceNames[n]," v").concat(o),this.MsgFuncs.set(i.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(i.VibrateCmd,this.HandleVibrateCmd),this.MsgFuncs.set(i.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),"P"===n?this._specs.VibrateCmd={FeatureCount:2}:"A"!==n&&"C"!==n||(this._specs.RotateCmd={FeatureCount:1},this.MsgFuncs.set(i.RotateCmd,this.HandleRotateCmd))}},{key:"MessageSpecifications",get:function(){return this._specs}}]),t}(r("FUtr").ButtplugDeviceProtocol);a._deviceNames={A:"Nora",B:"Max",C:"Nora",L:"Ambi",O:"Osci",P:"Edge",S:"Lush",W:"Domi",Z:"Hush",0:"Unknown"},t.Lovense=a},"6MIY":function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f=e.opts.$data&&a&&a.$data;f&&(n+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var d="i"+i,p="schema"+i;f||(n+=" var "+p+" = validate.schema"+s+";"),n+="var "+h+";",f&&(n+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),n+=h+" = false;for (var "+d+"=0; "+d+"<"+p+".length; "+d+"++) if (equal("+l+", "+p+"["+d+"])) { "+h+" = true; break; }",f&&(n+="  }  ");var v=v||[];v.push(n+=" if (!"+h+") {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var m=n;return n=v.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},"6gcW":function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,u=e.util.copy(e),c="";u.level++;var l="valid"+u.level,h=u.baseId,f=!0,d=i;if(d)for(var p,v=-1,m=d.length-1;v<m;)p=d[v+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0:e.util.schemaHasRules(p,e.RULES.all))&&(f=!1,u.schema=p,u.schemaPath=o+"["+v+"]",u.errSchemaPath=a+"/"+v,n+="  "+e.validate(u)+" ",u.baseId=h,s&&(n+=" if ("+l+") { ",c+="}"));return s&&(n+=f?" if (true) { ":" "+c.slice(0,-1)+" "),e.util.cleanUpCode(n)}},"6pwk":function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},"9x6x":function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(r=t.cmp,function(e){return function(t,n){return r({key:t,value:e[t]},{key:n,value:e[n]})}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,a;if(Array.isArray(t)){for(a="[",r=0;r<t.length;r++)r&&(a+=","),a+=e(t[r])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(a="",r=0;r<u.length;r++){var c=u[r],l=e(t[c]);l&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l)}return o.splice(s,1),"{"+a+"}"}}(e)}},AK1u:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||"");if(!1===e.opts.format)return c&&(n+=" if (true) { "),n;var h,f=e.opts.$data&&a&&a.$data;f?(n+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a;var d=e.opts.unknownFormats,p=Array.isArray(d);if(f)n+=" var "+(v="format"+i)+" = formats["+h+"]; var "+(m="isObject"+i)+" = typeof "+v+" == 'object' && !("+v+" instanceof RegExp) && "+v+".validate; var "+(g="formatType"+i)+" = "+m+" && "+v+".type || 'string'; if ("+m+") { ",e.async&&(n+=" var async"+i+" = "+v+".async; "),n+=" "+v+" = "+v+".validate; } if (  ",f&&(n+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),n+=" (","ignore"!=d&&(n+=" ("+h+" && !"+v+" ",p&&(n+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),n+=") || "),n+=" ("+v+" && "+g+" == '"+r+"' && !(typeof "+v+" == 'function' ? ",n+=e.async?" (async"+i+" ? await "+v+"("+l+") : "+v+"("+l+")) ":" "+v+"("+l+") ",n+=" : "+v+".test("+l+"))))) {";else{var v;if(!(v=e.formats[a])){if("ignore"==d)return e.logger.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(n+=" if (true) { "),n;if(p&&d.indexOf(a)>=0)return c&&(n+=" if (true) { "),n;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var m,g=(m="object"==typeof v&&!(v instanceof RegExp)&&v.validate)&&v.type||"string";if(m){var y=!0===v.async;v=v.validate}if(g!=r)return c&&(n+=" if (true) { "),n;if(y){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(_="formats"+e.util.getProperty(a)+".validate")+"("+l+"))) { "}else{n+=" if (! ";var _="formats"+e.util.getProperty(a);m&&(_+=".validate"),n+="function"==typeof v?" "+_+"("+l+") ":" "+_+".test("+l+") ",n+=") { "}}var C=C||[];C.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",n+=f?""+h:""+e.util.toQuotedString(a),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=f?"' + "+h+" + '":""+e.util.escapeQuotes(a),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=f?"validate.schema"+s:""+e.util.toQuotedString(a),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var b=n;return n=C.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+b+"]); ":" validate.errors = ["+b+"]; return false; ":" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c&&(n+=" else { "),n}},ANNU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("s26e"),i=r("AdGg"),o=function(){function e(t,r){_classCallCheck(this,e),this._names=[],this._services=new Map,this._names=t,this._services=r||new Map}return _createClass(e,[{key:"Matches",value:function(t){if(!(t instanceof e))return!1;var r=t;if(1!==r.Names.length)throw new i.ButtplugDeviceException("Device checks should only happen against 1 name.");var n=!0,o=!1,a=void 0;try{for(var s,u=function(){var e=s.value;if(-1!==r.Names.indexOf(e))return{v:!0};if(!e.endsWith("*"))return"continue";var t=e.substr(0,e.length-1);return-1!==r.Names.findIndex((function(e){return e.startsWith(t)}))?{v:!0}:void 0},c=this.Names[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=u();switch(l){case"continue":continue;default:if("object"==typeof l)return l.v}}}catch(y){o=!0,a=y}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}var h=Array.from(this._services.keys()),f=!0,d=!1,p=void 0;try{for(var v,m=r.Services.keys()[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g=v.value;if(0!==h.indexOf(g))return!0}}catch(y){d=!0,p=y}finally{try{f||null==m.return||m.return()}finally{if(d)throw p}}return!1}},{key:"Merge",value:function(e){}},{key:"Names",get:function(){return this._names}},{key:"Services",get:function(){return this._services}}],[{key:"ConstructFromObject",value:function(t){if(-1===Object.getOwnPropertyNames(t).indexOf("names"))throw new i.ButtplugDeviceException("Need a names property to load bluetooth device from.");if(-1===Object.getOwnPropertyNames(t).indexOf("services"))throw new i.ButtplugDeviceException("Need a services property to load bluetooth device from.");for(var r=t.names,o=new Map,a=0,s=Object.keys(t.services);a<s.length;a++){var u=s[a],c=new Map;if(-1!==Object.getOwnPropertyNames(t.services).indexOf(u)&&null!==t.services[u])for(var l=0,h=Object.keys(t.services[u]);l<h.length;l++){var f=h[l],d=n.GetEndpoint(f);if(null==d)throw new i.ButtplugDeviceException("Device with names ".concat(r," lists invalid endpoint ").concat(f,"."));c.set(d,t.services[u][f])}o.set(u,c)}return new e(r,o)}}]),e}();t.BluetoothLEProtocolConfiguration=o},APWh:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e);f.level++;var d="valid"+f.level;if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all)){f.schema=a,f.schemaPath=s,f.errSchemaPath=u,n+=" var "+h+" = errors;  ";var p,v=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.opts.allErrors&&(p=f.opts.allErrors,f.opts.allErrors=!1),n+=" "+e.validate(f)+" ",f.createErrors=!0,p&&(f.opts.allErrors=p),e.compositeRule=f.compositeRule=v;var m=m||[];m.push(n+=" if ("+d+") {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var g=n;n=m.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(n+=" if (false) { ");return n}},AdGg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("VzKg"),i=function(e){function t(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.SYSTEM_MESSAGE_ID,a=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).errorClass=n.ErrorClass.ERROR_UNKNOWN,i.errorClass=r,i.innerError=a,i.messageId=o,i}return _inherits(t,_wrapNativeSuper(Error)),_createClass(t,[{key:"ErrorClass",get:function(){return this.errorClass}},{key:"InnerException",get:function(){return this.innerError}},{key:"Id",get:function(){return this.messageId}},{key:"ErrorMessage",get:function(){return new n.Error(this.message,this.ErrorClass,this.Id)}}],[{key:"LogAndError",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.SYSTEM_MESSAGE_ID;return t.Error(r),new e(r,i)}},{key:"FromError",value:function(e){switch(e.ErrorCode){case n.ErrorClass.ERROR_DEVICE:return new a(e.ErrorMessage,e.Id);case n.ErrorClass.ERROR_INIT:return new o(e.ErrorMessage,e.Id);case n.ErrorClass.ERROR_UNKNOWN:return new c(e.ErrorMessage,e.Id);case n.ErrorClass.ERROR_PING:return new u(e.ErrorMessage,e.Id);case n.ErrorClass.ERROR_MSG:return new s(e.ErrorMessage,e.Id);default:throw new Error("Message type ".concat(e.ErrorCode," not handled"))}}}]),t}();t.ButtplugException=i;var o=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.SYSTEM_MESSAGE_ID;return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n.ErrorClass.ERROR_INIT,r))}return _inherits(t,e),t}(i);t.ButtplugInitException=o;var a=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.SYSTEM_MESSAGE_ID;return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n.ErrorClass.ERROR_DEVICE,r))}return _inherits(t,e),t}(i);t.ButtplugDeviceException=a;var s=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.SYSTEM_MESSAGE_ID;return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n.ErrorClass.ERROR_MSG,r))}return _inherits(t,e),t}(i);t.ButtplugMessageException=s;var u=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.SYSTEM_MESSAGE_ID;return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n.ErrorClass.ERROR_PING,r))}return _inherits(t,e),t}(i);t.ButtplugPingException=u;var c=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.SYSTEM_MESSAGE_ID;return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n.ErrorClass.ERROR_UNKNOWN,r))}return _inherits(t,e),t}(i);t.ButtplugUnknownException=c},AjGN:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SerialProtocolConfiguration=function(){function e(t){_classCallCheck(this,e)}return _createClass(e,[{key:"Matches",value:function(e){return!1}},{key:"Merge",value:function(e){}}]),e}()},AkMy:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExcludeMetadata=function(e,t,r){this.target=e,this.propertyName=t,this.options=r}},AwJw:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f=e.opts.$data&&a&&a.$data;f&&(n+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; "),f||(n+=" var schema"+i+" = validate.schema"+s+";");var d=d||[];d.push(n+="var "+h+" = equal("+l+", schema"+i+"); if (!"+h+") {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var p=n;return n=d.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},CP53:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Decb"),i=r("cSwh"),o=r("PcyV"),a=r("4e8G"),s=r("AkMy"),u=r("bejg");t.Transform=function(e,t){return function(r,n){var o=new u.TransformMetadata(r.constructor,n,e,t);i.defaultMetadataStorage.addTransformMetadata(o)}},t.Type=function(e,t){return function(r,n){var a=Reflect.getMetadata("design:type",r,n),s=new o.TypeMetadata(r.constructor,n,a,e,t);i.defaultMetadataStorage.addTypeMetadata(s)}},t.Expose=function(e){return function(t,r){var n=new a.ExposeMetadata(t instanceof Function?t:t.constructor,r,e||{});i.defaultMetadataStorage.addExposeMetadata(n)}},t.Exclude=function(e){return function(t,r){var n=new s.ExcludeMetadata(t instanceof Function?t:t.constructor,r,e||{});i.defaultMetadataStorage.addExcludeMetadata(n)}},t.TransformClassToPlain=function(e){return function(t,r,i){var o=new n.ClassTransformer,a=i.value;i.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=a.apply(this,t),i=!!n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof n.then;return i?n.then((function(t){return o.classToPlain(t,e)})):o.classToPlain(n,e)}}},t.TransformClassToClass=function(e){return function(t,r,i){var o=new n.ClassTransformer,a=i.value;i.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=a.apply(this,t),i=!!n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof n.then;return i?n.then((function(t){return o.classToClass(t,e)})):o.classToClass(n,e)}}},t.TransformPlainToClass=function(e,t){return function(r,i,o){var a=new n.ClassTransformer,s=o.value;o.value=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=s.apply(this,r),o=!!i&&("object"==typeof i||"function"==typeof i)&&"function"==typeof i.then;return o?i.then((function(r){return a.plainToClass(e,r,t)})):a.plainToClass(e,i,t)}}}},CeqE:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("KMqf"),o=r("hsbB");t.CreateTestClient=function(){return n(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new i.ButtplugClient("Test Client"),(r=new i.ButtplugServer("Test Server")).ClearDeviceManagers(),r.AddDeviceManager(new o.TestDeviceSubtypeManager),(n=new i.ButtplugEmbeddedClientConnector).Server=r,e.next=6,t.Connect(n);case 6:return e.abrupt("return",Promise.resolve(t));case 7:case"end":return e.stop()}}),e)})))}},DHMQ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("VzKg"),i=r("AdGg");t.ButtplugMessageSorter=function(){function e(){_classCallCheck(this,e),this._counter=1,this._waitingMsgs=new Map}return _createClass(e,[{key:"PrepareOutgoingMessage",value:function(e){var t,r;e.Id=this._counter;var n=new Promise((function(e,n){t=e,r=n}));return this._waitingMsgs.set(this._counter,[t,r]),this._counter+=1,n}},{key:"ParseIncomingMessages",value:function(e){var t=[],r=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;if(c.Id!==n.SYSTEM_MESSAGE_ID&&this._waitingMsgs.has(c.Id)){var l=_slicedToArray(this._waitingMsgs.get(c.Id),2),h=l[0],f=l[1];if(c.Type===n.Error){f(i.ButtplugException.FromError(c));continue}h(c)}else t.push(c)}}catch(d){o=!0,a=d}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return t}}]),e}()},Decb:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("zA/M"),i=function(){function e(){}return e.prototype.classToPlain=function(e,t){return new n.TransformOperationExecutor(n.TransformationType.CLASS_TO_PLAIN,t||{}).transform(void 0,e,void 0,void 0,void 0,void 0)},e.prototype.classToPlainFromExist=function(e,t,r){return new n.TransformOperationExecutor(n.TransformationType.CLASS_TO_PLAIN,r||{}).transform(t,e,void 0,void 0,void 0,void 0)},e.prototype.plainToClass=function(e,t,r){return new n.TransformOperationExecutor(n.TransformationType.PLAIN_TO_CLASS,r||{}).transform(void 0,t,e,void 0,void 0,void 0)},e.prototype.plainToClassFromExist=function(e,t,r){return new n.TransformOperationExecutor(n.TransformationType.PLAIN_TO_CLASS,r||{}).transform(e,t,void 0,void 0,void 0,void 0)},e.prototype.classToClass=function(e,t){return new n.TransformOperationExecutor(n.TransformationType.CLASS_TO_CLASS,t||{}).transform(void 0,e,void 0,void 0,void 0,void 0)},e.prototype.classToClassFromExist=function(e,t,r){return new n.TransformOperationExecutor(n.TransformationType.CLASS_TO_CLASS,r||{}).transform(t,e,void 0,void 0,void 0,void 0)},e.prototype.serialize=function(e,t){return JSON.stringify(this.classToPlain(e,t))},e.prototype.deserialize=function(e,t,r){var n=JSON.parse(t);return this.plainToClass(e,n,r)},e.prototype.deserializeArray=function(e,t,r){var n=JSON.parse(t);return this.plainToClass(e,n,r)},e}();t.ClassTransformer=i},Dg32:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","$id":"http://json-schema.org/draft-06/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"examples":{"type":"array","items":{}},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":{},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":{}}')},FUtr:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("+qE3"),o=r("kFR6"),a=r("AdGg");t.ButtplugDeviceProtocol=function(e){function t(e,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).MsgFuncs=new Map,i._logger=o.ButtplugLogger.Logger,i.ParseMessage=function(e){return n(_assertThisInitialized(i),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.MsgFuncs.has(e.Type)){t.next=2;break}throw new a.ButtplugMessageException("".concat(this._name," cannot handle message of type ").concat(e.Type.name),e.Id);case 2:return t.abrupt("return",this.MsgFuncs.get(e.Type)(e));case 3:case"end":return t.stop()}}),t,this)})))},i._name=e,i._device=r,i}return _inherits(t,e),_createClass(t,[{key:"Initialize",value:function(){return n(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})))}},{key:"Name",get:function(){return this._name}},{key:"AllowedMessageTypes",get:function(){return Array.from(this.MsgFuncs.keys())}}]),t}(i.EventEmitter)},FsXc:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=r("FUtr");t.Maxpro=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Maxpro ".concat(e.Name),e))).HandleVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Speeds.length){t.next=2;break}throw new o.ButtplugDeviceException("Maxpro devices require VibrateCmd to have 1 speed command, "+"".concat(e.Speeds.length," sent."),e.Id);case 2:return t.next=4,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},r.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Math.floor(100*e.Speed),n=Buffer.from([85,4,7,255,255,63,r,95,r,0]),o=255&n.reduce((function(e,t){return e+t})),n[9]=o,t.next=4,this._device.WriteValue(n);case 4:return t.abrupt("return",new i.Ok(e.Id));case 5:case"end":return t.stop()}}),t,this)})))},r.MsgFuncs.set(i.StopDeviceCmd,r.HandleStopDeviceCmd),r.MsgFuncs.set(i.SingleMotorVibrateCmd,r.HandleSingleMotorVibrateCmd),r.MsgFuncs.set(i.VibrateCmd,r.HandleVibrateCmd),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}]),t}(a.ButtplugDeviceProtocol)},FzgR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("zA/M"),i=function(){function e(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return e.prototype.addTypeMetadata=function(e){this._typeMetadatas.has(e.target)||this._typeMetadatas.set(e.target,new Map),this._typeMetadatas.get(e.target).set(e.propertyName,e)},e.prototype.addTransformMetadata=function(e){this._transformMetadatas.has(e.target)||this._transformMetadatas.set(e.target,new Map),this._transformMetadatas.get(e.target).has(e.propertyName)||this._transformMetadatas.get(e.target).set(e.propertyName,[]),this._transformMetadatas.get(e.target).get(e.propertyName).push(e)},e.prototype.addExposeMetadata=function(e){this._exposeMetadatas.has(e.target)||this._exposeMetadatas.set(e.target,new Map),this._exposeMetadatas.get(e.target).set(e.propertyName,e)},e.prototype.addExcludeMetadata=function(e){this._excludeMetadatas.has(e.target)||this._excludeMetadatas.set(e.target,new Map),this._excludeMetadatas.get(e.target).set(e.propertyName,e)},e.prototype.findTransformMetadatas=function(e,t,r){return this.findMetadatas(this._transformMetadatas,e,t).filter((function(e){return!e.options||!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?r===n.TransformationType.CLASS_TO_CLASS||r===n.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||r===n.TransformationType.CLASS_TO_PLAIN)}))},e.prototype.findExcludeMetadata=function(e,t){return this.findMetadata(this._excludeMetadatas,e,t)},e.prototype.findExposeMetadata=function(e,t){return this.findMetadata(this._exposeMetadatas,e,t)},e.prototype.findExposeMetadataByCustomName=function(e,t){return this.getExposedMetadatas(e).find((function(e){return e.options&&e.options.name===t}))},e.prototype.findTypeMetadata=function(e,t){return this.findMetadata(this._typeMetadatas,e,t)},e.prototype.getStrategy=function(e){var t=this._excludeMetadatas.get(e),r=t&&t.get(void 0),n=this._exposeMetadatas.get(e),i=n&&n.get(void 0);return r&&i||!r&&!i?"none":r?"excludeAll":"exposeAll"},e.prototype.getExposedMetadatas=function(e){return this.getMetadata(this._exposeMetadatas,e)},e.prototype.getExcludedMetadatas=function(e){return this.getMetadata(this._excludeMetadatas,e)},e.prototype.getExposedProperties=function(e,t){return this.getExposedMetadatas(e).filter((function(e){return!e.options||!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?t===n.TransformationType.CLASS_TO_CLASS||t===n.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||t===n.TransformationType.CLASS_TO_PLAIN)})).map((function(e){return e.propertyName}))},e.prototype.getExcludedProperties=function(e,t){return this.getExcludedMetadatas(e).filter((function(e){return!e.options||!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?t===n.TransformationType.CLASS_TO_CLASS||t===n.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||t===n.TransformationType.CLASS_TO_PLAIN)})).map((function(e){return e.propertyName}))},e.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},e.prototype.getMetadata=function(e,t){var r,n=e.get(t);n&&(r=Array.from(n.values()).filter((function(e){return void 0!==e.propertyName})));for(var i=[],o=0,a=this.getAncestors(t);o<a.length;o++){var s=e.get(a[o]);if(s){var u=Array.from(s.values()).filter((function(e){return void 0!==e.propertyName}));i.push.apply(i,u)}}return i.concat(r||[])},e.prototype.findMetadata=function(e,t,r){var n=e.get(t);if(n){var i=n.get(r);if(i)return i}for(var o=0,a=this.getAncestors(t);o<a.length;o++){var s=e.get(a[o]);if(s){var u=s.get(r);if(u)return u}}},e.prototype.findMetadatas=function(e,t,r){var n,i=e.get(t);i&&(n=i.get(r));for(var o=[],a=0,s=this.getAncestors(t);a<s.length;a++){var u=e.get(s[a]);u&&u.has(r)&&o.push.apply(o,u.get(r))}return o.reverse().concat((n||[]).reverse())},e.prototype.getAncestors=function(e){if(!e)return[];if(!this._ancestorsMap.has(e)){for(var t=[],r=Object.getPrototypeOf(e.prototype.constructor);void 0!==r.prototype;r=Object.getPrototypeOf(r.prototype.constructor))t.push(r);this._ancestorsMap.set(e,t)}return this._ancestorsMap.get(e)},e}();t.MetadataStorage=i},HiAz:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=r("FUtr"),s=r("s26e"),u=r("fCiX");t.FleshlightLaunch=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Fleshlight Launch",e)))._lastPosition=0,r.Initialize=function(){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.Debug("Calling Fleshlight Launch initialize on ".concat(this._device.Name)),e.next=3,this._device.WriteValue(Buffer.from([0]),new u.ButtplugDeviceWriteOptions({Endpoint:s.Endpoints.Firmware,WriteWithResponse:!0}));case 3:case"end":return e.stop()}}),e,this)})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleFleshlightLaunchFW12Cmd(new i.FleshlightLaunchFW12Cmd(0,0,e.DeviceIndex,e.Id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},r.HandleFleshlightLaunchFW12Cmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._lastPosition=e.Position,t.next=3,this._device.WriteValue(Buffer.from([e.Position,e.Speed]));case 3:return t.abrupt("return",new i.Ok(e.Id));case 4:case"end":return t.stop()}}),t,this)})))},r.HandleLinearCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Vectors.length){t.next=2;break}throw new o.ButtplugDeviceException("LinearCmd requires 1 vector for this device.",e.Id);case 2:return r=e.Vectors[0],n=100*r.Position,a=Math.abs(n-this._lastPosition),s=Math.floor(25e3*Math.pow(90*r.Duration/a,-1.05)),s=Math.min(Math.max(s,0),95),u=Math.floor(n/99*90+4.5),t.next=8,this.HandleFleshlightLaunchFW12Cmd(new i.FleshlightLaunchFW12Cmd(s,u,e.DeviceIndex,e.Id));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})))},r.MsgFuncs.set(i.StopDeviceCmd,r.HandleStopDeviceCmd),r.MsgFuncs.set(i.FleshlightLaunchFW12Cmd,r.HandleFleshlightLaunchFW12Cmd),r.MsgFuncs.set(i.LinearCmd,r.HandleLinearCmd),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return{FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{},LinearCmd:{FeatureCount:1}}}}]),t}(a.ButtplugDeviceProtocol)},JNjr:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=r("FUtr"),s=r("q+Aq"),u=r("s26e");t.Youou=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Youou ".concat(e.Name),e)))._packetId=0,r.Initialize=function(){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.Debug("Calling Youou initialize on ".concat(this._device.Name)),e.next=3,this._device.ReadValue(new s.ButtplugDeviceReadOptions({Endpoint:u.Endpoints.Tx}));case 3:case"end":return e.stop()}}),e,this)})))},r.HandleVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Speeds.length){t.next=2;break}throw new o.ButtplugDeviceException("Youou devices require VibrateCmd to have 1 speed commands, "+"".concat(e.Speeds.length," sent."),e.Id);case 2:return t.next=4,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},r.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,o,a,s,u,c,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=Buffer.from([170,85,this._packetId,2,3,1,247*e.Speed,e.Speed>0?1:0]),n=0,o=!0,a=!1,s=void 0,t.prev=5,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)l=c.value,n^=l;t.next=13;break;case 9:t.prev=9,t.t0=t.catch(5),a=!0,s=t.t0;case 13:t.prev=13,t.prev=14,o||null==u.return||u.return();case 16:if(t.prev=16,!a){t.next=19;break}throw s;case 19:return t.finish(16);case 20:return t.finish(13);case 21:return h=Buffer.concat([r,Buffer.from([n,255,0,0,0,0,0,0,0])]),this._packetId+=1,this._packetId>255&&(this._packetId=0),t.next=26,this._device.WriteValue(h);case 26:return t.abrupt("return",new i.Ok(e.Id));case 27:case"end":return t.stop()}}),t,this,[[5,9,13,21],[14,,16,20]])})))},r.MsgFuncs.set(i.StopDeviceCmd,r.HandleStopDeviceCmd),r.MsgFuncs.set(i.SingleMotorVibrateCmd,r.HandleSingleMotorVibrateCmd),r.MsgFuncs.set(i.VibrateCmd,r.HandleVibrateCmd),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}]),t}(a.ButtplugDeviceProtocol)},JjHJ:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=function(){function e(t,r,n,i){_classCallCheck(this,e),this._index=t,this._name=r,this._sendClosure=i,this.allowedMsgs=new Map;for(var o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];this.allowedMsgs.set(s,n[s])}}return _createClass(e,[{key:"CheckAllowedMessageType",value:function(e){if(-1===this.AllowedMessages.indexOf(e))throw new o.ButtplugDeviceException("Message ".concat(e," does not exist on device ").concat(this._name))}},{key:"MessageAttributes",value:function(e){return this.CheckAllowedMessageType(e),this.allowedMsgs.get(e)}},{key:"SendMessageAsync",value:function(e){return n(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._sendClosure(this,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"SendVibrateCmd",value:function(e){return n(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.CheckAllowedMessageType(i.VibrateCmd.name),"number"!=typeof e){t.next=5;break}n=this.MessageAttributes(i.VibrateCmd.name).FeatureCount,r=i.VibrateCmd.Create(this._index,new Array(n).fill(e)),t.next=8;break;case 5:if(Array.isArray(e)){t.next=7;break}throw new o.ButtplugDeviceException("SendVibrateCmd can only take numbers or arrays of numbers.");case 7:r=i.VibrateCmd.Create(this._index,e),this.CheckGenericSubcommandList(i.SpeedSubcommand.name,r.Speeds,this.MessageAttributes(i.VibrateCmd.name).FeatureCount);case 8:return t.next=10,this.SendMessageAsync(r);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"SendRotateCmd",value:function(e,t){return n(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.CheckAllowedMessageType(i.RotateCmd.name),"number"!=typeof e){r.next=5;break}a=this.MessageAttributes(i.RotateCmd.name).FeatureCount,n=i.RotateCmd.Create(this._index,new Array(a).fill([e,t])),r.next=8;break;case 5:if(Array.isArray(e)){r.next=7;break}throw new o.ButtplugDeviceException("SendRotateCmd can only take a number and boolean, or an array of number/boolean tuples");case 7:n=i.RotateCmd.Create(this._index,e),this.CheckGenericSubcommandList(i.SpeedSubcommand.name,n.Rotations,this.MessageAttributes(i.RotateCmd.name).FeatureCount);case 8:return r.next=10,this.SendMessageAsync(n);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"SendLinearCmd",value:function(e,t){return n(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.CheckAllowedMessageType(i.LinearCmd.name),"number"!=typeof e){r.next=5;break}a=this.MessageAttributes(i.LinearCmd.name).FeatureCount,n=i.LinearCmd.Create(this._index,new Array(a).fill([e,t])),r.next=8;break;case 5:if(Array.isArray(e)){r.next=7;break}throw new o.ButtplugDeviceException("SendLinearCmd can only take a number and number, or an array of number/number tuples");case 7:n=i.LinearCmd.Create(this._index,e),this.CheckGenericSubcommandList(i.SpeedSubcommand.name,n.Vectors,this.MessageAttributes(i.LinearCmd.name).FeatureCount);case 8:return r.next=10,this.SendMessageAsync(n);case 10:case"end":return r.stop()}}),r,this)})))}},{key:"SendFleshlightLaunchFW12Cmd",value:function(e,t){return n(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.CheckAllowedMessageType(i.FleshlightLaunchFW12Cmd.name),r.next=3,this.SendMessageAsync(new i.FleshlightLaunchFW12Cmd(e,t,this._index));case 3:case"end":return r.stop()}}),r,this)})))}},{key:"SendLovenseCmd",value:function(e){return n(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.CheckAllowedMessageType(i.LovenseCmd.name),t.next=3,this.SendMessageAsync(new i.LovenseCmd(e,this._index));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"SendVorzeA10CycloneCmd",value:function(e,t){return n(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.CheckAllowedMessageType(i.VorzeA10CycloneCmd.name),r.next=3,this.SendMessageAsync(new i.VorzeA10CycloneCmd(e,t,this._index));case 3:case"end":return r.stop()}}),r,this)})))}},{key:"SendStopDeviceCmd",value:function(){return n(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.CheckAllowedMessageType(i.StopDeviceCmd.name),e.next=3,this.SendMessageAsync(new i.StopDeviceCmd(this._index));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"SendKiirooCmd",value:function(e){return n(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.CheckAllowedMessageType(i.KiirooCmd.name),t.next=3,this.SendMessageAsync(new i.KiirooCmd(e,this._index));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"CheckGenericSubcommandList",value:function(e,t,r){if(0===t.length||t.length>r){if(1===r)throw new o.ButtplugDeviceException("".concat(e," requires 1 subcommand for this device, ").concat(t.length," present."));throw new o.ButtplugDeviceException("".concat(e," requires between 1 and ").concat(r," subcommands for this device, ").concat(t.length," present."))}var n=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value;if(c.Index>=r)throw new o.ButtplugDeviceException("Index ".concat(c.Index," is out of bounds for ").concat(e," for this device."))}}catch(l){i=!0,a=l}finally{try{n||null==u.return||u.return()}finally{if(i)throw a}}}},{key:"Name",get:function(){return this._name}},{key:"Index",get:function(){return this._index}},{key:"AllowedMessages",get:function(){return Array.from(this.allowedMsgs.keys())}}],[{key:"fromMsg",value:function(t,r){return new e(t.DeviceIndex,t.DeviceName,t.DeviceMessages,r)}}]),e}();t.ButtplugClientDevice=a},KMqf:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("U4c0")),n(r("JjHJ")),n(r("2f+d")),n(r("Wd91")),n(r("WJxe")),n(r("DHMQ")),n(r("VzKg")),n(r("ytkS")),n(r("kFR6")),n(r("AdGg")),n(r("36dr")),n(r("o4Wz")),n(r("FUtr")),n(r("q+Aq")),n(r("fCiX")),n(r("s26e")),n(r("ZD7F")),n(r("ANNU")),n(r("AjGN")),n(r("4Kjc")),n(r("aB/X")),n(r("bTiy")),n(r("/oyJ")),n(r("hsbB")),n(r("CeqE"))},"LHY/":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=r("FUtr"),s=function e(){_classCallCheck(this,e),this.Brand="MagicMotion",this.Name="Smart Mini Vibe",this.VibeCount=1,this.VibeOrder=[0,1,2]},u=function(e){function t(e){var r;_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Kiiroo ".concat(e.Name),e)))._devInfo=new s,r._hasRunCommand=!1,r._vibratorSpeed=[0,0,0],r.HandleVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,s,u,c,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.Speeds.length<1||e.Speeds.length>this._devInfo.VibeCount)){t.next=2;break}throw new o.ButtplugDeviceException("Kiiroo Gen 2 Vibrator devices require VibrateCmd at most "+"".concat(this._devInfo.VibeCount," speed commands, ").concat(e.Speeds.length," sent."),e.Id);case 2:for(r=!1,n=!0,a=!1,s=void 0,t.prev=6,u=e.Speeds[Symbol.iterator]();!(n=(c=u.next()).done);n=!0)l=c.value,Math.abs(l.Speed-this._vibratorSpeed[l.Index])>.001&&(r=!0,this._vibratorSpeed[l.Index]=l.Speed);t.next=14;break;case 10:t.prev=10,t.t0=t.catch(6),a=!0,s=t.t0;case 14:t.prev=14,t.prev=15,n||null==u.return||u.return();case 17:if(t.prev=17,!a){t.next=20;break}throw s;case 20:return t.finish(17);case 21:return t.finish(14);case 22:if(r||!this._hasRunCommand){t.next=24;break}return t.abrupt("return",new i.Ok(e.Id));case 24:return h=Buffer.from([100*this._vibratorSpeed[this._devInfo.VibeOrder[0]],100*this._vibratorSpeed[this._devInfo.VibeOrder[0]],100*this._vibratorSpeed[this._devInfo.VibeOrder[0]]]),this._hasRunCommand=!0,t.next=28,this._device.WriteValue(h);case 28:return t.abrupt("return",new i.Ok(e.Id));case 29:case"end":return t.stop()}}),t,this,[[6,10,14,22],[15,,17,21]])})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},r.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],n=0;n<this._devInfo.VibeCount;n++)r.push(new i.SpeedSubcommand(n,e.Speed));return t.next=4,this.HandleVibrateCmd(new i.VibrateCmd(r,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))};var a=t.DevInfos.get(e.Name);return void 0!==a&&(r._devInfo=a,r._name="".concat(r._devInfo.Brand," ").concat(e.Name)),r.MsgFuncs.set(i.StopDeviceCmd,r.HandleStopDeviceCmd),r.MsgFuncs.set(i.SingleMotorVibrateCmd,r.HandleSingleMotorVibrateCmd),r.MsgFuncs.set(i.VibrateCmd,r.HandleVibrateCmd),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}]),t}(a.ButtplugDeviceProtocol);u.DevInfos=new Map([["Pearl2",Object.assign(new s,{Brand:"Kiiroo",VibeCount:1,VibeOrder:[0,1,2]})],["Fuse",Object.assign(new s,{Brand:"OhMiBod",VibeCount:2,VibeOrder:[1,0,2]})],["Virtual Blowbot",Object.assign(new s,{Brand:"PornHub",VibeCount:3,VibeOrder:[0,1,2]})],["Titan",Object.assign(new s,{Brand:"Kiiroo",VibeCount:3,VibeOrder:[0,1,2]})]]),t.KiirooGen2Vibe=u},NUpL:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("kFR6"),o=r("AdGg"),a=r("+qE3"),s=r("ZD7F"),u=r("ANNU"),c=r("fouG"),l=r("36dr");t.WebBluetoothDeviceManager=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).OpenDevice=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,i,o,a,h,f,d,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return");case 2:if(r=s.DeviceConfigurationManager.Manager,n=new u.BluetoothLEProtocolConfiguration([e.name]),void 0!==(i=r.Find(n))){t.next=5;break}return t.abrupt("return");case 5:return o=_slicedToArray(i,2),a=o[0],h=o[1],f=new c.WebBluetoothDevice(a,e),t.next=8,f.Connect();case 8:return d=new h(f),p=new l.ButtplugDevice(d,f),t.next=11,p.Initialize();case 11:this.emit("deviceadded",p);case 12:case"end":return t.stop()}}),t,this)})))},r.SetLogger(void 0!==e?e:i.ButtplugLogger.Logger),r}return _inherits(t,e),_createClass(t,[{key:"SetLogger",value:function(e){this._logger=e}},{key:"StartScanning",value:function(){return n(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n,i,a,c,l,h,f,d,p,v,m,g,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={filters:new Array,optionalServices:new Array},r=s.DeviceConfigurationManager.Manager.GetAllConfigsOfType(u.BluetoothLEProtocolConfiguration),n=!0,i=!1,a=void 0,e.prev=4,c=r[Symbol.iterator]();case 6:if(n=(l=c.next()).done){e.next=31;break}for(h=l.value,f=!0,d=!1,p=void 0,e.prev=11,v=h.Names[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){g=m.value;try{g.endsWith("*")&&t.filters.push({namePrefix:g.substr(0,g.length-1)}),t.filters.push({name:g})}catch(_){console.log(_),console.log(h)}}e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),d=!0,p=e.t0;case 19:e.prev=19,e.prev=20,f||null==v.return||v.return();case 22:if(e.prev=22,!d){e.next=25;break}throw p;case 25:return e.finish(22);case 26:return e.finish(19);case 27:t.optionalServices=[].concat(_toConsumableArray(t.optionalServices),_toConsumableArray(h.Services.keys()));case 28:n=!0,e.next=6;break;case 31:e.next=37;break;case 33:e.prev=33,e.t1=e.catch(4),i=!0,a=e.t1;case 37:e.prev=37,e.prev=38,n||null==c.return||c.return();case 40:if(e.prev=40,!i){e.next=43;break}throw a;case 43:return e.finish(40);case 44:return e.finish(37);case 45:return this._logger.Trace("Bluetooth filter set: "+JSON.stringify(t)),e.prev=46,e.next=49,navigator.bluetooth.requestDevice(t);case 49:y=e.sent,e.next=57;break;case 52:if(e.prev=52,e.t2=e.catch(46),this.emit("scanningfinished"),-1===e.t2.message.indexOf("User cancelled")){e.next=56;break}return e.abrupt("return");case 56:throw o.ButtplugException.LogAndError(o.ButtplugDeviceException,this._logger,"Bluetooth scanning interrupted. Either user cancelled out of dialog, or bluetooth radio is not available. Exception: "+e.t2);case 57:return e.prev=57,e.next=60,this.OpenDevice(y);case 60:e.next=65;break;case 62:throw e.prev=62,e.t3=e.catch(57),this.emit("scanningfinished"),o.ButtplugException.LogAndError(o.ButtplugDeviceException,this._logger,"Cannot open device ".concat(y.name,": ").concat(e.t3));case 65:this.emit("scanningfinished");case 66:case"end":return e.stop()}}),e,this,[[4,33,37,45],[11,15,19,27],[20,,22,26],[38,,40,44],[46,52],[57,62]])})))}},{key:"StopScanning",value:function(){}},{key:"IsScanning",get:function(){return!1}}]),t}(a.EventEmitter)},PcyV:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeMetadata=function(e,t,r,n,i){this.target=e,this.propertyName=t,this.reflectedType=r,this.typeFunction=n,this.options=i}},"QYf/":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=r("FUtr");t.KiirooGen21=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Kiiroo Onyx 2.1",e)))._lastPosition=0,r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleFleshlightLaunchFW12Cmd(new i.FleshlightLaunchFW12Cmd(0,0,e.DeviceIndex,e.Id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},r.HandleFleshlightLaunchFW12Cmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._lastPosition=e.Position,t.next=3,this._device.WriteValue(Buffer.from([3,0,e.Speed,e.Position]));case 3:return t.abrupt("return",new i.Ok(e.Id));case 4:case"end":return t.stop()}}),t,this)})))},r.HandleLinearCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Vectors.length){t.next=2;break}throw new o.ButtplugDeviceException("LinearCmd requires 1 vector for this device.",e.Id);case 2:return r=e.Vectors[0],n=100*r.Position,a=Math.abs(n-this._lastPosition),s=Math.floor(25e3*Math.pow(90*r.Duration/a,-1.05)),s=Math.min(Math.max(s,0),95),u=Math.floor(n/99*99+0),t.next=8,this.HandleFleshlightLaunchFW12Cmd(new i.FleshlightLaunchFW12Cmd(s,u,e.DeviceIndex,e.Id));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})))},r.MsgFuncs.set(i.StopDeviceCmd,r.HandleStopDeviceCmd),r.MsgFuncs.set(i.FleshlightLaunchFW12Cmd,r.HandleFleshlightLaunchFW12Cmd),r.MsgFuncs.set(i.LinearCmd,r.HandleLinearCmd),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return{FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{},LinearCmd:{FeatureCount:1}}}}]),t}(a.ButtplugDeviceProtocol)},RRu4:function(e){e.exports=JSON.parse('{"connection-info-types":["btle","serial","usb","hid"],"protocols":{"lovense":{"btle":{"names":["LVS-*"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff2-0000-1000-8000-00805f9b34fb","rx":"0000fff1-0000-1000-8000-00805f9b34fb"},"6e400001-b5a3-f393-e0a9-e50e24dcca9e":{"tx":"6e400002-b5a3-f393-e0a9-e50e24dcca9e","rx":"6e400003-b5a3-f393-e0a9-e50e24dcca9e"},"50300001-0024-4bd4-bbd5-a6920e4c5653":{"tx":"50300002-0024-4bd4-bbd5-a6920e4c5653","rx":"50300003-0024-4bd4-bbd5-a6920e4c5653"},"57300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"57300002-0023-4bd4-bbd5-a6920e4c5653","rx":"57300003-0023-4bd4-bbd5-a6920e4c5653"},"5a300001-0024-4bd4-bbd5-a6920e4c5653":{"tx":"5a300002-0024-4bd4-bbd5-a6920e4c5653","rx":"5a300003-0024-4bd4-bbd5-a6920e4c5653"},"50300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"50300002-0023-4bd4-bbd5-a6920e4c5653","rx":"50300003-0023-4bd4-bbd5-a6920e4c5653"},"53300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"53300002-0023-4bd4-bbd5-a6920e4c5653","rx":"53300003-0023-4bd4-bbd5-a6920e4c5653"},"5a300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"5a300002-0023-4bd4-bbd5-a6920e4c5653","rx":"5a300003-0023-4bd4-bbd5-a6920e4c5653"},"4f300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"4f300002-0023-4bd4-bbd5-a6920e4c5653","rx":"4f300003-0023-4bd4-bbd5-a6920e4c5653"},"42300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"42300002-0023-4bd4-bbd5-a6920e4c5653","rx":"42300003-0023-4bd4-bbd5-a6920e4c5653"}}}},"xinput":null,"libo":{"btle":{"names":["PiPiJing","XiaoLu","LuXiaoHan","SuoYinQiu","BaiHu","MonsterPub","Gugudai","ShaYu","Yuyi","LuWuShuang","LiBo","QingTing","Shuidi","Huohu"],"services":{"00006000-0000-1000-8000-00805f9b34fb":{"tx":"00006001-0000-1000-8000-00805f9b34fb","txmode":"00006002-0000-1000-8000-00805f9b34fb"}}}},"magic-motion":{"btle":{"names":["Smart Mini Vibe*","Flamingo","Eidolon","Smart Bean","Magic Cell","Magic Wand","Fugu","Krush","Lipstick","Sword","Curve"],"services":{"78667579-7b48-43db-b8c5-7928a6b0a335":{"tx":"78667579-a914-49a4-8333-aa3c0cd8fedc"}}}},"mysteryvibe":{"btle":{"names":["MV Crescendo","MV Tenuto*"],"services":{"f0006900-110c-478b-b74b-6f403b364a9c":{"txmode":"f0006901-110c-478b-b74b-6f403b364a9c","txvibrate":"f0006903-110c-478b-b74b-6f403b364a9c"}}}},"picobong":{"btle":{"names":["Blow hole","Picobong Male Toy","Diver","Picobong Egg","Life guard","Picobong Ring","Surfer","Picobong Butt Plug","Egg driver","Surfer_plug"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"vibratissimo":{"btle":{"names":["Vibratissimo"],"services":{"00001523-1212-efde-1523-785feabcd123":{"txmode":"00001524-1212-efde-1523-785feabcd123","txvibrate":"00001526-1212-efde-1523-785feabcd123","rx":"00001527-1212-efde-1523-785feabcd123"}}}},"wevibe":{"btle":{"names":["Cougar","4 Plus","4_Plus","4plus","Bloom","classic","Classic","Ditto","Gala","Jive","Melt","Moxie","Nova","NOVAV2","Pivot","Rey","We-Vibe Rocketman","Rave","Reina","imassager","Interactive Massager","03","Sync","Vector","Verge","Wish"],"services":{"f000bb03-0451-4000-b000-000000000000":{"tx":"f000c000-0451-4000-b000-000000000000","rx":"f000b000-0451-4000-b000-000000000000"}}}},"youcups":{"btle":{"names":["Youcups"],"services":{"0000fee9-0000-1000-8000-00805f9b34fb":{"tx":"d44bc439-abfd-45a2-b575-925416129600"}}}},"cueme":{"btle":{"names":["FUNCODE_*"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v2-vibrator":{"btle":{"names":["Pearl2","Fuse","Virtual Blowbot","Titan"],"services":{"88f82580-0000-01e6-aace-0002a5d5c51b":{"tx":"88f82581-0000-01e6-aace-0002a5d5c51b","rxtouch":"88f82582-0000-01e6-aace-0002a5d5c51b","rxaccel":"88f82584-0000-01e6-aace-0002a5d5c51b"}}}},"kiiroo-v21":{"btle":{"names":["Onyx2.1"],"services":{"00001900-0000-1000-8000-00805f9b34fb":{"whitelist":"00001901-0000-1000-8000-00805f9b34fb","tx":"00001902-0000-1000-8000-00805f9b34fb","rx":"00001903-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v21-vibrator":{"btle":{"names":["Cliona"],"services":{"00001900-0000-1000-8000-00805f9b34fb":{"whitelist":"00001901-0000-1000-8000-00805f9b34fb","tx":"00001902-0000-1000-8000-00805f9b34fb","rx":"00001903-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v2":{"btle":{"names":["Launch","Onyx2"],"services":{"88f80580-0000-01e6-aace-0002a5d5c51b":{"tx":"88f80581-0000-01e6-aace-0002a5d5c51b","rx":"88f80582-0000-01e6-aace-0002a5d5c51b","firmware":"88f80583-0000-01e6-aace-0002a5d5c51b"},"f60402a6-0293-4bdb-9f20-6758133f7090":{"tx":"02962ac9-e86f-4094-989d-231d69995fc2","rx":"d44d0393-0731-43b3-a373-8fc70b1f3323","firmware":"c7b7a04b-2cc4-40ff-8b10-5d531d1161db"}}}},"erostek-et312":{"serial":{"baud-rate":19200,"data-bits":8,"parity":"N","stop-bits":1}},"vorze-cyclone-x":{"hid":{"vendor-id":1155,"product-id":22352}},"rez-trancevibrator":{"usb":{"vendor-id":2889,"product-id":1615}},"kiiroo-v1":{"btle":{"names":["ONYX","PEARL"],"services":{"49535343-fe7d-4ae5-8fa9-9fafd205e455":{"rx":"49535343-1e4d-4bd9-ba61-23c647249616","tx":"49535343-8841-43f4-a8d4-ecbe34729bb3","command":"49535343-aca3-481c-91ec-d85e28a60318","cmd2":"49535343-6daa-4d02-abf6-19569aca69fe"}}}},"vorze-sa":{"btle":{"names":["CycSA","Bach smart","UFOSA"],"services":{"40ee1111-63ec-4b7f-8ce7-712efd55b90e":{"tx":"40ee2222-63ec-4b7f-8ce7-712efd55b90e"}}}},"youou":{"btle":{"names":["VX001_*"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff6-0000-1000-8000-00805f9b34fb"}}}},"realtouch":{"hid":{"vendor-id":8020,"product-id":1}},"prettylove":{"btle":{"names":["Aogu BLE *"],"services":{"0000ffe5-0000-1000-8000-00805f9b34fb":{"tx":"0000ffe9-0000-1000-8000-00805f9b34fb","rx":"0000ffe2-0000-1000-8000-00805f9b34fb"}}}},"svakom":{"btle":{"names":["Aogu SCB"],"services":{"0000ffe0-0000-1000-8000-00805f9b34fb":{"tx":"0000ffe1-0000-1000-8000-00805f9b34fb","rx":"0000ffe2-0000-1000-8000-00805f9b34fb"}}}},"realov":{"btle":{"names":["REALOV_VIBE"],"services":{"0000ffe0-0000-1000-8000-00805f9b34fb":{"tx":"0000ffe1-0000-1000-8000-00805f9b34fb"}}}},"motorbunny":{"btle":{"names":["MB Controller"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff6-0000-1000-8000-00805f9b34fb"}}}},"zalo":{"btle":{"names":["ZALO-Queen"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"sayberx":{"btle":{"names":["SayberX"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff6-0000-1000-8000-00805f9b34fb"}}}},"muse":{"btle":{"names":["WB-ZDB-WST","WB-TDD"],"services":{"0000aaa0-0000-1000-8000-00805f9b34fb":{"tx":"0000aaa1-0000-1000-8000-00805f9b34fb"}}}},"lelo-f1s":{"btle":{"names":["F1s"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"aneros":{"btle":{"names":["Massage Demo"],"services":{"0000ff00-0000-1000-8000-00805f9b34fb":{"tx":"0000ff01-0000-1000-8000-00805f9b34fb"}}}},"lovehoney-desire":{"btle":{"names":["PROSTATE VIBE","KNICKER VIBE"],"services":{"0000ff00-0000-1000-8000-00805f9b34fb":{"tx":"0000ff01-0000-1000-8000-00805f9b34fb"}}}},"twerkingbutt":{"btle":{"names":["BODIKANG","Twerking Butt","TwerkingButt"],"services":{"00000a60-0000-1000-8000-00805f9b34fb":{"tx":"00000a66-0000-1000-8000-00805f9b34fb","rx":"00000a67-0000-1000-8000-00805f9b34fb"}}}}}}')},RsDv:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},TbEC:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e),p="";d.level++;var v="valid"+d.level,m=d.baseId,g="prevValid"+i,y="passingSchemas"+i;n+="var "+f+" = errors , "+g+" = false , "+h+" = false , "+y+" = null; ";var _=e.compositeRule;e.compositeRule=d.compositeRule=!0;var C=a;if(C)for(var b,w=-1,k=C.length-1;w<k;)b=C[w+=1],(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))?(d.schema=b,d.schemaPath=s+"["+w+"]",d.errSchemaPath=u+"/"+w,n+="  "+e.validate(d)+" ",d.baseId=m):n+=" var "+v+" = true; ",w&&(n+=" if ("+v+" && "+g+") { "+h+" = false; "+y+" = ["+y+", "+w+"]; } else { ",p+="}"),n+=" if ("+v+") { "+h+" = "+g+" = true; "+y+" = "+w+"; }";return e.compositeRule=d.compositeRule=_,n+=p+"if (!"+h+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(n+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),n+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},ThTW:function(e,t,r){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){var n=t("[0-9]","[A-Fa-f]"),i=r(r("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+r("%[89A-Fa-f]"+n+"%"+n+n)+"|"+r("%"+n+n)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=t("[\\:\\/\\?\\#\\[\\]\\@]",o),s=e?"[\\uE000-\\uF8FF]":"[]",u=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),l=r(r(i+"|"+t(u,o,"[\\:]"))+"*"),h=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),f=r(h+"\\."+h+"\\."+h+"\\."+h),d=r(n+"{1,4}"),p=r(r(d+"\\:"+d)+"|"+f),v=r(r(d+"\\:")+"{6}"+p),m=r("\\:\\:"+r(d+"\\:")+"{5}"+p),g=r(r(d)+"?\\:\\:"+r(d+"\\:")+"{4}"+p),y=r(r(r(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+r(d+"\\:")+"{3}"+p),_=r(r(r(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+r(d+"\\:")+"{2}"+p),C=r(r(r(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+p),b=r(r(r(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+p),w=r(r(r(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),k=r(r(r(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),S=r([v,m,g,y,_,C,b,w,k].join("|")),x=r(r(u+"|"+i)+"+"),E=(r(S+"\\%25"+x),r(S+r("\\%25|\\%(?!"+n+"{2})")+x)),P=r("[vV]"+n+"+\\."+t(u,o,"[\\:]")+"+"),R=r("\\["+r(E+"|"+S+"|"+P)+"\\]"),I=r(r(i+"|"+t(u,o))+"*"),O=r(R+"|"+f+"(?!"+I+")|"+I),M=r("[0-9]*"),D=r(r(l+"@")+"?"+O+r("\\:"+M)+"?"),T=r(i+"|"+t(u,o,"[\\:\\@]")),A=r(T+"*"),V=r(T+"+"),L=r(r(i+"|"+t(u,o,"[\\@]"))+"+"),F=r(r("\\/"+A)+"*"),j=r("\\/"+r(V+F)+"?"),N=r(L+F),U=r(V+F),B="(?!"+T+")",H=(r(F+"|"+j+"|"+N+"|"+U+"|"+B),r(r(T+"|"+t("[\\/\\?]",s))+"*")),z=r(r(T+"|[\\/\\?]")+"*"),$=r(r("\\/\\/"+D+F)+"|"+j+"|"+U+"|"+B),q=r(c+"\\:"+$+r("\\?"+H)+"?"+r("\\#"+z)+"?"),W=r(r("\\/\\/"+D+F)+"|"+j+"|"+N+"|"+B),G=r(W+r("\\?"+H)+"?"+r("\\#"+z)+"?");return r(q+"|"+G),r(c+"\\:"+$+r("\\?"+H)+"?"),r(r("\\/\\/("+r("("+l+")@")+"?("+O+")"+r("\\:("+M+")")+"?)")+"?("+F+"|"+j+"|"+U+"|"+B+")"),r("\\?("+H+")"),r("\\#("+z+")"),r(r("\\/\\/("+r("("+l+")@")+"?("+O+")"+r("\\:("+M+")")+"?)")+"?("+F+"|"+j+"|"+N+"|"+B+")"),r("\\?("+H+")"),r("\\#("+z+")"),r(r("\\/\\/("+r("("+l+")@")+"?("+O+")"+r("\\:("+M+")")+"?)")+"?("+F+"|"+j+"|"+U+"|"+B+")"),r("\\?("+H+")"),r("\\#("+z+")"),r("("+l+")@"),r("\\:("+M+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,o),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,o),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,o),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,o),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,o,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,o),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,a),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+r(r("\\%25|\\%(?!"+n+"{2})")+"("+x+")")+"?\\]?$")}}var a=o(!1),s=o(!0),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(u){i=!0,o=u}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=/^xn--/,h=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,v=String.fromCharCode;function m(e){throw new RangeError(d[e])}function g(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(f,".")).split("."),t).join(".");return n+i}var y=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},_=function(e,t,r){var n=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;n+=36)e=p(e/35);return p(n+36*e/(e+38))},C=function(e){return g(e,(function(e){return h.test(e)?"xn--"+function(e){var t=[],r=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),r--)}else t.push(i)}return t}(e)).length,n=128,i=0,o=72,a=!0,s=!1,u=void 0;try{for(var l,h=e[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var f=l.value;f<128&&t.push(v(f))}}catch(N){s=!0,u=N}finally{try{!a&&h.return&&h.return()}finally{if(s)throw u}}var d=t.length,g=d;for(d&&t.push("-");g<r;){var C=c,b=!0,w=!1,k=void 0;try{for(var S,x=e[Symbol.iterator]();!(b=(S=x.next()).done);b=!0){var E=S.value;E>=n&&E<C&&(C=E)}}catch(N){w=!0,k=N}finally{try{!b&&x.return&&x.return()}finally{if(w)throw k}}var P=g+1;C-n>p((c-i)/P)&&m("overflow"),i+=(C-n)*P,n=C;var R=!0,I=!1,O=void 0;try{for(var M,D=e[Symbol.iterator]();!(R=(M=D.next()).done);R=!0){var T=M.value;if(T<n&&++i>c&&m("overflow"),T==n){for(var A=i,V=36;;V+=36){var L=V<=o?1:V>=o+26?26:V-o;if(A<L)break;var F=A-L,j=36-L;t.push(v(y(L+F%j,0))),A=p(F/j)}t.push(v(y(A,0))),o=_(i,P,g==d),i=0,++g}}}catch(N){I=!0,O=N}finally{try{!R&&D.return&&D.return()}finally{if(I)throw O}}++i,++n}return t.join("")}(e):e}))},b=function(e){return g(e,(function(e){return l.test(e)?function(e){var t,r=[],n=e.length,i=0,o=128,a=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var u=0;u<s;++u)e.charCodeAt(u)>=128&&m("not-basic"),r.push(e.charCodeAt(u));for(var l=s>0?s+1:0;l<n;){for(var h=i,f=1,d=36;;d+=36){l>=n&&m("invalid-input");var v=(t=e.charCodeAt(l++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(v>=36||v>p((c-i)/f))&&m("overflow"),i+=v*f;var g=d<=a?1:d>=a+26?26:d-a;if(v<g)break;var y=36-g;f>p(c/y)&&m("overflow"),f*=y}var C=r.length+1;a=_(i-h,C,0==h),p(i/C)>c-o&&m("overflow"),o+=p(i/C),i%=C,r.splice(i++,0,o)}return String.fromCodePoint.apply(String,r)}(e.slice(4).toLowerCase()):e}))},w={};function k(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function S(e){for(var t="",r=0,n=e.length;r<n;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(n-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(n-r>=9){var a=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function x(e,t){function r(e){var r=S(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,k).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,k).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,k).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,k).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,k).replace(t.PCT_ENCODED,i)),e}function E(e){return e.replace(/^0*(.*)/,"$1")||"0"}function P(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=u(r,2)[1];return n?n.split(".").map(E).join("."):e}function R(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=u(r,3),i=n[1],o=n[2];if(i){for(var a=i.toLowerCase().split("::").reverse(),s=u(a,2),c=s[0],l=s[1],h=l?l.split(":").map(E):[],f=c.split(":").map(E),d=t.IPV4ADDRESS.test(f[f.length-1]),p=d?7:8,v=f.length-p,m=Array(p),g=0;g<p;++g)m[g]=h[g]||f[v+g]||"";d&&(m[p-1]=P(m[p-1],t));var y=m.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],_=void 0;if(y&&y.length>1){var C=m.slice(0,y.index),b=m.slice(y.index+y.length);_=C.join(":")+"::"+b.join(":")}else _=m.join(":");return o&&(_+="%"+o),_}return e}var I=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,O=void 0==="".match(/(){0}/)[1];function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?s:a;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(I);if(i){O?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=R(P(r.host,n),n)),r.reference=void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?"relative":void 0===r.fragment?"absolute":"uri":"same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=w[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)x(r,n);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=C(r.host.replace(n.PCT_ENCODED,S).toLowerCase())}catch(u){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+u}x(r,a)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function D(e,t){var r=!1!==t.iri?s:a,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(R(P(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"==typeof e.port&&(n.push(":"),n.push(e.port.toString(10))),n.length?n.join(""):void 0}var T=/^\.\.?\//,A=/^\/\.(\/|$)/,V=/^\/\.\.(\/|$)/,L=/^\/?(?:.|\n)*?(?=\/|$)/;function F(e){for(var t=[];e.length;)if(e.match(T))e=e.replace(T,"");else if(e.match(A))e=e.replace(A,"/");else if(e.match(V))e=e.replace(V,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(L);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:a,n=[],i=w[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?b(e.host):C(e.host.replace(r.PCT_ENCODED,S).toLowerCase())}catch(c){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+c}x(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var o=D(e,t);if(void 0!==o&&("suffix"!==t.reference&&n.push("//"),n.push(o),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var u=e.path;t.absolutePath||i&&i.absolutePath||(u=F(u)),void 0===o&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function N(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i={};return n||(e=M(j(e,r),r),t=M(j(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=F(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=F(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=F(t.path):(i.path=void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:t.path:"/"+t.path,i.path=F(i.path)),i.query=t.query):(i.path=e.path,i.query=void 0!==t.query?t.query:e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function U(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:a.PCT_ENCODED,S)}var B={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},H={scheme:"https",domainHost:B.domainHost,parse:B.parse,serialize:B.serialize},z={},$="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",q="[0-9A-Fa-f]",W=r(r("%[EFef][0-9A-Fa-f]%"+q+q+"%"+q+q)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+q+q)+"|"+r("%"+q+q)),G=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),K=new RegExp($,"g"),Q=new RegExp(W,"g"),Z=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',G),"g"),J=new RegExp(t("[^]",$,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),Y=J;function X(e){var t=S(e);return t.match(K)?t:e}var ee={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,o={},a=r.query.split("&"),s=0,u=a.length;s<u;++s){var c=a[s].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),h=0,f=l.length;h<f;++h)n.push(l[h]);break;case"subject":r.subject=U(c[1],t);break;case"body":r.body=U(c[1],t);break;default:i=!0,o[U(c[0],t)]=U(c[1],t)}}i&&(r.headers=o)}r.query=void 0;for(var d=0,p=n.length;d<p;++d){var v=n[d].split("@");if(v[0]=U(v[0]),t.unicodeSupport)v[1]=U(v[1],t).toLowerCase();else try{v[1]=C(U(v[1],t).toLowerCase())}catch(m){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+m}n[d]=v.join("@")}return r},serialize:function(e,t){var r,n=e,o=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(o){for(var a=0,s=o.length;a<s;++a){var u=String(o[a]),c=u.lastIndexOf("@"),l=u.slice(0,c).replace(Q,X).replace(Q,i).replace(Z,k),h=u.slice(c+1);try{h=t.iri?b(h):C(U(h,t).toLowerCase())}catch(v){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+v}o[a]=l+"@"+h}n.path=o.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var d=[];for(var p in f)f[p]!==z[p]&&d.push(p.replace(Q,X).replace(Q,i).replace(J,k)+"="+f[p].replace(Q,X).replace(Q,i).replace(Y,k));return d.length&&(n.query=d.join("&")),n}},te=/^([^\:]+)\:(.*)/,re={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(te),n=e;if(r){var i=t.scheme||n.scheme||"urn",o=r[1].toLowerCase(),a=r[2],s=w[i+":"+(t.nid||o)];n.nid=o,n.nss=a,n.path=void 0,s&&(n=s.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=e.nid,n=w[(t.scheme||e.scheme||"urn")+":"+(t.nid||r)];n&&(e=n.serialize(e,t));var i=e;return i.path=(r||t.nid)+":"+e.nss,i}},ne=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ie={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ne)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};w[B.scheme]=B,w[H.scheme]=H,w[ee.scheme]=ee,w[re.scheme]=re,w[ie.scheme]=ie,e.SCHEMES=w,e.pctEncChar=k,e.pctDecChars=S,e.parse=M,e.removeDotSegments=F,e.serialize=j,e.resolveComponents=N,e.resolve=function(e,t,r){var n=function(e,t){var r={scheme:"null"};if(t)for(var n in t)r[n]=t[n];return r}(0,r);return j(N(M(e,n),M(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=j(M(e,t),t):"object"===n(e)&&(e=M(j(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=j(M(e,r),r):"object"===n(e)&&(e=j(e,r)),"string"==typeof t?t=j(M(t,r),r):"object"===n(t)&&(t=j(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:a.ESCAPE,k)},e.unescapeComponent=U,Object.defineProperty(e,"__esModule",{value:!0})}(t)},U4c0:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("kFR6"),o=r("+qE3"),a=r("JjHJ"),s=r("VzKg"),u=r("ytkS"),c=r("AdGg"),l=r("Wd91");t.ButtplugClient=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Generic Buttplug Client";return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._pingTimer=null,e._connector=null,e._devices=new Map,e._logger=i.ButtplugLogger.Logger,e._isScanning=!1,e._messageVersion=1,e.Connect=function(t){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.Info("ButtplugClient: Connecting using ".concat(t.constructor.name)),e.next=3,t.Connect();case 3:return this._connector=t,this._connector.addListener("message",this.ParseMessages),this._connector.addListener("disconnect",this.DisconnectHandler),e.next=8,this.InitializeConnection();case 8:case"end":return e.stop()}}),e,this)})))},e.Disconnect=function(){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.Debug("ButtplugClient: Disconnect called"),this.CheckConnector(),e.next=4,this.ShutdownConnection();case 4:return e.next=6,this._connector.Disconnect();case 6:case"end":return e.stop()}}),e,this)})))},e.StartScanning=function(){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.Debug("ButtplugClient: StartScanning called"),this._isScanning=!0,e.next=4,this.SendMsgExpectOk(new s.StartScanning);case 4:case"end":return e.stop()}}),e,this)})))},e.StopScanning=function(){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.Debug("ButtplugClient: StopScanning called"),this._isScanning=!1,e.next=4,this.SendMsgExpectOk(new s.StopScanning);case 4:case"end":return e.stop()}}),e,this)})))},e.RequestLog=function(t){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.Debug("ButtplugClient: RequestLog called with level ".concat(t)),e.next=3,this.SendMsgExpectOk(new s.RequestLog(t));case 3:case"end":return e.stop()}}),e,this)})))},e.StopAllDevices=function(){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.Debug("ButtplugClient: StopAllDevices"),e.next=3,this.SendMsgExpectOk(new s.StopAllDevices);case 3:case"end":return e.stop()}}),e,this)})))},e.ParseMessages=function(t){e.ParseMessagesInternal(t)},e.DisconnectHandler=function(){e._logger.Info("ButtplugClient: Disconnect event receieved."),e.emit("disconnect")},e.InitializeConnection=function(){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.CheckConnector(),e.next=3,this.SendMessage(new s.RequestServerInfo(this._clientName,1));case 3:t=e.sent,e.t0=t.constructor,e.next=e.t0===s.ServerInfo?7:e.t0===s.Error?18:21;break;case 7:if(r=t,this._logger.Info("ButtplugClient: Connected to Server ".concat(r.ServerName)),i=r.MaxPingTime,!(r.MessageVersion<this._messageVersion)){e.next=14;break}return e.next=13,this._connector.Disconnect();case 13:throw c.ButtplugException.LogAndError(c.ButtplugInitException,this._logger,"Server protocol version is older than client protocol version. Please update server.");case 14:return i>0&&(this._pingTimer=setInterval((function(){return n(o,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Connected){e.next=5;break}return e.next=3,this.SendMessage(new s.Ping);case 3:e.next=7;break;case 5:return e.next=7,this.ShutdownConnection();case 7:case"end":return e.stop()}}),e,this)})))}),Math.round(i/2))),e.next=17,this.RequestDeviceList();case 17:return e.abrupt("return",!0);case 18:return e.next=20,this._connector.Disconnect();case 20:throw c.ButtplugException.LogAndError(c.ButtplugInitException,this._logger,"Cannot connect to server. ".concat(t.ErrorMessage));case 21:return e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,this)})))},e.RequestDeviceList=function(){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.CheckConnector(),this._logger.Debug("ButtplugClient: ReceiveDeviceList called"),e.next=4,this.SendMessage(new s.RequestDeviceList);case 4:e.t0=function(e){if(t._devices.has(e.DeviceIndex))t._logger.Debug("ButtplugClient: Device already added: ".concat(e));else{var r=a.ButtplugClientDevice.fromMsg(e,t.SendDeviceMessageClosure);t._logger.Debug("ButtplugClient: Adding Device: ".concat(r)),t._devices.set(e.DeviceIndex,r),t.emit("deviceadded",r)}},e.sent.Devices.forEach(e.t0);case 6:case"end":return e.stop()}}),e,this)})))},e.ShutdownConnection=function(){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.StopAllDevices();case 2:null!==this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=null);case 3:case"end":return e.stop()}}),e,this)})))},e.SendMsgExpectOk=function(t){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SendMessage(t);case 2:r=e.sent,e.t0=r.constructor,e.next=e.t0===s.Ok?6:e.t0===s.Error?7:8;break;case 6:return e.abrupt("return");case 7:throw c.ButtplugException.FromError(r);case 8:throw c.ButtplugException.LogAndError(c.ButtplugMessageException,this._logger,"Message type ".concat(r.constructor," not handled bySendMsgExpectOk"));case 9:case"end":return e.stop()}}),e,this)})))},e.SendDeviceMessageClosure=function(t,r){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.SendDeviceMessage(t,r);case 2:case"end":return e.stop()}}),e,this)})))},e._clientName=r,e._logger.Debug("ButtplugClient: Client ".concat(r," created.")),e}return _inherits(t,e),_createClass(t,[{key:"SendDeviceMessage",value:function(e,t){return n(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.CheckConnector(),void 0!==(n=this._devices.get(e.Index))){r.next=4;break}throw c.ButtplugException.LogAndError(c.ButtplugDeviceException,this._logger,"Device ".concat(e.Index," not available."));case 4:if(-1!==n.AllowedMessages.indexOf(t.Type.name)){r.next=6;break}throw c.ButtplugException.LogAndError(c.ButtplugDeviceException,this._logger,"Device ".concat(e.Name," does not accept message type ").concat(t.Type,"."));case 6:return t.DeviceIndex=e.Index,r.next=9,this.SendMsgExpectOk(t);case 9:case"end":return r.stop()}}),r,this)})))}},{key:"ParseMessagesInternal",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=i.value;switch(u.constructor){case s.Log:this.emit("log",u);break;case s.DeviceAdded:var c=u,l=a.ButtplugClientDevice.fromMsg(c,this.SendDeviceMessageClosure);this._devices.set(c.DeviceIndex,l),this.emit("deviceadded",l);break;case s.DeviceRemoved:var h=u;if(this._devices.has(h.DeviceIndex)){var f=this._devices.get(h.DeviceIndex);this._devices.delete(h.DeviceIndex),this.emit("deviceremoved",f)}break;case s.ScanningFinished:this._isScanning=!1,this.emit("scanningfinished",u)}}}catch(d){r=!0,n=d}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"SendMessage",value:function(e){return n(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.CheckConnector(),u.CheckMessage(e),t.next=4,this._connector.Send(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"CheckConnector",value:function(){if(!this.Connected)throw new l.ButtplugClientConnectorException("ButtplugClient not connected")}},{key:"Connector",get:function(){return this._connector}},{key:"Connected",get:function(){return null!==this._connector&&this._connector.Connected}},{key:"Devices",get:function(){this.CheckConnector();var e=[];return this._devices.forEach((function(t,r){e.push(t)})),e}},{key:"IsScanning",get:function(){return this._isScanning}}]),t}(o.EventEmitter)},VzKg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("b36G"),i=r("AdGg");r("mNvP"),t.SYSTEM_MESSAGE_ID=0,t.DEFAULT_MESSAGE_ID=1,t.MAX_ID=4294967295;var o=function(){function e(t){_classCallCheck(this,e),this.Id=t}return _createClass(e,[{key:"DowngradeMessage",value:function(){throw new i.ButtplugMessageException("Message version downgrade required, but not defined for this message type.",this.Id)}},{key:"getType",value:function(){return this.Type}},{key:"toJSON",value:function(){return JSON.stringify(this.toProtocolFormat())}},{key:"toProtocolFormat",value:function(){var e={};return e[this.Type.name]=n.classToPlain(this),e}},{key:"Type",get:function(){return this.constructor}}]),e}();t.ButtplugMessage=o;var a=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,r))).DeviceIndex=e,n.Id=r,n}return _inherits(t,e),t}(o);t.ButtplugDeviceMessage=a;var s,u=function(e){function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.SYSTEM_MESSAGE_ID;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,n))).Id=n,e}return _inherits(r,e),r}(o);t.ButtplugSystemMessage=u,t.Ok=function(e){function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,n))).Id=n,e}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(u),t.Ping=function(e){function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,n))).Id=n,e}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(o),t.Test=function(e){function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,i))).TestString=e,n.Id=i,n}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(o),function(e){e[e.ERROR_UNKNOWN=0]="ERROR_UNKNOWN",e[e.ERROR_INIT=1]="ERROR_INIT",e[e.ERROR_PING=2]="ERROR_PING",e[e.ERROR_MSG=3]="ERROR_MSG",e[e.ERROR_DEVICE=4]="ERROR_DEVICE"}(s=t.ErrorClass||(t.ErrorClass={})),t.Error=function(e){function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ERROR_UNKNOWN,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,o))).ErrorMessage=e,n.ErrorCode=i,n.Id=o,n}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(u);var c=function e(t,r,n){_classCallCheck(this,e),this.DeviceIndex=t,this.DeviceName=r,this.DeviceMessages=n};t.DeviceInfo=c;var l=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).Devices=e,n.Id=r,n}return _inherits(t,e),_createClass(t,[{key:"Type",get:function(){return h.constructor}},{key:"SchemaVersion",get:function(){return 0}}]),t}(u);t.DeviceListVersion0=l,t.DeviceInfoWithSpecifications=function(){return function e(t,r,n){_classCallCheck(this,e),this.DeviceIndex=t,this.DeviceName=r,this.DeviceMessages=n}}();var h=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).Devices=e,n.Id=r,n}return _inherits(t,e),_createClass(t,[{key:"DowngradeMessage",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var i,o=this.Devices[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(new c(a.DeviceIndex,a.DeviceName,Object.keys(a.DeviceMessages)))}}catch(s){r=!0,n=s}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}return new l(e,this.Id)}},{key:"SchemaVersion",get:function(){return 1}}]),t}(u);t.DeviceList=h;var f=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).DeviceIndex=e,i.DeviceName=r,i.DeviceMessages=n,i}return _inherits(t,e),_createClass(t,[{key:"Type",get:function(){return d.constructor}},{key:"SchemaVersion",get:function(){return 0}}]),t}(u);t.DeviceAddedVersion0=f;var d=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).DeviceIndex=e,i.DeviceName=r,i.DeviceMessages=n,i}return _inherits(t,e),_createClass(t,[{key:"DowngradeMessage",value:function(){return new f(this.DeviceIndex,this.DeviceName,Object.keys(this.DeviceMessages))}},{key:"SchemaVersion",get:function(){return 1}}]),t}(u);t.DeviceAdded=d,t.DeviceRemoved=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).DeviceIndex=e,r}return _inherits(t,e),_createClass(t,[{key:"SchemaVersion",get:function(){return 0}}]),t}(u),t.RequestDeviceList=function(e){function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,n))).Id=n,e}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(o),t.StartScanning=function(e){function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,n))).Id=n,e}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(o),t.StopScanning=function(e){function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,n))).Id=n,e}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(o),t.ScanningFinished=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))}return _inherits(t,e),_createClass(t,[{key:"SchemaVersion",get:function(){return 0}}]),t}(u),t.RequestLog=function(e){function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,i))).LogLevel=e,n.Id=i,n}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(o),t.Log=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).LogLevel=e,n.LogMessage=r,n}return _inherits(t,e),_createClass(t,[{key:"SchemaVersion",get:function(){return 0}}]),t}(u),t.RequestServerInfo=function(e){function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,o))).ClientName=e,n.MessageVersion=i,n.Id=o,n}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 1}}]),r}(o),t.ServerInfo=function(e){function r(e,n,i,o,a,s){var u,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(u=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this))).MajorVersion=e,u.MinorVersion=n,u.BuildVersion=i,u.MessageVersion=o,u.MaxPingTime=a,u.ServerName=s,u.Id=c,u}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(u),t.FleshlightLaunchFW12Cmd=function(e){function r(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(i=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,o,a))).Speed=e,i.Position=n,i.DeviceIndex=o,i.Id=a,i}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(a),t.KiirooCmd=function(e){function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,i,o))).DeviceIndex=i,e.Id=o,e.Command="0",e.Command=String(n),e}return _inherits(r,e),_createClass(r,[{key:"Position",set:function(e){this.Command=e>=0&&e<=4?String(Math.round(e)):"0"},get:function(){var e=Number(this.Command)?Number(this.Command):0;return e<0||e>4?0:Math.round(e)}},{key:"SchemaVersion",get:function(){return 0}}]),r}(a),t.SingleMotorVibrateCmd=function(e){function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,i,o))).Speed=e,n.DeviceIndex=i,n.Id=o,n}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(a),t.StopDeviceCmd=function(e){function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,n,i))).DeviceIndex=n,e.Id=i,e}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(a),t.StopAllDevices=function(e){function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,n))).Id=n,e}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(o),t.LovenseCmd=function(e){function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,i,o))).Command=e,n.DeviceIndex=i,n.Id=o,n}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(a),t.VorzeA10CycloneCmd=function(e){function r(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(i=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,o,a))).Speed=e,i.Clockwise=n,i.DeviceIndex=o,i.Id=a,i}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 0}}]),r}(a);var p=function e(t){_classCallCheck(this,e),this.Index=t};t.GenericMessageSubcommand=p;var v=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).Speed=r,n}return _inherits(t,e),t}(p);t.SpeedSubcommand=v;var m=function(e){function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,i,o))).Speeds=e,n.DeviceIndex=i,n.Id=o,n}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 1}}],[{key:"Create",value:function(e,n){var i=new Array,o=0,a=!0,s=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var h=c.value;i.push(new v(o,h)),++o}}catch(f){s=!0,u=f}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}return new r(i,e,t.DEFAULT_MESSAGE_ID)}}]),r}(a);t.VibrateCmd=m;var g=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).Speed=r,i.Clockwise=n,i}return _inherits(t,e),_createClass(t,null,[{key:"Create",value:function(e,t){var r=new Array,n=0,i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r.push(new v(n,c)),++n}}catch(l){o=!0,a=l}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return new m(r,e)}}]),t}(p);t.RotateSubcommand=g;var y=function(e){function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,i,o))).Rotations=e,n.DeviceIndex=i,n.Id=o,n}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 1}}],[{key:"Create",value:function(e,t){var n=new Array,i=0,o=!0,a=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;n.push(new g(i,l[0],l[1])),++i}}catch(h){a=!0,s=h}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return new r(n,e)}}]),r}(a);t.RotateCmd=y;var _=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).Position=r,i.Duration=n,i}return _inherits(t,e),t}(p);t.VectorSubcommand=_;var C=function(e){function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.DEFAULT_MESSAGE_ID;return _classCallCheck(this,r),(n=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,i,o))).Vectors=e,n.DeviceIndex=i,n.Id=o,n}return _inherits(r,e),_createClass(r,[{key:"SchemaVersion",get:function(){return 1}}],[{key:"Create",value:function(e,t){var n=new Array,i=0,o=!0,a=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;n.push(new _(i,l[0],l[1])),++i}}catch(h){a=!0,s=h}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return new r(n,e)}}]),r}(a);t.LinearCmd=C,t.MessageAttributes=function(){return function e(t){_classCallCheck(this,e),this.FeatureCount=t}}()},WJxe:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("+qE3"),o=r("aB/X"),a=r("Wd91");t.ButtplugEmbeddedClientConnector=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments)))._connected=!1,e._server=null,e.Connect=function(){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._connected=!0,null===this._server&&(this._server=new o.ButtplugServer),this._server.addListener("message",this.OnMessageReceived);case 1:case"end":return e.stop()}}),e,this)})))},e.Disconnect=function(){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._connected){e.next=7;break}return e.prev=1,e.next=4,this._server.Shutdown();case 4:return e.prev=4,this._connected=!1,this._server=null,this.emit("disconnect"),e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})))},e.Send=function(t){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connected){e.next=2;break}throw new a.ButtplugClientConnectorException("Client not connected.");case 2:return e.next=4,this._server.SendMessage(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})))},e.OnMessageReceived=function(t){e.emit("message",[t])},e}return _inherits(t,e),_createClass(t,[{key:"Server",set:function(e){this._server=e},get:function(){return this._server}},{key:"Connected",get:function(){return this._connected}}]),t}(i.EventEmitter)},Wd91:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("AdGg"),i=r("VzKg");t.ButtplugClientConnectorException=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,i.ErrorClass.ERROR_UNKNOWN))}return _inherits(t,e),t}(n.ButtplugException)},XD0j:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.errSchemaPath+"/"+t,o=e.util.toQuotedString(e.schema[t]);return!0===e.opts.$comment?n+=" console.log("+o+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+o+", "+e.util.toQuotedString(i)+", validate.root.schema);"),n}},XPXQ:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level,v="i"+i,m=d.dataLevel=e.dataLevel+1,g="data"+m,y=e.baseId,_=e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all);if(n+="var "+f+" = errors;var "+h+";",_){var C=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=a,d.schemaPath=s,d.errSchemaPath=u,n+=" var "+p+" = false; for (var "+v+" = 0; "+v+" < "+l+".length; "+v+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);var b=l+"["+v+"]";d.dataPathArr[m]=v;var w=e.validate(d);d.baseId=y,e.util.varOccurences(w,g)<2?n+=" "+e.util.varReplace(w,g,b)+" ":n+=" var "+g+" = "+b+"; "+w+" ",n+=" if ("+p+") break; }  ",e.compositeRule=d.compositeRule=C,n+="  if (!"+p+") {"}else n+=" if ("+l+".length == 0) {";var k=k||[];k.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var S=n;return n=k.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",_&&(n+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),e.util.cleanUpCode(n)}},Y3YA:function(e,t,r){"use strict";e.exports={$ref:r("bvhh"),allOf:r("6gcW"),anyOf:r("YPXT"),$comment:r("XD0j"),const:r("AwJw"),contains:r("XPXQ"),dependencies:r("uSCx"),enum:r("6MIY"),format:r("AK1u"),if:r("3ZNU"),items:r("eY4P"),maximum:r("v43d"),minimum:r("v43d"),maxItems:r("2jsQ"),minItems:r("2jsQ"),maxLength:r("mQYA"),minLength:r("mQYA"),maxProperties:r("d+r/"),minProperties:r("d+r/"),multipleOf:r("qTHO"),not:r("APWh"),oneOf:r("TbEC"),pattern:r("cUtX"),properties:r("vVvC"),propertyNames:r("bWPq"),required:r("t+aO"),uniqueItems:r("0w4r"),validate:r("1QhW")}},YPXT:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e),p="";d.level++;var v="valid"+d.level;if(a.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var m=d.baseId;n+=" var "+f+" = errors; var "+h+" = false;  ";var g=e.compositeRule;e.compositeRule=d.compositeRule=!0;var y=a;if(y)for(var _,C=-1,b=y.length-1;C<b;)_=y[C+=1],d.schema=_,d.schemaPath=s+"["+C+"]",d.errSchemaPath=u+"/"+C,n+="  "+e.validate(d)+" ",d.baseId=m,n+=" "+h+" = "+h+" || "+v+"; if (!"+h+") { ",p+="}";e.compositeRule=d.compositeRule=g,n+=" "+p+" if (!"+h+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(n+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}else c&&(n+=" if (true) { ");return n}},ZD7F:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("AdGg"),o=r("ANNU"),a=r("AjGN"),s=r("4Kjc"),u=r("4laU"),c=r("oxZ9"),l=r("3pWD"),h=r("tCG2"),f=r("pfBK"),d=r("teZO"),p=r("FsXc"),v=r("HiAz"),m=r("LHY/"),g=r("RRu4"),y=r("JNjr"),_=r("QYf/"),C=r("kO1a"),b=function(){function e(t){_classCallCheck(this,e),this._configObject={},this._configs=new Map,this._protocols=new Map,this._configObject=t,this._protocols.set("lovense",u.Lovense),this._protocols.set("wevibe",c.WeVibe),this._protocols.set("vorze-sa",l.VorzeA10Cyclone),this._protocols.set("magic-motion",h.MagicMotion),this._protocols.set("maxpro",p.Maxpro),this._protocols.set("kiiroo-v2",v.FleshlightLaunch),this._protocols.set("kiiroo-v21",_.KiirooGen21),this._protocols.set("kiiroo-v2-vibrator",m.KiirooGen2Vibe),this._protocols.set("youou",y.Youou),this._protocols.set("youcups",d.Youcups),this._protocols.set("libo",f.LiBo),this._protocols.set("motorbunny",C.Motorbunny),this.ParseConfig()}return _createClass(e,[{key:"LoadUserConfiguration",value:function(){}},{key:"GetAllConfigsOfType",value:function(e){var t=[],r=!0,n=!1,i=void 0;try{for(var o,a=this._configs.entries()[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=_slicedToArray(o.value,2),u=(s[0],s[1]);u instanceof e&&t.push(u)}}catch(c){n=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return t}},{key:"Find",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=this._configs.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=_slicedToArray(i.value,2),s=a[0],u=a[1];if(u.Matches(e))return[u,this._protocols.get(s)]}}catch(c){r=!0,n=c}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"ParseConfig",value:function(){this._configs=new Map;for(var e=this._configObject.protocols,t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];if(this._protocols.has(n)){var i=e[n];if(null!=i)for(var u=0,c=Object.keys(i);u<c.length;u++){var l=c[u];switch(l){case"btle":this._configs.set(n,o.BluetoothLEProtocolConfiguration.ConstructFromObject(i[l]));break;case"serial":this._configs.set(n,new a.SerialProtocolConfiguration(i[l]));break;case"hid":this._configs.set(n,new s.HIDProtocolConfiguration(i[l]))}}}}}}],[{key:"LoadFromInternalConfig",value:function(){e._manager=new e(g)}},{key:"LoadFromJsonExternalConfig",value:function(t){var r=JSON.parse(t);e._manager=new e(r)}},{key:"LoadFromWebConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://buttplug-device-config.buttplug.io";return n(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch(t);case 2:return n=r.sent,r.t0=e,r.next=6,n.text();case 6:r.t1=r.sent,r.t0.LoadFromJsonExternalConfig.call(r.t0,r.t1);case 8:case"end":return r.stop()}}),r)})))}},{key:"Manager",get:function(){if(null===e._manager)throw new i.ButtplugDeviceException("Device configuration manager not yet initialized!");return e._manager}}]),e}();b._manager=null,t.DeviceConfigurationManager=b},ZsDt:function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i,o=t[r].split("/"),a=e;for(i=1;i<o.length;i++)a=a[o[i]];for(i=0;i<n.length;i++){var s=n[i],u=a[s];u&&(a[s]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},"aB/X":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("ytkS"),a=r("zp0c"),s=r("+qE3"),u=r("kFR6"),c=r("VzKg"),l=r("AdGg");t.ButtplugServer=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Buttplug JS Internal Server",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._serverName=r,e._maxPingTime=s,e._clientSchemaVersion=-1,e._clientName=void 0,e._pingTimedOut=!1,e._receivedRequestServerInfo=!1,e._logger=u.ButtplugLogger.Logger,e._outgoingLogLevel=u.ButtplugLogLevel.Off,e._connected=!1,e.AddDeviceManager=function(t){e._deviceManager.AddDeviceManager(t)},e.ClearDeviceManagers=function(){e._deviceManager.ClearDeviceManagers()},e.Disconnect=function(){e._connected=!1},e.CheckConnection=function(){if(!e._connected)throw new Error("Server not connected to client.")},e.SendMessage=function(t){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof c.RequestServerInfo||this.CheckConnection(),r=t.Id,this._logger.Trace("Server: Got Message: ".concat(t)),0!==r){e.next=4;break}throw l.ButtplugException.LogAndError(l.ButtplugMessageException,this._logger,"Message Id 0 is reserved for outgoing system messages. Use another Id.",r);case 4:if(!this._pingTimedOut){e.next=6;break}throw l.ButtplugException.LogAndError(l.ButtplugPingException,this._logger,"Ping timed out.",r);case 6:if(this._receivedRequestServerInfo||t.Type===i.RequestServerInfo){e.next=8;break}throw l.ButtplugException.LogAndError(l.ButtplugInitException,this._logger,"RequestServerInfo must be first message received by server.",r);case 8:e.t0=t.Type,e.next=e.t0===i.RequestLog?11:e.t0===i.Ping?13:e.t0===i.RequestServerInfo?14:e.t0===i.Test?19:20;break;case 11:return n=t,e.abrupt("return",(this._logger.Debug("Server: RequestLog received for level ".concat(n.LogLevel)),n.LogLevel===u.ButtplugLogLevel[u.ButtplugLogLevel.Off]?this._logger.removeListener("log",this.OnLogMessage):this._outgoingLogLevel===u.ButtplugLogLevel.Off&&this._logger.addListener("log",this.OnLogMessage),this._logger.MaximumEventLogLevel=u.ButtplugLogLevel[n.LogLevel],this._outgoingLogLevel=u.ButtplugLogLevel[n.LogLevel],new i.Ok(n.Id)));case 13:return e.abrupt("return",new i.Ok(t.Id));case 14:if(this._logger.Debug("Server: RequestServerInfo received."),a=t,!(this._clientSchemaVersion>1)){e.next=18;break}throw l.ButtplugException.LogAndError(l.ButtplugInitException,this._logger,"Client schema (".concat(this._clientSchemaVersion,") newer than ")+"server schema (1). Please upgrade server.",r);case 18:return e.abrupt("return",(this._receivedRequestServerInfo=!0,this._clientSchemaVersion=a.MessageVersion,this._clientName=a.ClientName,this._connected=!0,new i.ServerInfo(0,0,0,o.GetSchemaVersion(),this._maxPingTime,this._serverName,r)));case 19:return e.abrupt("return",(this._logger.Debug("Server: Test received."),new i.Test(t.TestString,t.Id)));case 20:return e.next=22,this._deviceManager.SendMessage(t);case 22:return e.abrupt("return",e.sent);case 23:case"end":return e.stop()}}),e,this)})))},e.Shutdown=function(){return n(_assertThisInitialized(e),void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Disconnect(),e.next=3,this._deviceManager.Shutdown();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))},e.OnLogMessage=function(t){t.LogLevel>e._outgoingLogLevel||e.SendOutgoingMessage(new i.Log(u.ButtplugLogLevel[t.LogLevel],t.Message))},e.SendOutgoingMessage=function(t){if(e._connected){if(-1===e._clientSchemaVersion)throw l.ButtplugException.LogAndError(l.ButtplugMessageException,e._logger,"Cannot discern client schema version. Was RequestServerInfo message sent?");for(;t.SchemaVersion!==e._clientSchemaVersion&&t.SchemaVersion>0;)t=t.DowngradeMessage();e.emit("message",t)}},e._logger.Info("Server: Starting Buttplug Server: ".concat(e._serverName)),e._deviceManager=new a.DeviceManager((function(t){return e.SendOutgoingMessage(t)})),e}return _inherits(t,e),_createClass(t,[{key:"DeviceManagers",get:function(){return this._deviceManager.DeviceManagers}}]),t}(s.EventEmitter)},aUsF:function(e,t,r){"use strict";var n=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var a,s,u,c=n(t),l=n(r);if(c&&l){if((s=t.length)!=r.length)return!1;for(a=s;0!=a--;)if(!e(t[a],r[a]))return!1;return!0}if(c!=l)return!1;var h=t instanceof Date,f=r instanceof Date;if(h!=f)return!1;if(h&&f)return t.getTime()==r.getTime();var d=t instanceof RegExp,p=r instanceof RegExp;if(d!=p)return!1;if(d&&p)return t.toString()==r.toString();var v=i(t);if((s=v.length)!==i(r).length)return!1;for(a=s;0!=a--;)if(!o.call(r,v[a]))return!1;for(a=s;0!=a--;)if(!e(t[u=v[a]],r[u]))return!1;return!0}return t!=t&&r!=r}},b36G:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Decb"),i=r("Decb");t.ClassTransformer=i.ClassTransformer,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r("CP53"));var o,a=new n.ClassTransformer;t.classToPlain=function(e,t){return a.classToPlain(e,t)},t.classToPlainFromExist=function(e,t,r){return a.classToPlainFromExist(e,t,r)},t.plainToClass=function(e,t,r){return a.plainToClass(e,t,r)},t.plainToClassFromExist=function(e,t,r){return a.plainToClassFromExist(e,t,r)},t.classToClass=function(e,t){return a.classToClass(e,t)},t.classToClassFromExist=function(e,t,r){return a.classToClassFromExist(e,t,r)},t.serialize=function(e,t){return a.serialize(e,t)},t.deserialize=function(e,t,r){return a.deserialize(e,t,r)},t.deserializeArray=function(e,t,r){return a.deserializeArray(e,t,r)},(o=t.TransformationType||(t.TransformationType={}))[o.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",o[o.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",o[o.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"},bTiy:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("o4Wz");t.TestDeviceImpl=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,e)))._connected=!0,r._lastValueWritten=[],r._valueToRead=new Map,r}return _inherits(t,e),_createClass(t,[{key:"SetValueToRead",value:function(e,t){this._valueToRead.set(e,t)}},{key:"Connect",value:function(){return n(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})))}},{key:"Disconnect",value:function(){this._connected=!1,this.emit("deviceremoved",this)}},{key:"ReadValueInternal",value:function(e){return n(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._valueToRead.has(e.Endpoint)){t.next=2;break}return t.abrupt("return",Promise.resolve(Buffer.from([])));case 2:return r=this._valueToRead.get(e.Endpoint),t.abrupt("return",(this._valueToRead.delete(e.Endpoint),Promise.resolve(r)));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"WriteValueInternal",value:function(e,t){return n(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(this._lastValueWritten.push([t.Endpoint,e]),Promise.resolve()));case 1:case"end":return r.stop()}}),r,this)})))}},{key:"SubscribeToUpdatesInternal",value:function(e){return n(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})))}},{key:"ScheduleUpdateOnNextTick",value:function(e,t){var r=this;process.nextTick((function(){return r.emit("updateReceived",[e,t])}))}},{key:"Connected",get:function(){return this._connected}},{key:"LastValueWritten",get:function(){return this._lastValueWritten.shift()}}]),t}(i.ButtplugDeviceImpl)},bWPq:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e);f.level++;var d="valid"+f.level;if(n+="var "+h+" = errors;",e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all)){f.schema=a,f.schemaPath=s,f.errSchemaPath=u;var p="key"+i,v="idx"+i,m="i"+i,g="' + "+p+" + '",y="data"+(f.dataLevel=e.dataLevel+1),_="dataProperties"+i,C=e.opts.ownProperties,b=e.baseId;C&&(n+=" var "+_+" = undefined; "),n+=C?" "+_+" = "+_+" || Object.keys("+l+"); for (var "+v+"=0; "+v+"<"+_+".length; "+v+"++) { var "+p+" = "+_+"["+v+"]; ":" for (var "+p+" in "+l+") { ",n+=" var startErrs"+i+" = errors; ";var w=p,k=e.compositeRule;e.compositeRule=f.compositeRule=!0;var S=e.validate(f);f.baseId=b,e.util.varOccurences(S,y)<2?n+=" "+e.util.varReplace(S,y,w)+" ":n+=" var "+y+" = "+w+"; "+S+" ",e.compositeRule=f.compositeRule=k,n+=" if (!"+d+") { for (var "+m+"=startErrs"+i+"; "+m+"<errors; "+m+"++) { vErrors["+m+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(n+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),c&&(n+=" break; "),n+=" } }"}return c&&(n+="  if ("+h+" == errors) {"),e.util.cleanUpCode(n)}},bejg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransformMetadata=function(e,t,r,n){this.target=e,this.propertyName=t,this.transformFn=r,this.options=n}},bnbC:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},bvhh:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,o=" ",a=e.dataLevel,s=e.schema[t],u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(a||""),h="valid"+e.level;if("#"==s||"#/"==s)e.isRoot?(n=e.async,i="validate"):(n=!0===e.root.schema.$async,i="root.refVal[0]");else{var f=e.resolveRef(e.baseId,s,e.isRoot);if(void 0===f){var d=e.MissingRefError.message(e.baseId,s);if("fail"==e.opts.missingRefs){e.logger.error(d),(g=g||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(s)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(s)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(s)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var p=o;o=g.pop(),o+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,s,d);e.logger.warn(d),c&&(o+=" if (true) { ")}}else if(f.inline){var v=e.util.copy(e);v.level++;var m="valid"+v.level;v.schema=f.schema,v.schemaPath="",v.errSchemaPath=s,o+=" "+e.validate(v).replace(/validate\.schema/g,f.code)+" ",c&&(o+=" if ("+m+") { ")}else n=!0===f.$async||e.async&&!1!==f.$async,i=f.code}if(i){var g;(g=g||[]).push(o),o="",o+=e.opts.passContext?" "+i+".call(this, ":" "+i+"( ",o+=" "+l+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var y=o+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?e.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(o=g.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");c&&(o+=" var "+h+"; "),o+=" try { await "+y+"; ",c&&(o+=" "+h+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",c&&(o+=" "+h+" = false; "),o+=" } ",c&&(o+=" if ("+h+") { ")}else o+=" if (!"+y+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",c&&(o+=" else { ")}return o}},cSwh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("FzgR");t.defaultMetadataStorage=new n.MetadataStorage},cUtX:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s;var d=f?"(new RegExp("+n+"))":e.usePattern(s);i+="if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'string') || ");var p=p||[];p.push(i+=" !"+d+".test("+h+") ) {   "),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",i+=f?""+n:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=f?"' + "+n+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var v=i;return i=p.pop(),i+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},cjZW:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i,o=" ",a=e.level,s=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,f="data"+(s||""),d="valid"+a,p="errs__"+a,v=e.opts.$data&&u&&u.$data;v?(o+=" var schema"+a+" = "+e.util.getData(u.$data,s,e.dataPathArr)+"; ",i="schema"+a):i=u;var m,g,y,_,C,b="definition"+a,w=this.definition,k="";if(v&&w.$data){var S=w.validateSchema;o+=" var "+b+" = RULES.custom['"+t+"'].definition; var "+(C="keywordValidate"+a)+" = "+b+".validate;"}else{if(!(_=e.useCustomRule(this,u,e.schema,e)))return;i="validate.schema"+c,C=_.code,m=w.compile,g=w.inline,y=w.macro}var x=C+".errors",E="i"+a,P="ruleErr"+a,R=w.async;if(R&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(o+=x+" = null;"),o+="var "+p+" = errors;var "+d+";",v&&w.$data&&(k+="}",o+=" if ("+i+" === undefined) { "+d+" = true; } else { ",S&&(k+="}",o+=" "+d+" = "+b+".validateSchema("+i+"); if ("+d+") { ")),g)o+=w.statements?" "+_.validate+" ":" "+d+" = "+_.validate+"; ";else if(y){var I=e.util.copy(e);k="",I.level++;var O="valid"+I.level;I.schema=_.validate,I.schemaPath="";var M=e.compositeRule;e.compositeRule=I.compositeRule=!0;var D=e.validate(I).replace(/validate\.schema/g,C);e.compositeRule=I.compositeRule=M,o+=" "+D}else{(L=L||[]).push(o),o="",o+="  "+C+".call( ",o+=e.opts.passContext?"this":"self",o+=m||!1===w.schema?" , "+f+" ":" , "+i+" , "+f+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var T=s?"data"+(s-1||""):"parentData",A=s?e.dataPathArr[s]:"parentDataProperty",V=o+=" , "+T+" , "+A+" , rootData )  ";o=L.pop(),!1===w.errors?(o+=" "+d+" = ",R&&(o+="await "),o+=V+"; "):o+=R?" var "+(x="customErrors"+a)+" = null; try { "+d+" = await "+V+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+x+" = e.errors; else throw e; } ":" "+x+" = null; "+d+" = "+V+"; "}if(w.modifying&&(o+=" if ("+T+") "+f+" = "+T+"["+A+"];"),o+=""+k,w.valid)h&&(o+=" if (true) { ");else{var L;o+=" if ( ",void 0===w.valid?(o+=" !",o+=y?""+O:""+d):o+=" "+!w.valid+" ",n=this.keyword,(L=L||[]).push(o+=") { "),(L=L||[]).push(o=""),o="",!1!==e.createErrors?(o+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ";var F=o;o=L.pop();var j=o+=!e.compositeRule&&h?e.async?" throw new ValidationError(["+F+"]); ":" validate.errors = ["+F+"]; return false; ":" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";o=L.pop(),g?w.errors?"full"!=w.errors&&(o+="  for (var "+E+"="+p+"; "+E+"<errors; "+E+"++) { var "+P+" = vErrors["+E+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(o+=" "+P+".schema = "+i+"; "+P+".data = "+f+"; "),o+=" } "):!1===w.errors?o+=" "+j+" ":(o+=" if ("+p+" == errors) { "+j+" } else {  for (var "+E+"="+p+"; "+E+"<errors; "+E+"++) { var "+P+" = vErrors["+E+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(o+=" "+P+".schema = "+i+"; "+P+".data = "+f+"; "),o+=" } } "):y?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(o+=e.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; ")):!1===w.errors?o+=" "+j+" ":(o+=" if (Array.isArray("+x+")) { if (vErrors === null) vErrors = "+x+"; else vErrors = vErrors.concat("+x+"); errors = vErrors.length;  for (var "+E+"="+p+"; "+E+"<errors; "+E+"++) { var "+P+" = vErrors["+E+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+";  "+P+'.schemaPath = "'+l+'";  ',e.opts.verbose&&(o+=" "+P+".schema = "+i+"; "+P+".data = "+f+"; "),o+=" } } else { "+j+" } "),o+=" } ",h&&(o+=" else { ")}return o}},"d+r/":function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s,i+="if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || ");var d=t,p=p||[];p.push(i+=" Object.keys("+h+").length "+("maxProperties"==t?">":"<")+" "+n+") { "),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=f?"' + "+n+" + '":""+s,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var v=i;return i=p.pop(),i+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},"d17/":function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,i=0;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r}},eDuk:function(e,t,r){"use strict";var n=r("jQLo"),i=r("qXHa"),o=r("6pwk"),a=r("ugD5"),s=r("9x6x"),u=r("n+SQ"),c=r("wXyd"),l=r("ZsDt"),h=r("+9rK");e.exports=g,g.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var i=r(t);return!0!==r.$async&&(this.errors=r.errors),i},g.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},g.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,r,n);return this}var a=this._getId(e);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return k(this,t=i.normalizeId(t||a)),this._schemas[t]=this._addSchema(e,r,n,!0),this},g.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},g.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(p)?p:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return n},g.prototype.getSchema=function(e){var t=y(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=i.schema.call(e,{schema:{}},t);if(r){var o=r.schema,s=r.root,u=r.baseId,c=n.call(e,o,s,void 0,u);return e._fragments[t]=new a({ref:t,fragment:!0,schema:o,root:s,baseId:u,validate:c}),c}}(this,e)}},g.prototype.removeSchema=function(e){if(e instanceof RegExp)return _(this,this._schemas,e),_(this,this._refs,e),this;switch(typeof e){case"undefined":return _(this,this._schemas),_(this,this._refs),this._cache.clear(),this;case"string":var t=y(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var o=this._getId(e);o&&(o=i.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},g.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},g.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,i="",o=0;o<e.length;o++){var a=e[o];a&&(i+=n+a.dataPath+" "+a.message+r)}return i.slice(0,-r.length)},g.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,s=o?o(e):e,u=this._cache.get(s);if(u)return u;n=n||!1!==this._opts.addUsedSchema;var c=i.normalizeId(this._getId(e));c&&n&&k(this,c);var l,h=!1!==this._opts.validateSchema&&!t;h&&!(l=c&&c==i.normalizeId(e.$schema))&&this.validateSchema(e,!0);var f=i.ids.call(this,e),d=new a({id:c,schema:e,localRefs:f,cacheKey:s,meta:r});return"#"!=c[0]&&n&&(this._refs[c]=d),this._cache.put(s,d),h&&l&&this.validateSchema(e,!0),d},g.prototype._compile=function(e,t){if(e.compiling)return e.validate=o,o.schema=e.schema,o.errors=null,o.root=t||o,!0===e.schema.$async&&(o.$async=!0),o;var r,i;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{i=n.call(this,e.schema,t,e.localRefs)}catch(a){throw delete e.validate,a}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function o(){var t=e.validate,r=t.apply(this,arguments);return o.errors=t.errors,r}},g.prototype.compileAsync=r("sagP");var f=r("//Jx");g.prototype.addKeyword=f.add,g.prototype.getKeyword=f.get,g.prototype.removeKeyword=f.remove,g.prototype.validateKeyword=f.validate;var d=r("iZoB");g.ValidationError=d.Validation,g.MissingRefError=d.MissingRef,g.$dataMetaSchema=l;var p="http://json-schema.org/draft-07/schema",v=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],m=["/properties"];function g(e){if(!(this instanceof g))return new g(e);e=this._opts=h.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:S,warn:S,error:S};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=u(e.format),this._cache=e.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function(e){switch(e.schemaId){case"auto":return w;case"id":return C;default:return b}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=s),this._metaOpts=function(e){for(var t=h.copy(e._opts),r=0;r<v.length;r++)delete t[v[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats)e.addFormat(t,e._opts.formats[t])}(this),function(e){var t;if(e._opts.$data&&(t=r("RsDv"),e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var n=r("bnbC");e._opts.$data&&(n=l(n,m)),e.addMetaSchema(n,p,!0),e._refs["http://json-schema.org/schema"]=p}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function y(e,t){return t=i.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function _(e,t,r){for(var n in t){var i=t[n];i.meta||r&&!r.test(n)||(e._cache.del(i.cacheKey),delete t[n])}}function C(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function b(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function w(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function k(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function S(){}},eXaU:function(e,t,r){"use strict";var n=r("bnbC");e.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},eY4P:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e),p="";d.level++;var v="valid"+d.level,m="i"+i,g=d.dataLevel=e.dataLevel+1,y="data"+g,_=e.baseId;if(n+="var "+f+" = errors;var "+h+";",Array.isArray(a)){var C=e.schema.additionalItems;if(!1===C){n+=" "+h+" = "+l+".length <= "+a.length+"; ";var b=u;u=e.errSchemaPath+"/additionalItems";var w=w||[];w.push(n+="  if (!"+h+") {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+a.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var k=n;n=w.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+k+"]); ":" validate.errors = ["+k+"]; return false; ":" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u=b,c&&(p+="}",n+=" else { ")}var S=a;if(S)for(var x,E=-1,P=S.length-1;E<P;)if(x=S[E+=1],e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0:e.util.schemaHasRules(x,e.RULES.all)){n+=" "+v+" = true; if ("+l+".length > "+E+") { ";var R=l+"["+E+"]";d.schema=x,d.schemaPath=s+"["+E+"]",d.errSchemaPath=u+"/"+E,d.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0),d.dataPathArr[g]=E;var I=e.validate(d);d.baseId=_,e.util.varOccurences(I,y)<2?n+=" "+e.util.varReplace(I,y,R)+" ":n+=" var "+y+" = "+R+"; "+I+" ",n+=" }  ",c&&(n+=" if ("+v+") { ",p+="}")}"object"==typeof C&&(e.opts.strictKeywords?"object"==typeof C&&Object.keys(C).length>0:e.util.schemaHasRules(C,e.RULES.all))&&(d.schema=C,d.schemaPath=e.schemaPath+".additionalItems",d.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+v+" = true; if ("+l+".length > "+a.length+") {  for (var "+m+" = "+a.length+"; "+m+" < "+l+".length; "+m+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0),R=l+"["+m+"]",d.dataPathArr[g]=m,I=e.validate(d),d.baseId=_,e.util.varOccurences(I,y)<2?n+=" "+e.util.varReplace(I,y,R)+" ":n+=" var "+y+" = "+R+"; "+I+" ",c&&(n+=" if (!"+v+") break; "),n+=" } }  ",c&&(n+=" if ("+v+") { ",p+="}"))}else(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all))&&(d.schema=a,d.schemaPath=s,d.errSchemaPath=u,n+="  for (var "+m+" = 0; "+m+" < "+l+".length; "+m+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0),R=l+"["+m+"]",d.dataPathArr[g]=m,I=e.validate(d),d.baseId=_,e.util.varOccurences(I,y)<2?n+=" "+e.util.varReplace(I,y,R)+" ":n+=" var "+y+" = "+R+"; "+I+" ",c&&(n+=" if (!"+v+") break; "),n+=" }");return c&&(n+=" "+p+" if ("+f+" == errors) {"),e.util.cleanUpCode(n)}},fCiX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("s26e");t.ButtplugDeviceWriteOptions=function(){return function e(t){_classCallCheck(this,e),this.Endpoint=n.Endpoints.Tx,this.WriteWithResponse=!1,Object.assign(this,t)}}()},fouG:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("AdGg"),o=r("o4Wz"),a=r("s26e"),s=r("q+Aq");t.WebBluetoothDevice=function(e){function t(e,r){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,r.name,r.id)))._deviceConfig=e,o._device=r,o._notificationHandlers=new Map,o._characteristics=new Map,o.Connect=function(){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n,o,s,u,c,l,h,f,d,p,v,m,g,y,_,C,b,w,k,S,x,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._logger.Debug("WebBluetoothDevice: ".concat(this.constructor.name," connecting")),this._device.addEventListener("gattserverdisconnected",this.OnDisconnect),e.next=4,this._device.gatt.connect();case 4:this._server=e.sent,t=!0,r=!1,n=void 0,e.prev=8,o=this._deviceConfig.Services[Symbol.iterator]();case 10:if(t=(s=o.next()).done){e.next=95;break}if(u=_slicedToArray(s.value,2),c=u[0],l=u[1],h=void 0,e.prev=13,e.prev=14,this._device.hasService(c)){e.next=17;break}return e.abrupt("continue",92);case 17:e.next=21;break;case 19:e.prev=19,e.t0=e.catch(14);case 21:return e.next=23,this._server.getPrimaryService(c);case 23:h=e.sent,e.next=30;break;case 26:return e.prev=26,e.t1=e.catch(13),this._logger.Debug("Cannot find service ".concat(c," on ").concat(this._device.name,", continuing search: ").concat(e.t1)),e.abrupt("continue",92);case 30:if(0===l.size){e.next=63;break}f=!0,d=!1,p=void 0,e.prev=34,v=l[Symbol.iterator]();case 36:if(f=(m=v.next()).done){e.next=47;break}return g=_slicedToArray(m.value,2),y=g[0],_=g[1],e.t2=this,e.t3=a.GetEndpoint(y),e.next=42,h.getCharacteristic(_);case 42:e.t4=e.sent,e.t2.SetNewCharacteristic.call(e.t2,e.t3,e.t4);case 44:f=!0,e.next=36;break;case 47:e.next=53;break;case 49:e.prev=49,e.t5=e.catch(34),d=!0,p=e.t5;case 53:e.prev=53,e.prev=54,f||null==v.return||v.return();case 56:if(e.prev=56,!d){e.next=59;break}throw p;case 59:return e.finish(56);case 60:return e.finish(53);case 61:e.next=92;break;case 63:return C=[],e.prev=64,e.next=67,h.getCharacteristics();case 67:C=e.sent,e.next=73;break;case 70:throw e.prev=70,e.t6=e.catch(64),i.ButtplugException.LogAndError(i.ButtplugDeviceException,this._logger,"getCharacteristics not implemented on this platform, cannot connect to ".concat(this._device.name));case 73:for(b=!0,w=!1,k=void 0,e.prev=76,S=C[Symbol.iterator]();!(b=(x=S.next()).done);b=!0)(E=x.value).properties.write||E.properties.writeWithoutResponse||E.properties.reliableWrite?this.SetNewCharacteristic(a.Endpoints.Tx,E):(E.properties.read||E.properties.broadcast||E.properties.notify||E.properties.indicate)&&this.SetNewCharacteristic(a.Endpoints.Rx,E);e.next=84;break;case 80:e.prev=80,e.t7=e.catch(76),w=!0,k=e.t7;case 84:e.prev=84,e.prev=85,b||null==S.return||S.return();case 87:if(e.prev=87,!w){e.next=90;break}throw k;case 90:return e.finish(87);case 91:return e.finish(84);case 92:t=!0,e.next=10;break;case 95:e.next=101;break;case 97:e.prev=97,e.t8=e.catch(8),r=!0,n=e.t8;case 101:e.prev=101,e.prev=102,t||null==o.return||o.return();case 104:if(e.prev=104,!r){e.next=107;break}throw n;case 107:return e.finish(104);case 108:return e.finish(101);case 109:if(0!==this._characteristics.size){e.next=111;break}throw new i.ButtplugDeviceException("No usable characteristics found for ".concat(this._device.name));case 111:case"end":return e.stop()}}),e,this,[[8,97,101,109],[13,26],[14,19],[34,49,53,61],[54,,56,60],[64,70],[76,80,84,92],[85,,87,91],[102,,104,108]])})))},o.Disconnect=function(){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=!1,n=void 0,e.prev=3,i=this._notificationHandlers.keys()[Symbol.iterator]();case 5:if(t=(o=i.next()).done){e.next=12;break}return a=o.value,e.next=9,this.Unsubscribe(new s.ButtplugDeviceReadOptions({Endpoint:a}));case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),r=!0,n=e.t0;case 18:e.prev=18,e.prev=19,t||null==i.return||i.return();case 21:if(e.prev=21,!r){e.next=24;break}throw n;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this._server.disconnect();case 27:case"end":return e.stop()}}),e,this,[[3,14,18,26],[19,,21,25]])})))},o.OnDisconnect=function(){o._logger.Debug("WebBluetoothDevice: ".concat(o.constructor.name," disconnecting")),o._device.removeEventListener("gattserverdisconnected",o.OnDisconnect),o.emit("deviceremoved")},o.WriteValueInternal=function(e,t){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.CheckForCharacteristic(t.Endpoint),n=this._characteristics.get(t.Endpoint),r.next=4,n.writeValue(e);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r,this)})))},o.ReadValueInternal=function(e){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.CheckForCharacteristic(e.Endpoint),r=this._characteristics.get(e.Endpoint),t.t0=Buffer,t.next=5,r.readValue();case 5:return t.t1=t.sent.buffer,t.abrupt("return",t.t0.from.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t,this)})))},o.SubscribeToUpdatesInternal=function(e){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.CheckForCharacteristic(e.Endpoint),!this._notificationHandlers.has(e.Endpoint)){t.next=2;break}throw i.ButtplugException.LogAndError(i.ButtplugDeviceException,this._logger,"".concat(this._device.name," already subscribed to updates on characteristic ").concat(e.Endpoint));case 2:return r=this._characteristics.get(e.Endpoint),this._logger.Trace("WebBluetoothDevice: ".concat(this.constructor.name," subscribing to updates from ").concat(r.uuid)),t.next=6,r.startNotifications();case 6:this._notificationHandlers.set(e.Endpoint,(function(t){n.CharacteristicValueChanged(t,e.Endpoint)})),r.addEventListener("characteristicvaluechanged",this._notificationHandlers.get(e.Endpoint));case 8:case"end":return t.stop()}}),t,this)})))},o.Unsubscribe=function(e){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.CheckForCharacteristic(e.Endpoint),this._notificationHandlers.has(e.Endpoint)){t.next=2;break}throw i.ButtplugException.LogAndError(i.ButtplugDeviceException,this._logger,"".concat(this._device.name," not subscribed to updates on characteristic ").concat(e.Endpoint));case 2:return r=this._characteristics.get(e.Endpoint),this._logger.Trace("WebBluetoothDevice: ".concat(this.constructor.name," unsubscribing to updates from ").concat(r.uuid)),r.removeEventListener("characteristicvaluechanged",this._notificationHandlers.get(e.Endpoint)),this._notificationHandlers.delete(e.Endpoint),t.next=8,r.stopNotifications();case 8:case"end":return t.stop()}}),t,this)})))},o.CharacteristicValueChanged=function(e,t){var r=e.target.value,n=Buffer.from(r.buffer,r.byteOffset,r.byteLength);o.UpdateReceived(t,n)},o}return _inherits(t,e),_createClass(t,[{key:"CheckForCharacteristic",value:function(e){if(!this._characteristics.has(e))throw i.ButtplugException.LogAndError(i.ButtplugDeviceException,this._logger,"Characteristic ".concat(e," does not exist on device ").concat(this._device.name,"."))}},{key:"SetNewCharacteristic",value:function(e,t){if(this._characteristics.has(e))throw new i.ButtplugDeviceException("Endpoint ".concat(e," already defined on ").concat(this._device.name));this._characteristics.set(e,t)}},{key:"Connected",get:function(){return this._server.connected}}]),t}(o.ButtplugDeviceImpl)},hsbB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("+qE3"),i=r("/oyJ"),o=r("KMqf"),a=r("36dr"),s=r("bTiy");t.TestDeviceSubtypeManager=function(e){function t(){var e;_classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._logger=o.ButtplugLogger.Logger,e._isScanning=!1;var r=new s.TestDeviceImpl("Test Vibration Device");e._testVibrationProtocol=new i.TestDeviceProtocol(r.Name,r,!0,!1,!1),e._testVibrationDevice=new a.ButtplugDevice(e._testVibrationProtocol,r);var n=new s.TestDeviceImpl("Test Linear Device");e._testLinearProtocol=new i.TestDeviceProtocol(n.Name,n,!1,!0,!1),e._testLinearDevice=new a.ButtplugDevice(e._testLinearProtocol,n);var u=new s.TestDeviceImpl("Test Rotation Device");return e._testRotationProtocol=new i.TestDeviceProtocol(u.Name,u,!1,!1,!0),e._testRotationDevice=new a.ButtplugDevice(e._testRotationProtocol,u),e}return _inherits(t,e),_createClass(t,[{key:"SetLogger",value:function(e){this._logger=e}},{key:"ConnectVibrationDevice",value:function(){this._logger.Debug("TestDeviceManager: Connecting Vibration Device"),this.emit("deviceadded",this._testVibrationDevice)}},{key:"ConnectLinearDevice",value:function(){this._logger.Debug("TestDeviceManager: Connecting Linear Device"),this.emit("deviceadded",this._testLinearDevice)}},{key:"ConnectRotationDevice",value:function(){this._logger.Debug("TestDeviceManager: Connecting Rotation Device"),this.emit("deviceadded",this._testRotationDevice)}},{key:"StartScanning",value:function(){var e=this;this._logger.Debug("TestDeviceManager: Starting Scan"),this._isScanning=!0,setTimeout((function(){e.ConnectVibrationDevice(),e.ConnectLinearDevice(),e.ConnectRotationDevice()}),50),setTimeout((function(){return e.StopScanning()}),100)}},{key:"StopScanning",value:function(){this._logger.Debug("TestDeviceManager: Stopping Scan"),this._isScanning=!1,this.emit("scanningfinished")}},{key:"VibrationDevice",get:function(){return this._testVibrationDevice}},{key:"LinearDevice",get:function(){return this._testLinearDevice}},{key:"RotationDevice",get:function(){return this._testRotationDevice}},{key:"VibrationProtocol",get:function(){return this._testVibrationProtocol}},{key:"LinearProtocol",get:function(){return this._testLinearProtocol}},{key:"RotationProtocol",get:function(){return this._testRotationProtocol}},{key:"IsScanning",get:function(){return this._isScanning}}]),t}(n.EventEmitter)},iZoB:function(e,t,r){"use strict";var n=r("qXHa");function i(e,t,r){this.message=r||i.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function o(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:o((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:o(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},ialn:function(e,t,r){"use strict";var n=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,i,o,a,s,u,c,l,h){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var f in r(o,a,s,u,c,l,h),o){var d=o[f];if(Array.isArray(d)){if(f in n.arrayKeywords)for(var p=0;p<d.length;p++)e(t,r,i,d[p],a+"/"+f+"/"+p,s,a,f,o,p)}else if(f in n.propsKeywords){if(d&&"object"==typeof d)for(var v in d)e(t,r,i,d[v],a+"/"+f+"/"+v.replace(/~/g,"~0").replace(/\//g,"~1"),s,a,f,o,v)}else(f in n.keywords||t.allKeys&&!(f in n.skipKeywords))&&e(t,r,i,d,a+"/"+f,s,a,f,o)}i(o,a,s,u,c,l,h)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},jQLo:function(e,t,r){"use strict";var n=r("qXHa"),i=r("+9rK"),o=r("iZoB"),a=r("9x6x"),s=r("1QhW"),u=i.ucs2length,c=r("aUsF"),l=o.Validation;function h(e,t,r){var n=d.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(this._compilations[n=this._compilations.length]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function f(e,t,r){var n=d.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function d(e,t,r){for(var n=0;n<this._compilations.length;n++){var i=this._compilations[n];if(i.schema==e&&i.root==t&&i.baseId==r)return n}return-1}function p(e,t){return"var pattern"+e+" = new RegExp("+i.toQuotedString(t[e])+");"}function v(e){return"var default"+e+" = defaults["+e+"];"}function m(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function g(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,d,_){var C=this,b=this._opts,w=[void 0],k={},S=[],x={},E=[],P={},R=[],I=h.call(this,t,r=r||{schema:t,refVal:w,refs:k},_),O=this._compilations[I.index];if(I.compiling)return O.callValidate=function e(){var t=O.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var M=this._formats,D=this.RULES;try{var T=V(t,r,d,_);O.validate=T;var A=O.callValidate;return A&&(A.schema=T.schema,A.errors=null,A.refs=T.refs,A.refVal=T.refVal,A.root=T.root,A.$async=T.$async,b.sourceCode&&(A.source=T.source)),T}finally{f.call(this,t,r,_)}function V(t,a,h,f){var d=!a||a&&a.schema==t;if(a.schema!=r.schema)return e.call(C,t,a,h,f);var _,x=!0===t.$async,P=s({isTop:!0,schema:t,isRoot:d,baseId:f,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:D,validate:s,util:i,resolve:n,resolveRef:L,usePattern:N,useDefault:U,useCustomRule:B,opts:b,formats:M,logger:C.logger,self:C});P=y(w,m)+y(S,p)+y(E,v)+y(R,g)+P,b.processCode&&(P=b.processCode(P));try{_=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",P)(C,D,M,r,w,E,R,c,u,l),w[0]=_}catch(I){throw C.logger.error("Error compiling schema, function code:",P),I}return _.schema=t,_.errors=null,_.refs=k,_.refVal=w,_.root=d?_:a,x&&(_.$async=!0),!0===b.sourceCode&&(_.source={code:P,patterns:S,defaults:E}),_}function L(t,i,o){i=n.url(t,i);var a,s,u=k[i];if(void 0!==u)return j(a=w[u],s="refVal["+u+"]");if(!o&&r.refs){var c=r.refs[i];if(void 0!==c)return j(a=r.refVal[c],s=F(i,a))}s=F(i);var l=n.call(C,V,r,i);if(void 0===l){var h=d&&d[i];h&&(l=n.inlineRef(h,b.inlineRefs)?h:e.call(C,h,r,d,t))}if(void 0!==l)return function(e,t){w[k[e]]=t}(i,l),j(l,s);!function(e){delete k[e]}(i)}function F(e,t){var r=w.length;return w[r]=t,k[e]=r,"refVal"+r}function j(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function N(e){var t=x[e];return void 0===t&&(t=x[e]=S.length,S[t]=e),"pattern"+t}function U(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return i.toQuotedString(e);case"object":if(null===e)return"null";var t=a(e),r=P[t];return void 0===r&&(r=P[t]=E.length,E[r]=e),"default"+r}}function B(e,t,r,n){if(!1!==C._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var o=e.definition.validateSchema;if(o&&!o(t)){var a="keyword schema is invalid: "+C.errorsText(o.errors);if("log"!=C._opts.validateSchema)throw new Error(a);C.logger.error(a)}}var s,u=e.definition.compile,c=e.definition.inline,l=e.definition.macro;if(u)s=u.call(C,t,r,n);else if(l)s=l.call(C,t,r,n),!1!==b.validateSchema&&C.validateSchema(s,!0);else if(c)s=c.call(C,n,e.keyword,t,r);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var h=R.length;return R[h]=s,{code:"customRule"+h,validate:s}}}},kFR6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r("+qE3");!function(e){e[e.Off=0]="Off",e[e.Fatal=1]="Fatal",e[e.Error=2]="Error",e[e.Warn=3]="Warn",e[e.Info=4]="Info",e[e.Debug=5]="Debug",e[e.Trace=6]="Trace"}(n=t.ButtplugLogLevel||(t.ButtplugLogLevel={}));var o=function(){function e(t,r){_classCallCheck(this,e);var n=new Date,i=n.getHours(),o=n.getMinutes(),a=n.getSeconds();this.timestamp="".concat(i,":").concat(o,":").concat(a),this.logMessage=t,this.logLevel=r}return _createClass(e,[{key:"Message",get:function(){return this.logMessage}},{key:"LogLevel",get:function(){return this.logLevel}},{key:"Timestamp",get:function(){return this.timestamp}},{key:"FormattedMessage",get:function(){return"".concat(n[this.logLevel]," : ").concat(this.timestamp," : ").concat(this.logMessage)}}]),e}();t.LogMessage=o;var a=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).maximumConsoleLogLevel=n.Off,e.maximumEventLogLevel=n.Off,e}return _inherits(t,e),_createClass(t,[{key:"Fatal",value:function(e){this.AddLogMessage(e,n.Fatal)}},{key:"Error",value:function(e){this.AddLogMessage(e,n.Error)}},{key:"Warn",value:function(e){this.AddLogMessage(e,n.Warn)}},{key:"Info",value:function(e){this.AddLogMessage(e,n.Info)}},{key:"Debug",value:function(e){this.AddLogMessage(e,n.Debug)}},{key:"Trace",value:function(e){this.AddLogMessage(e,n.Trace)}},{key:"AddLogMessage",value:function(e,t){if(!(t>this.maximumEventLogLevel&&t>this.maximumConsoleLogLevel)){var r=new o(e,t);t<=this.maximumConsoleLogLevel&&console.log(r.FormattedMessage),t<=this.maximumEventLogLevel&&this.emit("log",r)}}},{key:"MaximumConsoleLogLevel",get:function(){return this.maximumConsoleLogLevel},set:function(e){this.maximumConsoleLogLevel=e}},{key:"MaximumEventLogLevel",get:function(){return this.maximumEventLogLevel},set:function(e){this.maximumEventLogLevel=e}}],[{key:"Logger",get:function(){return void 0===t.sLogger&&(t.sLogger=new t),this.sLogger}}]),t}(i.EventEmitter);a.sLogger=void 0,t.ButtplugLogger=a},kO1a:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=r("FUtr");t.Motorbunny=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Motorbunny",e))).HandleVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Speeds.length){t.next=2;break}throw new o.ButtplugDeviceException("Motorbunny devices require VibrateCmd to have 1 speed command, "+"".concat(e.Speeds.length," sent."),e.Id);case 2:return t.next=4,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))},r.HandleRotateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Rotations.length){t.next=2;break}throw new o.ButtplugDeviceException("Motorbunny devices require RotateCmd to have 1 speed command, "+"".concat(e.Rotations.length," sent."),e.Id);case 2:if(!((r=Math.floor(255*e.Rotations[0].Speed))<5)){t.next=8;break}return n=Buffer.from([160,0,0,0,0,236]),t.next=7,this._device.WriteValue(n);case 7:return t.abrupt("return",new i.Ok(e.Id));case 8:for(a=[],s=0;s<7;++s)a=a.concat([e.Rotations[0].Clockwise?42:41,r]);return u=255&a.reduce((function(e,t){return e+t})),a=[175].concat(a).concat([u,236]),t.next=14,this._device.WriteValue(Buffer.from(a));case 14:return t.abrupt("return",new i.Ok(e.Id));case 15:case"end":return t.stop()}}),t,this)})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},r.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=Math.floor(255*e.Speed))<5)){t.next=6;break}return n=Buffer.from([240,0,0,0,0,236]),t.next=5,this._device.WriteValue(n);case 5:return t.abrupt("return",new i.Ok(e.Id));case 6:for(o=[],a=0;a<7;++a)o=o.concat([r,20]);return s=255&o.reduce((function(e,t){return e+t})),o=[255].concat(o).concat([s,236]),t.next=12,this._device.WriteValue(Buffer.from(o));case 12:return t.abrupt("return",new i.Ok(e.Id));case 13:case"end":return t.stop()}}),t,this)})))},r.MsgFuncs.set(i.StopDeviceCmd,r.HandleStopDeviceCmd),r.MsgFuncs.set(i.SingleMotorVibrateCmd,r.HandleSingleMotorVibrateCmd),r.MsgFuncs.set(i.VibrateCmd,r.HandleVibrateCmd),r.MsgFuncs.set(i.RotateCmd,r.HandleRotateCmd),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return{VibrateCmd:{FeatureCount:1},RotateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}]),t}(a.ButtplugDeviceProtocol)},mNvP:function(e,t){var r;!function(e){!function(t){var r="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=i(e);function i(e,t){return function(r,n){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0===r.Reflect?r.Reflect=e:n=i(r.Reflect,n),function(e){var t=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!o&&!a,u={create:o?function(){return M(Object.create(null))}:a?function(){return M({__proto__:null})}:function(){return M({})},has:s?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:s?function(e,r){return t.call(e,r)?e[r]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,o)},t.prototype.entries=function(){return new r(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function o(e,t){return t}function a(e,t){return[e,t]}}():Map,f=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}():Set,d=new(l||"function"!=typeof WeakMap?function(){var e=u.create(),r=n();return function(){function e(){this._key=n()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=n()},e}();function n(){var t;do{t="@@WeakMap@@"+a()}while(u.has(e,t));return e[t]=!0,t}function i(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:u.create()})}return e[r]}function o(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function a(){var e="function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(16)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(16)):o(new Uint8Array(16),16):o(new Array(16),16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",r=0;r<16;++r){var n=e[r];4!==r&&6!==r&&8!==r||(t+="-"),n<16&&(t+="0"),t+=n.toString(16).toLowerCase()}return t}}():WeakMap);function p(e,t,r){var n=d.get(e);if(C(n)){if(!r)return;n=new h,d.set(e,n)}var i=n.get(t);if(C(i)){if(!r)return;i=new h,n.set(t,i)}return i}function v(e,t,r){var n=p(t,r,!1);return!C(n)&&!!n.has(e)}function m(e,t,r){var n=p(t,r,!1);if(!C(n))return n.get(e)}function g(e,t,r,n){p(r,n,!0).set(e,t)}function y(e,t){var r=[],n=p(e,t,!1);if(C(n))return r;for(var o=function(e){var t=P(e,i);if(!x(t))throw new TypeError;var r=t.call(e);if(!w(r))throw new TypeError;return r}(n.keys()),a=0;;){var s=R(o);if(!s)return r.length=a,r;var u=s.value;try{r[a]=u}catch(c){try{I(o)}finally{throw c}}a++}}function _(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function C(e){return void 0===e}function b(e){return null===e}function w(e){return"object"==typeof e?null!==e:"function"==typeof e}function k(e){var t=function(e,t){switch(_(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=P(e,n);if(void 0!==r){var i=r.call(e,"string");if(w(i))throw new TypeError;return i}return function(e,t){var r,n,i=e.toString;if(x(i)&&!w(n=i.call(e)))return n;if(x(r=e.valueOf)&&!w(n=r.call(e)))return n;throw new TypeError}(e)}(e);return"symbol"==typeof t?t:function(e){return""+e}(t)}function S(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"function"==typeof e}function E(e){return"function"==typeof e}function P(e,t){var r=e[t];if(null!=r){if(!x(r))throw new TypeError;return r}}function R(e){var t=e.next();return!t.done&&t}function I(e){var t=e.return;t&&t.call(e)}function O(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i?t:i===e?t:i}function M(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,r,n){if(C(r)){if(!S(e))throw new TypeError;if(!E(t))throw new TypeError;return function(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!C(n)&&!b(n)){if(!E(n))throw new TypeError;t=n}}return t}(e,t)}if(!S(e))throw new TypeError;if(!w(t))throw new TypeError;if(!w(n)&&!C(n)&&!b(n))throw new TypeError;return b(n)&&(n=void 0),function(e,t,r,n){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,r,n);if(!C(o)&&!b(o)){if(!w(o))throw new TypeError;n=o}}return n}(e,t,r=k(r),n)})),e("metadata",(function(e,t){return function(r,n){if(!w(r))throw new TypeError;if(!C(n)&&!function(e){switch(_(e)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;g(e,t,r,n)}})),e("defineMetadata",(function(e,t,r,n){if(!w(r))throw new TypeError;return C(n)||(n=k(n)),g(e,t,r,n)})),e("hasMetadata",(function(e,t,r){if(!w(t))throw new TypeError;return C(r)||(r=k(r)),function e(t,r,n){if(v(t,r,n))return!0;var i=O(r);return!b(i)&&e(t,i,n)}(e,t,r)})),e("hasOwnMetadata",(function(e,t,r){if(!w(t))throw new TypeError;return C(r)||(r=k(r)),v(e,t,r)})),e("getMetadata",(function(e,t,r){if(!w(t))throw new TypeError;return C(r)||(r=k(r)),function e(t,r,n){if(v(t,r,n))return m(t,r,n);var i=O(r);return b(i)?void 0:e(t,i,n)}(e,t,r)})),e("getOwnMetadata",(function(e,t,r){if(!w(t))throw new TypeError;return C(r)||(r=k(r)),m(e,t,r)})),e("getMetadataKeys",(function(e,t){if(!w(e))throw new TypeError;return C(t)||(t=k(t)),function e(t,r){var n=y(t,r),i=O(t);if(null===i)return n;var o=e(i,r);if(o.length<=0)return n;if(n.length<=0)return o;for(var a=new f,s=[],u=0,c=n;u<c.length;u++)a.has(d=c[u])||(a.add(d),s.push(d));for(var l=0,h=o;l<h.length;l++){var d;a.has(d=h[l])||(a.add(d),s.push(d))}return s}(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!w(e))throw new TypeError;return C(t)||(t=k(t)),y(e,t)})),e("deleteMetadata",(function(e,t,r){if(!w(t))throw new TypeError;C(r)||(r=k(r));var n=p(t,r,!1);if(C(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var i=d.get(t);return i.delete(r),i.size>0||(d.delete(t),!0)}))}(n)}()}(r||(r={}))},mQYA:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s,i+="if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=!1===e.opts.unicode?" "+h+".length ":" ucs2length("+h+") ";var d=t,p=p||[];p.push(i+=" "+("maxLength"==t?">":"<")+" "+n+") { "),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=f?"' + "+n+" + '":""+s,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var v=i;return i=p.pop(),i+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},"n+SQ":function(e,t,r){"use strict";var n=r("+9rK"),i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,s=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,u=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,l=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,h=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,f=/^(?:\/(?:[^~/]|~0|~1)*)*$/,d=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,p=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function v(e){return n.copy(v[e="full"==e?"full":"fast"])}function m(e){var t=e.match(i);if(!t)return!1;var r,n=+t[2],a=+t[3];return n>=1&&n<=12&&a>=1&&a<=(2!=n||(r=+t[1])%4!=0||r%100==0&&r%400!=0?o[n]:29)}function g(e,t){var r=e.match(a);if(!r)return!1;var n=r[1],i=r[2],o=r[3];return(n<=23&&i<=59&&o<=59||23==n&&59==i&&60==o)&&(!t||r[5])}e.exports=v,v.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:l,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:b,uuid:h,"json-pointer":f,"json-pointer-uri-fragment":d,"relative-json-pointer":p},v.full={date:m,time:g,"date-time":function(e){var t=e.split(y);return 2==t.length&&m(t[0])&&g(t[1],!0)},uri:function(e){return _.test(e)&&u.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:l,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(e){return e.length<=255&&s.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:b,uuid:h,"json-pointer":f,"json-pointer-uri-fragment":d,"relative-json-pointer":p};var y=/t|\s/i,_=/\/|:/,C=/[^\\]\\Z/;function b(e){if(C.test(e))return!1;try{return new RegExp(e),!0}catch(t){return!1}}},o4Wz:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("kFR6"),o=r("+qE3"),a=r("fCiX"),s=r("q+Aq");t.ButtplugDeviceImpl=function(e){function t(e,r){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._logger=i.ButtplugLogger.Logger,o.WriteValue=function(e,t){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.WriteValueInternal(e,t||new a.ButtplugDeviceWriteOptions);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r,this)})))},o.ReadValue=function(e){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ReadValueInternal(e||new s.ButtplugDeviceReadOptions);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},o.WriteString=function(e,t){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.WriteValue(Buffer.from(e),t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r,this)})))},o.ReadString=function(e){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ReadValue(e);case 2:return t.abrupt("return",t.sent.toString("utf-8"));case 3:case"end":return t.stop()}}),t,this)})))},o.SubscribeToUpdates=function(e){return n(_assertThisInitialized(o),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.SubscribeToUpdatesInternal(e||new s.ButtplugDeviceReadOptions);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},o._name=e,o._address=r,o}return _inherits(t,e),_createClass(t,[{key:"UpdateReceived",value:function(e,t){this.emit("updateReceived",[e,t])}},{key:"Name",get:function(){return this._name}},{key:"Address",get:function(){return this._address}}]),t}(o.EventEmitter)},oF8a:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","title":"Buttplug Message Schema","version":1,"description":"The JSON Protocol format for the Buttplug Protocol.","components":{"Id":{"description":"User-set id for the message. 0 denotes system message and is reserved.","type":"integer","minimum":0,"maximum":4294967295},"SystemId":{"description":"Used for non-direct-reply messages that can only be sent from server to client, using the reserved system message Id of 0.","type":"integer","minimum":0,"maximum":0},"DeviceName":{"description":"Name of the device","type":"string"},"DeviceIndex":{"description":"Index used for referencing the device in device messages.","type":"integer","minimum":0},"IdMessage":{"properties":{"Id":{"$ref":"#/components/Id"}},"additionalProperties":false,"minProperties":1,"maxProperties":1,"required":["Id"]},"DeviceMessages":{"description":"A list of the messages a device will accept on this server implementation.","type":"array","items":{"type":"string","minItems":1}},"DeviceMessagesEx":{"description":"A list of the messages a device will accept on this server implementation.","type":"object","items":{"description":"A list of the messages attributes.","type":"object","properties":{"FeatureCount":{"$ref":"#/components/FeatureCount"}},"additionalProperties":true,"minItems":1}},"SystemIdMessage":{"description":"Message sent by the server that is not in direct reply to a message send from the client, and always uses system Id.","properties":{"Id":{"$ref":"#/components/SystemId"}},"additionalProperties":false,"minProperties":1,"maxProperties":1,"required":["Id"]},"DeviceIndexMessage":{"properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"}},"additionalProperties":false,"minProperties":2,"maxProperties":2,"required":["Id","DeviceIndex"]},"FeatureCount":{"description":"Number of features on device.","type":"integer","minimum":0}},"messages":{"Ok":{"type":"object","description":"Signifies successful processing of the message indicated by the id.","anyOf":[{"$ref":"#/components/IdMessage"}]},"Ping":{"type":"object","description":"Connection keep-alive message.","anyOf":[{"$ref":"#/components/IdMessage"}]},"Error":{"type":"object","description":"Signifies the server encountered an error while processing the message indicated by the id.","properties":{"Id":{"$ref":"#/components/Id"},"ErrorMessage":{"type":"string"},"ErrorCode":{"type":"number","minimum":0,"maximum":4}},"additionalProperties":false,"minProperties":3,"maxProperties":3,"required":["Id","ErrorMessage","ErrorCode"]},"Test":{"type":"object","description":"Used for connection/application testing. Causes server to echo back the string sent. Sending string of \'Error\' will result in a server error. ","properties":{"Id":{"$ref":"#/components/Id"},"TestString":{"description":"String to be echo\'d back from server. Setting this to \'Error\' will cause an error to be thrown.","type":"string"}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","TestString"]},"DeviceList":{"type":"object","description":"List of all available devices known to the system.","properties":{"Id":{"$ref":"#/components/Id"},"Devices":{"description":"Array of device ids and names.","type":"array","items":{"type":"object","properties":{"DeviceName":{"$ref":"#/components/DeviceName"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"DeviceMessages":{"oneOf":[{"$ref":"#/components/DeviceMessages"},{"$ref":"#/components/DeviceMessagesEx"}]}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["DeviceName","DeviceIndex","DeviceMessages"]},"minItems":0}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","Devices"]},"DeviceAdded":{"type":"object","description":"Notifies client that a device of a certain type has been added to the server.","properties":{"Id":{"$ref":"#/components/SystemId"},"DeviceName":{"$ref":"#/components/DeviceName"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"DeviceMessages":{"oneOf":[{"$ref":"#/components/DeviceMessages"},{"$ref":"#/components/DeviceMessagesEx"}]}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceName","DeviceIndex","DeviceMessages"]},"DeviceRemoved":{"type":"object","description":"Notifies client that a device of a certain type has been removed from the server.","anyOf":[{"$ref":"#/components/DeviceIndexMessage"}]},"RequestDeviceList":{"type":"object","description":"Request for the server to send a list of devices to the client.","anyOf":[{"$ref":"#/components/IdMessage"}]},"StartScanning":{"type":"object","description":"Request for the server to start scanning for new devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"StopScanning":{"type":"object","description":"Request for the server to stop scanning for new devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"ScanningFinished":{"type":"object","description":"Server notification to client that scanning has ended.","anyOf":[{"$ref":"#/components/SystemIdMessage"}]},"RequestLog":{"type":"object","description":"Request for server to stream log messages of a certain level to client.","properties":{"Id":{"$ref":"#/components/Id"},"LogLevel":{"description":"Maximum level of log message to receive.","enum":["Off","Fatal","Error","Warn","Info","Debug","Trace"]}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","LogLevel"]},"Log":{"type":"object","description":"Log message from the server.","properties":{"Id":{"$ref":"#/components/SystemId"},"LogLevel":{"description":"Log level of message.","enum":["Off","Fatal","Error","Warn","Info","Debug","Trace"]},"LogMessage":{"description":"Log message from server.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","LogLevel","LogMessage"]},"RequestServerInfo":{"type":"object","description":"Request server version, and relay client name.","properties":{"Id":{"$ref":"#/components/Id"},"ClientName":{"description":"Name of the client software.","type":"string"},"MessageVersion":{"description":"Message template version of the client software.","type":"integer","minimum":0}},"minProperties":2,"maxProperties":3,"additionalProperties":false,"required":["Id","ClientName"]},"ServerInfo":{"type":"object","description":"Server version information, in Major.Minor.Build format.","properties":{"Id":{"$ref":"#/components/Id"},"ServerName":{"description":"Name of the server. Can be 0-length.","type":"string"},"MessageVersion":{"description":"Message template version of the server software.","type":"integer","minimum":0},"MajorVersion":{"description":"Major version of server.","type":"integer","minimum":0},"MinorVersion":{"description":"Minor version of server.","type":"integer","minimum":0},"BuildVersion":{"description":"Build version of server.","type":"integer","minimum":0},"MaxPingTime":{"description":"Maximum time (in milliseconds) the server will wait between ping messages from client before shutting down.","type":"integer","minimum":0}},"minProperties":7,"maxProperties":7,"additionalProperties":false,"required":["Id","MajorVersion","MinorVersion","BuildVersion","MessageVersion","MaxPingTime","ServerName"]},"FleshlightLaunchFW12Cmd":{"type":"object","description":"Sends speed and position command to the Fleshlight Launch Device denoted by the device index.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Speed at which to move to designated position.","type":"integer","minimum":0,"maximum":99},"Position":{"description":"Position to which to move Fleshlight.","type":"integer","minimum":0,"maximum":99}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceIndex","Speed","Position"]},"LovenseCmd":{"type":"object","description":"Sends a command string to a Lovense device. Command string will be verified by sender.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Command to send to Lovense device.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"SingleMotorVibrateCmd":{"type":"object","description":"Sends a vibrate command to a device that supports vibration.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Device vibration speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Speed"]},"RawCmd":{"type":"object","description":"Sends a raw byte array to a device. Should only be used for testing/development.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Raw byte string to send to device.","type":"array","items":{"type":"integer","minimum":0,"maximum":255,"minItems":1}}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"KiirooCmd":{"type":"object","description":"Sends a raw byte string to a Kiiroo Onyx/Pearl device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Command to send to Kiiroo device.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"VorzeA10CycloneCmd":{"type":"object","description":"Sends a raw byte string to a Kiiroo Onyx/Pearl device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Rotation speed command for the Cyclone.","type":"integer","minimum":0,"maximum":100},"Clockwise":{"description":"True for clockwise rotation (in relation to device facing user), false for Counter-clockwise","type":"boolean"}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceIndex","Speed","Clockwise"]},"StopDeviceCmd":{"type":"object","description":"Stops the all actions currently being taken by a device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","DeviceIndex"]},"StopAllDevices":{"type":"object","description":"Stops all actions currently being taken by all connected devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"VibrateCmd":{"type":"object","description":"Sends a vibrate command to a device that supports vibration.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speeds":{"description":"Device vibration speeds (floating point, 0 < x < 1) keyed on vibrator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Vibrator number.","type":"integer","minimum":0},"Speed":{"description":"Vibration speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Index","Speed"]},"minItems":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Speeds"]},"RotateCmd":{"type":"object","description":"Sends a rotate command to a device that supports rotation.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Rotations":{"description":"Device rotation speeds (floating point, 0 < x < 1) keyed on rotator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Rotator number.","type":"integer","minimum":0},"Speed":{"description":"Rotation speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1},"Clockwise":{"description":"Rotation direction (boolean). Not all devices have a concept of actual clockwise.","type":"boolean"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Index","Speed","Clockwise"]},"minItems":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Rotations"]},"LinearCmd":{"type":"object","description":"Sends a linear movement command to a device that supports linear movements.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Vectors":{"description":"Device linear movement times (milliseconds) and positions (floating point, 0 < x < 1) keyed on linear actuator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Linear actuator number.","type":"integer","minimum":0},"Duration":{"description":"Linear movement time in milliseconds.","type":"number","minimum":0},"Position":{"description":"Linear movement position (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Index","Duration","Position"]}}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Vectors"]}},"type":"array","items":{"title":"Messages","description":"One or more messages validated by the Buttplug Message schema list.","properties":{"Ok":{"$ref":"#/messages/Ok"},"Error":{"$ref":"#/messages/Error"},"Ping":{"$ref":"#/messages/Ping"},"Test":{"$ref":"#/messages/Test"},"DeviceList":{"$ref":"#/messages/DeviceList"},"DeviceAdded":{"$ref":"#/messages/DeviceAdded"},"DeviceRemoved":{"$ref":"#/messages/DeviceRemoved"},"RequestDeviceList":{"$ref":"#/messages/RequestDeviceList"},"StopDeviceCmd":{"$ref":"#/messages/StopDeviceCmd"},"StopAllDevices":{"$ref":"#/messages/StopAllDevices"},"StartScanning":{"$ref":"#/messages/StartScanning"},"StopScanning":{"$ref":"#/messages/StopScanning"},"ScanningFinished":{"$ref":"#/messages/ScanningFinished"},"RequestLog":{"$ref":"#/messages/RequestLog"},"Log":{"$ref":"#/messages/Log"},"RequestServerInfo":{"$ref":"#/messages/RequestServerInfo"},"ServerInfo":{"$ref":"#/messages/ServerInfo"},"FleshlightLaunchFW12Cmd":{"$ref":"#/messages/FleshlightLaunchFW12Cmd"},"LovenseCmd":{"$ref":"#/messages/LovenseCmd"},"SingleMotorVibrateCmd":{"$ref":"#/messages/SingleMotorVibrateCmd"},"KiirooCmd":{"$ref":"#/messages/KiirooCmd"},"RawCmd":{"$ref":"#/messages/RawCmd"},"VorzeA10CycloneCmd":{"$ref":"#/messages/VorzeA10CycloneCmd"},"VibrateCmd":{"$ref":"#/messages/VibrateCmd"},"RotateCmd":{"$ref":"#/messages/RotateCmd"},"LinearCmd":{"$ref":"#/messages/LinearCmd"}},"additionalProperties":false,"minProperties":1,"maxProperties":1},"minItems":1,"additionalProperties":false}')},oxZ9:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"WeVibe ".concat(e.Name),e)))._vibratorCount=1,r._eightBitSpeed=!1,r._hasRunCommand=!1,r._vibratorSpeed=[0,0],r.HandleVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,s,u,c,l,h,f,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.Speeds.length<1||e.Speeds.length>this._vibratorCount)){t.next=2;break}throw new o.ButtplugDeviceException("WeVibe devices require VibrateCmd at least "+"".concat(this._vibratorCount," speed commands, ").concat(e.Speeds.length," sent."),e.Id);case 2:for(r=!1,n=!0,a=!1,s=void 0,t.prev=6,u=e.Speeds[Symbol.iterator]();!(n=(c=u.next()).done);n=!0)l=c.value,Math.abs(l.Speed-this._vibratorSpeed[l.Index])>.001&&(r=!0,this._vibratorSpeed[l.Index]=l.Speed);t.next=14;break;case 10:t.prev=10,t.t0=t.catch(6),a=!0,s=t.t0;case 14:t.prev=14,t.prev=15,n||null==u.return||u.return();case 17:if(t.prev=17,!a){t.next=20;break}throw s;case 20:return t.finish(17);case 21:return t.finish(14);case 22:if(r||!this._hasRunCommand){t.next=24;break}return t.abrupt("return",new i.Ok(e.Id));case 24:return this._hasRunCommand=!0,h=Buffer.from([15,3,0,0,0,3,0,0]),f=0,d=0,this._eightBitSpeed?(f=Math.round(12*this._vibratorSpeed[0]),d=Math.round(12*this._vibratorSpeed[this._vibratorCount-1]),h[3]=d+3,h[4]=f+3,h[5]=0===f?0:1,h[5]|=0===d?0:2):(f=Math.round(15*this._vibratorSpeed[0]),d=Math.round(15*this._vibratorSpeed[this._vibratorCount-1]),h[3]=d,h[3]|=f<<4),0===f&&0===d&&(h[1]=0,h[3]=0,h[4]=0,h[5]=0),0===f&&0===d&&(h[1]=0,h[5]=0),t.next=32,this._device.WriteValue(h);case 32:return t.abrupt("return",new i.Ok(e.Id));case 33:case"end":return t.stop()}}),t,this,[[6,10,14,22],[15,,17,21]])})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},r.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],n=0;n<this._vibratorCount;n++)r.push(new i.SpeedSubcommand(n,e.Speed));return t.next=4,this.HandleVibrateCmd(new i.VibrateCmd(r,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))},r._vibratorCount=t.DualVibes.find((function(t){return t===e.Name}))?2:1,t.NameMap.hasOwnProperty(e.Name)&&(r._name=t.NameMap[e.Name]),r._eightBitSpeed=!!t.EightBitSpeed.find((function(t){return t===e.Name})),r.MsgFuncs.set(i.StopDeviceCmd,r.HandleStopDeviceCmd),r.MsgFuncs.set(i.SingleMotorVibrateCmd,r.HandleSingleMotorVibrateCmd),r.MsgFuncs.set(i.VibrateCmd,r.HandleVibrateCmd),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return{VibrateCmd:{FeatureCount:this._vibratorCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}]),t}(r("FUtr").ButtplugDeviceProtocol);a.DualVibes=["Cougar","4 Plus","4plus","classic","Classic","Gala","Nova","NOVAV2","Sync","Vector"],a.NameMap={Cougar:"4 Plus","4plus":"4 Plus",classic:"Classic",NOVAV2:"Nova"},a.EightBitSpeed=["Moxie","Vector"],t.WeVibe=a},pfBK:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=r("FUtr"),s=r("s26e"),u=r("fCiX"),c=function e(){_classCallCheck(this,e),this.Name="Lottie",this.VibeCount=1,this.VibeOrder=[0,1]},l=function(e){function t(e){var r;_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"LiBo",e)))._devInfo=new c,r._hasRunCommand=!1,r._vibratorSpeed=[0,0],r.HandleVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,c,l,h,f,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.Speeds.length<1||e.Speeds.length>this._devInfo.VibeCount)){t.next=2;break}throw new o.ButtplugDeviceException("Libo devices require VibrateCmd to have at most "+"".concat(this._devInfo.VibeCount," speed commands, ").concat(e.Speeds.length," sent."),e.Id);case 2:for(r=[!1,!1],n=!0,a=!1,c=void 0,t.prev=6,l=e.Speeds[Symbol.iterator]();!(n=(h=l.next()).done);n=!0)f=h.value,Math.abs(f.Speed-this._vibratorSpeed[f.Index])>.001&&(r[f.Index]=!0,this._vibratorSpeed[f.Index]=f.Speed);t.next=14;break;case 10:t.prev=10,t.t0=t.catch(6),a=!0,c=t.t0;case 14:t.prev=14,t.prev=15,n||null==l.return||l.return();case 17:if(t.prev=17,!a){t.next=20;break}throw c;case 20:return t.finish(17);case 21:return t.finish(14);case 22:if(!r[this._devInfo.VibeOrder[0]]&&this._hasRunCommand){t.next=27;break}return d=s.Endpoints.Tx,1===this._devInfo.VibeCount&&0===Math.ceil(100*this._vibratorSpeed[this._devInfo.VibeOrder[0]])&&(d=s.Endpoints.TxMode),t.next=27,this._device.WriteValue(Buffer.from([Math.ceil(100*this._vibratorSpeed[this._devInfo.VibeOrder[0]])]),new u.ButtplugDeviceWriteOptions({Endpoint:d}));case 27:if(!(this._devInfo.VibeCount<2||!r[this._devInfo.VibeOrder[1]]&&this._hasRunCommand)){t.next=31;break}t.t1=(this._devInfo.VibeCount<2&&(this._hasRunCommand=!0),new i.Ok(e.Id)),t.next=35;break;case 31:return this._hasRunCommand=!0,t.next=34,this._device.WriteValue(Buffer.from([Math.ceil(3*this._vibratorSpeed[this._devInfo.VibeOrder[1]])]),new u.ButtplugDeviceWriteOptions({Endpoint:s.Endpoints.TxMode}));case 34:t.t1=new i.Ok(e.Id);case 35:return t.abrupt("return",t.t1);case 36:case"end":return t.stop()}}),t,this,[[6,10,14,22],[15,,17,21]])})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},r.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],n=0;n<this._devInfo.VibeCount;n++)r.push(new i.SpeedSubcommand(n,e.Speed));return t.next=4,this.HandleVibrateCmd(new i.VibrateCmd(r,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))};var a=t.DevInfos.get(e.Name);return void 0!==a&&(r._devInfo=a,r._name="LiBo ".concat(r._devInfo.Name)),r.MsgFuncs.set(i.StopDeviceCmd,r.HandleStopDeviceCmd),r.MsgFuncs.set(i.SingleMotorVibrateCmd,r.HandleSingleMotorVibrateCmd),r.MsgFuncs.set(i.VibrateCmd,r.HandleVibrateCmd),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}]),t}(a.ButtplugDeviceProtocol);l.DevInfos=new Map([["PiPiJing",Object.assign(new c,{Name:"Elle",VibeCount:2,VibeOrder:[1,0]})],["XiaoLu",Object.assign(new c,{Name:"Lottie",VibeCount:1})],["SuoYinQiu",Object.assign(new c,{Name:"Karen",VibeCount:0})],["BaiHu",Object.assign(new c,{Name:"LaLa",VibeCount:2})],["LuXiaoHan",Object.assign(new c,{Name:"LuLu",VibeCount:1})],["MonsterPub",Object.assign(new c,{Name:"MonsterPub",VibeCount:1})]]),t.LiBo=l},"q+Aq":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("s26e");t.ButtplugDeviceReadOptions=function(){return function e(t){_classCallCheck(this,e),this.Endpoint=n.Endpoints.Rx,this.Timeout=-1,this.ReadLength=-1,Object.assign(this,t)}}()},qTHO:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s,i+="var division"+o+";if (",f&&(i+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),i+=" (division"+o+" = "+h+" / "+n+", ",i+=e.opts.multipleOfPrecision?" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",f&&(i+="  )  ");var d=d||[];d.push(i+=" ) {   "),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=f?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),i+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},qXHa:function(e,t,r){"use strict";var n=r("ThTW"),i=r("aUsF"),o=r("+9rK"),a=r("ugD5"),s=r("ialn");function u(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return u.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof a)return p(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i,o,s,l=c.call(this,t,r);return l&&(i=l.schema,t=l.root,s=l.baseId),i instanceof a?o=i.validate||e.call(this,i.schema,t,void 0,s):void 0!==i&&(o=p(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,s)),o}function c(e,t){var r=n.parse(t),i=m(r),o=v(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==o){var s=y(i),u=this._refs[s];if("string"==typeof u)return l.call(this,e,u,r);if(u instanceof a)u.validate||this._compile(u),e=u;else{if(!((u=this._schemas[s])instanceof a))return;if(u.validate||this._compile(u),s==y(t))return{schema:u,root:e,baseId:o};e=u}if(!e.schema)return;o=v(this._getId(e.schema))}return f.call(this,r,o,e.schema,e)}function l(e,t,r){var n=c.call(this,e,t);if(n){var i=n.schema,o=n.baseId;e=n.root;var a=this._getId(i);return a&&(o=_(o,a)),f.call(this,r,o,i,e)}}e.exports=u,u.normalizeId=y,u.fullPath=v,u.url=_,u.ids=function(e){var t=y(this._getId(e)),r={"":t},a={"":v(t,!1)},u={},c=this;return s(e,{allKeys:!0},(function(e,t,s,l,h,f,d){if(""!==t){var p=c._getId(e),v=r[l],m=a[l]+"/"+h;if(void 0!==d&&(m+="/"+("number"==typeof d?d:o.escapeFragment(d))),"string"==typeof p){p=v=y(v?n.resolve(v,p):p);var g=c._refs[p];if("string"==typeof g&&(g=c._refs[g]),g&&g.schema){if(!i(e,g.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=y(m))if("#"==p[0]){if(u[p]&&!i(e,u[p]))throw new Error('id "'+p+'" resolves to more than one schema');u[p]=e}else c._refs[p]=m}r[t]=v,a[t]=m}})),u},u.inlineRef=p,u.schema=c;var h=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function f(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),a=1;a<i.length;a++){var s=i[a];if(s){if(void 0===(r=r[s=o.unescapeFragment(s)]))break;var u;if(!h[s]&&((u=this._getId(r))&&(t=_(t,u)),r.$ref)){var l=_(t,r.$ref),f=c.call(this,n,l);f&&(r=f.schema,n=f.root,t=f.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var d=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function p(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&!e(r))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(r=t[i])&&!e(r))return!1}return!0}(e):t?function e(t){var r,n=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&(n+=e(r)),n==1/0)return 1/0}else for(var o in t){if("$ref"==o)return 1/0;if(d[o])n++;else if("object"==typeof(r=t[o])&&(n+=e(r)+1),n==1/0)return 1/0}return n}(e)<=t:void 0)}function v(e,t){return!1!==t&&(e=y(e)),m(n.parse(e))}function m(e){return n.serialize(e).split("#")[0]+"#"}var g=/#\/?$/;function y(e){return e?e.replace(g,""):""}function _(e,t){return t=y(t),n.resolve(e,t)}},s26e:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Tx="tx",e.Rx="rx",e.Command="command",e.Firmware="firmware",e.TxMode="txmode",e.TxVibrate="txvibrate",e.TxShock="txshock",e.TxVendorControl="txvendorcontrol",e.RxTouch="rxtouch",e.RxAccel="rxaccel",e.Whitelist="whitelist"}(n=t.Endpoints||(t.Endpoints={}));var i,o=(i=n,Object.assign(function(e){var t={};return Object.keys(e).forEach((function(r){return t[e[r]]=r})),t}(i),i));t.GetEndpoint=function(e){try{return o[e]}catch(t){return null}}},sagP:function(e,t,r){"use strict";var n=r("iZoB").MissingRef;e.exports=function e(t,r,i){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(i=r,r=void 0);var a=s(t).then((function(){var e=o._addSchema(t,void 0,r);return e.validate||function e(t){try{return o._compile(t)}catch(i){if(i instanceof n)return function(n){var i=n.missingSchema;if(c(i))throw new Error("Schema "+i+" is loaded but "+n.missingRef+" cannot be resolved");var a=o._loadingSchemas[i];return a||(a=o._loadingSchemas[i]=o._opts.loadSchema(i)).then(u,u),a.then((function(e){if(!c(i))return s(e).then((function(){c(i)||o.addSchema(e,i,void 0,r)}))})).then((function(){return e(t)}));function u(){delete o._loadingSchemas[i]}function c(e){return o._refs[e]||o._schemas[e]}}(i);throw i}}(e)}));return i&&a.then((function(e){i(null,e)}),i),a;function s(t){var r=t.$schema;return r&&!o.getSchema(r)?e.call(o,{$ref:r},!0):Promise.resolve()}}},"t+aO":function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f=e.opts.$data&&a&&a.$data;f&&(n+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var d="schema"+i;if(!f)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],v=a;if(v)for(var m,g=-1,y=v.length-1;g<y;){m=v[g+=1];var _=e.schema.properties[m];_&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:e.util.schemaHasRules(_,e.RULES.all))||(p[p.length]=m)}}else p=a;if(f||p.length){var C=e.errorPath,b=f||p.length>=e.opts.loopRequired,w=e.opts.ownProperties;if(c)if(n+=" var missing"+i+"; ",b){f||(n+=" var "+d+" = validate.schema"+s+"; ");var k="' + "+(I="schema"+i+"["+(P="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(C,I,e.opts.jsonPointers)),n+=" var "+h+" = true; ",f&&(n+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),n+=" for (var "+P+" = 0; "+P+" < "+d+".length; "+P+"++) { "+h+" = "+l+"["+d+"["+P+"]] !== undefined ",w&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+d+"["+P+"]) "),n+="; if (!"+h+") break; } ",f&&(n+="  }  "),(x=x||[]).push(n+="  if (!"+h+") {   "),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var S=n;n=x.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var x,E=p;if(E)for(var P=-1,R=E.length-1;P<R;)M=E[P+=1],P&&(n+=" || "),n+=" ( ( "+(V=l+(A=e.util.getProperty(M)))+" === undefined ",w&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(M)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?M:A)+") ) ";n+=") {  ",k="' + "+(I="missing"+i)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(C,I,!0):C+" + "+I),(x=x||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",S=n,n=x.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(b){var I;f||(n+=" var "+d+" = validate.schema"+s+"; "),k="' + "+(I="schema"+i+"["+(P="i"+i)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(C,I,e.opts.jsonPointers)),f&&(n+=" if ("+d+" && !Array.isArray("+d+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+d+" !== undefined) { "),n+=" for (var "+P+" = 0; "+P+" < "+d+".length; "+P+"++) { if ("+l+"["+d+"["+P+"]] === undefined ",w&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+d+"["+P+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(n+="  }  ")}else{var O=p;if(O)for(var M,D=-1,T=O.length-1;D<T;){M=O[D+=1];var A=e.util.getProperty(M),V=(k=e.util.escapeQuotes(M),l+A);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(C,M,e.opts.jsonPointers)),n+=" if ( "+V+" === undefined ",w&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(M)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+k+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=C}else c&&(n+=" if (true) {");return n}},tCG2:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=r("FUtr"),s=function e(){_classCallCheck(this,e),this.Brand="MagicMotion",this.Name="Smart Mini Vibe",this.VibeCount=1,this.Protocol=1,this.MaxSpeed=100},u=function(e){function t(e){var r;_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"MagicMotion",e)))._devInfo=new s,r._hasRunCommand=!1,r._vibratorSpeed=[0,0],r.HandleVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n,a,s,u,c,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.Speeds.length<1||e.Speeds.length>this._devInfo.VibeCount)){t.next=2;break}throw new o.ButtplugDeviceException("MagicMotionn devices require VibrateCmd at most "+"".concat(this._devInfo.VibeCount," speed commands, ").concat(e.Speeds.length," sent."),e.Id);case 2:for(n=!1,a=!0,s=!1,u=void 0,t.prev=6,c=e.Speeds[Symbol.iterator]();!(a=(l=c.next()).done);a=!0)h=l.value,Math.abs(h.Speed-this._vibratorSpeed[h.Index])>.001&&(n=!0,this._vibratorSpeed[h.Index]=h.Speed);t.next=14;break;case 10:t.prev=10,t.t0=t.catch(6),s=!0,u=t.t0;case 14:t.prev=14,t.prev=15,a||null==c.return||c.return();case 17:if(t.prev=17,!s){t.next=20;break}throw u;case 20:return t.finish(17);case 21:return t.finish(14);case 22:if(n||!this._hasRunCommand){t.next=24;break}return t.abrupt("return",new i.Ok(e.Id));case 24:t.t1=this._devInfo.Protocol,t.next=1===t.t1?27:2===t.t1?29:3===t.t1?31:33;break;case 27:return(r=Buffer.from([11,255,4,10,50,50,0,4,8,0,100,0]))[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed),t.abrupt("break",34);case 29:return(r=Buffer.from([16,255,4,10,50,10,0,4,8,0,100,0,4,8,0,100,1]))[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed),this._devInfo.VibeCount>=2&&(r[14]=Math.round(this._vibratorSpeed[1]*this._devInfo.MaxSpeed)),t.abrupt("break",34);case 31:return(r=Buffer.from([11,255,4,10,70,70,0,4,8,0,100,0]))[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed),t.abrupt("break",34);case 33:throw new o.ButtplugDeviceException("Unknown communication protocol.");case 34:return this._hasRunCommand=!0,t.next=37,this._device.WriteValue(r);case 37:return t.abrupt("return",new i.Ok(e.Id));case 38:case"end":return t.stop()}}),t,this,[[6,10,14,22],[15,,17,21]])})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},r.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],n=0;n<this._devInfo.VibeCount;n++)r.push(new i.SpeedSubcommand(n,e.Speed));return t.next=4,this.HandleVibrateCmd(new i.VibrateCmd(r,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))};var a=t.DevInfos.get(e.Name);return void 0!==a&&(r._devInfo=a,r._name="".concat(r._devInfo.Brand," ").concat(r._devInfo.Name)),r.MsgFuncs.set(i.StopDeviceCmd,r.HandleStopDeviceCmd),r.MsgFuncs.set(i.SingleMotorVibrateCmd,r.HandleSingleMotorVibrateCmd),r.MsgFuncs.set(i.VibrateCmd,r.HandleVibrateCmd),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}]),t}(a.ButtplugDeviceProtocol);u.DevInfos=new Map([["Smart Mini Vibe",Object.assign(new s,{Brand:"MagicMotion",Name:"Smart Mini Vibe",VibeCount:1,Protocol:1,MaxSpeed:100})],["Flamingo",Object.assign(new s,{Brand:"MagicMotion",Name:"Flamingo",VibeCount:1,Protocol:1,MaxSpeed:100})],["Magic Cell",Object.assign(new s,{Brand:"MagicMotion",Name:"Dante/Candy",VibeCount:1,Protocol:1,MaxSpeed:100})],["Eidolon",Object.assign(new s,{Brand:"MagicMotion",Name:"Eidolon",VibeCount:2,Protocol:2,MaxSpeed:100})],["Smart Bean",Object.assign(new s,{Brand:"MagicMotion",Name:"Kegel",VibeCount:1,Protocol:1,MaxSpeed:100})],["Magic Wand",Object.assign(new s,{Brand:"MagicMotion",Name:"Wand",VibeCount:1,Protocol:1,MaxSpeed:100})],["Krush",Object.assign(new s,{Brand:"LoveLife",Name:"Krush",VibeCount:1,Protocol:3,MaxSpeed:77})],["Smart Mini Vibe3",Object.assign(new s,{Brand:"MagicMotion",Name:"Vini",VibeCount:1,Protocol:1,MaxSpeed:100})],["Fugu",Object.assign(new s,{Brand:"MagicMotion",Name:"Fugu",VibeCount:1,Protocol:1,MaxSpeed:100})],["Lipstick",Object.assign(new s,{Brand:"MagicMotion",Name:"Awaken",VibeCount:1,Protocol:2,MaxSpeed:100})],["Sword",Object.assign(new s,{Brand:"MagicMotion",Name:"Equinox",VibeCoun:1,Protocol:2,MaxSpeed:100})],["Curve",Object.assign(new s,{Brand:"MagicMotion",Name:"Solstice",VibeCount:1,Protocol:2,MaxSpeed:100})]]),t.MagicMotion=u},teZO:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("AdGg"),a=r("FUtr");t.Youcups=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,"Youou ".concat(e.Name),e)))._speed=0,r._sentVibration=!1,r.HandleVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.Speeds.length){t.next=2;break}throw new o.ButtplugDeviceException("Youcups devices require VibrateCmd to have 1 speed commands, "+"".concat(e.Speeds.length," sent."),e.Id);case 2:return t.next=4,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})))},r.HandleStopDeviceCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.HandleSingleMotorVibrateCmd(new i.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))},r.HandleSingleMotorVibrateCmd=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Math.round(8*e.Speed),t.t0=r===this._speed&&this._sentVibration,t.t0){t.next=7;break}return this._sentVibration=!0,this._speed=r,t.next=7,this._device.WriteString("$SYS,".concat(r,"?"));case 7:return t.abrupt("return",new i.Ok(e.Id));case 8:case"end":return t.stop()}}),t,this)})))},r.MsgFuncs.set(i.StopDeviceCmd,r.HandleStopDeviceCmd),r.MsgFuncs.set(i.SingleMotorVibrateCmd,r.HandleSingleMotorVibrateCmd),r.MsgFuncs.set(i.VibrateCmd,r.HandleVibrateCmd),r}return _inherits(t,e),_createClass(t,[{key:"MessageSpecifications",get:function(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}]),t}(a.ButtplugDeviceProtocol)},uSCx:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e),d="";f.level++;var p="valid"+f.level,v={},m={},g=e.opts.ownProperties;for(b in a){var y=a[b],_=Array.isArray(y)?m:v;_[b]=y}n+="var "+h+" = errors;";var C=e.errorPath;for(var b in n+="var missing"+i+";",m)if((_=m[b]).length){if(n+=" if ( "+l+e.util.getProperty(b)+" !== undefined ",g&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(b)+"') "),c){n+=" && ( ";var w=_;if(w)for(var k=-1,S=w.length-1;k<S;)O=w[k+=1],k&&(n+=" || "),n+=" ( ( "+(A=l+(T=e.util.getProperty(O)))+" === undefined ",g&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(O)+"') "),n+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:T)+") ) ";n+=")) {  ";var x="missing"+i,E="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(C,x,!0):C+" + "+x);var P=P||[];P.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(b)+"', missingProperty: '"+E+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",n+=1==_.length?"property "+e.util.escapeQuotes(_[0]):"properties "+e.util.escapeQuotes(_.join(", ")),n+=" when property "+e.util.escapeQuotes(b)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var R=n;n=P.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+R+"]); ":" validate.errors = ["+R+"]; return false; ":" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var I=_;if(I)for(var O,M=-1,D=I.length-1;M<D;){O=I[M+=1];var T=e.util.getProperty(O),A=(E=e.util.escapeQuotes(O),l+T);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(C,O,e.opts.jsonPointers)),n+=" if ( "+A+" === undefined ",g&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(O)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(b)+"', missingProperty: '"+E+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",n+=1==_.length?"property "+e.util.escapeQuotes(_[0]):"properties "+e.util.escapeQuotes(_.join(", ")),n+=" when property "+e.util.escapeQuotes(b)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",c&&(d+="}",n+=" else { ")}e.errorPath=C;var V=f.baseId;for(var b in v)y=v[b],(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all))&&(n+=" "+p+" = true; if ( "+l+e.util.getProperty(b)+" !== undefined ",g&&(n+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(b)+"') "),n+=") { ",f.schema=y,f.schemaPath=s+e.util.getProperty(b),f.errSchemaPath=u+"/"+e.util.escapeFragment(b),n+="  "+e.validate(f)+" ",f.baseId=V,n+=" }  ",c&&(n+=" if ("+p+") { ",d+="}"));return c&&(n+="   "+d+" if ("+h+" == errors) {"),e.util.cleanUpCode(n)}},ugD5:function(e,t,r){"use strict";var n=r("+9rK");e.exports=function(e){n.copy(e,this)}},v43d:function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+o):n=s;var d="maximum"==t,p=d?"exclusiveMaximum":"exclusiveMinimum",v=e.schema[p],m=e.opts.$data&&v&&v.$data,g=d?"<":">",y=d?">":"<",_=void 0;if(m){var C,b=e.util.getData(v.$data,a,e.dataPathArr),w="exclusive"+o,k="exclType"+o,S="exclIsNumber"+o,x="' + "+(P="op"+o)+" + '";i+=" var schemaExcl"+o+" = "+b+"; ",_=p,(C=C||[]).push(i+=" var "+w+"; var "+k+" = typeof "+(b="schemaExcl"+o)+"; if ("+k+" != 'boolean' && "+k+" != 'undefined' && "+k+" != 'number') { "),i="",!1!==e.createErrors?(i+=" { keyword: '"+(_||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var E=i;i=C.pop(),i+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+k+" == 'number' ? ( ("+w+" = "+n+" === undefined || "+b+" "+g+"= "+n+") ? "+h+" "+y+"= "+b+" : "+h+" "+y+" "+n+" ) : ( ("+w+" = "+b+" === true) ? "+h+" "+y+"= "+n+" : "+h+" "+y+" "+n+" ) || "+h+" !== "+h+") { var op"+o+" = "+w+" ? '"+g+"' : '"+g+"='; ",void 0===s&&(_=p,c=e.errSchemaPath+"/"+p,n=b,f=m)}else if(x=g,(S="number"==typeof v)&&f){var P="'"+x+"'";i+=" if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" ( "+n+" === undefined || "+v+" "+g+"= "+n+" ? "+h+" "+y+"= "+v+" : "+h+" "+y+" "+n+" ) || "+h+" !== "+h+") { "}else S&&void 0===s?(w=!0,_=p,c=e.errSchemaPath+"/"+p,n=v,y+="="):(S&&(n=Math[d?"min":"max"](v,s)),v===(!S||n)?(w=!0,_=p,c=e.errSchemaPath+"/"+p,y+="="):(w=!1,x+="=")),P="'"+x+"'",i+=" if ( ",f&&(i+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),i+=" "+h+" "+y+" "+n+" || "+h+" !== "+h+") { ";return _=_||t,(C=C||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(_||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+P+", limit: "+n+", exclusive: "+w+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+x+" ",i+=f?"' + "+n:n+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",E=i,i=C.pop(),i+=!e.compositeRule&&l?e.async?" throw new ValidationError(["+E+"]); ":" validate.errors = ["+E+"]; return false; ":" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i}},vVvC:function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e),d="";f.level++;var p="valid"+f.level,v="key"+i,m="idx"+i,g=f.dataLevel=e.dataLevel+1,y="data"+g,_="dataProperties"+i,C=Object.keys(a||{}),b=e.schema.patternProperties||{},w=Object.keys(b),k=e.schema.additionalProperties,S=C.length||w.length,x=!1===k,E="object"==typeof k&&Object.keys(k).length,P=e.opts.removeAdditional,R=x||E||P,I=e.opts.ownProperties,O=e.baseId,M=e.schema.required;if(M&&(!e.opts.$data||!M.$data)&&M.length<e.opts.loopRequired)var D=e.util.toHash(M);if(n+="var "+h+" = errors;var "+p+" = true;",I&&(n+=" var "+_+" = undefined;"),R){if(n+=I?" "+_+" = "+_+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+_+".length; "+m+"++) { var "+v+" = "+_+"["+m+"]; ":" for (var "+v+" in "+l+") { ",S){if(n+=" var isAdditional"+i+" = !(false ",C.length)if(C.length>8)n+=" || validate.schema"+s+".hasOwnProperty("+v+") ";else{var T=C;if(T)for(var A=-1,V=T.length-1;A<V;)K=T[A+=1],n+=" || "+v+" == "+e.util.toQuotedString(K)+" "}if(w.length){var L=w;if(L)for(var F=-1,j=L.length-1;F<j;)ie=L[F+=1],n+=" || "+e.usePattern(ie)+".test("+v+") "}n+=" ); if (isAdditional"+i+") { "}if("all"==P)n+=" delete "+l+"["+v+"]; ";else{var N=e.errorPath,U="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),x)if(P)n+=" delete "+l+"["+v+"]; ";else{var B=u;u=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(n+=" "+p+" = false; "),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+U+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is an invalid additional property":"should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var H=n;n=te.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+H+"]); ":" validate.errors = ["+H+"]; return false; ":" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=B,c&&(n+=" break; ")}else if(E)if("failing"==P){n+=" var "+h+" = errors;  ";var z=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=k,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var $=l+"["+v+"]";f.dataPathArr[g]=v;var q=e.validate(f);f.baseId=O,e.util.varOccurences(q,y)<2?n+=" "+e.util.varReplace(q,y,$)+" ":n+=" var "+y+" = "+$+"; "+q+" ",n+=" if (!"+p+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+l+"["+v+"]; }  ",e.compositeRule=f.compositeRule=z}else f.schema=k,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers),$=l+"["+v+"]",f.dataPathArr[g]=v,q=e.validate(f),f.baseId=O,e.util.varOccurences(q,y)<2?n+=" "+e.util.varReplace(q,y,$)+" ":n+=" var "+y+" = "+$+"; "+q+" ",c&&(n+=" if (!"+p+") break; ");e.errorPath=N}S&&(n+=" } "),n+=" }  ",c&&(n+=" if ("+p+") { ",d+="}")}var W=e.opts.useDefaults&&!e.compositeRule;if(C.length){var G=C;if(G)for(var K,Q=-1,Z=G.length-1;Q<Z;){var J=a[K=G[Q+=1]];if(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0:e.util.schemaHasRules(J,e.RULES.all)){var Y=e.util.getProperty(K),X=($=l+Y,W&&void 0!==J.default);if(f.schema=J,f.schemaPath=s+Y,f.errSchemaPath=u+"/"+e.util.escapeFragment(K),f.errorPath=e.util.getPath(e.errorPath,K,e.opts.jsonPointers),f.dataPathArr[g]=e.util.toQuotedString(K),q=e.validate(f),f.baseId=O,e.util.varOccurences(q,y)<2){q=e.util.varReplace(q,y,$);var ee=$}else ee=y,n+=" var "+y+" = "+$+"; ";if(X)n+=" "+q+" ";else{if(D&&D[K]){n+=" if ( "+ee+" === undefined ",I&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(K)+"') "),n+=") { "+p+" = false; ",N=e.errorPath,B=u;var te,re=e.util.escapeQuotes(K);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(N,K,e.opts.jsonPointers)),u=e.errSchemaPath+"/required",(te=te||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(n+=" , message: '",n+=e.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+re+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ",H=n,n=te.pop(),n+=!e.compositeRule&&c?e.async?" throw new ValidationError(["+H+"]); ":" validate.errors = ["+H+"]; return false; ":" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=B,e.errorPath=N,n+=" } else { "}else c?(n+=" if ( "+ee+" === undefined ",I&&(n+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(K)+"') "),n+=") { "+p+" = true; } else { "):(n+=" if ("+ee+" !== undefined ",I&&(n+=" &&   Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(K)+"') "),n+=" ) { ");n+=" "+q+" } "}}c&&(n+=" if ("+p+") { ",d+="}")}}if(w.length){var ne=w;if(ne)for(var ie,oe=-1,ae=ne.length-1;oe<ae;)J=b[ie=ne[oe+=1]],(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0:e.util.schemaHasRules(J,e.RULES.all))&&(f.schema=J,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),n+=I?" "+_+" = "+_+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+_+".length; "+m+"++) { var "+v+" = "+_+"["+m+"]; ":" for (var "+v+" in "+l+") { ",n+=" if ("+e.usePattern(ie)+".test("+v+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers),$=l+"["+v+"]",f.dataPathArr[g]=v,q=e.validate(f),f.baseId=O,e.util.varOccurences(q,y)<2?n+=" "+e.util.varReplace(q,y,$)+" ":n+=" var "+y+" = "+$+"; "+q+" ",c&&(n+=" if (!"+p+") break; "),n+=" } ",c&&(n+=" else "+p+" = true; "),n+=" }  ",c&&(n+=" if ("+p+") { ",d+="}"))}return c&&(n+=" "+d+" if ("+h+" == errors) {"),e.util.cleanUpCode(n)}},wXyd:function(e,t,r){"use strict";var n=r("Y3YA"),i=r("+9rK").toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=i(t),e.types=i(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var i;if("object"==typeof r){var o=Object.keys(r)[0];i=r[o],r=o,i.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:i}})),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=i(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},ytkS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("b36G"),i=r("eDuk"),o=r("VzKg"),a=r("AdGg"),s=r("oF8a"),u=new i;u.addMetaSchema(r("Dg32"));var c=u.compile(s);t.CheckMessage=function(e){if(!c([e.toProtocolFormat()])){var t=c.errors.map((function(e){return e.message})).join("; ");throw new a.ButtplugMessageException(t)}},t.FromJSON=function(e){var t=JSON.parse(e);if(!c(t)){var r=c.errors.map((function(e){return e.message})).join("; ");throw new a.ButtplugMessageException(r)}for(var i=[],s=0,u=Array.from(t);s<u.length;s++){var l=u[s],h=n.plainToClass(o[Object.getOwnPropertyNames(l)[0]],l[Object.getOwnPropertyNames(l)[0]]);i.push(h)}return i},t.GetSchemaVersion=function(){return parseInt(s.version,10)}},"zA/M":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r("cSwh");!function(e){e[e.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",e[e.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",e[e.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"}(n=t.TransformationType||(t.TransformationType={}));var o=function(){function e(e,t){this.transformationType=e,this.options=t,this.recursionStack=new Set}return e.prototype.transform=function(e,t,r,o,s,u){var c=this;if(void 0===u&&(u=0),Array.isArray(t)||t instanceof Set){var l=o&&this.transformationType===n.PLAIN_TO_CLASS?function(e){var t=new e;return t instanceof Set||"push"in t?t:[]}(o):[];return t.forEach((function(t,i){var o=e?e[i]:void 0;if(c.options.enableCircularCheck&&c.isCircular(t))c.transformationType===n.CLASS_TO_CLASS&&(l instanceof Set?l.add(t):l.push(t));else{var a=void 0;if("function"!=typeof r&&r&&r.options&&r.options.discriminator&&r.options.discriminator.property&&r.options.discriminator.subTypes){if(c.transformationType===n.PLAIN_TO_CLASS){a=r.options.discriminator.subTypes.find((function(e){return e.name===t[r.options.discriminator.property]}));var s=r.typeFunction({newObject:l,object:t,property:void 0});a=void 0===a?s:a.value,r.options.keepDiscriminatorProperty||delete t[r.options.discriminator.property]}c.transformationType===n.CLASS_TO_CLASS&&(a=t.constructor),c.transformationType===n.CLASS_TO_PLAIN&&(t[r.options.discriminator.property]=r.options.discriminator.subTypes.find((function(e){return e.value===t.constructor})).name)}else a=r;var h=c.transform(o,t,a,void 0,t instanceof Map,u+1);l instanceof Set?l.add(h):l.push(h)}})),l}if(r!==String||s){if(r!==Number||s){if(r!==Boolean||s){if((r===Date||t instanceof Date)&&!s)return t instanceof Date?new Date(t.valueOf()):null==t?t:new Date(t);if(a()&&(r===Buffer||t instanceof Buffer)&&!s)return null==t?t:Buffer.from(t);if("object"==typeof t&&null!==t){r||t.constructor===Object||(r=t.constructor),!r&&e&&(r=e.constructor),this.options.enableCircularCheck&&this.recursionStack.add(t);var h=this.getKeys(r,t),f=e||{};e||this.transformationType!==n.PLAIN_TO_CLASS&&this.transformationType!==n.CLASS_TO_CLASS||(f=s?new Map:r?new r:{});for(var d=function(o){var a=o,c=o,l=o;if(!p.options.ignoreDecorators&&r)if(p.transformationType===n.PLAIN_TO_CLASS)(h=i.defaultMetadataStorage.findExposeMetadataByCustomName(r,o))&&(l=h.propertyName,c=h.propertyName);else if(p.transformationType===n.CLASS_TO_PLAIN||p.transformationType===n.CLASS_TO_CLASS){var h;(h=i.defaultMetadataStorage.findExposeMetadata(r,o))&&h.options&&h.options.name&&(c=h.options.name)}var d=void 0;d=t instanceof Map?t.get(a):t[a]instanceof Function?t[a]():t[a];var v=void 0,m=d instanceof Map;if(r&&s)v=r;else if(r){var g=i.defaultMetadataStorage.findTypeMetadata(r,l);if(g){var y=g.typeFunction?g.typeFunction({newObject:f,object:t,property:l}):g.reflectedType;g.options&&g.options.discriminator&&g.options.discriminator.property&&g.options.discriminator.subTypes?t[a]instanceof Array?v=g:(p.transformationType===n.PLAIN_TO_CLASS&&(v=void 0===(v=g.options.discriminator.subTypes.find((function(e){if(d&&g.options.discriminator.property in d)return e.name===d[g.options.discriminator.property]})))?y:v.value,g.options.keepDiscriminatorProperty||d&&g.options.discriminator.property in d&&delete d[g.options.discriminator.property]),p.transformationType===n.CLASS_TO_CLASS&&(v=d.constructor),p.transformationType===n.CLASS_TO_PLAIN&&(d[g.options.discriminator.property]=g.options.discriminator.subTypes.find((function(e){return e.value===d.constructor})).name)):v=y,m=m||g.reflectedType===Map}else if(p.options.targetMaps)p.options.targetMaps.filter((function(e){return e.target===r&&!!e.properties[l]})).forEach((function(e){return v=e.properties[l]}));else if(p.options.enableImplicitConversion&&p.transformationType===n.PLAIN_TO_CLASS){var _=Reflect.getMetadata("design:type",r.prototype,l);_&&(v=_)}}var C=Array.isArray(t[a])?p.getReflectedType(r,l):void 0,b=e?e[a]:void 0;if(f.constructor.prototype){var w=Object.getOwnPropertyDescriptor(f.constructor.prototype,c);if((p.transformationType===n.PLAIN_TO_CLASS||p.transformationType===n.CLASS_TO_CLASS)&&(w&&!w.set||f[c]instanceof Function))return"continue"}if(p.options.enableCircularCheck&&p.isCircular(d))p.transformationType===n.CLASS_TO_CLASS&&(S=p.applyCustomTransformations(S=d,r,o,t,p.transformationType),f instanceof Map?f.set(c,S):f[c]=S);else{var k=p.transformationType===n.PLAIN_TO_CLASS?c:o,S=void 0;p.transformationType===n.CLASS_TO_PLAIN?(S=p.applyCustomTransformations(S=t[k],r,k,t,p.transformationType),S=p.transform(b,S=t[k]===S?d:S,v,C,m,u+1)):(S=p.transform(b,d,v,C,m,u+1),S=p.applyCustomTransformations(S,r,k,t,p.transformationType)),f instanceof Map?f.set(c,S):f[c]=S}},p=this,v=0,m=h;v<m.length;v++)d(m[v]);return this.options.enableCircularCheck&&this.recursionStack.delete(t),f}return t}return null==t?t:Boolean(t)}return null==t?t:Number(t)}return null==t?t:String(t)},e.prototype.applyCustomTransformations=function(e,t,r,n,o){var a=this,s=i.defaultMetadataStorage.findTransformMetadatas(t,r,this.transformationType);return void 0!==this.options.version&&(s=s.filter((function(e){return!e.options||a.checkVersion(e.options.since,e.options.until)}))),(s=s.filter(this.options.groups&&this.options.groups.length?function(e){return!e.options||a.checkGroups(e.options.groups)}:function(e){return!e.options||!e.options.groups||!e.options.groups.length})).forEach((function(t){e=t.transformFn(e,n,o)})),e},e.prototype.isCircular=function(e){return this.recursionStack.has(e)},e.prototype.getReflectedType=function(e,t){if(e){var r=i.defaultMetadataStorage.findTypeMetadata(e,t);return r?r.reflectedType:void 0}},e.prototype.getKeys=function(e,t){var r=this,o=i.defaultMetadataStorage.getStrategy(e);"none"===o&&(o=this.options.strategy||"exposeAll");var a=[];if("exposeAll"===o&&(a=t instanceof Map?Array.from(t.keys()):Object.keys(t)),!this.options.ignoreDecorators&&e){var s=i.defaultMetadataStorage.getExposedProperties(e,this.transformationType);this.transformationType===n.PLAIN_TO_CLASS&&(s=s.map((function(t){var r=i.defaultMetadataStorage.findExposeMetadata(e,t);return r&&r.options&&r.options.name?r.options.name:t}))),a=this.options.excludeExtraneousValues?s:a.concat(s);var u=i.defaultMetadataStorage.getExcludedProperties(e,this.transformationType);u.length>0&&(a=a.filter((function(e){return-1===u.indexOf(e)}))),void 0!==this.options.version&&(a=a.filter((function(t){var n=i.defaultMetadataStorage.findExposeMetadata(e,t);return!n||!n.options||r.checkVersion(n.options.since,n.options.until)}))),a=a.filter(this.options.groups&&this.options.groups.length?function(t){var n=i.defaultMetadataStorage.findExposeMetadata(e,t);return!n||!n.options||r.checkGroups(n.options.groups)}:function(t){var r=i.defaultMetadataStorage.findExposeMetadata(e,t);return!(r&&r.options&&r.options.groups&&r.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(a=a.filter((function(e){return r.options.excludePrefixes.every((function(t){return e.substr(0,t.length)!==t}))}))),a.filter((function(e,t,r){return r.indexOf(e)===t}))},e.prototype.checkVersion=function(e,t){var r=!0;return r&&e&&(r=this.options.version>=e),r&&t&&(r=this.options.version<t),r},e.prototype.checkGroups=function(e){return!e||this.options.groups.some((function(t){return-1!==e.indexOf(t)}))},e}();function a(){try{return Buffer,!0}catch(e){}return!1}t.TransformOperationExecutor=o,t.testForBuffer=a},zUnb:function(e,t,r){"use strict";function n(e){return"function"==typeof e}r.r(t);var i=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function a(e){setTimeout((function(){throw e}),0)}var s={closed:!0,next:function(e){},error:function(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;a(e)},complete:function(){}},u=Array.isArray||function(e){return e&&"number"==typeof e.length};function c(e){return null!==e&&"object"==typeof e}var l,h=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),f=((l=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var r=this._parentOrParents,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var a=0;a<r.length;++a)r[a].remove(this);if(n(i))try{i.call(this)}catch(p){t=p instanceof h?d(p.errors):[p]}if(u(o))for(var s=-1,l=o.length;++s<l;){var f=o[s];if(c(f))try{f.unsubscribe()}catch(p){t=t||[],p instanceof h?t=t.concat(d(p.errors)):t.push(p)}}if(t)throw new h(t)}}},{key:"add",value:function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=r._parentOrParents;if(null===i)r._parentOrParents=this;else if(i instanceof e){if(i===this)return r;r._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return r;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new l),l);function d(e){return e.reduce((function(e,t){return e.concat(t instanceof h?t.errors:t)}),[])}var p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),v=function(e){function t(e,r,n){var i;switch(_classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=s;break;case 1:if(!e){i.destination=s;break}if("object"==typeof e){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(_assertThisInitialized(i))):(i.syncErrorThrowable=!0,i.destination=new m(_assertThisInitialized(i),e));break}default:i.syncErrorThrowable=!0,i.destination=new m(_assertThisInitialized(i),e,r,n)}return i}return _inherits(t,e),_createClass(t,[{key:p,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(t.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i}}]),t}(f),m=function(e){function t(e,r,i,o){var a,u;_classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parentSubscriber=e;var c=_assertThisInitialized(a);return n(r)?u=r:r&&(u=r.next,i=r.error,o=r.complete,r!==s&&(n((c=Object.create(r)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(_assertThisInitialized(a)))),a._context=c,a._next=u,a._error=i,a._complete=o,a}return _inherits(t,e),_createClass(t,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,r=o.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;a(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(r){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw r;a(r)}}},{key:"__tryOrSetError",value:function(e,t,r){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(n){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=n,e.syncErrorThrown=!0,!0):(a(n),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),t}(v),g="function"==typeof Symbol&&Symbol.observable||"@@observable";function y(){}function _(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return C(t)}function C(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:y}var b,w=((b=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var r=new e;return r.source=this,r.operator=t,r}},{key:"subscribe",value:function(e,t,r){var n=this.operator,i=function(e,t,r){if(e){if(e instanceof v)return e;if(e[p])return e[p]()}return e||t||r?new v(e,t,r):new v(s)}(e,t,r);if(i.add(n?n.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,r=t.closed,n=t.destination,i=t.isStopped;if(r||i)return!1;e=n&&n instanceof v?n:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var r=this;return new(t=k(t))((function(t,n){var i;i=r.subscribe((function(t){try{e(t)}catch(r){n(r),i&&i.unsubscribe()}}),n,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:g,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?this:C(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=k(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))}}]),e}()).create=function(e){return new b(e)},b);function k(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var S,x=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),E=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).subject=e,n.subscriber=r,n.closed=!1,n}return _inherits(t,e),_createClass(t,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}}}]),t}(f),P=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).destination=e,r}return _inherits(t,e),t}(v),R=((S=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _inherits(t,e),_createClass(t,[{key:p,value:function(){return new P(this)}},{key:"lift",value:function(e){var t=new I(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new x;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new x;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new x;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new x;return _get(_getPrototypeOf(t.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new x;return this.hasError?(e.error(this.thrownError),f.EMPTY):this.isStopped?(e.complete(),f.EMPTY):(this.observers.push(e),new E(this,e))}},{key:"asObservable",value:function(){var e=new w;return e.source=this,e}}]),t}(w)).create=function(e,t){return new I(e,t)},S),I=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).destination=e,n.source=r,n}return _inherits(t,e),_createClass(t,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):f.EMPTY}}]),t}(R);function O(e){return e&&"function"==typeof e.schedule}var M=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).parent=e,i.outerValue=r,i.outerIndex=n,i.index=0,i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),t}(v),D=function(e){return function(t){for(var r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.complete()}};var T="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",A=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function V(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var L=function(e){if(e&&"function"==typeof e[g])return n=e,function(e){var t=n[g]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(A(e))return D(e);if(V(e))return r=e,function(e){return r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,a),e};if(e&&"function"==typeof e[T])return t=e,function(e){for(var r=t[T]();;){var n=r.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof r.return&&e.add((function(){r.return&&r.return()})),e};var t,r,n,i=c(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(i," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.")};function F(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new M(e,r,n);if(!i.closed)return t instanceof w?t.subscribe(i):L(t)(i)}var j=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"notifyNext",value:function(e,t,r,n,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),t}(v);function N(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new U(e,t))}}var U=function(){function e(t,r){_classCallCheck(this,e),this.project=t,this.thisArg=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new B(e,this.project,this.thisArg))}}]),e}(),B=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=r,i.count=0,i.thisArg=n||_assertThisInitialized(i),i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}]),t}(v);function H(e,t){return new w((function(r){var n=new f,i=0;return n.add(t.schedule((function(){i!==e.length?(r.next(e[i++]),r.closed||n.add(this.schedule())):r.complete()}))),n}))}function z(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[g]}(e))return function(e,t){return new w((function(r){var n=new f;return n.add(t.schedule((function(){var i=e[g]();n.add(i.subscribe({next:function(e){n.add(t.schedule((function(){return r.next(e)})))},error:function(e){n.add(t.schedule((function(){return r.error(e)})))},complete:function(){n.add(t.schedule((function(){return r.complete()})))}}))}))),n}))}(e,t);if(V(e))return function(e,t){return new w((function(r){var n=new f;return n.add(t.schedule((function(){return e.then((function(e){n.add(t.schedule((function(){r.next(e),n.add(t.schedule((function(){return r.complete()})))})))}),(function(e){n.add(t.schedule((function(){return r.error(e)})))}))}))),n}))}(e,t);if(A(e))return H(e,t);if(function(e){return e&&"function"==typeof e[T]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new w((function(r){var n,i=new f;return i.add((function(){n&&"function"==typeof n.return&&n.return()})),i.add(t.schedule((function(){n=e[T](),i.add(t.schedule((function(){if(!r.closed){var e,t;try{var i=n.next();e=i.value,t=i.done}catch(o){return void r.error(o)}t?r.complete():(r.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof w?e:new w(L(e))}function $(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(n){return n.pipe($((function(r,n){return z(e(r,n)).pipe(N((function(e,i){return t(r,e,n,i)})))}),r))}:("number"==typeof t&&(r=t),function(t){return t.lift(new q(e,r))})}var q=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new W(e,this.project,this.concurrent))}}]),e}(),W=function(e){function t(e,r){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=r,n.concurrent=i,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(n){return void this.destination.error(n)}this.active++,this._innerSub(t,e,r)}},{key:"_innerSub",value:function(e,t,r){var n=new M(this,t,r),i=this.destination;i.add(n);var o=F(this,e,void 0,void 0,n);o!==n&&i.add(o)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,r,n,i){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),t}(j);function G(e){return e}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return $(G,e)}function Q(e,t){return t?H(e,t):new w(D(e))}function Z(){return function(e){return e.lift(new Y(e))}}var J,Y=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var r=this.connectable;r._refCount++;var n=new X(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i}}]),e}(),X=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).connectable=r,n}return _inherits(t,e),_createClass(t,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null}}]),t}(v),ee={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(J=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).source=e,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return _inherits(t,e),_createClass(t,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new f).add(this.source.subscribe(new te(this.getSubject(),this))),e.closed&&(this._connection=null,e=f.EMPTY)),e}},{key:"refCount",value:function(){return Z()(this)}}]),t}(w).prototype)._subscribe},_isComplete:{value:J._isComplete,writable:!0},getSubject:{value:J.getSubject},connect:{value:J.connect},refCount:{value:J.refCount}},te=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).connectable=r,n}return _inherits(t,e),_createClass(t,[{key:"_error",value:function(e){this._unsubscribe(),_get(_getPrototypeOf(t.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(t.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),t}(P);function re(){return new R}function ne(e,t,r){var n=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var r in t)this[r]=t[r]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(this instanceof i)return n.apply(this,t),this;var o=_construct(i,t);return a.annotation=o,a;function a(e,t,r){for(var n=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;n.length<=r;)n.push(null);return(n[r]=n[r]||[]).push(o),e}}return r&&(i.prototype=Object.create(r.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}var ie=ne("Inject",(function(e){return{token:e}})),oe=ne("Optional"),ae=ne("Self"),se=ne("SkipSelf"),ue=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ce(e){for(var t in e)if(e[t]===ce)return t;throw Error("Could not find renamed property on target object.")}function le(e,t){for(var r in t)t.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function he(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function fe(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function de(e){return pe(e,e[me])||pe(e,e[_e])}function pe(e,t){return t&&t.token===e?t:null}function ve(e){return e&&(e.hasOwnProperty(ge)||e.hasOwnProperty(Ce))?e[ge]:null}var me=ce({"\u0275prov":ce}),ge=ce({"\u0275inj":ce}),ye=ce({"\u0275provFallback":ce}),_e=ce({ngInjectableDef:ce}),Ce=ce({ngInjectorDef:ce});function be(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(be).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var r=t.indexOf("\n");return-1===r?t:t.substring(0,r)}function we(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var ke=ce({__forward_ref__:ce});function Se(e){return e.__forward_ref__=Se,e.toString=function(){return be(this())},e}function xe(e){return Ee(e)?e():e}function Ee(e){return"function"==typeof e&&e.hasOwnProperty(ke)&&e.__forward_ref__===Se}var Pe,Re="undefined"!=typeof globalThis&&globalThis,Ie="undefined"!=typeof window&&window,Oe="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Me="undefined"!=typeof global&&global,De=Re||Me||Ie||Oe,Te=ce({"\u0275cmp":ce}),Ae=ce({"\u0275dir":ce}),Ve=ce({"\u0275pipe":ce}),Le=ce({"\u0275mod":ce}),Fe=ce({"\u0275loc":ce}),je=ce({"\u0275fac":ce}),Ne=ce({__NG_ELEMENT_ID__:ce}),Ue=function(){function e(t,r){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=he({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),Be=new Ue("INJECTOR",-1),He={},ze=/\n/gm,$e=ce({provide:String,useValue:ce}),qe=void 0;function We(e){var t=qe;return qe=e,t}function Ge(e){var t=Pe;return Pe=e,t}function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue.Default;if(void 0===qe)throw new Error("inject() must be called from an injection context");return null===qe?Ze(e,void 0,t):qe.get(e,t&ue.Optional?null:void 0,t)}function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue.Default;return(Pe||Ke)(xe(e),t)}function Ze(e,t,r){var n=de(e);if(n&&"root"==n.providedIn)return void 0===n.value?n.value=n.factory():n.value;if(r&ue.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(be(e),"]"))}function Je(e){for(var t=[],r=0;r<e.length;r++){var n=xe(e[r]);if(Array.isArray(n)){if(0===n.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=ue.Default,a=0;a<n.length;a++){var s=n[a];s instanceof oe||"Optional"===s.ngMetadataName||s===oe?o|=ue.Optional:s instanceof se||"SkipSelf"===s.ngMetadataName||s===se?o|=ue.SkipSelf:s instanceof ae||"Self"===s.ngMetadataName||s===ae?o|=ue.Self:i=s instanceof ie||s===ie?s.token:s}t.push(Qe(i,o))}else t.push(Qe(n))}return t}var Ye=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;if(t===He){var r=new Error("NullInjectorError: No provider for ".concat(be(e),"!"));throw r.name="NullInjectorError",r}return t}}]),e}(),Xe=function e(){_classCallCheck(this,e)},et=function e(){_classCallCheck(this,e)};function tt(e,t){e.forEach((function(e){return Array.isArray(e)?tt(e,t):t(e)}))}function rt(e,t,r){t>=e.length?e.push(r):e.splice(t,0,r)}function nt(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function it(e,t){var r=ot(e,t);if(r>=0)return e[1|r]}function ot(e,t){return function(e,t,r){for(var n=0,i=e.length>>1;i!==n;){var o=n+(i-n>>1),a=e[o<<1];if(t===a)return o<<1;a>t?i=o:n=o+1}return~(i<<1)}(e,t)}var at=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),st=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}();function ut(e){return""+{toString:e}}var ct={},lt=[],ht=0;function ft(e){var t=e.type,r=t.prototype,n={},i={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:r.ngOnInit||null,doCheck:r.ngDoCheck||null,afterContentInit:r.ngAfterContentInit||null,afterContentChecked:r.ngAfterContentChecked||null,afterViewInit:r.ngAfterViewInit||null,afterViewChecked:r.ngAfterViewChecked||null,onDestroy:r.ngOnDestroy||null,onPush:e.changeDetection===at.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||lt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||st.Emulated,id:"c",styles:e.styles||lt,_:null,setInput:null,schemas:e.schemas||null,tView:null};return i._=ut((function(){var t=e.directives,r=e.features,o=e.pipes;i.id+=ht++,i.inputs=gt(e.inputs,n),i.outputs=gt(e.outputs),r&&r.forEach((function(e){return e(i)})),i.directiveDefs=t?function(){return("function"==typeof t?t():t).map(dt)}:null,i.pipeDefs=o?function(){return("function"==typeof o?o():o).map(pt)}:null})),i}function dt(e){return _t(e)||function(e){return e[Ae]||null}(e)}function pt(e){return function(e){return e[Ve]||null}(e)}var vt={};function mt(e){var t={type:e.type,bootstrap:e.bootstrap||lt,declarations:e.declarations||lt,imports:e.imports||lt,exports:e.exports||lt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&ut((function(){vt[e.id]=e.type})),t}function gt(e,t){if(null==e)return ct;var r={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),r[i]=n,t&&(t[i]=o)}return r}var yt=ft;function _t(e){return e[Te]||null}function Ct(e,t){return e.hasOwnProperty(je)?e[je]:null}function bt(e,t){var r=e[Le]||null;if(!r&&!0===t)throw new Error("Type ".concat(be(e)," does not have '\u0275mod' property."));return r}function wt(e){return Array.isArray(e)&&"object"==typeof e[1]}function kt(e){return Array.isArray(e)&&!0===e[1]}function St(e){return 0!=(8&e.flags)}function xt(e){return 2==(2&e.flags)}function Et(e){return 1==(1&e.flags)}function Pt(e){return null!==e.template}function Rt(e){return 0!=(512&e[2])}var It={lFrame:zt(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Ot(){return It.bindingsEnabled}function Mt(){return It.lFrame.lView}function Dt(){return It.lFrame.tView}function Tt(){return It.lFrame.previousOrParentTNode}function At(e,t){It.lFrame.previousOrParentTNode=e,It.lFrame.isParent=t}function Vt(){return It.lFrame.isParent}function Lt(){return It.checkNoChangesMode}function Ft(e){It.checkNoChangesMode=e}function jt(e,t){var r=It.lFrame;r.bindingIndex=r.bindingRootIndex=e,r.currentDirectiveIndex=t}function Nt(e){It.lFrame.currentQueryIndex=e}function Ut(e,t){var r=Ht();It.lFrame=r,r.previousOrParentTNode=t,r.lView=e}function Bt(e,t){var r=Ht(),n=e[1];It.lFrame=r,r.previousOrParentTNode=t,r.lView=e,r.tView=n,r.contextLView=e,r.bindingIndex=n.bindingStartIndex}function Ht(){var e=It.lFrame,t=null===e?null:e.child;return null===t?zt(e):t}function zt(e){var t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function $t(){var e=It.lFrame;return It.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}var qt=$t;function Wt(){var e=$t();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Gt(){return It.lFrame.selectedIndex}function Kt(e){It.lFrame.selectedIndex=e}function Qt(e,t){for(var r=t.directiveStart,n=t.directiveEnd;r<n;r++){var i=e.data[r];i.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-r,i.afterContentInit),i.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(r,i.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(r,i.afterContentChecked)),i.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-r,i.afterViewInit),i.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(r,i.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(r,i.afterViewChecked)),null!=i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,i.onDestroy)}}function Zt(e,t,r){Xt(e,t,3,r)}function Jt(e,t,r,n){(3&e[2])===r&&Xt(e,t,r,n)}function Yt(e,t){var r=e[2];(3&r)===t&&(r&=1023,r+=1,e[2]=r)}function Xt(e,t,r,n){for(var i=null!=n?n:-1,o=0,a=void 0!==n?65535&e[18]:0;a<t.length;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=n&&o>=n)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(er(e,r,t,a),e[18]=(4294901760&e[18])+a+2),a++}function er(e,t,r,n){var i=r[n]<0,o=r[n+1],a=e[i?-r[n]:r[n]];i?e[2]>>10<e[18]>>16&&(3&e[2])===t&&(e[2]+=1024,o.call(a)):o.call(a)}var tr=function e(t,r,n){_classCallCheck(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=n},rr=void 0;function nr(e){return!!e.listen}var ir={createRenderer:function(e,t){return void 0!==rr?rr:"undefined"!=typeof document?document:void 0}};function or(e,t,r){for(var n=nr(e),i=0;i<r.length;){var o=r[i];if("number"==typeof o){if(0!==o)break;i++;var a=r[i++],s=r[i++],u=r[i++];n?e.setAttribute(t,s,u,a):t.setAttributeNS(a,s,u)}else{var c=o,l=r[++i];sr(c)?n&&e.setProperty(t,c,l):n?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function ar(e){return 3===e||4===e||6===e}function sr(e){return 64===e.charCodeAt(0)}function ur(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var r=-1,n=0;n<t.length;n++){var i=t[n];"number"==typeof i?r=i:0===r||cr(e,r,i,null,-1===r||2===r?t[++n]:null)}return e}function cr(e,t,r,n,i){var o=0,a=e.length;if(-1===t)a=-1;else for(;o<e.length;){var s=e[o++];if("number"==typeof s){if(s===t){a=-1;break}if(s>t){a=o-1;break}}}for(;o<e.length;){var u=e[o];if("number"==typeof u)break;if(u===r){if(null===n)return void(null!==i&&(e[o+1]=i));if(n===e[o+1])return void(e[o+2]=i)}o++,null!==n&&o++,null!==i&&o++}-1!==a&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,r),null!==n&&e.splice(o++,0,n),null!==i&&e.splice(o++,0,i)}function lr(e){return-1!==e}function hr(e){return 32767&e}function fr(e){return e>>16}function dr(e,t){for(var r=fr(e),n=t;r>0;)n=n[15],r--;return n}function pr(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function(e){return"string"==typeof e?e:null==e?"":""+e}(e)}var vr=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(De);function mr(e){return e instanceof Function?e():e}var gr=!0;function yr(e){var t=gr;return gr=e,t}var _r=0;function Cr(e,t){var r=wr(e,t);if(-1!==r)return r;var n=t[1];n.firstCreatePass&&(e.injectorIndex=t.length,br(n.data,e),br(t,null),br(n.blueprint,null));var i=kr(e,t),o=e.injectorIndex;if(lr(i))for(var a=hr(i),s=dr(i,t),u=s[1].data,c=0;c<8;c++)t[o+c]=s[a+c]|u[a+c];return t[o+8]=i,o}function br(e,t){e.push(0,0,0,0,0,0,0,0,t)}function wr(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function kr(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var r=t[6],n=1;r&&-1===r.injectorIndex;)r=(t=t[15])?t[6]:null,n++;return r?r.injectorIndex|n<<16:-1}function Sr(e,t,r){!function(e,t,r){var n="string"!=typeof r?r[Ne]:r.charCodeAt(0)||0;null==n&&(n=r[Ne]=_r++);var i=255&n,o=1<<i,a=64&i,s=32&i,u=t.data;128&i?a?s?u[e+7]|=o:u[e+6]|=o:s?u[e+5]|=o:u[e+4]|=o:a?s?u[e+3]|=o:u[e+2]|=o:s?u[e+1]|=o:u[e]|=o}(e,t,r)}function xr(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e[Ne];return"number"==typeof t&&t>0?255&t:t}(r);if("function"==typeof o){Ut(t,e);try{var a=o();if(null!=a||n&ue.Optional)return a;throw new Error("No provider for ".concat(pr(r),"!"))}finally{qt()}}else if("number"==typeof o){if(-1===o)return new Mr(e,t);var s=null,u=wr(e,t),c=-1,l=n&ue.Host?t[16][6]:null;for((-1===u||n&ue.SkipSelf)&&(c=-1===u?kr(e,t):t[u+8],Or(n,!1)?(s=t[1],u=hr(c),t=dr(c,t)):u=-1);-1!==u;){c=t[u+8];var h=t[1];if(Ir(o,u,h.data)){var f=Pr(u,t,r,s,n,l);if(f!==Er)return f}Or(n,t[1].data[u+8]===l)&&Ir(o,u,t)?(s=h,u=hr(c),t=dr(c,t)):u=-1}}}if(n&ue.Optional&&void 0===i&&(i=null),0==(n&(ue.Self|ue.Host))){var d=t[9],p=Ge(void 0);try{return d?d.get(r,i,n&ue.Optional):Ze(r,i,n&ue.Optional)}finally{Ge(p)}}if(n&ue.Optional)return i;throw new Error("NodeInjector: NOT_FOUND [".concat(pr(r),"]"))}var Er={};function Pr(e,t,r,n,i,o){var a=t[1],s=a.data[e+8],u=function(e,t,r,n,i){for(var o=e.providerIndexes,a=t.data,s=65535&o,u=e.directiveStart,c=o>>16,l=i?s+c:e.directiveEnd,h=n?s:s+c;h<l;h++){var f=a[h];if(h<u&&r===f||h>=u&&f.type===r)return h}if(i){var d=a[u];if(d&&Pt(d)&&d.type===r)return u}return null}(s,a,r,null==n?xt(s)&&gr:n!=a&&3===s.type,i&ue.Host&&o===s);return null!==u?Rr(t,a,u,s):Er}function Rr(e,t,r,n){var i=e[r],o=t.data;if(i instanceof tr){var a=i;if(a.resolving)throw new Error("Circular dep for ".concat(pr(o[r])));var s,u=yr(a.canSeeViewProviders);a.resolving=!0,a.injectImpl&&(s=Ge(a.injectImpl)),Ut(e,n);try{i=e[r]=a.factory(void 0,o,e,n),t.firstCreatePass&&r>=n.directiveStart&&function(e,t,r){var n=t.onChanges,i=t.onInit,o=t.doCheck;n&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e,n),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e,n)),i&&(r.preOrderHooks||(r.preOrderHooks=[])).push(-e,i),o&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e,o),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e,o))}(r,o[r],t)}finally{a.injectImpl&&Ge(s),yr(u),a.resolving=!1,qt()}}return i}function Ir(e,t,r){var n=64&e,i=32&e;return!!((128&e?n?i?r[t+7]:r[t+6]:i?r[t+5]:r[t+4]:n?i?r[t+3]:r[t+2]:i?r[t+1]:r[t])&1<<e)}function Or(e,t){return!(e&ue.Self||e&ue.Host&&t)}var Mr=function(){function e(t,r){_classCallCheck(this,e),this._tNode=t,this._lView=r}return _createClass(e,[{key:"get",value:function(e,t){return xr(this._tNode,this._lView,e,void 0,t)}}]),e}();function Dr(e){var t=Object.getPrototypeOf(e.prototype).constructor,r=t[je]||function e(t){var r=t;if(Ee(t))return function(){var t=e(xe(r));return t?t():null};var n=Ct(r);if(null===n){var i=ve(r);n=i&&i.factory}return n||null}(t);return null!==r?r:function(e){return new e}}function Tr(e){return e.ngDebugContext}function Ar(e){return e.ngOriginalError}function Vr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];e.error.apply(e,r)}var Lr=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),r=this._findContext(e),n=function(e){return e.ngErrorLogger||Vr}(e);n(this._console,"ERROR",e),t&&n(this._console,"ORIGINAL ERROR",t),r&&n(this._console,"ERROR CONTEXT",r)}},{key:"_findContext",value:function(e){return e?Tr(e)?Tr(e):this._findContext(Ar(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=Ar(e);t&&Ar(t);)t=Ar(t);return t}}]),e}(),Fr=!0,jr=!1;function Nr(){return jr=!0,Fr}function Ur(e){for(;Array.isArray(e);)e=e[0];return e}function Br(e,t){return Ur(t[e+19])}function Hr(e,t){return Ur(t[e.index])}function zr(e,t){return e.data[t+19]}function $r(e,t){var r=t[e];return wt(r)?r:r[0]}function qr(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Wr(e){return 128==(128&e[2])}function Gr(e,t){return null===e||null==t?null:e[t]}function Kr(e){e[18]=0}function Qr(e,t){e.__ngContext__=t}function Zr(e){throw new Error("Multiple components match node with tagname ".concat(e.tagName))}function Jr(){throw new Error("Cannot mix multi providers and regular providers")}function Yr(e,t,r){for(var n=e.length;;){var i=e.indexOf(t,r);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var o=t.length;if(i+o===n||e.charCodeAt(i+o)<=32)return i}r=i+1}}function Xr(e,t,r){for(var n=0;n<e.length;){var i=e[n++];if(r&&"class"===i){if(-1!==Yr((i=e[n]).toLowerCase(),t,0))return!0}else if(1===i){for(;n<e.length&&"string"==typeof(i=e[n++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function en(e,t,r){return t===(0!==e.type||r?e.tagName:"ng-template")}function tn(e,t,r){for(var n=4,i=e.attrs||[],o=function(e){for(var t=0;t<e.length;t++)if(ar(e[t]))return t;return e.length}(i),a=!1,s=0;s<t.length;s++){var u=t[s];if("number"!=typeof u){if(!a)if(4&n){if(n=2|1&n,""!==u&&!en(e,u,r)||""===u&&1===t.length){if(rn(n))return!1;a=!0}}else{var c=8&n?u:t[++s];if(8&n&&null!==e.attrs){if(!Xr(e.attrs,c,r)){if(rn(n))return!1;a=!0}continue}var l=nn(8&n?"class":u,i,0==e.type&&"ng-template"!==e.tagName,r);if(-1===l){if(rn(n))return!1;a=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&n?h:null;if(f&&-1!==Yr(f,c,0)||2&n&&c!==h){if(rn(n))return!1;a=!0}}}}else{if(!a&&!rn(n)&&!rn(u))return!1;if(a&&rn(u))continue;a=!1,n=u|1&n}}return rn(n)||a}function rn(e){return 0==(1&e)}function nn(e,t,r,n){if(null===t)return-1;var i=0;if(n||!r){for(var o=!1;i<t.length;){var a=t[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=t[++i];"string"==typeof s;)s=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(e,t){var r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){if(e[r]===t)return r;r++}return-1}(t,e)}function on(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=0;n<t.length;n++)if(tn(e,t[n],r))return!0;return!1}function an(e,t){return e?":not("+t.trim()+")":t}function sn(e){for(var t=e[0],r=1,n=2,i="",o=!1;r<e.length;){var a=e[r];if("string"==typeof a)if(2&n){var s=e[++r];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&n?i+="."+a:4&n&&(i+=" "+a);else""===i||rn(a)||(t+=an(o,i),i=""),n=a,o=o||!rn(n);r++}return""!==i&&(t+=an(o,i)),t}var un={};function cn(e){var t=e[3];return kt(t)?t[3]:t}function ln(e){hn(Dt(),Mt(),Gt()+e,Lt())}function hn(e,t,r,n){if(!n)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&Zt(t,i,r)}else{var o=e.preOrderHooks;null!==o&&Jt(t,o,0,r)}Kt(r)}function fn(e,t){return e<<17|t<<2}function dn(e){return e>>17&32767}function pn(e){return 2|e}function vn(e){return(131068&e)>>2}function mn(e,t){return-131069&e|t<<2}function gn(e){return 1|e}function yn(e,t){var r=e.contentQueries;if(null!==r)for(var n=0;n<r.length;n+=2){var i=r[n],o=r[n+1];if(-1!==o){var a=e.data[o];Nt(i),a.contentQueries(2,t[o],o)}}}function _n(e,t,r){return nr(t)?t.createElement(e,r):null===r?t.createElement(e):t.createElementNS(r,e)}function Cn(e,t,r,n,i,o,a,s,u,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|n,Kr(l),l[3]=l[15]=e,l[8]=r,l[10]=a||e&&e[10],l[11]=s||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=o,l[16]=2==t.type?e[16]:l,l}function bn(e,t,r,n,i,o){var a=r+19,s=e.data[a]||function(e,t,r,n,i,o){var a=Tt(),s=Vt(),u=s?a:a&&a.parent,c=e.data[r]=Rn(0,u&&u!==t?u:null,n,r,i,o);return null===e.firstChild&&(e.firstChild=c),a&&(!s||null!=a.child||null===c.parent&&2!==a.type?s||(a.next=c):a.child=c),c}(e,t,a,n,i,o);return At(s,!0),s}function wn(e,t,r){Bt(t,t[6]);try{var n=e.viewQuery;null!==n&&Kn(1,n,r);var i=e.template;null!==i&&xn(e,t,i,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&yn(e,t),e.staticViewQueries&&Kn(2,e.viewQuery,r);var o=e.components;null!==o&&function(e,t){for(var r=0;r<t.length;r++)zn(e,t[r])}(t,o)}finally{t[2]&=-5,Wt()}}function kn(e,t,r,n){var i=t[2];if(256!=(256&i)){Bt(t,t[6]);var o=Lt();try{Kr(t),It.lFrame.bindingIndex=e.bindingStartIndex,null!==r&&xn(e,t,r,2,n);var a=3==(3&i);if(!o)if(a){var s=e.preOrderCheckHooks;null!==s&&Zt(t,s,null)}else{var u=e.preOrderHooks;null!==u&&Jt(t,u,0,null),Yt(t,0)}if(function(e){for(var t=e[13];null!==t;){var r=void 0;if(kt(t)&&(r=t[2])>>1==-1){for(var n=9;n<t.length;n++){var i=t[n],o=i[1];Wr(i)&&kn(o,i,o.template,i[8])}0!=(1&r)&&Bn(t,e[16])}t=t[4]}}(t),null!==e.contentQueries&&yn(e,t),!o)if(a){var c=e.contentCheckHooks;null!==c&&Zt(t,c)}else{var l=e.contentHooks;null!==l&&Jt(t,l,1),Yt(t,1)}!function(e,t){try{var r=e.expandoInstructions;if(null!==r)for(var n=e.expandoStartIndex,i=-1,o=0;o<r.length;o++){var a=r[o];"number"==typeof a?a<=0?(Kt(0-a),i=n+=9+r[++o]):n+=a:(null!==a&&(jt(n,i),a(2,t[i])),i++)}}finally{Kt(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var r=0;r<t.length;r++)Hn(e,t[r])}(t,h);var f=e.viewQuery;if(null!==f&&Kn(2,f,n),!o)if(a){var d=e.viewCheckHooks;null!==d&&Zt(t,d)}else{var p=e.viewHooks;null!==p&&Jt(t,p,2),Yt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73)}finally{Wt()}}}function Sn(e,t,r,n){var i=t[10],o=!Lt(),a=4==(4&t[2]);try{o&&!a&&i.begin&&i.begin(),a&&wn(e,t,n),kn(e,t,r,n)}finally{o&&!a&&i.end&&i.end()}}function xn(e,t,r,n,i){var o=Gt();try{Kt(-1),2&n&&t.length>19&&hn(e,t,0,Lt()),r(n,i)}finally{Kt(o)}}function En(e){return e.tView||(e.tView=Pn(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts))}function Pn(e,t,r,n,i,o,a,s,u,c){var l=19+n,h=l+i,f=function(e,t){for(var r=[],n=0;n<t;n++)r.push(n<e?null:un);return r}(l,h);return f[1]={type:e,id:t,blueprint:f,template:r,queries:null,viewQuery:s,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:c}}function Rn(e,t,r,n,i,o){return{type:r,index:n,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function In(e,t,r){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];(r=null===r?{}:r).hasOwnProperty(n)?r[n].push(t,i):r[n]=[t,i]}return r}function On(e,t){var r=e.expandoInstructions;r.push(t.hostBindings),0!==t.hostVars&&r.push(t.hostVars)}function Mn(e,t,r){for(var n=0;n<r;n++)t.push(un),e.blueprint.push(un),e.data.push(null)}function Dn(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Tn(e,t,r){var n=19-t.index,i=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(n,i,r)}function An(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Vn(e,t,r){if(r){if(t.exportAs)for(var n=0;n<t.exportAs.length;n++)r[t.exportAs[n]]=e;Pt(t)&&(r[""]=e)}}function Ln(e,t,r){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+r,e.providerIndexes=t}function Fn(e,t,r){e.data.push(r);var n=r.factory||(r.factory=Ct(r.type)),i=new tr(n,Pt(r),null);e.blueprint.push(i),t.push(i)}function jn(e,t,r){var n=Hr(t,e),i=En(r),o=e[10],a=$n(e,Cn(e,i,null,r.onPush?64:16,n,t,o,o.createRenderer(n,r)));e[t.index]=a}function Nn(e,t,r,n,i,o){var a=o[t];if(null!==a)for(var s=n.setInput,u=0;u<a.length;){var c=a[u++],l=a[u++],h=a[u++];null!==s?n.setInput(r,h,c,l):r[l]=h}}function Un(e,t){for(var r=null,n=0;n<t.length;){var i=t[n];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===r&&(r=[]),r.push(i,e[i],t[n+1])),n+=2}else n+=2;else n+=4}return r}function Bn(e,t){for(var r=e[5],n=0;n<r.length;n++){var i=r[n],o=i[3][3][16];if(o!==t&&0==(16&o[2])){var a=i[1];kn(a,i,a.template,i[8])}}}function Hn(e,t){var r=$r(t,e);if(Wr(r)&&80&r[2]){var n=r[1];kn(n,r,n.template,r[8])}}function zn(e,t){var r=$r(t,e),n=r[1];!function(e,t){for(var r=t.length;r<e.blueprint.length;r++)t.push(e.blueprint[r])}(n,r),wn(n,r,r[8])}function $n(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function qn(e){for(;e;){e[2]|=64;var t=cn(e);if(Rt(e)&&!t)return e;e=t}return null}function Wn(e,t,r){var n=t[10];n.begin&&n.begin();try{kn(e,t,e.template,r)}catch(i){throw Jn(t,i),i}finally{n.end&&n.end()}}function Gn(e){!function(e){for(var t=0;t<e.components.length;t++){var r=e.components[t],n=qr(r),i=n[1];Sn(i,n,i.template,r)}}(e[8])}function Kn(e,t,r){Nt(0),t(e,r)}var Qn=Promise.resolve(null);function Zn(e){return e[7]||(e[7]=[])}function Jn(e,t){var r=e[9],n=r?r.get(Lr,null):null;n&&n.handleError(t)}function Yn(e,t,r,n,i){for(var o=0;o<r.length;){var a=r[o++],s=r[o++],u=t[a],c=e.data[a];null!==c.setInput?c.setInput(u,i,n,s):u[s]=i}}function Xn(e,t){var r=t[3];return-1===e.index?kt(r)?r:null:r}function ei(e,t){var r=Xn(e,t);return r?hi(t[11],r[7]):null}function ti(e,t,r,n,i){if(null!=n){var o,a=!1;kt(n)?o=n:wt(n)&&(a=!0,n=n[0]);var s=Ur(n);0===e&&null!==r?null==i?ci(t,r,s):ui(t,r,s,i||null):1===e&&null!==r?ui(t,r,s,i||null):2===e?function(e,t,r){var n=hi(e,t);n&&function(e,t,r,n){nr(e)?e.removeChild(t,r,n):t.removeChild(r)}(e,n,t,r)}(t,s,a):3===e&&t.destroyNode(s),null!=o&&function(e,t,r,n,i){var o=r[7];o!==Ur(r)&&ti(t,e,n,o,i);for(var a=9;a<r.length;a++){var s=r[a];vi(s[1],s,e,t,n,o)}}(t,e,o,r,i)}}function ri(e,t,r,n){var i=ei(e.node,t);i&&vi(e,t,t[11],r?1:2,i,n)}function ni(e,t){var r=e[5],n=r.indexOf(t);r.splice(n,1)}function ii(e,t){if(!(e.length<=9)){var r=9+t,n=e[r];if(n){var i=n[17];null!==i&&i!==e&&ni(i,n),t>0&&(e[r-1][4]=n[4]);var o=nt(e,9+t);ri(n[1],n,!1,null);var a=o[5];null!==a&&a.detachView(o[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}}function oi(e,t){if(!(256&t[2])){var r=t[11];nr(r)&&r.destroyNode&&vi(e,t,r,3,null,null),function(e){var t=e[13];if(!t)return si(e[1],e);for(;t;){var r=null;if(wt(t))r=t[13];else{var n=t[9];n&&(r=n)}if(!r){for(;t&&!t[4]&&t!==e;)wt(t)&&si(t[1],t),t=ai(t,e);null===t&&(t=e),wt(t)&&si(t[1],t),r=t&&t[4]}t=r}}(t)}}function ai(e,t){var r;return wt(e)&&(r=e[6])&&2===r.type?Xn(r,e):e[3]===t?null:e[3]}function si(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var r;if(null!=e&&null!=(r=e.destroyHooks))for(var n=0;n<r.length;n+=2){var i=t[r[n]];i instanceof tr||r[n+1].call(i)}}(e,t),function(e,t){var r=e.cleanup;if(null!==r){for(var n=t[7],i=0;i<r.length-1;i+=2)if("string"==typeof r[i]){var o=r[i+1],a="function"==typeof o?o(t):Ur(t[o]),s=n[r[i+2]],u=r[i+3];"boolean"==typeof u?a.removeEventListener(r[i],s,u):u>=0?n[u]():n[-u].unsubscribe(),i+=2}else r[i].call(n[r[i+1]]);t[7]=null}}(e,t);var r=t[6];r&&3===r.type&&nr(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&kt(t[3])){n!==t[3]&&ni(n,t);var i=t[5];null!==i&&i.detachView(e)}}}function ui(e,t,r,n){nr(e)?e.insertBefore(t,r,n):t.insertBefore(r,n,!0)}function ci(e,t,r){nr(e)?e.appendChild(t,r):t.appendChild(r)}function li(e,t,r,n){null!==n?ui(e,t,r,n):ci(e,t,r)}function hi(e,t){return nr(e)?e.parentNode(t):t.parentNode}function fi(e,t,r,n){var i=function(e,t,r){for(var n=t.parent;null!=n&&(4===n.type||5===n.type);)n=(t=n).parent;if(null==n){var i=r[6];return 2===i.type?ei(i,r):r[0]}if(t&&5===t.type&&4&t.flags)return Hr(t,r).parentNode;if(2&n.flags){var o=e.data,a=o[o[n.index].directiveStart].encapsulation;if(a!==st.ShadowDom&&a!==st.Native)return null}return Hr(n,r)}(e,n,t);if(null!=i){var o=t[11],a=function(e,t){if(2===e.type){var r=Xn(e,t);return null===r?null:di(r.indexOf(t,9)-9,r)}return 4===e.type||5===e.type?Hr(e,t):null}(n.parent||t[6],t);if(Array.isArray(r))for(var s=0;s<r.length;s++)li(o,i,r[s],a);else li(o,i,r,a)}}function di(e,t){var r=9+e+1;if(r<t.length){var n=t[r],i=n[1].firstChild;if(null!==i)return function e(t,r){if(null!==r){var n=r.type;if(3===n)return Hr(r,t);if(0===n)return di(-1,t[r.index]);if(4===n||5===n){var i=r.child;if(null!==i)return e(t,i);var o=t[r.index];return kt(o)?di(-1,o):Ur(o)}var a=t[16],s=a[6],u=cn(a),c=s.projection[r.projection];return null!=c?e(u,c):e(t,r.next)}return null}(n,i)}return t[7]}function pi(e,t,r,n,i,o,a){for(;null!=r;){var s=n[r.index],u=r.type;a&&0===t&&(s&&Qr(Ur(s),n),r.flags|=4),64!=(64&r.flags)&&(4===u||5===u?(pi(e,t,r.child,n,i,o,!1),ti(t,e,i,s,o)):1===u?mi(e,t,n,r,i,o):ti(t,e,i,s,o)),r=a?r.projectionNext:r.next}}function vi(e,t,r,n,i,o){pi(r,n,e.node.child,t,i,o,!1)}function mi(e,t,r,n,i,o){var a=r[16],s=a[6].projection[n.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)ti(t,e,i,s[u],o);else pi(e,t,s,a[3],i,o,!0)}function gi(e,t,r){nr(e)?e.setAttribute(t,"style",r):t.style.cssText=r}function yi(e,t,r){nr(e)?""===r?e.removeAttribute(t,"class"):e.setAttribute(t,"class",r):t.className=r}var _i,Ci,bi=function(){function e(t,r){_classCallCheck(this,e),this._lView=t,this._cdRefInjectingView=r,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}return _createClass(e,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}oi(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){var t,r,n;t=this._lView[1],n=e,Zn(r=this._lView).push(n),t.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(t).push(r[7].length-1,null)}},{key:"markForCheck",value:function(){qn(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Wn(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,r){Ft(!0);try{Wn(e,t,r)}finally{Ft(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,vi(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"rootNodes",get:function(){var e=this._lView;return null==e[0]?function e(t,r,n,i){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var a=r[n.index];if(null!==a&&i.push(Ur(a)),kt(a))for(var s=9;s<a.length;s++){var u=a[s],c=u[1].firstChild;null!==c&&e(u[1],u,c,i)}var l=n.type;if(4===l||5===l)e(t,r,n.child,i);else if(1===l){var h=r[16],f=h[6],d=cn(h),p=f.projection[n.projection];null!==p&&null!==d&&e(d[1],d,p,i,!0)}n=o?n.projectionNext:n.next}return i}(e[1],e,e[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),e}(),wi=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._view=e,r}return _inherits(t,e),_createClass(t,[{key:"detectChanges",value:function(){Gn(this._view)}},{key:"checkNoChanges",value:function(){!function(e){Ft(!0);try{Gn(e)}finally{Ft(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),t}(bi);function ki(e,t,r){return _i||(_i=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(e)),new _i(Hr(t,r))}var Si=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return xi()},e}(),xi=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t,r){if(!r&&xt(e)){var n=$r(e.index,t);return new bi(n,n)}return 3===e.type||0===e.type||4===e.type||5===e.type?new bi(t[16],t):null}(Tt(),Mt(),e)},Ei=new Ue("Set Injector scope."),Pi={},Ri={},Ii=[],Oi=void 0;function Mi(){return void 0===Oi&&(Oi=new Ye),Oi}function Di(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return t=t||Mi(),new Ti(e,r,t,n)}var Ti=function(){function e(t,r,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];r&&tt(r,(function(e){return i.processProvider(e,t,r)})),tt([t],(function(e){return i.processInjectorType(e,[],a)})),this.records.set(Be,Li(void 0,this));var s=this.records.get(Ei);this.scope=null!=s?s.value:null,this.injectorDefTypes.forEach((function(e){return i.get(e)})),this.source=o||("object"==typeof t?null:be(t))}return _createClass(e,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue.Default;this.assertNotDestroyed();var n,i=We(this);try{if(!(r&ue.SkipSelf)){var o=this.records.get(e);if(void 0===o){var a=("function"==typeof(n=e)||"object"==typeof n&&n instanceof Ue)&&de(e);o=a&&this.injectableDefInScope(a)?Li(Ai(e),Pi):null,this.records.set(e,o)}if(null!=o)return this.hydrate(e,o)}return(r&ue.Self?Mi():this.parent).get(e,t=r&ue.Optional&&t===He?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(be(e)),i)throw s;return function(e,t,r,n){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=be(t);if(Array.isArray(t))i=t.map(be).join(" -> ");else if("object"==typeof t){var o=[];for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):be(s)))}i="{".concat(o.join(", "),"}")}return"".concat(r).concat(n?"("+n+")":"","[").concat(i,"]: ").concat(e.replace(ze,"\n  "))}("\n"+e.message,i,"R3InjectorError",n),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,0,this.source)}throw s}finally{We(i)}}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,r){return e.push(be(r))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,r){var n=this;if(!(e=xe(e)))return!1;var i=ve(e),o=null==i&&e.ngModule||void 0,a=void 0===o?e:o,s=-1!==r.indexOf(a);if(void 0!==o&&(i=ve(o)),null==i)return!1;if(null!=i.imports&&!s){var u;r.push(a);try{tt(i.imports,(function(e){n.processInjectorType(e,t,r)&&(void 0===u&&(u=[]),u.push(e))}))}finally{}if(void 0!==u)for(var c=function(e){var t=u[e],r=t.ngModule,i=t.providers;tt(i,(function(e){return n.processProvider(e,r,i||Ii)}))},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(a),this.records.set(a,Li(i.factory,Pi));var h=i.providers;if(null!=h&&!s){var f=e;tt(h,(function(e){return n.processProvider(e,f,h)}))}return void 0!==o&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,r){var n=ji(e=xe(e))?e:xe(e&&e.provide),i=function(e,t,r){return Fi(e)?Li(void 0,e.useValue):Li(Vi(e,t,r),Pi)}(e,t,r);if(ji(e)||!0!==e.multi){var o=this.records.get(n);o&&void 0!==o.multi&&Jr()}else{var a=this.records.get(n);a?void 0===a.multi&&Jr():((a=Li(void 0,Pi,!0)).factory=function(){return Je(a.multi)},this.records.set(n,a)),n=e,a.multi.push(e)}this.records.set(n,i)}},{key:"hydrate",value:function(e,t){var r;return t.value===Ri?function(e){throw new Error("Cannot instantiate cyclic dependency! ".concat(e))}(be(e)):t.value===Pi&&(t.value=Ri,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(r=t.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function Ai(e){var t=de(e),r=null!==t?t.factory:Ct(e);if(null!==r)return r;var n=ve(e);if(null!==n)return n.factory;if(e instanceof Ue)throw new Error("Token ".concat(be(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var r=function(e,t){for(var r=[],n=0;n<e;n++)r.push("?");return r}(t);throw new Error("Can't resolve all parameters for ".concat(be(e),": (").concat(r.join(", "),")."))}var n=function(e){var t=e&&(e[me]||e[_e]||e[ye]&&e[ye]());if(t){var r=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(r,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in v10. Please add @Injectable() to the "'.concat(r,'" class.')),t}return null}(e);return null!==n?function(){return n.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function Vi(e,t,r){var n,i=void 0;if(ji(e))return Ai(xe(e));if(Fi(e))i=function(){return xe(e.useValue)};else if((n=e)&&n.useFactory)i=function(){return e.useFactory.apply(e,_toConsumableArray(Je(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))i=function(){return Qe(xe(e.useExisting))};else{var o=xe(e&&(e.useClass||e.provide));if(o||function(e,t,r){var n="";throw e&&t&&(n=" - only instances of Provider and Type are allowed, got: [".concat(t.map((function(e){return e==r?"?"+r+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(be(e),"'")+n)}(t,r,e),!function(e){return!!e.deps}(e))return Ai(o);i=function(){return _construct(o,_toConsumableArray(Je(e.deps)))}}return i}function Li(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:r?[]:void 0}}function Fi(e){return null!==e&&"object"==typeof e&&$e in e}function ji(e){return"function"==typeof e}var Ni=function(e,t,r){return Di({name:r},t,e,r)},Ui=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Ni(e,t,""):Ni(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=He,e.NULL=new Ye,e.\u0275prov=he({token:e,providedIn:"any",factory:function(){return Qe(Be)}}),e.__NG_ELEMENT_ID__=-1,e}(),Bi=new Ue("AnalyzeForEntryComponents"),Hi=new Map,zi=new Set;function $i(e){return"string"==typeof e?e:e.text()}function qi(e,t){for(var r=e.styles,n=e.classes,i=0,o=0;o<t.length;o++){var a=t[o];"number"==typeof a?i=a:1==i?n=we(n,a):2==i&&(r=we(r,a+": "+t[++o]+";"))}null!==r&&(e.styles=r),null!==n&&(e.classes=n)}var Wi=null;function Gi(){if(!Wi){var e=De.Symbol;if(e&&e.iterator)Wi=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),r=0;r<t.length;++r){var n=t[r];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Wi=n)}}return Wi}function Ki(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function Qi(e){return!!Zi(e)&&(Array.isArray(e)||!(e instanceof Map)&&Gi()in e)}function Zi(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ji(e,t,r){return!Object.is(e[t],r)&&(e[t]=r,!0)}function Yi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue.Default,r=Mt();return null==r?Qe(e,t):xr(Tt(),r,xe(e),t)}function Xi(){throw new Error("invalid")}function eo(e,t,r){var n=Mt();if(Ji(n,It.lFrame.bindingIndex++,t)){var i=Gt();!function(e,t,r,n,i,o,a,s){var u,c,l=Br(r,t),h=zr(e,r),f=h.inputs;if(null!=f&&(u=f[n]))Yn(e,t,u,n,i),xt(h)&&function(e,t){var r=$r(t,e);16&r[2]||(r[2]|=64)}(t,r+19);else if(3===h.type){n="class"===(c=n)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c;var d=t[11];i=null!=o?o(i,h.tagName||"",n):i,nr(d)?d.setProperty(l,n,i):sr(n)||(l.setProperty?l.setProperty(n,i):l[n]=i)}}(Dt(),n,i,e,t,r)}return eo}function to(e,t,r,n,i){var o=t.inputs,a=i?"class":"style";Yn(e,r,o[a]||i&&o.className,a,n)}function ro(e,t,r,n){var i=Mt(),o=Dt(),a=19+e,s=i[11],u=i[a]=_n(t,s,It.lFrame.currentNamespace),c=o.firstCreatePass?function(e,t,r,n,i,o,a){var s=t.consts,u=Gr(s,o),c=bn(t,r[6],e,3,i,u);return function(e,t,r,n){if(Ot()){var i=function(e,t,r){var n=e.directiveRegistry,i=null;if(n)for(var o=0;o<n.length;o++){var a=n[o];on(r,a.selectors,!1)&&(i||(i=[]),Sr(Cr(r,t),e,a.type),Pt(a)?(2&r.flags&&Zr(r),An(e,r),i.unshift(a)):i.push(a))}return i}(e,t,r),o=null===n?null:{"":-1};if(null!==i){var a=0;!0,Ln(r,e.data.length,i.length);for(var s=0;s<i.length;s++){var u=i[s];u.providersResolver&&u.providersResolver(u)}Tn(e,r,i.length);for(var c=!1,l=!1,h=0;h<i.length;h++){var f=i[h];r.mergedAttrs=ur(r.mergedAttrs,f.hostAttrs),Fn(e,t,f),Vn(e.data.length-1,f,o),null!==f.contentQueries&&(r.flags|=8),null===f.hostBindings&&null===f.hostAttrs&&0===f.hostVars||(r.flags|=128),!c&&(f.onChanges||f.onInit||f.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r.index-19),c=!0),l||!f.onChanges&&!f.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r.index-19),l=!0),On(e,f),a+=f.hostVars}!function(e,t){for(var r=t.directiveEnd,n=e.data,i=t.attrs,o=[],a=null,s=null,u=t.directiveStart;u<r;u++){var c=n[u],l=c.inputs;o.push(null!==i?Un(l,i):null),a=In(l,u,a),s=In(c.outputs,u,s)}null!==a&&((a.hasOwnProperty("class")||a.hasOwnProperty("className"))&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=s}(e,r),Mn(e,t,a)}o&&function(e,t,r){if(t)for(var n=e.localNames=[],i=0;i<t.length;i+=2){var o=r[t[i+1]];if(null==o)throw new Error("Export of name '".concat(t[i+1],"' not found!"));n.push(t[i],o)}}(r,n,o)}r.mergedAttrs=ur(r.mergedAttrs,r.attrs)}(t,r,c,Gr(s,a)),null!==c.mergedAttrs&&qi(c,c.mergedAttrs),null!==t.queries&&t.queries.elementStart(t,c),c}(e,o,i,0,t,r,n):o.data[a];At(c,!0);var l=c.mergedAttrs;null!==l&&or(s,u,l);var h=c.classes;null!==h&&yi(s,u,h);var f=c.styles;null!==f&&gi(s,u,f),fi(o,i,u,c),0===It.lFrame.elementDepthCount&&Qr(u,i),It.lFrame.elementDepthCount++,Et(c)&&(function(e,t,r){Ot()&&(function(e,t,r,n){var i=r.directiveStart,o=r.directiveEnd;e.firstCreatePass||Cr(r,t),Qr(n,t);for(var a=r.initialInputs,s=i;s<o;s++){var u=e.data[s],c=Pt(u);c&&jn(t,r,u);var l=Rr(t,e,s,r);Qr(l,t),null!==a&&Nn(0,s-i,l,u,0,a),c&&($r(r.index,t)[8]=l)}}(e,t,r,Hr(r,t)),128==(128&r.flags)&&function(e,t,r){var n=r.directiveStart,i=r.directiveEnd,o=e.expandoInstructions,a=e.firstCreatePass,s=r.index-19;try{Kt(s);for(var u=n;u<i;u++){var c=e.data[u],l=t[u];null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs?Dn(c,l):a&&o.push(null)}}finally{Kt(-1)}}(e,t,r))}(o,i,c),function(e,t,r){if(St(t))for(var n=t.directiveEnd,i=t.directiveStart;i<n;i++){var o=e.data[i];o.contentQueries&&o.contentQueries(1,r[i],i)}}(o,c,i)),null!==n&&function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hr,n=t.localNames;if(null!==n)for(var i=t.index+1,o=0;o<n.length;o+=2){var a=n[o+1],s=-1===a?r(t,e):e[a];e[i++]=s}}(i,c)}function no(){var e=Tt();Vt()?It.lFrame.isParent=!1:At(e=e.parent,!1);var t=e;It.lFrame.elementDepthCount--;var r=Dt();r.firstCreatePass&&(Qt(r,e),St(e)&&r.queries.elementEnd(e)),null!==t.classes&&function(e){return 0!=(16&e.flags)}(t)&&to(r,t,Mt(),t.classes,!0),null!==t.styles&&function(e){return 0!=(32&e.flags)}(t)&&to(r,t,Mt(),t.styles,!1)}function io(e,t,r,n){ro(e,t,r,n),no()}function oo(e){return!!e&&"function"==typeof e.then}function ao(e){return!!e&&"function"==typeof e.subscribe}function so(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,i=Mt(),o=Dt(),a=Tt();return function(e,t,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=Et(n),c=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),l=Zn(t),h=!0;if(3===n.type){var f=Hr(n,t),d=s?s(f):ct,p=d.target||f,v=l.length,m=s?function(e){return s(Ur(e[n.index])).target}:n.index;if(nr(r)){var g=null;if(!s&&u&&(g=function(e,t,r,n){var i=e.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===r&&i[o+1]===n){var s=t[7],u=i[o+2];return s.length>u?s[u]:null}"string"==typeof a&&(o+=2)}return null}(e,t,i,n.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,h=!1;else{o=co(n,t,o,!1);var y=r.listen(d.name||p,i,o);l.push(o,y),c&&c.push(i,m,v,v+1)}}else o=co(n,t,o,!0),p.addEventListener(i,o,a),l.push(o),c&&c.push(i,m,v,a)}var _,C=n.outputs;if(h&&null!==C&&(_=C[i])){var b=_.length;if(b)for(var w=0;w<b;w+=2){var k=t[_[w]][_[w+1]].subscribe(o),S=l.length;l.push(o,k),c&&c.push(i,n.index,S,-(S+1))}}}(o,i,i[11],a,e,t,r,n),so}function uo(e,t,r){try{return!1!==t(r)}catch(n){return Jn(e,n),!1}}function co(e,t,r,n){return function i(o){if(o===Function)return r;var a=2&e.flags?$r(e.index,t):t;0==(32&t[2])&&qn(a);for(var s=uo(t,r,o),u=i.__ngNextListenerFn__;u;)s=uo(t,u,o)&&s,u=u.__ngNextListenerFn__;return n&&!1===s&&(o.preventDefault(),o.returnValue=!1),s}}var lo=[];function ho(e,t,r,n,i){for(var o=e[r+1],a=null===t,s=n?dn(o):vn(o),u=!1;0!==s&&(!1===u||a);){var c=e[s+1];fo(e[s],t)&&(u=!0,e[s+1]=n?gn(c):pn(c)),s=n?dn(c):vn(c)}u&&(e[r+1]=n?pn(o):gn(o))}function fo(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&ot(e,t)>=0}function po(e,t){return function(e,t,r,n){var i,o,a,s=Mt(),u=Dt(),c=(i=It.lFrame,o=i.bindingIndex,i.bindingIndex=i.bindingIndex+2,o);(u.firstUpdatePass&&function(e,t,r,n){var i=e.data;if(null===i[r+1]){var o=i[Gt()+19],a=function(e,t){return t>=e.expandoStartIndex}(e,r);(function(e,t){return 0!=(16&e.flags)})(o)&&null===t&&!a&&(t=!1),t=function(e,t,r,n){var i=function(e){var t=It.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),o=t.residualClasses;if(null===i)0===t.classBindings&&(r=mo(r=vo(null,e,t,r,!0),t.attrs,!0),o=null);else{var a=t.directiveStylingLast;if(-1===a||e[a]!==i)if(r=vo(i,e,t,r,!0),null===o){var s=function(e,t,r){var n=t.classBindings;if(0!==vn(n))return e[dn(n)]}(e,t);void 0!==s&&Array.isArray(s)&&function(e,t,r,n){e[dn(t.classBindings)]=n}(e,t,0,s=mo(s=vo(null,e,t,s[1],!0),t.attrs,!0))}else o=function(e,t,r){for(var n=void 0,i=t.directiveEnd,o=1+t.directiveStylingLast;o<i;o++)n=mo(n,e[o].hostAttrs,!0);return mo(n,t.attrs,!0)}(e,t)}return void 0!==o&&(t.residualClasses=o),r}(i,o,t),function(e,t,r,n,i,o){var a=t.classBindings,s=dn(a),u=vn(a);e[n]=r;var c,l=!1;if(Array.isArray(r)){var h=r;(null===(c=h[1])||ot(h,c)>0)&&(l=!0)}else c=r;if(i)if(0!==u){var f=dn(e[s+1]);e[n+1]=fn(f,s),0!==f&&(e[f+1]=mn(e[f+1],n)),e[s+1]=131071&e[s+1]|n<<17}else e[n+1]=fn(s,0),0!==s&&(e[s+1]=mn(e[s+1],n)),s=n;else e[n+1]=fn(u,0),0===s?s=n:e[u+1]=mn(e[u+1],n),u=n;l&&(e[n+1]=pn(e[n+1])),ho(e,c,n,!0),ho(e,c,n,!1),function(e,t,r,n,i){var o=e.residualClasses;null!=o&&"string"==typeof t&&ot(o,t)>=0&&(r[n+1]=gn(r[n+1]))}(t,c,e,n),a=fn(s,u),t.classBindings=a}(i,o,t,r,a)}}(u,e,c),t!==un&&Ji(s,c,t))&&(null==r&&(a=function(){var e=It.lFrame;return null===e?null:e.currentSanitizer}())&&(r=a),function(e,t,r,n,i,o,a,s){if(3===t.type){var u=e.data,c=u[s+1];yo(1==(1&c)?go(u,t,r,i,vn(c),!0):void 0)||(yo(o)||2==(2&c)&&(o=go(u,null,r,i,s,!0)),function(e,t,r,n,i){var o=nr(e);i?o?e.addClass(r,n):r.classList.add(n):o?e.removeClass(r,n):r.classList.remove(n)}(n,0,Br(Gt(),r),i,o))}}(u,u.data[Gt()+19],s,s[11],e,s[c+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=be(function(e){return e instanceof function(){function e(t){_classCallCheck(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see http://g.co/ng/security#xss)"}}]),e}()?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(t,r),0,c))}(e,t,null),po}function vo(e,t,r,n,i){var o=null,a=r.directiveEnd,s=r.directiveStylingLast;for(-1===s?s=r.directiveStart:s++;s<a&&(n=mo(n,(o=t[s]).hostAttrs,i),o!==e);)s++;return null!==e&&(r.directiveStylingLast=s),n}function mo(e,t,r){var n,i,o,a,s=r?1:2,u=-1;if(null!==t)for(var c=0;c<t.length;c++){var l=t[c];"number"==typeof l?u=l:u===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),n=e,i=l,o=!!r||t[++c],a=void 0,(a=ot(n,i))>=0?n[1|a]=o:function(e,t,r,n){var i=e.length;if(i==t)e.push(r,n);else if(1===i)e.push(n,e[0]),e[0]=r;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=r,e[t+1]=n}}(n,a=~a,i,o))}return void 0===e?null:e}function go(e,t,r,n,i,o){for(var a=null===t,s=void 0;i>0;){var u=e[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=r[i+1];f===un&&(f=h?lo:void 0);var d=h?it(f,n):l===n?f:void 0;if(c&&!yo(d)&&(d=it(u,n)),yo(d)&&(s=d,a))return s;var p=e[i+1];i=a?dn(p):vn(p)}if(null!==t){var v=o?t.residualClasses:t.residualStyles;null!=v&&(s=it(v,n))}return s}function yo(e){return void 0!==e}function _o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=Mt(),n=Dt(),i=e+19,o=n.firstCreatePass?bn(n,r[6],e,3,null,null):n.data[i],a=r[i]=function(e,t){return nr(t)?t.createText(e):t.createTextNode(e)}(t,r[11]);fi(n,r,a,o),At(o,!1)}function Co(e,t){var r=qr(e)[1],n=r.data.length-1;Qt(r,{directiveStart:n,directiveEnd:n+1})}function bo(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,r=!0,n=[e];t;){var i=void 0;if(Pt(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(r){n.push(i);var o=e;o.inputs=wo(e.inputs),o.declaredInputs=wo(e.declaredInputs),o.outputs=wo(e.outputs);var a=i.hostBindings;a&&xo(e,a);var s=i.viewQuery,u=i.contentQueries;s&&ko(e,s),u&&So(e,u),le(e.inputs,i.inputs),le(e.declaredInputs,i.declaredInputs),le(e.outputs,i.outputs),o.afterContentChecked=o.afterContentChecked||i.afterContentChecked,o.afterContentInit=e.afterContentInit||i.afterContentInit,o.afterViewChecked=e.afterViewChecked||i.afterViewChecked,o.afterViewInit=e.afterViewInit||i.afterViewInit,o.doCheck=e.doCheck||i.doCheck,o.onDestroy=e.onDestroy||i.onDestroy,o.onInit=e.onInit||i.onInit}var c=i.features;if(c)for(var l=0;l<c.length;l++){var h=c[l];h&&h.ngInherit&&h(e),h===bo&&(r=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,r=null,n=e.length-1;n>=0;n--){var i=e[n];i.hostVars=t+=i.hostVars,i.hostAttrs=ur(i.hostAttrs,r=ur(r,i.hostAttrs))}}(n)}function wo(e){return e===ct?{}:e===lt?[]:e}function ko(e,t){var r=e.viewQuery;e.viewQuery=r?function(e,n){t(e,n),r(e,n)}:t}function So(e,t){var r=e.contentQueries;e.contentQueries=r?function(e,n,i){t(e,n,i),r(e,n,i)}:t}function xo(e,t){var r=e.hostBindings;e.hostBindings=r?function(e,n){t(e,n),r(e,n)}:t}var Eo=function(){function e(t,r,n){_classCallCheck(this,e),this.previousValue=t,this.currentValue=r,this.firstChange=n}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Po(e){e.type.prototype.ngOnChanges&&(e.setInput=Ro,e.onChanges=function(){var e=Io(this),t=e&&e.current;if(t){var r=e.previous;if(r===ct)e.previous=t;else for(var n in t)r[n]=t[n];e.current=null,this.ngOnChanges(t)}})}function Ro(e,t,r,n){var i=Io(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ct,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[r],u=a[s];o[s]=new Eo(u&&u.currentValue,t,a===ct),e[n]=t}function Io(e){return e.__ngSimpleChanges__||null}function Oo(e,t,r,n,i){if(e=xe(e),Array.isArray(e))for(var o=0;o<e.length;o++)Oo(e[o],t,r,n,i);else{var a=Dt(),s=Mt(),u=ji(e)?e:xe(e.provide),c=Vi(e),l=Tt(),h=65535&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>16;if(ji(e)||!e.multi){var p=new tr(c,i,Yi),v=To(u,t,i?h:h+d,f);-1===v?(Sr(Cr(l,s),a,u),Mo(a,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),r.push(p),s.push(p)):(r[v]=p,s[v]=p)}else{var m=To(u,t,h+d,f),g=To(u,t,h,h+d),y=m>=0&&r[m],_=g>=0&&r[g];if(i&&!_||!i&&!y){Sr(Cr(l,s),a,u);var C=function(e,t,r,n,i){var o=new tr(e,r,Yi);return o.multi=[],o.index=t,o.componentProviders=0,Do(o,i,n&&!r),o}(i?Vo:Ao,r.length,i,n,c);!i&&_&&(r[g].providerFactory=C),Mo(a,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),r.push(C),s.push(C)}else Mo(a,e,m>-1?m:g),Do(r[i?g:m],c,!i&&n);!i&&n&&_&&r[g].componentProviders++}}}function Mo(e,t,r){if(ji(t)||t.useClass){var n=(t.useClass||t).prototype.ngOnDestroy;n&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n)}}function Do(e,t,r){e.multi.push(t),r&&e.componentProviders++}function To(e,t,r,n){for(var i=r;i<n;i++)if(t[i]===e)return i;return-1}function Ao(e,t,r,n){return Lo(this.multi,[])}function Vo(e,t,r,n){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,s=Rr(r,r[1],this.providerFactory.index,n);Lo(o,i=s.slice(0,a));for(var u=a;u<s.length;u++)i.push(s[u])}else Lo(o,i=[]);return i}function Lo(e,t){for(var r=0;r<e.length;r++)t.push((0,e[r])());return t}function Fo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r){r.providersResolver=function(r,n){return function(e,t,r){var n=Dt();if(n.firstCreatePass){var i=Pt(e);Oo(r,n.data,n.blueprint,i,!0),Oo(t,n.data,n.blueprint,i,!1)}}(r,n?n(e):e,t)}}}var jo=function e(){_classCallCheck(this,e)},No=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(be(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),Uo=function(){var e=function e(){_classCallCheck(this,e)};return e.NULL=new No,e}(),Bo=function(){var e=function e(t){_classCallCheck(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return Ho(e)},e}(),Ho=function(e){return ki(e,Tt(),Mt())},zo=function e(){_classCallCheck(this,e)},$o=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),qo=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Wo()},e}(),Wo=function(){var e=Mt(),t=$r(Tt().index,e);return function(e){var t=e[11];if(nr(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(wt(t)?t:e)},Go=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return null}}),e}(),Ko=new function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("9.0.2"),Qo=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return Qi(e)}},{key:"create",value:function(e){return new Jo(e)}}]),e}(),Zo=function(e,t){return t},Jo=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Zo}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,r=this._removalsHead,n=0,i=null;t||r;){var o=!r||t&&t.currentIndex<ta(r,n,i)?t:r,a=ta(o,n,i),s=o.currentIndex;if(o===r)n--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)n++;else{i||(i=[]);var u=a-n,c=s-n;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&e(o,a,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Qi(e))throw new Error("Error trying to diff '".concat(be(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var r,n,i,o=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)n=e[s],i=this._trackByFn(s,n),null!==o&&Ki(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,n,i,s)),Ki(o.item,n)||this._addIdentityChange(o,n)):(o=this._mismatch(o,n,i,s),a=!0),o=o._next}else r=0,function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)t(e[r]);else for(var n,i=e[Gi()]();!(n=i.next()).done;)t(n.value)}(e,(function(e){i=t._trackByFn(r,e),null!==o&&Ki(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,r)),Ki(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,r),a=!0),o=o._next,r++})),this.length=r;return this._truncate(o),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,r,n){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,n))?(Ki(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,n)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Ki(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,n)):e=this._addAfter(new Yo(t,r),i,n),e}},{key:"_verifyReinsertion",value:function(e,t,r,n){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,n):e.currentIndex!=n&&(e.currentIndex=n,this._addToMoves(e,n)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var n=e._prevRemoved,i=e._nextRemoved;return null===n?this._removalsHead=i:n._nextRemoved=i,null===i?this._removalsTail=n:i._prevRemoved=n,this._insertAfter(e,t,r),this._addToMoves(e,r),e}},{key:"_moveAfter",value:function(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}},{key:"_addAfter",value:function(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,r){var n=null===t?this._itHead:t._next;return e._next=n,e._prev=t,null===n?this._itTail=e:n._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ea),this._linkedRecords.put(e),e.currentIndex=r,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ea),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),Yo=function e(t,r){_classCallCheck(this,e),this.item=t,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Xo=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Ki(r.trackById,e))return r;return null}},{key:"remove",value:function(e){var t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}]),e}(),ea=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,r=this.map.get(t);r||(r=new Xo,this.map.set(t,r)),r.add(e)}},{key:"get",value:function(e,t){var r=this.map.get(e);return r?r.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function ta(e,t,r){var n=e.previousIndex;if(null===n)return n;var i=0;return r&&n<r.length&&(i=r[n]),n+t+i}var ra=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||Zi(e)}},{key:"create",value:function(){return new na}}]),e}(),na=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||Zi(e)))throw new Error("Error trying to diff '".concat(be(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var r=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,n){if(r&&r.key===n)t._maybeAddToChanges(r,e),t._appendAfter=r,r=r._next;else{var i=t._getOrCreateRecordForKey(n,e);r=t._insertBeforeOrAppend(r,i)}})),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(var n=r;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var r=this._records.get(e);this._maybeAddToChanges(r,t);var n=r._prev,i=r._next;return n&&(n._next=i),i&&(i._prev=n),r._next=null,r._prev=null,r}var o=new ia(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Ki(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(r){return t(e[r],r)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),ia=function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},oa=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,r=this.factories.find((function(t){return t.supports(e)}));if(null!=r)return r;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,r){if(null!=r){var n=r.factories.slice();t=t.concat(n)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(r){if(!r)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,r)},deps:[[e,new se,new oe]]}}}]),e}();return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return new e([new Qo])}}),e}(),aa=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,r){if(r){var n=r.factories.slice();t=t.concat(n)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(r){if(!r)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,r)},deps:[[e,new se,new oe]]}}}]),e}();return e.\u0275prov=he({token:e,providedIn:"root",factory:function(){return new e([new ra])}}),e}(),sa=[new ra],ua=new oa([new Qo]),ca=new aa(sa),la=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return ha(e,Bo)},e}(),ha=function(e,t){return function(e,t,r,n){var i;Ci||(Ci=function(e){function r(e,t,n){var i;return _classCallCheck(this,r),(i=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this)))._lContainer=e,i._hostTNode=t,i._hostView=n,i}return _inherits(r,e),_createClass(r,[{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}},{key:"createEmbeddedView",value:function(e,t,r){var n=e.createEmbeddedView(t||{});return this.insert(n,r),n}},{key:"createComponent",value:function(e,t,r,n,i){var o=r||this.parentInjector;if(!i&&null==e.ngModule&&o){var a=o.get(Xe,null);a&&(i=a)}var s=e.create(o,n,void 0,i);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var r=e._lView,n=r[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),kt(r[3])){var i=this.indexOf(e);if(-1!==i)this.detach(i);else{var o=r[3],a=new Ci(o,o[6],o[3]);a.detach(a.indexOf(e))}}var s=this._adjustIndex(t);return function(e,t,r,n){var i=9+n,o=r.length;n>0&&(r[i-1][4]=t),n<o-9?(t[4]=r[i],rt(r,9+n,t)):(r.push(t),t[4]=null),t[3]=r;var a=t[17];null!==a&&r!==a&&function(e,t){var r=e[5],n=t[3][3][16];16!=(16&n[2])&&t[16]!==n&&(e[2]|=1),null===r?e[5]=[t]:r.push(t)}(a,t);var s=t[5];null!==s&&s.insertView(e),t[2]|=128}(n,r,this._lContainer,s),ri(n,r,!0,di(s,this._lContainer)),e.attachToViewContainerRef(this),rt(this._lContainer[8],s,e),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=this._lContainer[8];return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1);(function(e,t){var r=ii(e,t);r&&oi(r[1],r)})(this._lContainer,t),nt(this._lContainer[8],t)}},{key:"detach",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),r=ii(this._lContainer,t);return r&&null!=nt(this._lContainer[8],t)?new bi(r):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}},{key:"element",get:function(){return ki(t,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new Mr(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var e=kr(this._hostTNode,this._hostView),t=dr(e,this._hostView),r=function(e,t,r){if(r.parent&&-1!==r.parent.injectorIndex){for(var n=r.parent.injectorIndex,i=r.parent;null!=i.parent&&n==i.parent.injectorIndex;)i=i.parent;return i}for(var o=fr(e),a=t,s=t[6];o>1;)s=(a=a[15])[6],o--;return s}(e,this._hostView,this._hostTNode);return lr(e)&&null!=r?new Mr(r,t):new Mr(null,this._hostView)}},{key:"length",get:function(){return this._lContainer.length-9}}]),r}(e));var o=n[r.index];if(kt(o))(function(e,t){e[2]=-2})(i=o);else{var a;if(4===r.type)a=Ur(o);else if(a=n[11].createComment(""),Rt(n)){var s=n[11],u=Hr(r,n);ui(s,hi(s,u),a,function(e,t){return nr(e)?e.nextSibling(t):t.nextSibling}(s,u))}else fi(n[1],n,a,r);n[r.index]=i=new Array(o,!0,-2,n,null,null,r,a,null),$n(n,i)}return new Ci(i,r,n)}(e,t,Tt(),Mt())},fa={};function da(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push({propName:e[r],templateName:r});return t}var pa=new Ue("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return vr}}),va=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).componentDef=e,n.ngModule=r,n.componentType=e.type,n.selector=e.selectors.map(sn).join(","),n.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],n.isBoundToModule=!!r,n}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e,t,r,n){var i,o,a=(n=n||this.ngModule)?function(e,t){return{get:function(r,n,i){var o=e.get(r,fa,i);return o!==fa||n===fa?o:t.get(r,n,i)}}}(e,n.injector):e,s=a.get(zo,ir),u=a.get(Go,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=r?function(e,t,r){if(nr(e))return e.selectRootElement(t,r===st.ShadowDom);var n="string"==typeof t?e.querySelector(t):t;return n.textContent="",n}(c,r,this.componentDef.encapsulation):_n(l,s.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d="string"==typeof r&&/^#root-ng-internal-isolated-\d+/.test(r),p={components:[],scheduler:vr,clean:Qn,playerHandler:null,flags:0},v=Pn(0,-1,null,1,0,null,null,null,null,null),m=Cn(null,v,p,f,null,null,s,c,u,a);Bt(m,null);try{var g=function(e,t,r,n,i,o){var a=r[1];r[19]=e;var s=bn(a,null,0,3,null,null),u=s.mergedAttrs=t.hostAttrs;null!==u&&(qi(s,u),null!==e&&(or(i,e,u),null!==s.classes&&yi(i,e,s.classes),null!==s.styles&&gi(i,e,s.styles)));var c=n.createRenderer(e,t),l=Cn(r,En(t),null,t.onPush?64:16,r[19],s,n,c,void 0);return a.firstCreatePass&&(Sr(Cr(s,r),a,t.type),An(a,s),Ln(s,r.length,1)),$n(r,l),r[19]=l}(h,this.componentDef,m,s,c);if(h)if(r)or(c,h,["ng-version",Ko.full]);else{var y=function(e){for(var t=[],r=[],n=1,i=2;n<e.length;){var o=e[n];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++n]):8===i&&r.push(o);else{if(!rn(i))break;i=o}n++}return{attrs:t,classes:r}}(this.componentDef.selectors[0]),_=y.attrs,C=y.classes;_&&or(c,h,_),C&&C.length>0&&yi(c,h,C.join(" "))}o=zr(m[1],0),t&&(o.projection=t.map((function(e){return Array.from(e)}))),i=function(e,t,r,n,i){var o=r[1],a=function(e,t,r){var n=Tt();e.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),Tn(e,n,1),Fn(e,t,r));var i=Rr(t,e,t.length-1,n);Qr(i,t);var o=Hr(n,t);return o&&Qr(o,t),i}(o,r,t);n.components.push(a),e[8]=a,i&&i.forEach((function(e){return e(a,t)})),t.contentQueries&&t.contentQueries(1,a,r.length-1);var s=Tt();if(o.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){Kt(s.index-19);var u=r[1];On(u,t),Mn(u,r,t.hostVars),Dn(t,a)}return a}(g,this.componentDef,m,p,[Co]),wn(v,m,null)}finally{Wt()}var b=new ma(this.componentType,i,ki(Bo,o,m),m,o);return r&&!d||(b.hostView._tViewNode.child=o),b}},{key:"inputs",get:function(){return da(this.componentDef.inputs)}},{key:"outputs",get:function(){return da(this.componentDef.outputs)}}]),t}(jo),ma=function(e){function t(e,r,n,i,o){var a,s,u,c;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).location=n,a._rootLView=i,a._tNode=o,a.destroyCbs=[],a.instance=r,a.hostView=a.changeDetectorRef=new wi(i),a.hostView._tViewNode=(s=i[1],u=i,null==(c=s.node)&&(s.node=c=Rn(0,null,2,-1,null,null)),u[6]=c),a.componentType=e,a}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}},{key:"injector",get:function(){return new Mr(this._tNode,this._rootLView)}}]),t}(function(){return function e(){_classCallCheck(this,e)}}()),ga=void 0,ya=["en",[["a","p"],["AM","PM"],ga],[["AM","PM"],ga,ga],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ga,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ga,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ga,"{1} 'at' {0}",ga],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}],_a={};function Ca(e){return e in _a||(_a[e]=De.ng&&De.ng.common&&De.ng.common.locales&&De.ng.common.locales[e]),_a[e]}var ba=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,PluralCase:19,ExtraData:20};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();function wa(e){var t;null==(t=e)&&function(e,t,r,n){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined")+" [Expected=> null != ".concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}var ka=new Map,Sa={provide:Uo,useClass:function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).ngModule=e,r}return _inherits(t,e),_createClass(t,[{key:"resolveComponentFactory",value:function(e){var t=_t(e);return new va(t,this.ngModule)}}]),t}(Uo),deps:[Xe]},xa=function(e){function t(e,r){var n;_classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parent=r,n._bootstrapComponents=[],n.injector=_assertThisInitialized(n),n.destroyCbs=[];var i=bt(e),o=e[Fe]||null;return o&&wa(o),n._bootstrapComponents=mr(i.bootstrap),n._r3Injector=Di(e,r,[{provide:Xe,useValue:_assertThisInitialized(n)},Sa],be(e)),n.instance=n.get(e),n}return _inherits(t,e),_createClass(t,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ui.THROW_IF_NOT_FOUND,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue.Default;return e===Ui||e===Xe||e===Be?this:this._r3Injector.get(e,t,r)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}},{key:"componentFactoryResolver",get:function(){return this.get(Uo)}}]),t}(Xe),Ea=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).moduleType=e,null!==bt(e)&&function e(t){if(null!==t.\u0275mod.id){var r=t.\u0275mod.id;(function(e,t,r){if(t&&t!==r)throw new Error("Duplicate module registered for ".concat(e," - ").concat(be(t)," vs ").concat(be(t.name)))})(r,ka.get(r),t),ka.set(r,t)}var n=t.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach((function(t){return e(t)}))}(e),r}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e){return new xa(this.moduleType,e)}}]),t}(et),Pa=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).__isAsync=r,e}return _inherits(t,e),_createClass(t,[{key:"emit",value:function(e){_get(_getPrototypeOf(t.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,r,n){var i,o=function(e){return null},a=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},r&&(o=this.__isAsync?function(e){setTimeout((function(){return r(e)}))}:function(e){r(e)}),n&&(a=this.__isAsync?function(){setTimeout((function(){return n()}))}:function(){n()}));var s=_get(_getPrototypeOf(t.prototype),"subscribe",this).call(this,i,o,a);return e instanceof f&&e.add(s),s}}]),t}(R),Ra=new Ue("Application Initializer"),Ia=function(){var e=function(){function e(t){var r=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){r.resolve=e,r.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],r=function(){e.done=!0,e.resolve()};if(this.appInits)for(var n=0;n<this.appInits.length;n++){var i=this.appInits[n]();oo(i)&&t.push(i)}Promise.all(t).then((function(){r()})).catch((function(t){e.reject(t)})),0===t.length&&r(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Qe(Ra,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Oa=new Ue("AppId"),Ma={provide:Oa,useFactory:function(){return"".concat(Da()).concat(Da()).concat(Da())},deps:[]};function Da(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Ta=new Ue("Platform Initializer"),Aa=new Ue("Platform ID"),Va=new Ue("appBootstrapListener"),La=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Fa=new Ue("LocaleId"),ja=new Ue("DefaultCurrencyCode"),Na=function e(t,r){_classCallCheck(this,e),this.ngModuleFactory=t,this.componentFactories=r},Ua=function(e){return new Ea(e)},Ba=Ua,Ha=function(e){return Promise.resolve(Ua(e))},za=function(e){var t=Ua(e),r=mr(bt(e).declarations).reduce((function(e,t){var r=_t(t);return r&&e.push(new va(r)),e}),[]);return new Na(t,r)},$a=za,qa=function(e){return Promise.resolve(za(e))},Wa=function(){var e=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=Ba,this.compileModuleAsync=Ha,this.compileModuleAndAllComponentsSync=$a,this.compileModuleAndAllComponentsAsync=qa}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),Ga=new Ue("compilerOptions"),Ka=Promise.resolve(0);function Qa(e){"undefined"==typeof Zone?Ka.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Za=function(){function e(t){var r,n,i=t.enableLongStackTrace,o=void 0!==i&&i,a=t.shouldCoalesceEventChangeDetection,s=void 0!==a&&a;if(_classCallCheck(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pa(!1),this.onMicrotaskEmpty=new Pa(!1),this.onStable=new Pa(!1),this.onError=new Pa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=De.requestAnimationFrame,t=De.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,n=!!(r=this).shouldCoalesceEventChangeDetection&&r.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(De,(function(){e.lastRequestAnimationFrameId=-1,es(e),Xa(e)})),es(e))}(r)},r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:n},onInvokeTask:function(e,t,i,o,a,s){try{return ts(r),e.invokeTask(i,o,a,s)}finally{n&&"eventTask"===o.type&&n(),rs(r)}},onInvoke:function(e,t,n,i,o,a,s){try{return ts(r),e.invoke(n,i,o,a,s)}finally{rs(r)}},onHasTask:function(e,t,n,i){e.hasTask(n,i),t===n&&("microTask"==i.change?(r._hasPendingMicrotasks=i.microTask,es(r),Xa(r)):"macroTask"==i.change&&(r.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,n,i){return e.handleError(n,i),r.runOutsideAngular((function(){return r.onError.emit(i)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,r){return this._inner.run(e,t,r)}},{key:"runTask",value:function(e,t,r,n){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+n,e,Ya,Ja,Ja);try{return i.runTask(o,t,r)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(e,t,r){return this._inner.runGuarded(e,t,r)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function Ja(){}var Ya={};function Xa(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function es(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function ts(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function rs(e){e._nesting--,Xa(e)}var ns,is=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pa,this.onMicrotaskEmpty=new Pa,this.onStable=new Pa,this.onError=new Pa}return _createClass(e,[{key:"run",value:function(e,t,r){return e.apply(t,r)}},{key:"runGuarded",value:function(e,t,r){return e.apply(t,r)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,r,n){return e.apply(t,r)}}]),e}(),os=function(){var e=function(){function e(t){var r=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){r.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){Za.assertNotInAngularZone(),Qa((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())Qa((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,r){var n=this,i=-1;t&&t>0&&(i=setTimeout((function(){n._callbacks=n._callbacks.filter((function(e){return e.timeoutId!==i})),e(n._didWork,n.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:r})}},{key:"whenStable",value:function(e,t,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,r),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,r){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Qe(Za))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),as=function(){var e=function(){function e(){_classCallCheck(this,e),this._applications=new Map,ss.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ss.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}(),ss=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,r){return null}}]),e}()),us=function(e,t,r){var n=new Ea(r);if(0===Hi.size)return Promise.resolve(n);var i,o,a=(i=e.get(Ga,[]).concat(t).map((function(e){return e.providers})),o=[],i.forEach((function(e){return e&&o.push.apply(o,_toConsumableArray(e))})),o);if(0===a.length)return Promise.resolve(n);var s=function(){var e=De.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),u=Ui.create({providers:a}).get(s.ResourceLoader);return function(e){var t=[],r=new Map;function n(e){var t=r.get(e);if(!t){var n=function(e){return Promise.resolve(u.get(e))}(e);r.set(e,t=n.then($i))}return t}return Hi.forEach((function(e,r){var i=[];e.templateUrl&&i.push(n(e.templateUrl).then((function(t){e.template=t})));var o=e.styleUrls,a=e.styles||(e.styles=[]),s=e.styles.length;o&&o.forEach((function(t,r){a.push(""),i.push(n(t).then((function(n){a[s+r]=n,o.splice(o.indexOf(t),1),0==o.length&&(e.styleUrls=void 0)})))}));var u=Promise.all(i).then((function(){return function(e){zi.delete(e)}(r)}));t.push(u)})),Hi=new Map,Promise.all(t).then((function(){}))}().then((function(){return n}))},cs=new Ue("AllowMultipleToken"),ls=function e(t,r){_classCallCheck(this,e),this.name=t,this.token=r};function hs(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n="Platform: ".concat(t),i=new Ue(n);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=fs();if(!o||o.injector.get(cs,!1))if(e)e(r.concat(t).concat({provide:i,useValue:!0}));else{var a=r.concat(t).concat({provide:i,useValue:!0},{provide:Ei,useValue:"platform"});!function(e){if(ns&&!ns.destroyed&&!ns.injector.get(cs,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ns=e.get(ds);var t=e.get(Ta,null);t&&t.forEach((function(e){return e()}))}(Ui.create({providers:a,name:n}))}return function(e){var t=fs();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function fs(){return ns&&!ns.destroyed?ns:null}var ds=function(){var e=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var r,n,i=this,o=(r=t?t.ngZone:void 0,n=t&&t.ngZoneEventCoalescing||!1,"noop"===r?new is:("zone.js"===r?void 0:r)||new Za({enableLongStackTrace:Nr(),shouldCoalesceEventChangeDetection:n})),a=[{provide:Za,useValue:o}];return o.run((function(){var t=Ui.create({providers:a,parent:i.injector,name:e.moduleType.name}),r=e.create(t),n=r.injector.get(Lr,null);if(!n)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.onDestroy((function(){return gs(i._modules,r)})),o.runOutsideAngular((function(){return o.onError.subscribe({next:function(e){n.handleError(e)}})})),function(e,t,n){try{var o=((a=r.injector.get(Ia)).runInitializers(),a.donePromise.then((function(){return wa(r.injector.get(Fa,"en-US")||"en-US"),i._moduleDoBootstrap(r),r})));return oo(o)?o.catch((function(r){throw t.runOutsideAngular((function(){return e.handleError(r)})),r})):o}catch(s){throw t.runOutsideAngular((function(){return e.handleError(s)})),s}var a}(n,o)}))}},{key:"bootstrapModule",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=ps({},r);return us(this.injector,n,e).then((function(e){return t.bootstrapModuleFactory(e,n)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(ms);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(be(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Qe(Ui))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}();function ps(e,t){return Array.isArray(t)?t.reduce(ps,e):Object.assign(Object.assign({},e),t)}var vs,ms=((vs=function(){function e(t,r,n,i,o,a){var s=this;_classCallCheck(this,e),this._zone=t,this._console=r,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Nr(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var u=new w((function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){e.next(s._stable),e.complete()}))})),c=new w((function(e){var t;s._zone.runOutsideAngular((function(){t=s._zone.onStable.subscribe((function(){Za.assertNotInAngularZone(),Qa((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))}))}))}));var r=s._zone.onUnstable.subscribe((function(){Za.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),r.unsubscribe()}}));this.isStable=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Number.POSITIVE_INFINITY,i=null,o=t[t.length-1];return O(o)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof o&&(n=t.pop()),null===i&&1===t.length&&t[0]instanceof w?t[0]:K(n)(Q(t,i))}(u,c.pipe((function(e){return Z()((t=re,function(e){var r;r="function"==typeof t?t:function(){return t};var n=Object.create(e,ee);return n.source=e,n.subjectFactory=r,n})(e));var t})))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var r,n=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");r=e instanceof jo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);var i=r.isBoundToModule?void 0:this._injector.get(Xe),o=r.create(Ui.NULL,[],t||r.selector,i);o.onDestroy((function(){n._unloadComponent(o)}));var a=o.injector.get(os,null);return a&&o.injector.get(as).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Nr()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t=!0,r=!1,n=void 0;try{for(var i,o=this._views[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)i.value.detectChanges()}catch(h){r=!0,n=h}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}if(this._enforceNoNewChanges){var a=!0,s=!1,u=void 0;try{for(var c,l=this._views[Symbol.iterator]();!(a=(c=l.next()).done);a=!0)c.value.checkNoChanges()}catch(h){s=!0,u=h}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}}}catch(f){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(f)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;gs(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Va,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),gs(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}()).\u0275fac=function(e){return new(e||vs)(Qe(Za),Qe(La),Qe(Ui),Qe(Lr),Qe(Uo),Qe(Ia))},vs.\u0275prov=he({token:vs,factory:vs.\u0275fac}),vs);function gs(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)}var ys=function e(){_classCallCheck(this,e)},_s=function e(){_classCallCheck(this,e)},Cs={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},bs=function(){var e=function(){function e(t,r){_classCallCheck(this,e),this._compiler=t,this._config=r||Cs}return _createClass(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,n=_slicedToArray(e.split("#"),2),i=n[0],o=n[1];return void 0===o&&(o="default"),r("zn8P")(i).then((function(e){return e[o]})).then((function(e){return ws(e,i,o)})).then((function(e){return t._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var t=_slicedToArray(e.split("#"),2),n=t[0],i=t[1],o="NgFactory";return void 0===i&&(i="default",o=""),r("zn8P")(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then((function(e){return e[i+o]})).then((function(e){return ws(e,n,i)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Qe(Wa),Qe(_s,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac}),e}();function ws(e,t,r){if(!e)throw new Error("Cannot find '".concat(r,"' in '").concat(t,"'"));return e}var ks=hs(null,"core",[{provide:Aa,useValue:"unknown"},{provide:ds,deps:[Ui]},{provide:as,deps:[]},{provide:La,deps:[]}]),Ss=[{provide:ms,useClass:ms,deps:[Za,La,Ui,Lr,Uo,Ia]},{provide:pa,deps:[Za],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:Ia,useClass:Ia,deps:[[new oe,Ra]]},{provide:Wa,useClass:Wa,deps:[]},Ma,{provide:oa,useFactory:function(){return ua},deps:[]},{provide:aa,useFactory:function(){return ca},deps:[]},{provide:Fa,useFactory:function(e){return wa(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new ie(Fa),new oe,new se]]},{provide:ja,useValue:"USD"}],xs=function(){var e=function e(t){_classCallCheck(this,e)};return e.\u0275mod=mt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)(Qe(ms))},providers:Ss}),e}(),Es=null;function Ps(){return Es}var Rs,Is=new Ue("DocumentToken"),Os=((Rs=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Rs)},Rs.\u0275prov=he({factory:Ms,token:Rs,providedIn:"platform"}),Rs);function Ms(){return Qe(As)}var Ds,Ts=new Ue("Location Initialized"),As=((Ds=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._doc=e,r._init(),r}return _inherits(t,e),_createClass(t,[{key:"_init",value:function(){this.location=Ps().getLocation(),this._history=Ps().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return Ps().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){Ps().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){Ps().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"pushState",value:function(e,t,r){Vs()?this._history.pushState(e,t,r):this.location.hash=r}},{key:"replaceState",value:function(e,t,r){Vs()?this._history.replaceState(e,t,r):this.location.hash=r}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),t}(Os)).\u0275fac=function(e){return new(e||Ds)(Qe(Is))},Ds.\u0275prov=he({factory:Ls,token:Ds,providedIn:"platform"}),Ds);function Vs(){return!!window.history.pushState}function Ls(){return new As(Qe(Is))}function Fs(e,t){if(0==e.length)return t;if(0==t.length)return e;var r=0;return e.endsWith("/")&&r++,t.startsWith("/")&&r++,2==r?e+t.substring(1):1==r?e+t:e+"/"+t}function js(e){var t=e.match(/#|\?|$/),r=t&&t.index||e.length;return e.slice(0,r-("/"===e[r-1]?1:0))+e.slice(r)}function Ns(e){return e&&"?"!==e[0]?"?"+e:e}var Us,Bs=((Us=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Us)},Us.\u0275prov=he({factory:Hs,token:Us,providedIn:"root"}),Us);function Hs(e){var t=Qe(Is).location;return new Gs(Qe(Os),t&&t.origin||"")}var zs,$s,qs,Ws=new Ue("appBaseHref"),Gs=((qs=function(e){function t(e,r){var n;if(_classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._platformLocation=e,null==r&&(r=n._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return n._baseHref=r,_possibleConstructorReturn(n)}return _inherits(t,e),_createClass(t,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return Fs(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+Ns(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?"".concat(t).concat(r):t}},{key:"pushState",value:function(e,t,r,n){var i=this.prepareExternalUrl(r+Ns(n));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,r,n){var i=this.prepareExternalUrl(r+Ns(n));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),t}(Bs)).\u0275fac=function(e){return new(e||qs)(Qe(Os),Qe(Ws,8))},qs.\u0275prov=he({token:qs,factory:qs.\u0275fac}),qs),Ks=(($s=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._platformLocation=e,n._baseHref="",null!=r&&(n._baseHref=r),n}return _inherits(t,e),_createClass(t,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=Fs(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,r,n){var i=this.prepareExternalUrl(r+Ns(n));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,r,n){var i=this.prepareExternalUrl(r+Ns(n));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),t}(Bs)).\u0275fac=function(e){return new(e||$s)(Qe(Os),Qe(Ws,8))},$s.\u0275prov=he({token:$s,factory:$s.\u0275fac}),$s),Qs=((zs=function(){function e(t,r){var n=this;_classCallCheck(this,e),this._subject=new Pa,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=js(Js(i)),this._platformStrategy.onPopState((function(e){n._subject.emit({url:n.path(!0),pop:!0,state:e.state,type:e.type})}))}return _createClass(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+Ns(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Js(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(r,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ns(t)),r)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(r,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ns(t)),r)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(r){return r(e,t)}))}},{key:"subscribe",value:function(e,t,r){return this._subject.subscribe({next:e,error:t,complete:r})}}]),e}()).\u0275fac=function(e){return new(e||zs)(Qe(Bs),Qe(Os))},zs.normalizeQueryParams=Ns,zs.joinWithSlash=Fs,zs.stripTrailingSlash=js,zs.\u0275prov=he({factory:Zs,token:zs,providedIn:"root"}),zs);function Zs(){return new Qs(Qe(Bs),Qe(Os))}function Js(e){return e.replace(/\/index.html$/,"")}var Ys,Xs,eu,tu,ru,nu,iu,ou=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),au=function e(){_classCallCheck(this,e)},su=((eu=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).locale=e,r}return _inherits(t,e),_createClass(t,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return function(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),r=Ca(t);if(r)return r;var n=t.split("-")[0];if(r=Ca(n))return r;if("en"===n)return ya;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}(e)[ba.PluralCase]}(t||this.locale)(e)){case ou.Zero:return"zero";case ou.One:return"one";case ou.Two:return"two";case ou.Few:return"few";case ou.Many:return"many";default:return"other"}}}]),t}(au)).\u0275fac=function(e){return new(e||eu)(Qe(Fa))},eu.\u0275prov=he({token:eu,factory:eu.\u0275fac}),eu),uu=((Xs=function e(){_classCallCheck(this,e)}).\u0275mod=mt({type:Xs}),Xs.\u0275inj=fe({factory:function(e){return new(e||Xs)},providers:[{provide:au,useClass:su}]}),Xs),cu=((Ys=function e(){_classCallCheck(this,e)}).\u0275prov=he({token:Ys,providedIn:"root",factory:function(){return new lu(Qe(Is),window,Qe(Lr))}}),Ys),lu=function(){function e(t,r,n){_classCallCheck(this,e),this.document=t,this.window=r,this.errorHandler=n,this.offset=function(){return[0,0]}}return _createClass(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#".concat(e));if(t)return void this.scrollToElement(t);var r=this.document.querySelector("[name='".concat(e,"']"));if(r)return void this.scrollToElement(r)}catch(n){this.errorHandler.handleError(n)}}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,n=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],n-i[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}]),e}(),hu=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,r){return e.addEventListener(t,r,!1),function(){e.removeEventListener(t,r,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,r=fu||(fu=document.querySelector("base"))?fu.getAttribute("href"):null;return null==r?null:(t=r,tu||(tu=document.createElement("a")),tu.setAttribute("href",t),"/"===tu.pathname.charAt(0)?tu.pathname:"/"+tu.pathname)}},{key:"resetBaseElement",value:function(){fu=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return function(e,t){t=encodeURIComponent(t);var r=!0,n=!1,i=void 0;try{for(var o,a=e.split(";")[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value,u=s.indexOf("="),c=_slicedToArray(-1==u?[s,""]:[s.slice(0,u),s.slice(u+1)],2),l=c[0],h=c[1];if(l.trim()===t)return decodeURIComponent(h)}}catch(f){n=!0,i=f}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return null}(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new t,Es||(Es=e)}}]),t}(function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))}return _inherits(t,e),_createClass(t,[{key:"supportsDOMEvents",value:function(){return!0}}]),t}(function(){return function e(){_classCallCheck(this,e)}}())),fu=null,du=new Ue("TRANSITION_ID"),pu=[{provide:Ra,useFactory:function(e,t,r){return function(){r.get(Ia).donePromise.then((function(){var r=Ps();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return r.remove(e)}))}))}},deps:[du,Is,Ui],multi:!0}],vu=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){De.getAngularTestability=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.findTestabilityInTree(t,r);if(null==n)throw new Error("Could not find testability for element.");return n},De.getAllAngularTestabilities=function(){return e.getAllTestabilities()},De.getAllAngularRootElements=function(){return e.getAllRootElements()},De.frameworkStabilizers||(De.frameworkStabilizers=[]),De.frameworkStabilizers.push((function(e){var t=De.getAllAngularTestabilities(),r=t.length,n=!1,i=function(t){n=n||t,0==--r&&e(n)};t.forEach((function(e){e.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(e,t,r){if(null==t)return null;var n=e.getTestability(t);return null!=n?n:r?Ps().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){var t;t=new e,ss=t}}]),e}(),mu=new Ue("EventManagerPlugins"),gu=((ru=function(){function e(t,r){var n=this;_classCallCheck(this,e),this._zone=r,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=n})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,r){return this._findPluginFor(t).addEventListener(e,t,r)}},{key:"addGlobalEventListener",value:function(e,t,r){return this._findPluginFor(t).addGlobalEventListener(e,t,r)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var r=this._plugins,n=0;n<r.length;n++){var i=r[n];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}()).\u0275fac=function(e){return new(e||ru)(Qe(mu),Qe(Za))},ru.\u0275prov=he({token:ru,factory:ru.\u0275fac}),ru),yu=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,r){var n=Ps().getGlobalEventTarget(this._doc,e);if(!n)throw new Error("Unsupported event target ".concat(n," for event ").concat(t));return this.addEventListener(n,t,r)}}]),e}(),_u=((iu=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,r=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),r.add(e))})),this.onStylesAdded(r)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}()).\u0275fac=function(e){return new(e||iu)},iu.\u0275prov=he({token:iu,factory:iu.\u0275fac}),iu),Cu=((nu=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._doc=e,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(e.head),r}return _inherits(t,e),_createClass(t,[{key:"_addStylesToHost",value:function(e,t){var r=this;e.forEach((function(e){var n=r._doc.createElement("style");n.textContent=e,r._styleNodes.add(t.appendChild(n))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(r){return t._addStylesToHost(e,r)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return Ps().remove(e)}))}}]),t}(_u)).\u0275fac=function(e){return new(e||nu)(Qe(Is))},nu.\u0275prov=he({token:nu,factory:nu.\u0275fac}),nu),bu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wu=/%COMP%/g;function ku(e,t,r){for(var n=0;n<t.length;n++){var i=t[n];Array.isArray(i)?ku(e,i,r):(i=i.replace(wu,e),r.push(i))}return r}function Su(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var xu,Eu,Pu,Ru,Iu=((xu=function(){function e(t,r,n){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=r,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Ou(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case st.Emulated:var r=this.rendererByCompId.get(t.id);return r||(r=new Mu(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,r)),r.applyToHost(e),r;case st.Native:case st.ShadowDom:return new Du(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var n=ku(t.id,t.styles,[]);this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||xu)(Qe(gu),Qe(Cu),Qe(Oa))},xu.\u0275prov=he({token:xu,factory:xu.\u0275fac}),xu),Ou=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(bu[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,r){e&&e.insertBefore(t,r)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(r.textContent=""),r}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,r,n){if(n){t=n+":"+t;var i=bu[n];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}},{key:"removeAttribute",value:function(e,t,r){if(r){var n=bu[r];n?e.removeAttributeNS(n,t):e.removeAttribute("".concat(r,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,r,n){n&$o.DashCase?e.style.setProperty(t,r,n&$o.Important?"important":""):e.style[t]=r}},{key:"removeStyle",value:function(e,t,r){r&$o.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,r){e[t]=r}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Su(r)):this.eventManager.addEventListener(e,t,Su(r))}}]),e}(),Mu=function(e){function t(e,r,n,i){var o;_classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).component=n;var a,s=ku(i+"-"+n.id,n.styles,[]);return r.addStyles(s),o.contentAttr="_ngcontent-%COMP%".replace(wu,i+"-"+n.id),o.hostAttr=(a=i+"-"+n.id,"_nghost-%COMP%".replace(wu,a)),o}return _inherits(t,e),_createClass(t,[{key:"applyToHost",value:function(e){_get(_getPrototypeOf(t.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,r){var n=_get(_getPrototypeOf(t.prototype),"createElement",this).call(this,e,r);return _get(_getPrototypeOf(t.prototype),"setAttribute",this).call(this,n,this.contentAttr,""),n}}]),t}(Ou),Du=function(e){function t(e,r,n,i){var o;_classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).sharedStylesHost=r,o.hostEl=n,o.component=i,o.shadowRoot=i.encapsulation===st.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=ku(i.id,i.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],o.shadowRoot.appendChild(u)}return o}return _inherits(t,e),_createClass(t,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,r){return _get(_getPrototypeOf(t.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),r)}},{key:"insertBefore",value:function(e,r,n){return _get(_getPrototypeOf(t.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),r,n)}},{key:"removeChild",value:function(e,r){return _get(_getPrototypeOf(t.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),r)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get(_getPrototypeOf(t.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),t}(Ou),Tu=((Eu=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,r){var n=this;return e.addEventListener(t,r,!1),function(){return n.removeEventListener(e,t,r)}}},{key:"removeEventListener",value:function(e,t,r){return e.removeEventListener(t,r)}}]),t}(yu)).\u0275fac=function(e){return new(e||Eu)(Qe(Is))},Eu.\u0275prov=he({token:Eu,factory:Eu.\u0275fac}),Eu),Au=["alt","control","meta","shift"],Vu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lu={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Fu={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},ju=((Pu=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"supports",value:function(e){return null!=t.parseEventName(e)}},{key:"addEventListener",value:function(e,r,n){var i=t.parseEventName(r),o=t.eventCallback(i.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return Ps().onAndCancel(e,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(e){var r=e.toLowerCase().split("."),n=r.shift();if(0===r.length||"keydown"!==n&&"keyup"!==n)return null;var i=t._normalizeKey(r.pop()),o="";if(Au.forEach((function(e){var t=r.indexOf(e);t>-1&&(r.splice(t,1),o+=e+".")})),o+=i,0!=r.length||0===i.length)return null;var a={};return a.domEventName=n,a.fullKey=o,a}},{key:"getEventFullKey",value:function(e){var t="",r=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Lu.hasOwnProperty(t)&&(t=Lu[t]))}return Vu[t]||t}(e);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),Au.forEach((function(n){n!=r&&(0,Fu[n])(e)&&(t+=n+".")})),t+=r}},{key:"eventCallback",value:function(e,r,n){return function(i){t.getEventFullKey(i)===e&&n.runGuarded((function(){return r(i)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),t}(yu)).\u0275fac=function(e){return new(e||Pu)(Qe(Is))},Pu.\u0275prov=he({token:Pu,factory:Pu.\u0275fac}),Pu),Nu=hs(ks,"browser",[{provide:Aa,useValue:"browser"},{provide:Ta,useValue:function(){hu.makeCurrent(),vu.init()},multi:!0},{provide:Is,useFactory:function(){return function(e){rr=e}(document),document},deps:[]}]),Uu=[[],{provide:Ei,useValue:"root"},{provide:Lr,useFactory:function(){return new Lr},deps:[]},{provide:mu,useClass:Tu,multi:!0,deps:[Is,Za,Aa]},{provide:mu,useClass:ju,multi:!0,deps:[Is]},[],{provide:Iu,useClass:Iu,deps:[gu,Cu,Oa]},{provide:zo,useExisting:Iu},{provide:_u,useExisting:Cu},{provide:Cu,useClass:Cu,deps:[Is]},{provide:os,useClass:os,deps:[Za]},{provide:gu,useClass:gu,deps:[mu,Za]},[]],Bu=((Ru=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:Oa,useValue:t.appId},{provide:du,useExisting:Oa},pu]}}}]),e}()).\u0275mod=mt({type:Ru}),Ru.\u0275inj=fe({factory:function(e){return new(e||Ru)(Qe(Ru,12))},providers:Uu,imports:[uu,xs]}),Ru);function Hu(e,t){return new w((function(r){var n=e.length;if(0!==n)for(var i=new Array(n),o=0,a=0,s=function(s){var u=z(e[s]),c=!1;r.add(u.subscribe({next:function(e){c||(c=!0,a++),i[s]=e},error:function(e){return r.error(e)},complete:function(){++o!==n&&c||(a===n&&r.next(t?t.reduce((function(e,t,r){return e[t]=i[r],e}),{}):i),r.complete())}}))},u=0;u<n;u++)s(u);else r.complete()}))}"undefined"!=typeof window&&window;var zu,$u,qu,Wu,Gu=new Ue("NgValueAccessor"),Ku={provide:Gu,useExisting:Se((function(){return Qu})),multi:!0},Qu=((zu=function(){function e(t,r){_classCallCheck(this,e),this._renderer=t,this._elementRef=r,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||zu)(Yi(qo),Yi(Bo))},zu.\u0275dir=yt({type:zu,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&so("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(e){return t.onTouched()}))},features:[Fo([Ku])]}),zu),Zu={provide:Gu,useExisting:Se((function(){return Yu})),multi:!0},Ju=new Ue("CompositionEventMode"),Yu=((Wu=function(){function e(t,r,n){var i;_classCallCheck(this,e),this._renderer=t,this._elementRef=r,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=Ps()?Ps().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),e}()).\u0275fac=function(e){return new(e||Wu)(Yi(qo),Yi(Bo),Yi(Ju,8))},Wu.\u0275dir=yt({type:Wu,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&so("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(e){return t.onTouched()}))("compositionstart",(function(e){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[Fo([Zu])]}),Wu),Xu=((qu=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),e}()).\u0275fac=function(e){return new(e||qu)},qu.\u0275dir=yt({type:qu}),qu),ec=(($u=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),t}(Xu)).\u0275fac=function(e){return tc(e||$u)},$u.\u0275dir=yt({type:$u,features:[bo]}),$u),tc=Dr(ec);function rc(){throw new Error("unimplemented")}var nc,ic=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments)))._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return _inherits(t,e),_createClass(t,[{key:"validator",get:function(){return rc()}},{key:"asyncValidator",get:function(){return rc()}}]),t}(Xu),oc=((nc=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),t}(function(){function e(t){_classCallCheck(this,e),this._cd=t}return _createClass(e,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),e}())).\u0275fac=function(e){return new(e||nc)(Yi(ic,2))},nc.\u0275dir=yt({type:nc,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&po("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[bo]}),nc);function ac(e){return null==e||0===e.length}var sc=new Ue("NgValidators"),uc=new Ue("NgAsyncValidators"),cc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,lc=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"min",value:function(e){return function(t){if(ac(t.value)||ac(e))return null;var r=parseFloat(t.value);return!isNaN(r)&&r<e?{min:{min:e,actual:t.value}}:null}}},{key:"max",value:function(e){return function(t){if(ac(t.value)||ac(e))return null;var r=parseFloat(t.value);return!isNaN(r)&&r>e?{max:{max:e,actual:t.value}}:null}}},{key:"required",value:function(e){return ac(e.value)?{required:!0}:null}},{key:"requiredTrue",value:function(e){return!0===e.value?null:{required:!0}}},{key:"email",value:function(e){return ac(e.value)?null:cc.test(e.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){if(ac(t.value))return null;var r=t.value?t.value.length:0;return r<e?{minlength:{requiredLength:e,actualLength:r}}:null}}},{key:"maxLength",value:function(e){return function(t){var r=t.value?t.value.length:0;return r>e?{maxlength:{requiredLength:e,actualLength:r}}:null}}},{key:"pattern",value:function(t){return t?("string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),r=new RegExp(n)):(n=t.toString(),r=t),function(e){if(ac(e.value))return null;var t=e.value;return r.test(t)?null:{pattern:{requiredPattern:n,actualValue:t}}}):e.nullValidator;var r,n}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){if(!e)return null;var t=e.filter(hc);return 0==t.length?null:function(e){return dc(function(e,t){return t.map((function(t){return t(e)}))}(e,t))}}},{key:"composeAsync",value:function(e){if(!e)return null;var t=e.filter(hc);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1===t.length){var n=t[0];if(u(n))return Hu(n,null);if(c(n)&&Object.getPrototypeOf(n)===Object.prototype){var i=Object.keys(n);return Hu(i.map((function(e){return n[e]})),i)}}if("function"==typeof t[t.length-1]){var o=t.pop();return Hu(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(N((function(e){return o.apply(void 0,_toConsumableArray(e))})))}return Hu(t,null)}(function(e,t){return t.map((function(t){return t(e)}))}(e,t).map(fc)).pipe(N(dc))}}}]),e}();function hc(e){return null!=e}function fc(e){var t=oo(e)?z(e):e;if(!ao(t))throw new Error("Expected validator to return Promise or Observable.");return t}function dc(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function pc(e){return e.validate?function(t){return e.validate(t)}:e}function vc(e){return e.validate?function(t){return e.validate(t)}:e}var mc,gc,yc,_c,Cc,bc,wc={provide:Gu,useExisting:Se((function(){return kc})),multi:!0},kc=((mc=function(){function e(t,r){_classCallCheck(this,e),this._renderer=t,this._elementRef=r,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||mc)(Yi(qo),Yi(Bo))},mc.\u0275dir=yt({type:mc,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&so("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(e){return t.onTouched()}))},features:[Fo([wc])]}),mc),Sc={provide:Gu,useExisting:Se((function(){return Ec})),multi:!0},xc=((yc=function(){function e(){_classCallCheck(this,e),this._accessors=[]}return _createClass(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(r){t._isSameGroup(r,e)&&r[1]!==e&&r[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}()).\u0275fac=function(e){return new(e||yc)},yc.\u0275prov=he({token:yc,factory:yc.\u0275fac}),yc),Ec=((gc=function(){function e(t,r,n,i){_classCallCheck(this,e),this._renderer=t,this._elementRef=r,this._registry=n,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return _createClass(e,[{key:"ngOnInit",value:function(){this._control=this._injector.get(ic),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}}},{key:"fireUncheck",value:function(e){this.writeValue(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),e}()).\u0275fac=function(e){return new(e||gc)(Yi(qo),Yi(Bo),Yi(xc),Yi(Ui))},gc.\u0275dir=yt({type:gc,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&so("change",(function(e){return t.onChange()}))("blur",(function(e){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Fo([Sc])]}),gc),Pc={provide:Gu,useExisting:Se((function(){return Rc})),multi:!0},Rc=((_c=function(){function e(t,r){_classCallCheck(this,e),this._renderer=t,this._elementRef=r,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||_c)(Yi(qo),Yi(Bo))},_c.\u0275dir=yt({type:_c,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&so("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(e){return t.onTouched()}))},features:[Fo([Pc])]}),_c),Ic='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Oc='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Mc={provide:Gu,useExisting:Se((function(){return Dc})),multi:!0},Dc=((Cc=function(){function e(t,r){_classCallCheck(this,e),this._renderer=t,this._elementRef=r,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Ki}return _createClass(e,[{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var r=function(e,t){return null==e?"".concat(t):(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",r)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(r){t.value=t._getOptionValue(r),e(t.value)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,r=Array.from(this._optionMap.keys());t<r.length;t++){var n=r[t];if(this._compareWith(this._optionMap.get(n),e))return n}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||Cc)(Yi(qo),Yi(Bo))},Cc.\u0275dir=yt({type:Cc,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&so("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(e){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Fo([Mc])]}),Cc),Tc={provide:Gu,useExisting:Se((function(){return Ac})),multi:!0},Ac=((bc=function(){function e(t,r){_classCallCheck(this,e),this._renderer=t,this._elementRef=r,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Ki}return _createClass(e,[{key:"writeValue",value:function(e){var t,r=this;if(this.value=e,Array.isArray(e)){var n=e.map((function(e){return r._getOptionId(e)}));t=function(e,t){e._setSelected(n.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(r){var n=[];if(r.hasOwnProperty("selectedOptions"))for(var i=r.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=t._getOptionValue(a.value);n.push(s)}else for(var u=r.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=t._getOptionValue(l.value);n.push(h)}}t.value=n,e(n)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,r=Array.from(this._optionMap.keys());t<r.length;t++){var n=r[t];if(this._compareWith(this._optionMap.get(n)._value,e))return n}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||bc)(Yi(qo),Yi(Bo))},bc.\u0275dir=yt({type:bc,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&so("change",(function(e){return t.onChange(e.target)}))("blur",(function(e){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Fo([Tc])]}),bc);function Vc(e,t){return[].concat(_toConsumableArray(t.path),[e])}function Lc(e,t){e||jc(t,"Cannot find control with"),t.valueAccessor||jc(t,"No value accessor for form control with"),e.validator=lc.compose([e.validator,t.validator]),e.asyncValidator=lc.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(r){e._pendingValue=r,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Fc(e,t)}))}(e,t),function(e,t){e.registerOnChange((function(e,r){t.valueAccessor.writeValue(e),r&&t.viewToModelUpdate(e)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Fc(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange((function(e){t.valueAccessor.setDisabledState(e)})),t._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))})),t._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))}))}function Fc(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function jc(e,t){var r;throw r=e.path.length>1?"path: '".concat(e.path.join(" -> "),"'"):e.path[0]?"name: '".concat(e.path,"'"):"unspecified name attribute",new Error("".concat(t," ").concat(r))}function Nc(e){return null!=e?lc.compose(e.map(pc)):null}function Uc(e){return null!=e?lc.composeAsync(e.map(vc)):null}var Bc=[Qu,Rc,kc,Dc,Ac,Ec];function Hc(e){var t=$c(e)?e.validators:e;return Array.isArray(t)?Nc(t):t||null}function zc(e,t){var r=$c(t)?t.asyncValidators:e;return Array.isArray(r)?Uc(r):r||null}function $c(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var qc,Wc,Gc,Kc,Qc,Zc,Jc=function(){function e(t,r){_classCallCheck(this,e),this.validator=t,this.asyncValidator=r,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(e,[{key:"setValidators",value:function(e){this.validator=Hc(e)}},{key:"setAsyncValidators",value:function(e){this.asyncValidator=zc(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var r=fc(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe((function(r){return t.setErrors(r,{emitEvent:e})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,r){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var n=e;return t.forEach((function(e){n=n instanceof Xc?n.controls.hasOwnProperty(e)?n.controls[e]:null:n instanceof el&&n.at(e)||null})),n}(this,e)}},{key:"getError",value:function(e,t){var r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new Pa,this.statusChanges=new Pa}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls((function(t){return t.status===e}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(e){return e.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(e){return e.touched}))}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){$c(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}}]),e}(),Yc=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,Hc(n),zc(i,n))))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(n),e.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e._initObservables(),e}return _inherits(t,e),_createClass(t,[{key:"setValue",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==r.emitModelToViewChange&&this._onChange.forEach((function(e){return e(t.value,!1!==r.emitViewToModelChange)})),this.updateValueAndValidity(r)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),t}(Jc),Xc=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,Hc(r),zc(n,r)))).controls=e,i._initObservables(),i._setUpdateStrategy(r),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _inherits(t,e),_createClass(t,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach((function(n){t._throwIfControlMissing(n),t.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:r.emitEvent})})),this.updateValueAndValidity(r)}},{key:"patchValue",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(n){t.controls[n]&&t.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:r.emitEvent})})),this.updateValueAndValidity(r)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(r,n){r.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(e,t,r){return e[r]=t instanceof Yc?t.value:t.getRawValue(),e}))}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach((function(r){return e(t.controls[r],r)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){var t=this,r=!1;return this._forEachChild((function(n,i){r=r||t.contains(i)&&e(n)})),r}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},(function(t,r,n){return(r.enabled||e.disabled)&&(t[n]=r.value),t}))}},{key:"_reduceChildren",value:function(e,t){var r=e;return this._forEachChild((function(e,n){r=t(r,e,n)})),r}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var r=t[e];if(this.controls[r].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,r){if(void 0===e[r])throw new Error("Must supply a value for form control with name: '".concat(r,"'."))}))}}]),t}(Jc),el=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,Hc(r),zc(n,r)))).controls=e,i._initObservables(),i._setUpdateStrategy(r),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _inherits(t,e),_createClass(t,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}},{key:"removeAt",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach((function(e,n){t._throwIfControlMissing(n),t.at(n).setValue(e,{onlySelf:!0,emitEvent:r.emitEvent})})),this.updateValueAndValidity(r)}},{key:"patchValue",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e,n){t.at(n)&&t.at(n).patchValue(e,{onlySelf:!0,emitEvent:r.emitEvent})})),this.updateValueAndValidity(r)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(r,n){r.reset(e[n],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map((function(e){return e instanceof Yc?e.value:e.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach((function(t,r){e(t,r)}))}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))}},{key:"_anyControls",value:function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,r){if(void 0===e[r])throw new Error("Must supply a value for form control at index: ".concat(r,"."))}))}},{key:"_allControlsDisabled",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this.controls[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){if(n.value.enabled)return!1}}catch(o){t=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),t}(Jc),tl={provide:ec,useExisting:Se((function(){return nl}))},rl=Promise.resolve(null),nl=((Wc=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).submitted=!1,n._directives=[],n.ngSubmit=new Pa,n.form=new Xc({},Nc(e),Uc(r)),n}return _inherits(t,e),_createClass(t,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"addControl",value:function(e){var t=this;rl.then((function(){var r=t._findContainer(e.path);e.control=r.registerControl(e.name,e.control),Lc(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;rl.then((function(){var r,n,i,o=t._findContainer(e.path);o&&o.removeControl(e.name),r=t._directives,n=e,(i=r.indexOf(n))>-1&&r.splice(i,1)}))}},{key:"addFormGroup",value:function(e){var t=this;rl.then((function(){var r=t._findContainer(e.path),n=new Xc({});(function(e,t){null==e&&jc(t,"Cannot find control with"),e.validator=lc.compose([e.validator,t.validator]),e.asyncValidator=lc.composeAsync([e.asyncValidator,t.asyncValidator])})(n,e),r.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(e){var t=this;rl.then((function(){var r=t._findContainer(e.path);r&&r.removeControl(e.name)}))}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var r=this;rl.then((function(){r.form.get(e.path).setValue(t)}))}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,t=this._directives,this.form._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})),this.ngSubmit.emit(e),!1;var t}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}}]),t}(ec)).\u0275fac=function(e){return new(e||Wc)(Yi(sc,10),Yi(uc,10))},Wc.\u0275dir=yt({type:Wc,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&so("submit",(function(e){return t.onSubmit(e)}))("reset",(function(e){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fo([tl]),bo]}),Wc),il=((qc=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return Vc(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Nc(this._validators)}},{key:"asyncValidator",get:function(){return Uc(this._asyncValidators)}}]),t}(ec)).\u0275fac=function(e){return ol(e||qc)},qc.\u0275dir=yt({type:qc,features:[bo]}),qc),ol=Dr(il),al=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      \n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(Ic,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat(Oc))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(Ic,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat(Oc))}}]),e}(),sl={provide:ec,useExisting:Se((function(){return ul}))},ul=((Gc=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parent=e,i._validators=r,i._asyncValidators=n,i}return _inherits(t,e),_createClass(t,[{key:"_checkParentType",value:function(){this._parent instanceof t||this._parent instanceof nl||al.modelGroupParentException()}}]),t}(il)).\u0275fac=function(e){return new(e||Gc)(Yi(ec,5),Yi(sc,10),Yi(uc,10))},Gc.\u0275dir=yt({type:Gc,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[Fo([sl]),bo]}),Gc),cl={provide:ic,useExisting:Se((function(){return hl}))},ll=Promise.resolve(null),hl=((Zc=function(e){function t(e,r,n,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).control=new Yc,o._registered=!1,o.update=new Pa,o._parent=e,o._rawValidators=r||[],o._rawAsyncValidators=n||[],o.valueAccessor=function(e,t){if(!t)return null;Array.isArray(t)||jc(e,"Value accessor was not provided as an array for form control with");var r=void 0,n=void 0,i=void 0;return t.forEach((function(t){var o;t.constructor===Yu?r=t:(o=t,Bc.some((function(e){return o.constructor===e}))?(n&&jc(e,"More than one built-in value accessor matches form control with"),n=t):(i&&jc(e,"More than one custom value accessor matches form control with"),i=t))})),i||n||r||(jc(e,"No valid value accessor for form control with"),null)}(_assertThisInitialized(o),i),o}return _inherits(t,e),_createClass(t,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(e,t){if(!e.hasOwnProperty("model"))return!1;var r=e.model;return!!r.isFirstChange()||!Ki(t,r.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){Lc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof ul)&&this._parent instanceof il?al.formGroupNameException():this._parent instanceof ul||this._parent instanceof nl||al.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||al.missingNameException()}},{key:"_updateValue",value:function(e){var t=this;ll.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(e){var t=this,r=e.isDisabled.currentValue,n=""===r||r&&"false"!==r;ll.then((function(){n&&!t.control.disabled?t.control.disable():!n&&t.control.disabled&&t.control.enable()}))}},{key:"path",get:function(){return this._parent?Vc(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Nc(this._rawValidators)}},{key:"asyncValidator",get:function(){return Uc(this._rawAsyncValidators)}}]),t}(ic)).\u0275fac=function(e){return new(e||Zc)(Yi(ec,9),Yi(sc,10),Yi(uc,10),Yi(Gu,10))},Zc.\u0275dir=yt({type:Zc,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Fo([cl]),bo,(Po.ngInherit=!0,Po)]}),Zc),fl=((Qc=function e(){_classCallCheck(this,e)}).\u0275mod=mt({type:Qc}),Qc.\u0275inj=fe({factory:function(e){return new(e||Qc)}}),Qc),dl=((Kc=function e(){_classCallCheck(this,e)}).\u0275mod=mt({type:Kc}),Kc.\u0275inj=fe({factory:function(e){return new(e||Kc)},providers:[xc],imports:[fl]}),Kc);function pl(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[t.length-1];return O(n)?(t.pop(),H(t,n)):Q(t)}var vl=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._value=e,r}return _inherits(t,e),_createClass(t,[{key:"_subscribe",value:function(e){var r=_get(_getPrototypeOf(t.prototype),"_subscribe",this).call(this,e);return r&&!r.closed&&e.next(this._value),r}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new x;return this._value}},{key:"next",value:function(e){_get(_getPrototypeOf(t.prototype),"next",this).call(this,this._value=e)}},{key:"value",get:function(){return this.getValue()}}]),t}(R),ml=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),gl={},yl=function(){function e(t){_classCallCheck(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new _l(e,this.resultSelector))}}]),e}(),_l=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.values.push(gl),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(F(this,n,n,r))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,r,n,i){var o=this.values,a=this.toRespond?o[r]===gl?--this.toRespond:this.toRespond:0;o[r]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}]),t}(j),Cl=new w((function(e){return e.complete()}));function bl(e){return e?function(e){return new w((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Cl}function wl(e){return new w((function(t){var r;try{r=e()}catch(n){return void t.error(n)}return(r?z(r):bl()).subscribe(t)}))}function kl(){return K(1)}function Sl(e,t){return function(r){return r.lift(new xl(e,t))}}var xl=function(){function e(t,r){_classCallCheck(this,e),this.predicate=t,this.thisArg=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new El(e,this.predicate,this.thisArg))}}]),e}(),El=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).predicate=r,i.thisArg=n,i.count=0,i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}]),t}(v),Pl=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function Rl(e){return function(t){return 0===e?bl():t.lift(new Il(e))}}var Il=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new Pl}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Ol(e,this.total))}}]),e}(),Ol=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).total=r,n.ring=new Array,n.count=0,n}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t=this.ring,r=this.total,n=this.count++;t.length<r?t.push(e):t[n%r]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,i=0;i<r;i++){var o=t++%r;e.next(n[o])}e.complete()}}]),t}(v);function Ml(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Al;return function(t){return t.lift(new Dl(e))}}var Dl=function(){function e(t){_classCallCheck(this,e),this.errorFactory=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Tl(e,this.errorFactory))}}]),e}(),Tl=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).errorFactory=r,n.hasValue=!1,n}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),t}(v);function Al(){return new ml}function Vl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new Ll(e))}}var Ll=function(){function e(t){_classCallCheck(this,e),this.defaultValue=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Fl(e,this.defaultValue))}}]),e}(),Fl=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).defaultValue=r,n.isEmpty=!0,n}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),t}(v);function jl(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?Sl((function(t,r){return e(t,r,n)})):G,Rl(1),r?Vl(t):Ml((function(){return new ml})))}}function Nl(e){return function(t){var r=new Ul(e),n=t.lift(r);return r.caught=n}}var Ul=function(){function e(t){_classCallCheck(this,e),this.selector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Bl(e,this.selector,this.caught))}}]),e}(),Bl=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).selector=r,i.caught=n,i}return _inherits(t,e),_createClass(t,[{key:"error",value:function(e){if(!this.isStopped){var r;try{r=this.selector(e,this.caught)}catch(o){return void _get(_getPrototypeOf(t.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var n=new M(this,void 0,void 0);this.add(n);var i=F(this,r,void 0,void 0,n);i!==n&&this.add(i)}}}]),t}(j);function Hl(e){return function(t){return 0===e?bl():t.lift(new zl(e))}}var zl=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new Pl}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new $l(e,this.total))}}]),e}(),$l=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).total=r,n.count=0,n}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}]),t}(v);function ql(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?Sl((function(t,r){return e(t,r,n)})):G,Hl(1),r?Vl(t):Ml((function(){return new ml})))}}var Wl=function(){function e(t,r,n){_classCallCheck(this,e),this.predicate=t,this.thisArg=r,this.source=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Gl(e,this.predicate,this.thisArg,this.source))}}]),e}(),Gl=function(e){function t(e,r,n,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).predicate=r,o.thisArg=n,o.source=i,o.index=0,o.thisArg=n||_assertThisInitialized(o),o}return _inherits(t,e),_createClass(t,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(r){return void this.destination.error(r)}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),t}(v);function Kl(e,t){return"function"==typeof t?function(r){return r.pipe(Kl((function(r,n){return z(e(r,n)).pipe(N((function(e,i){return t(r,e,n,i)})))})))}:function(t){return t.lift(new Ql(e))}}var Ql=function(){function e(t){_classCallCheck(this,e),this.project=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Zl(e,this.project))}}]),e}(),Zl=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=r,n.index=0,n}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(n){return void this.destination.error(n)}this._innerSub(t,e,r)}},{key:"_innerSub",value:function(e,t,r){var n=this.innerSubscription;n&&n.unsubscribe();var i=new M(this,t,r),o=this.destination;o.add(i),this.innerSubscription=F(this,e,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||_get(_getPrototypeOf(t.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(t.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,r,n,i){this.destination.next(t)}}]),t}(j);function Jl(){return kl()(pl.apply(void 0,arguments))}function Yl(e,t){var r=!1;return arguments.length>=2&&(r=!0),function(n){return n.lift(new Xl(e,t,r))}}var Xl=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.accumulator=t,this.seed=r,this.hasSeed=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new eh(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),eh=function(e){function t(e,r,n,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).accumulator=r,o._seed=n,o.hasSeed=i,o.index=0,o}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(n){this.destination.error(n)}this.seed=t,this.destination.next(t)}},{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}}]),t}(v);function th(e,t){return $(e,t,1)}function rh(e,t,r){return function(n){return n.lift(new ih(e,t,r))}}var nh,ih=function(){function e(t,r,n){_classCallCheck(this,e),this.nextOrObserver=t,this.error=r,this.complete=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new oh(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),oh=function(e){function t(e,r,i,o){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._tapNext=y,a._tapError=y,a._tapComplete=y,a._tapError=i||y,a._tapComplete=o||y,n(r)?(a._context=_assertThisInitialized(a),a._tapNext=r):r&&(a._context=r,a._tapNext=r.next||y,a._tapError=r.error||y,a._tapComplete=r.complete||y),a}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),t}(v),ah=function(){function e(t){_classCallCheck(this,e),this.callback=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new sh(e,this.callback))}}]),e}(),sh=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).add(new f(r)),n}return _inherits(t,e),t}(v),uh=function e(t,r){_classCallCheck(this,e),this.id=t,this.url=r},ch=function(e){function t(e,r){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).navigationTrigger=i,n.restoredState=o,n}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(uh),lh=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).urlAfterRedirects=n,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),t}(uh),hh=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).reason=n,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(uh),fh=function(e){function t(e,r,n){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).error=n,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),t}(uh),dh=function(e){function t(e,r,n,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).urlAfterRedirects=n,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(uh),ph=function(e){function t(e,r,n,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).urlAfterRedirects=n,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(uh),vh=function(e){function t(e,r,n,i,o){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).urlAfterRedirects=n,a.state=i,a.shouldActivate=o,a}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),t}(uh),mh=function(e){function t(e,r,n,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).urlAfterRedirects=n,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(uh),gh=function(e){function t(e,r,n,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).urlAfterRedirects=n,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(uh),yh=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),_h=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Ch=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),bh=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),wh=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),kh=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Sh=function(){function e(t,r,n){_classCallCheck(this,e),this.routerEvent=t,this.position=r,this.anchor=n}return _createClass(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),xh=((nh=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||nh)},nh.\u0275cmp=ft({type:nh,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&io(0,"router-outlet")},directives:function(){return[Od]},encapsulation:2}),nh),Eh=function(){function e(t){_classCallCheck(this,e),this.params=t||{}}return _createClass(e,[{key:"has",value:function(e){return this.params.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function Ph(e){return new Eh(e)}function Rh(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Ih(e,t,r){var n=r.path.split("/");if(n.length>e.length)return null;if("full"===r.pathMatch&&(t.hasChildren()||n.length<e.length))return null;for(var i={},o=0;o<n.length;o++){var a=n[o],s=e[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,n.length),posParams:i}}var Oh=function e(t,r){_classCallCheck(this,e),this.routes=t,this.module=r};function Mh(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=0;r<e.length;r++){var n=e[r];Dh(n,Th(t,n))}}function Dh(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&Mh(e.children,t)}function Th(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function Ah(e){var t=e.children&&e.children.map(Ah),r=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!r.component&&(t||r.loadChildren)&&r.outlet&&"primary"!==r.outlet&&(r.component=xh),r}function Vh(e,t){var r,n=Object.keys(e),i=Object.keys(t);if(!n||!i||n.length!=i.length)return!1;for(var o=0;o<n.length;o++)if(!Lh(e[r=n[o]],t[r]))return!1;return!0}function Lh(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every((function(e){return t.indexOf(e)>-1})):e===t}function Fh(e){return Array.prototype.concat.apply([],e)}function jh(e){return e.length>0?e[e.length-1]:null}function Nh(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)}function Uh(e){return ao(e)?e:oo(e)?z(Promise.resolve(e)):pl(e)}function Bh(e,t,r){return r?function(e,t){return Vh(e,t)}(e.queryParams,t.queryParams)&&function e(t,r){if(!qh(t.segments,r.segments))return!1;if(t.numberOfChildren!==r.numberOfChildren)return!1;for(var n in r.children){if(!t.children[n])return!1;if(!e(t.children[n],r.children[n]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(r){return Lh(e[r],t[r])}))}(e.queryParams,t.queryParams)&&function e(t,r){return function t(r,n,i){if(r.segments.length>i.length)return!!qh(r.segments.slice(0,i.length),i)&&!n.hasChildren();if(r.segments.length===i.length){if(!qh(r.segments,i))return!1;for(var o in n.children){if(!r.children[o])return!1;if(!e(r.children[o],n.children[o]))return!1}return!0}var a=i.slice(0,r.segments.length),s=i.slice(r.segments.length);return!!qh(r.segments,a)&&!!r.children.primary&&t(r.children.primary,n,s)}(t,r,r.segments)}(e.root,t.root)}var Hh=function(){function e(t,r,n){_classCallCheck(this,e),this.root=t,this.queryParams=r,this.fragment=n}return _createClass(e,[{key:"toString",value:function(){return Qh.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ph(this.queryParams)),this._queryParamMap}}]),e}(),zh=function(){function e(t,r){var n=this;_classCallCheck(this,e),this.segments=t,this.children=r,this.parent=null,Nh(r,(function(e,t){return e.parent=n}))}return _createClass(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return Zh(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),e}(),$h=function(){function e(t,r){_classCallCheck(this,e),this.path=t,this.parameters=r}return _createClass(e,[{key:"toString",value:function(){return rf(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Ph(this.parameters)),this._parameterMap}}]),e}();function qh(e,t){return e.length===t.length&&e.every((function(e,r){return e.path===t[r].path}))}function Wh(e,t){var r=[];return Nh(e.children,(function(e,n){"primary"===n&&(r=r.concat(t(e,n)))})),Nh(e.children,(function(e,n){"primary"!==n&&(r=r.concat(t(e,n)))})),r}var Gh=function e(){_classCallCheck(this,e)},Kh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"parse",value:function(e){var t=new uf(e);return new Hh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,r,n;return"".concat("/".concat(function e(t,r){if(!t.hasChildren())return Zh(t);if(r){var n=t.children.primary?e(t.children.primary,!1):"",i=[];return Nh(t.children,(function(t,r){"primary"!==r&&i.push("".concat(r,":").concat(e(t,!1)))})),i.length>0?"".concat(n,"(").concat(i.join("//"),")"):n}var o=Wh(t,(function(r,n){return"primary"===n?[e(t.children.primary,!1)]:["".concat(n,":").concat(e(r,!1))]}));return"".concat(Zh(t),"/(").concat(o.join("//"),")")}(e.root,!0)),(r=e.queryParams,n=Object.keys(r).map((function(e){var t=r[e];return Array.isArray(t)?t.map((function(t){return"".concat(Yh(e),"=").concat(Yh(t))})).join("&"):"".concat(Yh(e),"=").concat(Yh(t))})),n.length?"?".concat(n.join("&")):"")).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),Qh=new Kh;function Zh(e){return e.segments.map((function(e){return rf(e)})).join("/")}function Jh(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yh(e){return Jh(e).replace(/%3B/gi,";")}function Xh(e){return Jh(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ef(e){return decodeURIComponent(e)}function tf(e){return ef(e.replace(/\+/g,"%20"))}function rf(e){return"".concat(Xh(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(Xh(e),"=").concat(Xh(t[e]))})).join("")));var t}var nf=/^[^\/()?;=#]+/;function of(e){var t=e.match(nf);return t?t[0]:""}var af=/^[^=?&#]+/,sf=/^[^?&#]+/,uf=function(){function e(t){_classCallCheck(this,e),this.url=t,this.remaining=t}return _createClass(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zh([],{}):new zh([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r.primary=new zh(e,t)),r}},{key:"parseSegment",value:function(){var e=of(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new $h(ef(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=of(this.remaining);if(t){this.capture(t);var r="";if(this.consumeOptional("=")){var n=of(this.remaining);n&&(r=n,this.capture(r))}e[ef(t)]=ef(r)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(af);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var r="";if(this.consumeOptional("=")){var n=function(e){var t=e.match(sf);return t?t[0]:""}(this.remaining);n&&(r=n,this.capture(r))}var i=tf(t),o=tf(r);if(e.hasOwnProperty(i)){var a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var r=of(this.remaining),n=this.remaining[r.length];if("/"!==n&&")"!==n&&";"!==n)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;r.indexOf(":")>-1?(i=r.substr(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");var o=this.parseChildren();t[i]=1===Object.keys(o).length?o.primary:new zh([],o),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),cf=function(){function e(t){_classCallCheck(this,e),this._root=t}return _createClass(e,[{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=lf(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=lf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=hf(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return hf(e,this._root).map((function(e){return e.value}))}},{key:"root",get:function(){return this._root.value}}]),e}();function lf(e,t){if(e===t.value)return t;var r=!0,n=!1,i=void 0;try{for(var o,a=t.children[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=lf(e,o.value);if(s)return s}}catch(u){n=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return null}function hf(e,t){if(e===t.value)return[t];var r=!0,n=!1,i=void 0;try{for(var o,a=t.children[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=hf(e,o.value);if(s.length)return s.unshift(t),s}}catch(u){n=!0,i=u}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return[]}var ff=function(){function e(t,r){_classCallCheck(this,e),this.value=t,this.children=r}return _createClass(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function df(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var pf=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).snapshot=r,Cf(_assertThisInitialized(n),e),n}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return this.snapshot.toString()}}]),t}(cf);function vf(e,t){var r=function(e,t){var r=new yf([],{},{},"",{},"primary",t,null,e.root,-1,{});return new _f("",new ff(r,[]))}(e,t),n=new vl([new $h("",{})]),i=new vl({}),o=new vl({}),a=new vl({}),s=new vl(""),u=new mf(n,i,a,s,o,"primary",t,r.root);return u.snapshot=r.root,new pf(new ff(u,[]),r)}var mf=function(){function e(t,r,n,i,o,a,s,u){_classCallCheck(this,e),this.url=t,this.params=r,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=u}return _createClass(e,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(N((function(e){return Ph(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(N((function(e){return Ph(e)})))),this._queryParamMap}}]),e}();function gf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",r=e.pathFromRoot,n=0;if("always"!==t)for(n=r.length-1;n>=1;){var i=r[n],o=r[n-1];if(i.routeConfig&&""===i.routeConfig.path)n--;else{if(o.component)break;n--}}return function(e){return e.reduce((function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}}),{params:{},data:{},resolve:{}})}(r.slice(n))}var yf=function(){function e(t,r,n,i,o,a,s,u,c,l,h){_classCallCheck(this,e),this.url=t,this.params=r,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return _createClass(e,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(e){return e.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Ph(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ph(this.queryParams)),this._queryParamMap}}]),e}(),_f=function(e){function t(e,r){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,r))).url=e,Cf(_assertThisInitialized(n),r),n}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return bf(this._root)}}]),t}(cf);function Cf(e,t){t.value._routerState=e,t.children.forEach((function(t){return Cf(e,t)}))}function bf(e){var t=e.children.length>0?" { ".concat(e.children.map(bf).join(", ")," } "):"";return"".concat(e.value).concat(t)}function wf(e){if(e.snapshot){var t=e.snapshot,r=e._futureSnapshot;e.snapshot=r,Vh(t.queryParams,r.queryParams)||e.queryParams.next(r.queryParams),t.fragment!==r.fragment&&e.fragment.next(r.fragment),Vh(t.params,r.params)||e.params.next(r.params),function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!Vh(e[r],t[r]))return!1;return!0}(t.url,r.url)||e.url.next(r.url),Vh(t.data,r.data)||e.data.next(r.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function kf(e,t){var r,n;return Vh(e.params,t.params)&&qh(r=e.url,n=t.url)&&r.every((function(e,t){return Vh(e.parameters,n[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||kf(e.parent,t.parent))}function Sf(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function xf(e,t,r,n,i){var o={};return n&&Nh(n,(function(e,t){o[t]=Array.isArray(e)?e.map((function(e){return"".concat(e)})):"".concat(e)})),new Hh(r.root===e?t:function e(t,r,n){var i={};return Nh(t.children,(function(t,o){i[o]=t===r?n:e(t,r,n)})),new zh(t.segments,i)}(r.root,e,t),o,i)}var Ef=function(){function e(t,r,n){if(_classCallCheck(this,e),this.isAbsolute=t,this.numberOfDoubleDots=r,this.commands=n,t&&n.length>0&&Sf(n[0]))throw new Error("Root segment cannot have matrix parameters");var i=n.find((function(e){return"object"==typeof e&&null!=e&&e.outlets}));if(i&&i!==jh(n))throw new Error("{outlets:{}} has to be the last command")}return _createClass(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),Pf=function e(t,r,n){_classCallCheck(this,e),this.segmentGroup=t,this.processChildren=r,this.index=n};function Rf(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:"".concat(e)}function If(e,t,r){if(e||(e=new zh([],{})),0===e.segments.length&&e.hasChildren())return Of(e,t,r);var n=function(e,t,r){for(var n=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(n>=r.length)return o;var a=e.segments[i],s=Rf(r[n]),u=n<r.length-1?r[n+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Af(s,u,a))return o;n+=2}else{if(!Af(s,{},a))return o;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}(e,t,r),i=r.slice(n.commandIndex);if(n.match&&n.pathIndex<e.segments.length){var o=new zh(e.segments.slice(0,n.pathIndex),{});return o.children.primary=new zh(e.segments.slice(n.pathIndex),e.children),Of(o,0,i)}return n.match&&0===i.length?new zh(e.segments,{}):n.match&&!e.hasChildren()?Mf(e,t,r):n.match?Of(e,0,i):Mf(e,t,r)}function Of(e,t,r){if(0===r.length)return new zh(e.segments,{});var n=function(e){return"object"!=typeof e[0]?{primary:e}:void 0===e[0].outlets?{primary:e}:e[0].outlets}(r),i={};return Nh(n,(function(r,n){null!==r&&(i[n]=If(e.children[n],t,r))})),Nh(e.children,(function(e,t){void 0===n[t]&&(i[t]=e)})),new zh(e.segments,i)}function Mf(e,t,r){for(var n=e.segments.slice(0,t),i=0;i<r.length;){if("object"==typeof r[i]&&void 0!==r[i].outlets){var o=Df(r[i].outlets);return new zh(n,o)}if(0===i&&Sf(r[0]))n.push(new $h(e.segments[t].path,r[0])),i++;else{var a=Rf(r[i]),s=i<r.length-1?r[i+1]:null;a&&s&&Sf(s)?(n.push(new $h(a,Tf(s))),i+=2):(n.push(new $h(a,{})),i++)}}return new zh(n,{})}function Df(e){var t={};return Nh(e,(function(e,r){null!==e&&(t[r]=Mf(new zh([],{}),0,e))})),t}function Tf(e){var t={};return Nh(e,(function(e,r){return t[r]="".concat(e)})),t}function Af(e,t,r){return e==r.path&&Vh(t,r.parameters)}var Vf=function(){function e(t,r,n,i){_classCallCheck(this,e),this.routeReuseStrategy=t,this.futureState=r,this.currState=n,this.forwardEvent=i}return _createClass(e,[{key:"activate",value:function(e){var t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wf(this.futureState.root),this.activateChildRoutes(t,r,e)}},{key:"deactivateChildRoutes",value:function(e,t,r){var n=this,i=df(t);e.children.forEach((function(e){var t=e.value.outlet;n.deactivateRoutes(e,i[t],r),delete i[t]})),Nh(i,(function(e,t){n.deactivateRouteAndItsChildren(e,r)}))}},{key:"deactivateRoutes",value:function(e,t,r){var n=e.value,i=t?t.value:null;if(n===i)if(n.component){var o=r.getContext(n.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var r=t.getContext(e.value.outlet);if(r&&r.outlet){var n=r.outlet.detach(),i=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:n,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var r=this,n=t.getContext(e.value.outlet);if(n){var i=df(e),o=e.value.component?n.children:t;Nh(i,(function(e,t){return r.deactivateRouteAndItsChildren(e,o)})),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,r){var n=this,i=df(t);e.children.forEach((function(e){n.activateRoutes(e,i[e.value.outlet],r),n.forwardEvent(new kh(e.value.snapshot))})),e.children.length&&this.forwardEvent(new bh(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,r){var n=e.value,i=t?t.value:null;if(wf(n),n===i)if(n.component){var o=r.getOrCreateContext(n.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(n.component){var a=r.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){var s=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Lf(s.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var r=t.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(n.snapshot),c=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=n,a.resolver=c,a.outlet&&a.outlet.activateWith(n,c),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,r)}}]),e}();function Lf(e){wf(e.value),e.children.forEach(Lf)}function Ff(e){return"function"==typeof e}function jf(e){return e instanceof Hh}var Nf=function e(t){_classCallCheck(this,e),this.segmentGroup=t||null},Uf=function e(t){_classCallCheck(this,e),this.urlTree=t};function Bf(e){return new w((function(t){return t.error(new Nf(e))}))}function Hf(e){return new w((function(t){return t.error(new Uf(e))}))}function zf(e){return new w((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var $f=function(){function e(t,r,n,i,o){_classCallCheck(this,e),this.configLoader=r,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(Xe)}return _createClass(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(N((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(Nl((function(t){if(t instanceof Uf)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof Nf)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(N((function(r){return t.createUrlTree(r,e.queryParams,e.fragment)}))).pipe(Nl((function(e){if(e instanceof Nf)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,r){var n=e.segments.length>0?new zh([],{primary:e}):e;return new Hh(n,t,r)}},{key:"expandSegmentGroup",value:function(e,t,r,n){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(N((function(e){return new zh([],e)}))):this.expandSegment(e,r,t,r.segments,n,!0)}},{key:"expandChildren",value:function(e,t,r){var n=this;return function(r,i){if(0===Object.keys(r).length)return pl({});var o=[],a=[],s={};return Nh(r,(function(r,i){var u,c,l=(u=i,c=r,n.expandSegmentGroup(e,t,c,u)).pipe(N((function(e){return s[i]=e})));"primary"===i?o.push(l):a.push(l)})),pl.apply(null,o.concat(a)).pipe(kl(),jl(),N((function(){return s})))}(r.children)}},{key:"expandSegment",value:function(e,t,r,n,i,o){var a=this;return pl.apply(void 0,_toConsumableArray(r)).pipe(N((function(s){return a.expandSegmentAgainstRoute(e,t,r,s,n,i,o).pipe(Nl((function(e){if(e instanceof Nf)return pl(null);throw e})))})),kl(),ql((function(e){return!!e})),Nl((function(e,r){if(e instanceof ml||"EmptyError"===e.name){if(a.noLeftoversInUrl(t,n,i))return pl(new zh([],{}));throw new Nf(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,r){return 0===t.length&&!e.children[r]}},{key:"expandSegmentAgainstRoute",value:function(e,t,r,n,i,o,a){return Kf(n)!==o?Bf(t):void 0===n.redirectTo?this.matchSegmentAgainstRoute(e,t,n,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,n,i,o):Bf(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,r,n,i,o){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,n,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,n,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,r,n){var i=this,o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Hf(o):this.lineralizeSegments(r,o).pipe($((function(r){var o=new zh(r,{});return i.expandSegment(e,o,t,r,n,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,r,n,i,o){var a=this,s=qf(t,n,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return Bf(t);var f=this.applyRedirectCommands(c,n.redirectTo,h);return n.redirectTo.startsWith("/")?Hf(f):this.lineralizeSegments(n,f).pipe($((function(n){return a.expandSegment(e,t,r,n.concat(i.slice(l)),o,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,r,n){var i=this;if("**"===r.path)return r.loadChildren?this.configLoader.load(e.injector,r).pipe(N((function(e){return r._loadedConfig=e,new zh(n,{})}))):pl(new zh(n,{}));var o=qf(t,r,n),a=o.matched,s=o.consumedSegments,u=o.lastChild;if(!a)return Bf(t);var c=n.slice(u);return this.getChildConfig(e,r,n).pipe($((function(e){var r=e.module,n=e.routes,o=function(e,t,r,n){return r.length>0&&function(e,t,r){return r.some((function(r){return Gf(e,t,r)&&"primary"!==Kf(r)}))}(e,r,n)?{segmentGroup:Wf(new zh(t,function(e,t){var r={};r.primary=t;var n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;""===u.path&&"primary"!==Kf(u)&&(r[Kf(u)]=new zh([],{}))}}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(n,new zh(r,e.children)))),slicedSegments:[]}:0===r.length&&function(e,t,r){return r.some((function(r){return Gf(e,t,r)}))}(e,r,n)?{segmentGroup:Wf(new zh(e.segments,function(e,t,r,n){var i={},o=!0,a=!1,s=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;Gf(e,t,l)&&!n[Kf(l)]&&(i[Kf(l)]=new zh([],{}))}}catch(h){a=!0,s=h}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return Object.assign(Object.assign({},n),i)}(e,r,n,e.children))),slicedSegments:r}:{segmentGroup:e,slicedSegments:r}}(t,s,c,n),a=o.segmentGroup,u=o.slicedSegments;return 0===u.length&&a.hasChildren()?i.expandChildren(r,n,a).pipe(N((function(e){return new zh(s,e)}))):0===n.length&&0===u.length?pl(new zh(s,{})):i.expandSegment(r,a,n,u,"primary",!0).pipe(N((function(e){return new zh(s.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,r){var n=this;return t.children?pl(new Oh(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?pl(t._loadedConfig):function(e,t,r){var n,i=t.canLoad;return i&&0!==i.length?z(i).pipe(N((function(n){var i,o=e.get(n);if(function(e){return e&&Ff(e.canLoad)}(o))i=o.canLoad(t,r);else{if(!Ff(o))throw new Error("Invalid CanLoad guard");i=o(t,r)}return Uh(i)}))).pipe(kl(),(n=function(e){return!0===e},function(e){return e.lift(new Wl(n,void 0,e))})):pl(!0)}(e.injector,t,r).pipe($((function(r){return r?n.configLoader.load(e.injector,t).pipe(N((function(e){return t._loadedConfig=e,e}))):function(e){return new w((function(t){return t.error(Rh("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):pl(new Oh([],e))}},{key:"lineralizeSegments",value:function(e,t){for(var r=[],n=t.root;;){if(r=r.concat(n.segments),0===n.numberOfChildren)return pl(r);if(n.numberOfChildren>1||!n.children.primary)return zf(e.redirectTo);n=n.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,r,n){var i=this.createSegmentGroup(e,t.root,r,n);return new Hh(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var r={};return Nh(e,(function(e,n){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);r[n]=t[i]}else r[n]=e})),r}},{key:"createSegmentGroup",value:function(e,t,r,n){var i=this,o=this.createSegments(e,t.segments,r,n),a={};return Nh(t.children,(function(t,o){a[o]=i.createSegmentGroup(e,t,r,n)})),new zh(o,a)}},{key:"createSegments",value:function(e,t,r,n){var i=this;return t.map((function(t){return t.path.startsWith(":")?i.findPosParam(e,t,n):i.findOrReturn(t,r)}))}},{key:"findPosParam",value:function(e,t,r){var n=r[t.path.substring(1)];if(!n)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return n}},{key:"findOrReturn",value:function(e,t){var r=0,n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;if(u.path===e.path)return t.splice(r),u;r++}}catch(c){i=!0,o=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return e}}]),e}();function qf(e,t,r){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||r.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var n=(t.matcher||Ih)(r,e,t);return n?{matched:!0,consumedSegments:n.consumed,lastChild:n.consumed.length,positionalParamSegments:n.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Wf(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new zh(e.segments.concat(t.segments),t.children)}return e}function Gf(e,t,r){return(!(e.hasChildren()||t.length>0)||"full"!==r.pathMatch)&&""===r.path&&void 0!==r.redirectTo}function Kf(e){return e.outlet||"primary"}var Qf=function e(t){_classCallCheck(this,e),this.path=t,this.route=this.path[this.path.length-1]},Zf=function e(t,r){_classCallCheck(this,e),this.component=t,this.route=r};function Jf(e,t,r){var n=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var r=t.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(t);return(n?n.module.injector:r).get(e)}function Yf(e,t,r){var n=df(e),i=e.value;Nh(n,(function(e,n){Yf(e,i.component?t?t.children.getContext(n):null:t,r)})),r.canDeactivateChecks.push(new Zf(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var Xf=Symbol("INITIAL_VALUE");function ed(){return Kl((function(e){return(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=null,i=null;return O(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),Q(t,i).lift(new yl(n))}).apply(void 0,_toConsumableArray(e.map((function(e){return e.pipe(Hl(1),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[t.length-1];return O(n)?(t.pop(),function(e){return Jl(t,e,n)}):function(e){return Jl(t,e)}}(Xf))})))).pipe(Yl((function(e,t){var r=!1;return t.reduce((function(e,n,i){if(e!==Xf)return e;if(n===Xf&&(r=!0),!r){if(!1===n)return n;if(i===t.length-1||jf(n))return n}return e}),e)}),Xf),Sl((function(e){return e!==Xf})),N((function(e){return jf(e)?e:!0===e})),Hl(1))}))}function td(e,t){return null!==e&&t&&t(new wh(e)),pl(!0)}function rd(e,t){return null!==e&&t&&t(new Ch(e)),pl(!0)}function nd(e,t,r){var n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?pl(n.map((function(n){return wl((function(){var i,o=Jf(n,t,r);if(function(e){return e&&Ff(e.canActivate)}(o))i=Uh(o.canActivate(t,e));else{if(!Ff(o))throw new Error("Invalid CanActivate guard");i=Uh(o(t,e))}return i.pipe(ql())}))}))).pipe(ed()):pl(!0)}function id(e,t,r){var n=t[t.length-1],i=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return wl((function(){return pl(t.guards.map((function(i){var o,a=Jf(i,t.node,r);if(function(e){return e&&Ff(e.canActivateChild)}(a))o=Uh(a.canActivateChild(n,e));else{if(!Ff(a))throw new Error("Invalid CanActivateChild guard");o=Uh(a(n,e))}return o.pipe(ql())}))).pipe(ed())}))}));return pl(i).pipe(ed())}var od=function e(){_classCallCheck(this,e)},ad=function(){function e(t,r,n,i,o,a){_classCallCheck(this,e),this.rootComponentType=t,this.config=r,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return _createClass(e,[{key:"recognize",value:function(){try{var e=cd(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),r=new yf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),n=new ff(r,t),i=new _f(this.url,n);return this.inheritParamsAndData(i._root),pl(i)}catch(o){return new w((function(e){return e.error(o)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,r=e.value,n=gf(r,this.paramsInheritanceStrategy);r.params=Object.freeze(n.params),r.data=Object.freeze(n.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}},{key:"processChildren",value:function(e,t){var r,n=this,i=Wh(t,(function(t,r){return n.processSegmentGroup(e,t,r)}));return r={},i.forEach((function(e){var t=r[e.value.outlet];if(t){var n=t.url.map((function(e){return e.toString()})).join("/"),i=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(n,"' and '").concat(i,"'."))}r[e.value.outlet]=e.value})),i.sort((function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)})),i}},{key:"processSegment",value:function(e,t,r,n){var i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;try{return this.processSegmentAgainstRoute(c,t,r,n)}catch(l){if(!(l instanceof od))throw l}}}catch(h){o=!0,a=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}if(this.noLeftoversInUrl(t,r,n))return[];throw new od}},{key:"noLeftoversInUrl",value:function(e,t,r){return 0===t.length&&!e.children[r]}},{key:"processSegmentAgainstRoute",value:function(e,t,r,n){if(e.redirectTo)throw new od;if((e.outlet||"primary")!==n)throw new od;var i,o=[],a=[];if("**"===e.path){var s=r.length>0?jh(r).parameters:{};i=new yf(r,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fd(e),n,e.component,e,sd(t),ud(t)+r.length,dd(e))}else{var u=function(e,t,r){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||r.length>0))throw new od;return{consumedSegments:[],lastChild:0,parameters:{}}}var n=(t.matcher||Ih)(r,e,t);if(!n)throw new od;var i={};Nh(n.posParams,(function(e,t){i[t]=e.path}));var o=n.consumed.length>0?Object.assign(Object.assign({},i),n.consumed[n.consumed.length-1].parameters):i;return{consumedSegments:n.consumed,lastChild:n.consumed.length,parameters:o}}(t,e,r);o=u.consumedSegments,a=r.slice(u.lastChild),i=new yf(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fd(e),n,e.component,e,sd(t),ud(t)+o.length,dd(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=cd(t,o,a,c,this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return[new ff(i,d)]}if(0===c.length&&0===f.length)return[new ff(i,[])];var p=this.processSegment(c,h,f,"primary");return[new ff(i,p)]}}]),e}();function sd(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function ud(e){for(var t=e,r=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)r+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return r-1}function cd(e,t,r,n,i){if(r.length>0&&function(e,t,r){return r.some((function(r){return ld(e,t,r)&&"primary"!==hd(r)}))}(e,r,n)){var o=new zh(t,function(e,t,r,n){var i={};i.primary=n,n._sourceSegment=e,n._segmentIndexShift=t.length;var o=!0,a=!1,s=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;if(""===l.path&&"primary"!==hd(l)){var h=new zh([],{});h._sourceSegment=e,h._segmentIndexShift=t.length,i[hd(l)]=h}}}catch(f){a=!0,s=f}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return i}(e,t,n,new zh(r,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===r.length&&function(e,t,r){return r.some((function(r){return ld(e,t,r)}))}(e,r,n)){var a=new zh(e.segments,function(e,t,r,n,i,o){var a={},s=!0,u=!1,c=void 0;try{for(var l,h=n[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var f=l.value;if(ld(e,r,f)&&!i[hd(f)]){var d=new zh([],{});d._sourceSegment=e,d._segmentIndexShift="legacy"===o?e.segments.length:t.length,a[hd(f)]=d}}}catch(p){u=!0,c=p}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}return Object.assign(Object.assign({},i),a)}(e,t,r,n,e.children,i));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:r}}var s=new zh(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:r}}function ld(e,t,r){return(!(e.hasChildren()||t.length>0)||"full"!==r.pathMatch)&&""===r.path&&void 0===r.redirectTo}function hd(e){return e.outlet||"primary"}function fd(e){return e.data||{}}function dd(e){return e.resolve||{}}function pd(e,t,r,n){var i=Jf(e,t,n);return Uh(i.resolve?i.resolve(t,r):i(t,r))}function vd(e){return function(t){return t.pipe(Kl((function(t){var r=e(t);return r?z(r).pipe(N((function(){return t}))):z([t])})))}}var md=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}(),gd=new Ue("ROUTES"),yd=function(){function e(t,r,n,i){_classCallCheck(this,e),this.loader=t,this.compiler=r,this.onLoadStartListener=n,this.onLoadEndListener=i}return _createClass(e,[{key:"load",value:function(e,t){var r=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(N((function(n){r.onLoadEndListener&&r.onLoadEndListener(t);var i=n.create(e);return new Oh(Fh(i.injector.get(gd)).map(Ah),i)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?z(this.loader.load(e)):Uh(e()).pipe($((function(e){return e instanceof et?pl(e):z(t.compiler.compileModuleAsync(e))})))}}]),e}(),_d=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function Cd(e){throw e}function bd(e,t,r){return t.parse("/")}function wd(e,t){return pl(null)}var kd,Sd,xd,Ed,Pd=((kd=function(){function e(t,r,n,i,o,a,s,u){var c=this;_classCallCheck(this,e),this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new R,this.errorHandler=Cd,this.malformedUriErrorHandler=bd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:wd,afterPreactivation:wd},this.urlHandlingStrategy=new _d,this.routeReuseStrategy=new md,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(Xe),this.console=o.get(La);var l=o.get(Za);this.isNgZoneEnabled=l instanceof Za,this.resetConfig(u),this.currentUrlTree=new Hh(new zh([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new yd(a,s,(function(e){return c.triggerEvent(new yh(e))}),(function(e){return c.triggerEvent(new _h(e))})),this.routerState=vf(this.currentUrlTree,this.rootComponentType),this.transitions=new vl({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(e,[{key:"setupNavigations",value:function(e){var t=this,r=this.events;return e.pipe(Sl((function(e){return 0!==e.id})),N((function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),Kl((function(e){var n,i,o,a,s=!1,u=!1;return pl(e).pipe(rh((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}})),Kl((function(e){var n,i,o,a,s=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||s)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return pl(e).pipe(Kl((function(e){var n=t.transitions.getValue();return r.next(new ch(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==t.transitions.getValue()?Cl:[e]})),Kl((function(e){return Promise.resolve(e)})),(n=t.ngModule.injector,i=t.configLoader,o=t.urlSerializer,a=t.config,function(e){return e.pipe(Kl((function(e){return function(e,t,r,n,i){return new $f(e,t,r,n,i).apply()}(n,i,o,e.extractedUrl,a).pipe(N((function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})})))})))}),rh((function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})})),function(e,r,n,i,o){return function(n){return n.pipe($((function(n){return function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new ad(e,t,r,n,i,o).recognize()}(e,r,n.urlAfterRedirects,(a=n.urlAfterRedirects,t.serializeUrl(a)),i,o).pipe(N((function(e){return Object.assign(Object.assign({},n),{targetSnapshot:e})})));var a})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),rh((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),rh((function(e){var n=new dh(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);r.next(n)})));if(s&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.id,c=e.extractedUrl,l=e.source,h=e.restoredState,f=e.extras,d=new ch(u,t.serializeUrl(c),l,h);r.next(d);var p=vf(c,t.rootComponentType).snapshot;return pl(Object.assign(Object.assign({},e),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},f),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Cl})),vd((function(e){var r=e.targetSnapshot,n=e.id,i=e.extractedUrl,o=e.rawUrl,a=e.extras,s=a.skipLocationChange,u=a.replaceUrl;return t.hooks.beforePreactivation(r,{navigationId:n,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),rh((function(e){var r=new ph(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(r)})),N((function(e){return Object.assign(Object.assign({},e),{guards:(r=e.targetSnapshot,n=e.currentSnapshot,i=t.rootContexts,o=r._root,function e(t,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=df(r);return t.children.forEach((function(t){!function(t,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=t.value,s=r?r.value:null,u=n?n.getContext(t.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){var c=function(e,t,r){if("function"==typeof r)return r(e,t);switch(r){case"pathParamsChange":return!qh(e.url,t.url);case"pathParamsOrQueryParamsChange":return!qh(e.url,t.url)||!Vh(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kf(e,t)||!Vh(e.queryParams,t.queryParams);case"paramsChange":default:return!kf(e,t)}}(s,a,a.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Qf(i)):(a.data=s.data,a._resolvedData=s._resolvedData),e(t,r,a.component?u?u.children:null:n,i,o),c&&o.canDeactivateChecks.push(new Zf(u&&u.outlet&&u.outlet.component||null,s))}else s&&Yf(r,u,o),o.canActivateChecks.push(new Qf(i)),e(t,null,a.component?u?u.children:null:n,i,o)}(t,a[t.value.outlet],n,i.concat([t.value]),o),delete a[t.value.outlet]})),Nh(a,(function(e,t){return Yf(e,n.getContext(t),o)})),o}(o,n?n._root:null,i,[o.value]))});var r,n,i,o})),function(e,t){return function(r){return r.pipe($((function(r){var n=r.targetSnapshot,i=r.currentSnapshot,o=r.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?pl(Object.assign(Object.assign({},r),{guardsResult:!0})):function(e,t,r,n){return z(e).pipe($((function(e){return function(e,t,r,n,i){var o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?pl(o.map((function(o){var a,s=Jf(o,t,i);if(function(e){return e&&Ff(e.canDeactivate)}(s))a=Uh(s.canDeactivate(e,t,r,n));else{if(!Ff(s))throw new Error("Invalid CanDeactivate guard");a=Uh(s(e,t,r,n))}return a.pipe(ql())}))).pipe(ed()):pl(!0)}(e.component,e.route,r,t,n)})),ql((function(e){return!0!==e}),!0))}(s,n,i,e).pipe($((function(r){return r&&"boolean"==typeof r?function(e,t,r,n){return z(t).pipe(th((function(t){return z([rd(t.route.parent,n),td(t.route,n),id(e,t.path,r),nd(e,t.route,r)]).pipe(kl(),ql((function(e){return!0!==e}),!0))})),ql((function(e){return!0!==e}),!0))}(n,a,e,t):pl(r)})),N((function(e){return Object.assign(Object.assign({},r),{guardsResult:e})})))})))}}(t.ngModule.injector,(function(e){return t.triggerEvent(e)})),rh((function(e){if(jf(e.guardsResult)){var r=Rh('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw r.url=e.guardsResult,r}})),rh((function(e){var r=new vh(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(r)})),Sl((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var n=new hh(e.id,t.serializeUrl(e.extractedUrl),"");return r.next(n),e.resolve(!1),!1}return!0})),vd((function(e){if(e.guards.canActivateChecks.length)return pl(e).pipe(rh((function(e){var r=new mh(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(r)})),(r=t.paramsInheritanceStrategy,n=t.ngModule.injector,function(e){return e.pipe($((function(e){var t=e.targetSnapshot,i=e.guards.canActivateChecks;return i.length?z(i).pipe(th((function(e){return function(e,t,r,n){return function(e,t,r,n){var i=Object.keys(e);if(0===i.length)return pl({});if(1===i.length){var o=i[0];return pd(e[o],t,r,n).pipe(N((function(e){return _defineProperty({},o,e)})))}var a={};return z(i).pipe($((function(i){return pd(e[i],t,r,n).pipe(N((function(e){return a[i]=e,e})))}))).pipe(jl(),N((function(){return a})))}(e._resolve,e,t,n).pipe(N((function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),gf(e,r).resolve),null})))}(e.route,t,r,n)})),function(e,t){return arguments.length>=2?function(r){return _(Yl(e,t),Rl(1),Vl(t))(r)}:function(t){return _(Yl((function(t,r,n){return e(t,r,n+1)})),Rl(1))(t)}}((function(e,t){return e})),N((function(t){return e}))):pl(e)})))}),rh((function(e){var r=new gh(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(r)})));var r,n})),vd((function(e){var r=e.targetSnapshot,n=e.id,i=e.extractedUrl,o=e.rawUrl,a=e.extras,s=a.skipLocationChange,u=a.replaceUrl;return t.hooks.afterPreactivation(r,{navigationId:n,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),N((function(e){var r=function(e,t,r){var n=function e(t,r,n){if(n&&t.shouldReuseRoute(r.value,n.value.snapshot)){var i=n.value;i._futureSnapshot=r.value;var o=function(t,r,n){return r.children.map((function(r){var i=!0,o=!1,a=void 0;try{for(var s,u=n.children[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(t.shouldReuseRoute(c.value.snapshot,r.value))return e(t,r,c)}}catch(l){o=!0,a=l}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return e(t,r)}))}(t,r,n);return new ff(i,o)}var a=t.retrieve(r.value);if(a){var s=a.route;return function e(t,r){if(t.value.routeConfig!==r.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==r.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");r.value._futureSnapshot=t.value;for(var n=0;n<t.children.length;++n)e(t.children[n],r.children[n])}(r,s),s}var u,c=new mf(new vl((u=r.value).url),new vl(u.params),new vl(u.queryParams),new vl(u.fragment),new vl(u.data),u.outlet,u.component,u),l=r.children.map((function(r){return e(t,r)}));return new ff(c,l)}(e,t._root,r?r._root:void 0);return new pf(n,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:r})})),rh((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),(i=t.rootContexts,o=t.routeReuseStrategy,a=function(e){return t.triggerEvent(e)},N((function(e){return new Vf(o,e.targetRouterState,e.currentRouterState,a).activate(i),e}))),rh({next:function(){s=!0},complete:function(){s=!0}}),(n=function(){if(!s&&!u){t.resetUrlToCurrentUrlTree();var n=new hh(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));r.next(n),e.resolve(!1)}t.currentNavigation=null},function(e){return e.lift(new ah(n))}),Nl((function(n){if(u=!0,(s=n)&&s.ngNavigationCancelingError){var i=jf(n.url);i||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var o=new hh(e.id,t.serializeUrl(e.extractedUrl),n.message);r.next(o),i?setTimeout((function(){var r=t.urlHandlingStrategy.merge(n.url,t.rawUrlTree);return t.scheduleNavigation(r,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})}),0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var a=new fh(e.id,t.serializeUrl(e.extractedUrl),n);r.next(a);try{e.resolve(t.errorHandler(n))}catch(c){e.reject(c)}}var s;return Cl})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var r=e.parseUrl(t.url),n="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout((function(){e.scheduleNavigation(r,n,i,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){Mh(e),this.config=e.map(Ah),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.relativeTo,n=t.queryParams,i=t.fragment,o=t.preserveQueryParams,a=t.queryParamsHandling,s=t.preserveFragment;Nr()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var u=r||this.routerState.root,c=s?this.currentUrlTree.fragment:i,l=null;if(a)switch(a){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),n);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=n||null}else l=o?this.currentUrlTree.queryParams:n||null;return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,r,n,i){if(0===r.length)return xf(t.root,t.root,t,n,i);var o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Ef(!0,0,e);var t=0,r=!1,n=e.reduce((function(e,n,i){if("object"==typeof n&&null!=n){if(n.outlets){var o={};return Nh(n.outlets,(function(e,t){o[t]="string"==typeof e?e.split("/"):e})),[].concat(_toConsumableArray(e),[{outlets:o}])}if(n.segmentPath)return[].concat(_toConsumableArray(e),[n.segmentPath])}return"string"!=typeof n?[].concat(_toConsumableArray(e),[n]):0===i?(n.split("/").forEach((function(n,i){0==i&&"."===n||(0==i&&""===n?r=!0:".."===n?t++:""!=n&&e.push(n))})),e):[].concat(_toConsumableArray(e),[n])}),[]);return new Ef(r,t,n)}(r);if(o.toRoot())return xf(t.root,new zh([],{}),t,n,i);var a=function(e,t,r){if(e.isAbsolute)return new Pf(t.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new Pf(r.snapshot._urlSegment,!0,0);var n=Sf(e.commands[0])?0:1;return function(e,t,r){for(var n=e,i=t,o=r;o>i;){if(o-=i,!(n=n.parent))throw new Error("Invalid number of '../'");i=n.segments.length}return new Pf(n,!1,i-o)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+n,e.numberOfDoubleDots)}(o,t,e),s=a.processChildren?Of(a.segmentGroup,a.index,o.commands):If(a.segmentGroup,a.index,o.commands);return xf(a.segmentGroup,s,t,n,i)}(u,this.currentUrlTree,e,l,c)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};Nr()&&this.isNgZoneEnabled&&!Za.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var r=jf(e)?e:this.parseUrl(e),n=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(n,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var r=e[t];if(null==r)throw new Error("The requested path contains ".concat(r," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(r){t=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(jf(e))return Bh(this.currentUrlTree,e,t);var r=this.parseUrl(e);return Bh(this.currentUrlTree,r,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,r){var n=e[r];return null!=n&&(t[r]=n),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new lh(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,r,n,i){var o,a,s,u=this.getTransition();if(u&&"imperative"!==t&&"imperative"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"hashchange"==t&&"popstate"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"popstate"==t&&"hashchange"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);i?(o=i.resolve,a=i.reject,s=i.promise):s=new Promise((function(e,t){o=e,a=t}));var c=++this.navigationId;return this.setTransition({id:c,source:t,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:n,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,r,n){var i=this.urlSerializer.serialize(e);n=n||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},n),{navigationId:r})):this.location.go(i,"",Object.assign(Object.assign({},n),{navigationId:r}))}},{key:"resetStateAndUrl",value:function(e,t,r){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),e}()).\u0275fac=function(e){Xi()},kd.\u0275dir=yt({type:kd}),kd),Rd=function e(){_classCallCheck(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new Id,this.attachRef=null},Id=function(){function e(){_classCallCheck(this,e),this.contexts=new Map}return _createClass(e,[{key:"onChildOutletCreated",value:function(e,t){var r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new Rd,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),Od=((Sd=function(){function e(t,r,n,i,o){_classCallCheck(this,e),this.parentContexts=t,this.location=r,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Pa,this.deactivateEvents=new Pa,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var r=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),n=this.parentContexts.getOrCreateContext(this.name).children,i=new Md(e,n,this.location.injector);this.activated=this.location.createComponent(r,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),e}()).\u0275fac=function(e){return new(e||Sd)(Yi(Id),Yi(la),Yi(Uo),function(e,t){var r=e.attrs;if(r)for(var n=r.length,i=0;i<n;){var o=r[i];if(ar(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<n&&"string"==typeof r[i];)i++;else{if("name"===o)return r[i+1];i+=2}}return null}(Tt()),Yi(Si))},Sd.\u0275dir=yt({type:Sd,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),Sd),Md=function(){function e(t,r,n){_classCallCheck(this,e),this.route=t,this.childContexts=r,this.parent=n}return _createClass(e,[{key:"get",value:function(e,t){return e===mf?this.route:e===Id?this.childContexts:this.parent.get(e,t)}}]),e}(),Dd=function e(){_classCallCheck(this,e)},Td=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return pl(null)}}]),e}(),Ad=((Ed=function(){function e(t,r,n,i,o){_classCallCheck(this,e),this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=new yd(r,n,(function(e){return t.triggerEvent(new yh(e))}),(function(e){return t.triggerEvent(new _h(e))}))}return _createClass(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Sl((function(e){return e instanceof lh})),th((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(Xe);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var c=u._loadedConfig;r.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?r.push(this.preloadConfig(e,u)):u.children&&r.push(this.processRoutes(e,u.children))}}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return z(r).pipe(K(),N((function(e){})))}},{key:"preloadConfig",value:function(e,t){var r=this;return this.preloadingStrategy.preload(t,(function(){return r.loader.load(e.injector,t).pipe($((function(e){return t._loadedConfig=e,r.processRoutes(e.module,e.routes)})))}))}}]),e}()).\u0275fac=function(e){return new(e||Ed)(Qe(Pd),Qe(ys),Qe(Wa),Qe(Ui),Qe(Dd))},Ed.\u0275prov=he({token:Ed,factory:Ed.\u0275fac}),Ed),Vd=((xd=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.router=t,this.viewportScroller=r,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}return _createClass(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof ch?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lh&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Sh&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new Sh(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){Xi()},xd.\u0275dir=yt({type:xd}),xd),Ld=new Ue("ROUTER_CONFIGURATION"),Fd=new Ue("ROUTER_FORROOT_GUARD"),jd=[Qs,{provide:Gh,useClass:Kh},{provide:Pd,useFactory:function(e,t,r,n,i,o,a,s){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},c=arguments.length>9?arguments[9]:void 0,l=arguments.length>10?arguments[10]:void 0,h=new Pd(null,t,r,n,i,o,a,Fh(s));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=Ps();h.events.subscribe((function(e){f.logGroup("Router Event: ".concat(e.constructor.name)),f.log(e.toString()),f.log(e),f.logGroupEnd()}))}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[ms,Gh,Id,Qs,Ui,ys,Wa,gd,Ld,[function(){return function e(){_classCallCheck(this,e)}}(),new oe],[function(){return function e(){_classCallCheck(this,e)}}(),new oe]]},Id,{provide:mf,useFactory:function(e){return e.routerState.root},deps:[Pd]},{provide:ys,useClass:bs},Ad,Td,function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return t().pipe(Nl((function(){return pl(null)})))}}]),e}(),{provide:Ld,useValue:{enableTracing:!1}}];function Nd(){return new ls("Router",Pd)}var Ud,Bd=((Ud=function(){function e(t,r){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t,r){return{ngModule:e,providers:[jd,qd(t),{provide:Fd,useFactory:$d,deps:[[Pd,new oe,new se]]},{provide:Ld,useValue:r||{}},{provide:Bs,useFactory:zd,deps:[Os,[new ie(Ws),new oe],Ld]},{provide:Vd,useFactory:Hd,deps:[Pd,cu,Ld]},{provide:Dd,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Td},{provide:ls,multi:!0,useFactory:Nd},[Gd,{provide:Ra,multi:!0,useFactory:Kd,deps:[Gd]},{provide:Jd,useFactory:Qd,deps:[Gd]},{provide:Va,multi:!0,useExisting:Jd}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[qd(t)]}}}]),e}()).\u0275mod=mt({type:Ud}),Ud.\u0275inj=fe({factory:function(e){return new(e||Ud)(Qe(Fd,8),Qe(Pd,8))}}),Ud);function Hd(e,t,r){return r.scrollOffset&&t.setOffset(r.scrollOffset),new Vd(e,t,r)}function zd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.useHash?new Ks(e,t):new Gs(e,t)}function $d(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function qd(e){return[{provide:Bi,multi:!0,useValue:e},{provide:gd,multi:!0,useValue:e}]}var Wd,Gd=((Wd=function(){function e(t){_classCallCheck(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new R}return _createClass(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(Ts,Promise.resolve(null)).then((function(){var t=null,r=new Promise((function(e){return t=e})),n=e.injector.get(Pd),i=e.injector.get(Ld);if(e.isLegacyDisabled(i)||e.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));n.hooks.afterPreactivation=function(){return e.initNavigation?pl(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},n.initialNavigation()}return r}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(Ld),r=this.injector.get(Ad),n=this.injector.get(Vd),i=this.injector.get(Pd),o=this.injector.get(ms);e===o.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),r.setUpPreloading(),n.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}()).\u0275fac=function(e){return new(e||Wd)(Qe(Ui))},Wd.\u0275prov=he({token:Wd,factory:Wd.\u0275fac}),Wd);function Kd(e){return e.appInitializer.bind(e)}function Qd(e){return e.bootstrapListener.bind(e)}var Zd,Jd=new Ue("Router Initializer"),Yd=[],Xd=((Zd=function e(){_classCallCheck(this,e)}).\u0275mod=mt({type:Zd}),Zd.\u0275inj=fe({factory:function(e){return new(e||Zd)},imports:[[Bd.forRoot(Yd)],Bd]}),Zd);function ep(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))}var tp,rp,np=r("KMqf"),ip=((rp=function(){function e(){_classCallCheck(this,e),this.config={minLevel:4,maxLevel:20,minOnTime:0,maxOnTime:300,minOffTime:0,maxOffTime:1500,minLevelTime:1,maxLevelTime:10,sound:"",skipProbability:0}}return _createClass(e,[{key:"ngOnInit",value:function(){this.connect()}},{key:"getRandomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}},{key:"sleep",value:function(e){return ep(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 1:case"end":return t.stop()}}),t)})))}},{key:"clickFind",value:function(e){return ep(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clickButton"),e.next=3,this.client.StartScanning();case 3:console.log("started scanning");case 4:case"end":return e.stop()}}),e,this)})))}},{key:"clickVibrate",value:function(e){return ep(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.vibrate(this.config.minLevel/100);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"clickStop",value:function(e){return ep(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stop();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"clickStart",value:function(e){return ep(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onPhase();case 2:return e.next=4,this.offPhase();case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"playSound",value:function(){return ep(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.config.sound){e.next=3;break}return t=new Audio(this.config.sound),e.abrupt("return",(t.play(),new Promise((function(e){return t.onended=e}))));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"onPhase",value:function(){return ep(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onPhase"),e.next=3,this.playSound();case 3:if(!(this.config.skipProbability>0&&0==this.getRandomInt(0,this.config.skipProbability))){e.next=5;break}return e.abrupt("return",void console.log("onPhase skipped"));case 5:t=this.getRandomInt(this.config.minOnTime,this.config.maxOnTime),console.log("onPhase Begin",t),r=Date.now();case 8:if(!(r+1e3*t>Date.now())){e.next=18;break}return n=this.getRandomInt(this.config.minLevelTime,this.config.maxLevelTime),i=this.getRandomInt(this.config.minLevel,this.config.maxLevel),console.log("      level Begin",n,i),e.next=13,this.vibrate(i/100);case 13:return e.next=15,this.sleep(1e3*n);case 15:console.log("      level End",n,i);case 16:e.next=8;break;case 18:return e.next=20,this.stop();case 20:console.log("onPhase End",t);case 21:case"end":return e.stop()}}),e,this)})))}},{key:"vibrate",value:function(e){return ep(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.device,!t.t0){t.next=4;break}return t.next=4,this.device.SendVibrateCmd(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"stop",value:function(){return ep(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.device,!e.t0){e.next=4;break}return e.next=4,this.device.SendStopDeviceCmd();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"offPhase",value:function(){return ep(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getRandomInt(this.config.minOffTime,this.config.maxOffTime),console.log("offPhase Begin",t),e.next=4,this.sleep(1e3*t);case 4:console.log("offPhase End",t);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"connect",value:function(){return ep(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ngOnInit"),this.client=new np.ButtplugClient("Client"),console.log("ngOnInit - new ButtplugClient",this.client),e.next=5,this.client.Connect(new np.ButtplugEmbeddedClientConnector);case 5:console.log("ngOnInit - connect",this.client,this.client.Connected),this.client.addListener("deviceadded",(function(e){t.onDeviceAdded(e)})),this.client.addListener("deviceremoved",this.onDeviceRemoved),this.client.addListener("scanningfinished",this.onScanningFinished),console.log("devices known on connect",this.client.Devices);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"onDeviceAdded",value:function(e){return ep(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.device=e,console.log("DeviceAdded",e,new Date),t.next=4,e.SendVibrateCmd(.05);case 4:return t.next=6,this.sleep(1e3);case 6:return t.next=8,e.SendStopDeviceCmd();case 8:case"end":return t.stop()}}),t,this)})))}},{key:"onDeviceRemoved",value:function(e){return ep(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("DeviceRemoved",e,new Date),this.device=null;case 1:case"end":return t.stop()}}),t,this)})))}},{key:"onScanningFinished",value:function(){return ep(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ScanningFinished");case 1:case"end":return e.stop()}}),e)})))}}]),e}()).\u0275fac=function(e){return new(e||rp)},rp.\u0275cmp=ft({type:rp,selectors:[["app-root"]],decls:43,vars:10,consts:[[3,"click"],[3,"ngModel","ngModelChange"],["id","start",3,"click"]],template:function(e,t){1&e&&(ro(0,"button",0),so("click",(function(e){return t.clickFind(e)})),_o(1,"Find"),no(),ro(2,"button",0),so("click",(function(e){return t.clickVibrate(e)})),_o(3,"Vibrate"),no(),ro(4,"button",0),so("click",(function(e){return t.clickStop(e)})),_o(5,"Stop"),no(),ro(6,"p"),_o(7,"Settings"),no(),ro(8,"label"),_o(9,"Min Level (0-100) "),ro(10,"input",1),so("ngModelChange",(function(e){return t.config.minLevel=e})),no(),no(),ro(11,"label"),_o(12,"Max Level (0-100) "),ro(13,"input",1),so("ngModelChange",(function(e){return t.config.maxLevel=e})),no(),no(),ro(14,"label"),_o(15,"Min Off Time in seconds "),ro(16,"input",1),so("ngModelChange",(function(e){return t.config.minOffTime=e})),no(),no(),ro(17,"label"),_o(18,"Max Off Time in seconds "),ro(19,"input",1),so("ngModelChange",(function(e){return t.config.maxOffTime=e})),no(),no(),ro(20,"label"),_o(21,"Min On Time in seconds "),ro(22,"input",1),so("ngModelChange",(function(e){return t.config.minOnTime=e})),no(),no(),ro(23,"label"),_o(24,"Max On Time in seconds "),ro(25,"input",1),so("ngModelChange",(function(e){return t.config.maxOnTime=e})),no(),no(),ro(26,"label"),_o(27,"Min Time per Level in seconds "),ro(28,"input",1),so("ngModelChange",(function(e){return t.config.minLevelTime=e})),no(),no(),ro(29,"label"),_o(30,"Max Time per Level in seconds "),ro(31,"input",1),so("ngModelChange",(function(e){return t.config.maxLevelTime=e})),no(),no(),ro(32,"label"),_o(33,"Sound URL "),ro(34,"input",1),so("ngModelChange",(function(e){return t.config.sound=e})),no(),no(),ro(35,"label"),_o(36,"Skip On time in 1 of _ cases "),ro(37,"input",1),so("ngModelChange",(function(e){return t.config.skipProbability=e})),no(),no(),ro(38,"p"),_o(39," Please note that most devices round the level number. For example a device may have groups such as 0-4 is off, 5-9 is lowest level, 10-14 is second lowest level."),no(),ro(40,"button",2),so("click",(function(e){return t.clickStart(e)})),_o(41,"Start"),no(),io(42,"router-outlet")),2&e&&(ln(10),eo("ngModel",t.config.minLevel),ln(3),eo("ngModel",t.config.maxLevel),ln(3),eo("ngModel",t.config.minOffTime),ln(3),eo("ngModel",t.config.maxOffTime),ln(3),eo("ngModel",t.config.minOnTime),ln(3),eo("ngModel",t.config.maxOnTime),ln(3),eo("ngModel",t.config.minLevelTime),ln(3),eo("ngModel",t.config.maxLevelTime),ln(3),eo("ngModel",t.config.sound),ln(3),eo("ngModel",t.config.skipProbability))},directives:[Yu,oc,hl,Od],styles:["",'body[_ngcontent-%COMP%] { font-family: "sans-serif"}\nlabel[_ngcontent-%COMP%] { display: block; width: 15em}\n#start[_ngcontent-%COMP%] { width: 12em; height: 2em}']}),rp),op=((tp=function e(){_classCallCheck(this,e)}).\u0275mod=mt({type:tp,bootstrap:[ip]}),tp.\u0275inj=fe({factory:function(e){return new(e||tp)},providers:[],imports:[[Bu,Xd,dl]]}),tp);(function(){if(jr)throw new Error("Cannot enable prod mode after platform setup.");Fr=!1})(),Nu().bootstrapModule(op).catch((function(e){return console.error(e)}))},zn8P:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="zn8P"},zp0c:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var i=r("VzKg"),o=r("NUpL"),a=r("+qE3"),s=r("kFR6"),u=r("AdGg");r("ZD7F"),t.DeviceManager=function(e){function t(e){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._subtypeManagers=[],r._devices=new Map,r._deviceCounter=0,r._logger=s.ButtplugLogger.Logger,r.Shutdown=function(){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,n,i,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=!1,n=void 0,e.prev=3,i=this._devices.values()[Symbol.iterator]();case 5:if(t=(o=i.next()).done){e.next=12;break}return a=o.value,e.next=9,a.Disconnect();case 9:t=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),r=!0,n=e.t0;case 18:e.prev=18,e.prev=19,t||null==i.return||i.return();case 21:if(e.prev=21,!r){e.next=24;break}throw n;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,this,[[3,14,18,26],[19,,21,25]])})))},r.ClearDeviceManagers=function(){r._logger.Info("DeviceManager: Clearing device subtype managers"),r._subtypeManagers=[]},r.AddDeviceManager=function(e){r._logger.Info("DeviceManager: Adding Device Manager ".concat(e.constructor.name)),e.SetLogger(r._logger),r._subtypeManagers.push(e),e.addListener("deviceadded",r.OnDeviceAdded),e.addListener("deviceremoved",r.OnDeviceRemoved),e.addListener("scanningfinished",r.OnScanningFinished)},r.SendMessage=function(e){return n(_assertThisInitialized(r),void 0,void 0,regeneratorRuntime.mark((function t(){var r,o,a,s,c,l,h,f,d,p,v,m,g,y,_,C,b,w,k,S,x,E,P=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.Id,t.t0=e.Type,t.next=t.t0===i.StartScanning?4:t.t0===i.StopScanning?59:t.t0===i.StopAllDevices?80:t.t0===i.RequestDeviceList?81:84;break;case 4:if(this._logger.Debug("DeviceManager: Starting scan"),0!==this._subtypeManagers.length){t.next=6;break}throw u.ButtplugException.LogAndError(u.ButtplugDeviceException,this._logger,"No device managers available, cannot scan.",r);case 6:o=!0,a=!1,s=void 0,t.prev=9,c=this._subtypeManagers[Symbol.iterator]();case 11:if(o=(l=c.next()).done){t.next=44;break}if((h=l.value).IsScanning){t.next=41;break}return t.prev=14,t.next=17,h.StartScanning();case 17:t.next=41;break;case 19:for(t.prev=19,t.t1=t.catch(14),f=!0,d=!1,p=void 0,t.prev=24,v=this._subtypeManagers[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)(g=m.value).IsScanning&&g.StopScanning();t.next=32;break;case 28:t.prev=28,t.t2=t.catch(24),d=!0,p=t.t2;case 32:t.prev=32,t.prev=33,f||null==v.return||v.return();case 35:if(t.prev=35,!d){t.next=38;break}throw p;case 38:return t.finish(35);case 39:return t.finish(32);case 40:throw t.t1;case 41:o=!0,t.next=11;break;case 44:t.next=50;break;case 46:t.prev=46,t.t3=t.catch(9),a=!0,s=t.t3;case 50:t.prev=50,t.prev=51,o||null==c.return||c.return();case 53:if(t.prev=53,!a){t.next=56;break}throw s;case 56:return t.finish(53);case 57:return t.finish(50);case 58:return t.abrupt("return",new i.Ok(r));case 59:for(this._logger.Debug("DeviceManager: Stopping scan"),y=!0,_=!1,C=void 0,t.prev=63,b=this._subtypeManagers[Symbol.iterator]();!(y=(w=b.next()).done);y=!0)(k=w.value).IsScanning&&k.StopScanning();t.next=71;break;case 67:t.prev=67,t.t4=t.catch(63),_=!0,C=t.t4;case 71:t.prev=71,t.prev=72,y||null==b.return||b.return();case 74:if(t.prev=74,!_){t.next=77;break}throw C;case 77:return t.finish(74);case 78:return t.finish(71);case 79:return t.abrupt("return",new i.Ok(r));case 80:return t.abrupt("return",(this._logger.Debug("DeviceManager: Stopping all devices"),this._devices.forEach((function(e,t){return n(P,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.ParseMessage(new i.StopDeviceCmd);case 2:case"end":return t.stop()}}),t)})))})),new i.Ok(r)));case 81:return this._logger.Debug("DeviceManager: Sending device list"),S=[],t.abrupt("return",(this._devices.forEach((function(e,t){S.push(new i.DeviceInfoWithSpecifications(t,e.Name,e.MessageSpecifications))})),new i.DeviceList(S,r)));case 84:if(void 0!==(x=e).DeviceIndex){t.next=87;break}throw u.ButtplugException.LogAndError(u.ButtplugMessageException,this._logger,"Message Type ".concat(e.Type," unhandled by this server."),r);case 87:if(this._devices.has(x.DeviceIndex)){t.next=89;break}throw u.ButtplugException.LogAndError(u.ButtplugDeviceException,this._logger,"Device Index ".concat(x.DeviceIndex," does not exist"),r);case 89:if(!((E=this._devices.get(x.DeviceIndex)).AllowedMessageTypes.indexOf(e.Type)<0)){t.next=92;break}throw u.ButtplugException.LogAndError(u.ButtplugDeviceException,this._logger,"Device ".concat(E.Name," does not take message type ").concat(e.Type.name),r);case 92:return this._logger.Trace("DeviceManager: Sending ".concat(x.Type," to ").concat(E.Name," (").concat(x.Id,")")),t.next=95,E.ParseMessage(x);case 95:return t.abrupt("return",t.sent);case 96:case"end":return t.stop()}}),t,this,[[9,46,50,58],[14,19],[24,28,32,40],[33,,35,39],[51,,53,57],[63,67,71,79],[72,,74,78]])})))},r.OnDeviceAdded=function(e){var t=!0,n=!1,o=void 0;try{for(var a,s=r._devices.values()[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){if(a.value.Id===e.Id)return void r._logger.Info("DeviceManager: Device ".concat(e.Name," (id: ").concat(e.Id,") already added, ignoring."))}}catch(c){n=!0,o=c}finally{try{t||null==s.return||s.return()}finally{if(n)throw o}}var u=r._deviceCounter;r._deviceCounter+=1,r._devices.set(u,e),r._logger.Info("DeviceManager: Device Added: ".concat(e.Name," (").concat(u,")")),e.addListener("deviceremoved",r.OnDeviceRemoved),r._msgClosure(new i.DeviceAdded(u,e.Name,e.MessageSpecifications))},r.OnDeviceRemoved=function(e){for(var t=null,n=0,o=Array.from(r._devices.entries());n<o.length;n++){var a=_slicedToArray(o[n],2),s=a[0];if(a[1]===e){t=s;break}}null!==t&&(e.removeAllListeners("deviceremoved"),r._devices.delete(t),r._logger.Info("DeviceManager: Device Removed: ".concat(e.Name," (").concat(t,")")),r._msgClosure(new i.DeviceRemoved(t)))},r.OnScanningFinished=function(){r._logger.Debug("DeviceManager: Scanning Finished.");var e=!0,t=!1,n=void 0;try{for(var o,a=r._subtypeManagers[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){if(o.value.IsScanning)return}}catch(s){t=!0,n=s}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}r._msgClosure(new i.ScanningFinished)},r._logger.Debug("DeviceManager: Starting Device Manager"),"undefined"!=typeof window&&void 0!==window.navigator&&navigator.bluetooth?r.AddDeviceManager(new o.WebBluetoothDeviceManager(r._logger)):r._logger.Info("DeviceManager: Not adding WebBluetooth Manager, no WebBluetooth capabilities found."),r._msgClosure=e,r}return _inherits(t,e),_createClass(t,[{key:"DeviceManagers",get:function(){return this._subtypeManagers}}]),t}(a.EventEmitter)}},[[0,0]]]);